function sP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function iP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gw={exports:{}},Sc={},yw={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wa=Symbol.for("react.element"),oP=Symbol.for("react.portal"),aP=Symbol.for("react.fragment"),lP=Symbol.for("react.strict_mode"),uP=Symbol.for("react.profiler"),cP=Symbol.for("react.provider"),hP=Symbol.for("react.context"),dP=Symbol.for("react.forward_ref"),fP=Symbol.for("react.suspense"),pP=Symbol.for("react.memo"),mP=Symbol.for("react.lazy"),Ay=Symbol.iterator;function gP(t){return t===null||typeof t!="object"?null:(t=Ay&&t[Ay]||t["@@iterator"],typeof t=="function"?t:null)}var vw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_w=Object.assign,ww={};function to(t,e,n){this.props=t,this.context=e,this.refs=ww,this.updater=n||vw}to.prototype.isReactComponent={};to.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};to.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function xw(){}xw.prototype=to.prototype;function pp(t,e,n){this.props=t,this.context=e,this.refs=ww,this.updater=n||vw}var mp=pp.prototype=new xw;mp.constructor=pp;_w(mp,to.prototype);mp.isPureReactComponent=!0;var Ry=Array.isArray,Ew=Object.prototype.hasOwnProperty,gp={current:null},Tw={key:!0,ref:!0,__self:!0,__source:!0};function Sw(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Ew.call(e,r)&&!Tw.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Wa,type:t,key:i,ref:o,props:s,_owner:gp.current}}function yP(t,e){return{$$typeof:Wa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wa}function vP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ny=/\/+/g;function Dh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?vP(""+t.key):e.toString(36)}function ru(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wa:case oP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Dh(o,0):r,Ry(s)?(n="",t!=null&&(n=t.replace(Ny,"$&/")+"/"),ru(s,e,n,"",function(c){return c})):s!=null&&(yp(s)&&(s=yP(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Ny,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ry(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+Dh(i,a);o+=ru(i,e,n,u,s)}else if(u=gP(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+Dh(i,a++),o+=ru(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Al(t,e,n){if(t==null)return t;var r=[],s=0;return ru(t,r,"","",function(i){return e.call(n,i,s++)}),r}function _P(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},su={transition:null},wP={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:su,ReactCurrentOwner:gp};function Iw(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Al,forEach:function(t,e,n){Al(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Al(t,function(){e++}),e},toArray:function(t){return Al(t,function(e){return e})||[]},only:function(t){if(!yp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=to;re.Fragment=aP;re.Profiler=uP;re.PureComponent=pp;re.StrictMode=lP;re.Suspense=fP;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wP;re.act=Iw;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=_w({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=gp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)Ew.call(e,u)&&!Tw.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Wa,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:hP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:cP,_context:t},t.Consumer=t};re.createElement=Sw;re.createFactory=function(t){var e=Sw.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:dP,render:t}};re.isValidElement=yp;re.lazy=function(t){return{$$typeof:mP,_payload:{_status:-1,_result:t},_init:_P}};re.memo=function(t,e){return{$$typeof:pP,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=su.transition;su.transition={};try{t()}finally{su.transition=e}};re.unstable_act=Iw;re.useCallback=function(t,e){return At.current.useCallback(t,e)};re.useContext=function(t){return At.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return At.current.useDeferredValue(t)};re.useEffect=function(t,e){return At.current.useEffect(t,e)};re.useId=function(){return At.current.useId()};re.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return At.current.useMemo(t,e)};re.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};re.useRef=function(t){return At.current.useRef(t)};re.useState=function(t){return At.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return At.current.useTransition()};re.version="18.3.1";yw.exports=re;var A=yw.exports;const Gr=iP(A),xP=sP({__proto__:null,default:Gr},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EP=A,TP=Symbol.for("react.element"),SP=Symbol.for("react.fragment"),IP=Object.prototype.hasOwnProperty,PP=EP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,CP={key:!0,ref:!0,__self:!0,__source:!0};function Pw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)IP.call(e,r)&&!CP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:TP,type:t,key:i,ref:o,props:s,_owner:PP.current}}Sc.Fragment=SP;Sc.jsx=Pw;Sc.jsxs=Pw;gw.exports=Sc;var h=gw.exports,jd={},Cw={exports:{}},Yt={},kw={exports:{}},bw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,q){var X=$.length;$.push(q);e:for(;0<X;){var Q=X-1>>>1,ne=$[Q];if(0<s(ne,q))$[Q]=q,$[X]=ne,X=Q;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var q=$[0],X=$.pop();if(X!==q){$[0]=X;e:for(var Q=0,ne=$.length,de=ne>>>1;Q<de;){var ye=2*(Q+1)-1,xe=$[ye],Xe=ye+1,nt=$[Xe];if(0>s(xe,X))Xe<ne&&0>s(nt,xe)?($[Q]=nt,$[Xe]=X,Q=Xe):($[Q]=xe,$[ye]=X,Q=ye);else if(Xe<ne&&0>s(nt,X))$[Q]=nt,$[Xe]=X,Q=Xe;else break e}}return q}function s($,q){var X=$.sortIndex-q.sortIndex;return X!==0?X:$.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,f=null,m=3,v=!1,T=!1,x=!1,P=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w($){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=$)r(c),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(c)}}function R($){if(x=!1,w($),!T)if(n(u)!==null)T=!0,ge(V);else{var q=n(c);q!==null&&we(R,q.startTime-$)}}function V($,q){T=!1,x&&(x=!1,E(_),_=-1),v=!0;var X=m;try{for(w(q),f=n(u);f!==null&&(!(f.expirationTime>q)||$&&!N());){var Q=f.callback;if(typeof Q=="function"){f.callback=null,m=f.priorityLevel;var ne=Q(f.expirationTime<=q);q=t.unstable_now(),typeof ne=="function"?f.callback=ne:f===n(u)&&r(u),w(q)}else r(u);f=n(u)}if(f!==null)var de=!0;else{var ye=n(c);ye!==null&&we(R,ye.startTime-q),de=!1}return de}finally{f=null,m=X,v=!1}}var O=!1,I=null,_=-1,C=5,k=-1;function N(){return!(t.unstable_now()-k<C)}function D(){if(I!==null){var $=t.unstable_now();k=$;var q=!0;try{q=I(!0,$)}finally{q?b():(O=!1,I=null)}}else O=!1}var b;if(typeof y=="function")b=function(){y(D)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Ye=he.port2;he.port1.onmessage=D,b=function(){Ye.postMessage(null)}}else b=function(){P(D,0)};function ge($){I=$,O||(O=!0,b())}function we($,q){_=P(function(){$(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){T||v||(T=!0,ge(V))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var X=m;m=q;try{return $()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=m;m=$;try{return q()}finally{m=X}},t.unstable_scheduleCallback=function($,q,X){var Q=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Q+X:Q):X=Q,$){case 1:var ne=-1;break;case 2:ne=250;break;case 5:ne=1073741823;break;case 4:ne=1e4;break;default:ne=5e3}return ne=X+ne,$={id:d++,callback:q,priorityLevel:$,startTime:X,expirationTime:ne,sortIndex:-1},X>Q?($.sortIndex=X,e(c,$),n(u)===null&&$===n(c)&&(x?(E(_),_=-1):x=!0,we(R,X-Q))):($.sortIndex=ne,e(u,$),T||v||(T=!0,ge(V))),$},t.unstable_shouldYield=N,t.unstable_wrapCallback=function($){var q=m;return function(){var X=m;m=q;try{return $.apply(this,arguments)}finally{m=X}}}})(bw);kw.exports=bw;var kP=kw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bP=A,Kt=kP;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Aw=new Set,ga={};function Hs(t,e){ji(t,e),ji(t+"Capture",e)}function ji(t,e){for(ga[t]=e,t=0;t<e.length;t++)Aw.add(e[t])}var er=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Od=Object.prototype.hasOwnProperty,AP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dy={},Vy={};function RP(t){return Od.call(Vy,t)?!0:Od.call(Dy,t)?!1:AP.test(t)?Vy[t]=!0:(Dy[t]=!0,!1)}function NP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function DP(t,e,n,r){if(e===null||typeof e>"u"||NP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Rt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ut[t]=new Rt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ut[e]=new Rt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ut[t]=new Rt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ut[t]=new Rt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ut[t]=new Rt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ut[t]=new Rt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ut[t]=new Rt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ut[t]=new Rt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ut[t]=new Rt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vp=/[\-:]([a-z])/g;function _p(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vp,_p);ut[e]=new Rt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vp,_p);ut[e]=new Rt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vp,_p);ut[e]=new Rt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ut[t]=new Rt(t,1,!1,t.toLowerCase(),null,!1,!1)});ut.xlinkHref=new Rt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ut[t]=new Rt(t,1,!1,t.toLowerCase(),null,!0,!0)});function wp(t,e,n,r){var s=ut.hasOwnProperty(e)?ut[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(DP(e,n,s,r)&&(n=null),r||s===null?RP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ur=bP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rl=Symbol.for("react.element"),li=Symbol.for("react.portal"),ui=Symbol.for("react.fragment"),xp=Symbol.for("react.strict_mode"),Md=Symbol.for("react.profiler"),Rw=Symbol.for("react.provider"),Nw=Symbol.for("react.context"),Ep=Symbol.for("react.forward_ref"),Ld=Symbol.for("react.suspense"),Fd=Symbol.for("react.suspense_list"),Tp=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),Dw=Symbol.for("react.offscreen"),jy=Symbol.iterator;function Ao(t){return t===null||typeof t!="object"?null:(t=jy&&t[jy]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Vh;function Bo(t){if(Vh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vh=e&&e[1]||""}return`
`+Vh+t}var jh=!1;function Oh(t,e){if(!t||jh)return"";jh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{jh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bo(t):""}function VP(t){switch(t.tag){case 5:return Bo(t.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 2:case 15:return t=Oh(t.type,!1),t;case 11:return t=Oh(t.type.render,!1),t;case 1:return t=Oh(t.type,!0),t;default:return""}}function Ud(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ui:return"Fragment";case li:return"Portal";case Md:return"Profiler";case xp:return"StrictMode";case Ld:return"Suspense";case Fd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Nw:return(t.displayName||"Context")+".Consumer";case Rw:return(t._context.displayName||"Context")+".Provider";case Ep:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tp:return e=t.displayName||null,e!==null?e:Ud(t.type)||"Memo";case wr:e=t._payload,t=t._init;try{return Ud(t(e))}catch{}}return null}function jP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ud(e);case 8:return e===xp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function OP(t){var e=Vw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nl(t){t._valueTracker||(t._valueTracker=OP(t))}function jw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Vw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bd(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Oy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ow(t,e){e=e.checked,e!=null&&wp(t,"checked",e,!1)}function zd(t,e){Ow(t,e);var n=Kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?$d(t,e.type,n):e.hasOwnProperty("defaultValue")&&$d(t,e.type,Kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function My(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function $d(t,e,n){(e!=="number"||Cu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zo=Array.isArray;function Ii(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Hd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ly(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(zo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kr(n)}}function Mw(t,e){var n=Kr(e.value),r=Kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Fy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Lw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Lw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dl,Fw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dl=Dl||document.createElement("div"),Dl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},MP=["Webkit","ms","Moz","O"];Object.keys(Xo).forEach(function(t){MP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xo[e]=Xo[t]})});function Uw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xo.hasOwnProperty(t)&&Xo[t]?(""+e).trim():e+"px"}function Bw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Uw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var LP=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function qd(t,e){if(e){if(LP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Gd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kd=null;function Sp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Qd=null,Pi=null,Ci=null;function Uy(t){if(t=Ka(t)){if(typeof Qd!="function")throw Error(U(280));var e=t.stateNode;e&&(e=bc(e),Qd(t.stateNode,t.type,e))}}function zw(t){Pi?Ci?Ci.push(t):Ci=[t]:Pi=t}function $w(){if(Pi){var t=Pi,e=Ci;if(Ci=Pi=null,Uy(t),e)for(t=0;t<e.length;t++)Uy(e[t])}}function Hw(t,e){return t(e)}function Ww(){}var Mh=!1;function qw(t,e,n){if(Mh)return t(e,n);Mh=!0;try{return Hw(t,e,n)}finally{Mh=!1,(Pi!==null||Ci!==null)&&(Ww(),$w())}}function va(t,e){var n=t.stateNode;if(n===null)return null;var r=bc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Yd=!1;if(er)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Yd=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Yd=!1}function FP(t,e,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var Jo=!1,ku=null,bu=!1,Xd=null,UP={onError:function(t){Jo=!0,ku=t}};function BP(t,e,n,r,s,i,o,a,u){Jo=!1,ku=null,FP.apply(UP,arguments)}function zP(t,e,n,r,s,i,o,a,u){if(BP.apply(this,arguments),Jo){if(Jo){var c=ku;Jo=!1,ku=null}else throw Error(U(198));bu||(bu=!0,Xd=c)}}function Ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Gw(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function By(t){if(Ws(t)!==t)throw Error(U(188))}function $P(t){var e=t.alternate;if(!e){if(e=Ws(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return By(s),t;if(i===r)return By(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Kw(t){return t=$P(t),t!==null?Qw(t):null}function Qw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Qw(t);if(e!==null)return e;t=t.sibling}return null}var Yw=Kt.unstable_scheduleCallback,zy=Kt.unstable_cancelCallback,HP=Kt.unstable_shouldYield,WP=Kt.unstable_requestPaint,Fe=Kt.unstable_now,qP=Kt.unstable_getCurrentPriorityLevel,Ip=Kt.unstable_ImmediatePriority,Xw=Kt.unstable_UserBlockingPriority,Au=Kt.unstable_NormalPriority,GP=Kt.unstable_LowPriority,Jw=Kt.unstable_IdlePriority,Ic=null,In=null;function KP(t){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(Ic,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:XP,QP=Math.log,YP=Math.LN2;function XP(t){return t>>>=0,t===0?32:31-(QP(t)/YP|0)|0}var Vl=64,jl=4194304;function $o(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ru(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=$o(a):(i&=o,i!==0&&(r=$o(i)))}else o=n&~s,o!==0?r=$o(o):i!==0&&(r=$o(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),s=1<<n,r|=t[n],e&=~s;return r}function JP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ZP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-gn(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=JP(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function Jd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Zw(){var t=Vl;return Vl<<=1,!(Vl&4194240)&&(Vl=64),t}function Lh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function eC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Pp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var pe=0;function ex(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tx,Cp,nx,rx,sx,Zd=!1,Ol=[],Dr=null,Vr=null,jr=null,_a=new Map,wa=new Map,Sr=[],tC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $y(t,e){switch(t){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Vr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":_a.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wa.delete(e.pointerId)}}function No(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ka(e),e!==null&&Cp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function nC(t,e,n,r,s){switch(e){case"focusin":return Dr=No(Dr,t,e,n,r,s),!0;case"dragenter":return Vr=No(Vr,t,e,n,r,s),!0;case"mouseover":return jr=No(jr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _a.set(i,No(_a.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,wa.set(i,No(wa.get(i)||null,t,e,n,r,s)),!0}return!1}function ix(t){var e=xs(t.target);if(e!==null){var n=Ws(e);if(n!==null){if(e=n.tag,e===13){if(e=Gw(n),e!==null){t.blockedOn=e,sx(t.priority,function(){nx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function iu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ef(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kd=r,n.target.dispatchEvent(r),Kd=null}else return e=Ka(n),e!==null&&Cp(e),t.blockedOn=n,!1;e.shift()}return!0}function Hy(t,e,n){iu(t)&&n.delete(e)}function rC(){Zd=!1,Dr!==null&&iu(Dr)&&(Dr=null),Vr!==null&&iu(Vr)&&(Vr=null),jr!==null&&iu(jr)&&(jr=null),_a.forEach(Hy),wa.forEach(Hy)}function Do(t,e){t.blockedOn===e&&(t.blockedOn=null,Zd||(Zd=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,rC)))}function xa(t){function e(s){return Do(s,t)}if(0<Ol.length){Do(Ol[0],t);for(var n=1;n<Ol.length;n++){var r=Ol[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dr!==null&&Do(Dr,t),Vr!==null&&Do(Vr,t),jr!==null&&Do(jr,t),_a.forEach(e),wa.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)ix(n),n.blockedOn===null&&Sr.shift()}var ki=ur.ReactCurrentBatchConfig,Nu=!0;function sC(t,e,n,r){var s=pe,i=ki.transition;ki.transition=null;try{pe=1,kp(t,e,n,r)}finally{pe=s,ki.transition=i}}function iC(t,e,n,r){var s=pe,i=ki.transition;ki.transition=null;try{pe=4,kp(t,e,n,r)}finally{pe=s,ki.transition=i}}function kp(t,e,n,r){if(Nu){var s=ef(t,e,n,r);if(s===null)Kh(t,e,r,Du,n),$y(t,r);else if(nC(s,t,e,n,r))r.stopPropagation();else if($y(t,r),e&4&&-1<tC.indexOf(t)){for(;s!==null;){var i=Ka(s);if(i!==null&&tx(i),i=ef(t,e,n,r),i===null&&Kh(t,e,r,Du,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Kh(t,e,r,null,n)}}var Du=null;function ef(t,e,n,r){if(Du=null,t=Sp(r),t=xs(t),t!==null)if(e=Ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Gw(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Du=t,null}function ox(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(qP()){case Ip:return 1;case Xw:return 4;case Au:case GP:return 16;case Jw:return 536870912;default:return 16}default:return 16}}var br=null,bp=null,ou=null;function ax(){if(ou)return ou;var t,e=bp,n=e.length,r,s="value"in br?br.value:br.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ou=s.slice(t,1<r?1-r:void 0)}function au(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ml(){return!0}function Wy(){return!1}function Xt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ml:Wy,this.isPropagationStopped=Wy,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ml)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ml)},persist:function(){},isPersistent:Ml}),e}var no={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ap=Xt(no),Ga=De({},no,{view:0,detail:0}),oC=Xt(Ga),Fh,Uh,Vo,Pc=De({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Vo&&(Vo&&t.type==="mousemove"?(Fh=t.screenX-Vo.screenX,Uh=t.screenY-Vo.screenY):Uh=Fh=0,Vo=t),Fh)},movementY:function(t){return"movementY"in t?t.movementY:Uh}}),qy=Xt(Pc),aC=De({},Pc,{dataTransfer:0}),lC=Xt(aC),uC=De({},Ga,{relatedTarget:0}),Bh=Xt(uC),cC=De({},no,{animationName:0,elapsedTime:0,pseudoElement:0}),hC=Xt(cC),dC=De({},no,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),fC=Xt(dC),pC=De({},no,{data:0}),Gy=Xt(pC),mC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},gC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function vC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=yC[t])?!!e[t]:!1}function Rp(){return vC}var _C=De({},Ga,{key:function(t){if(t.key){var e=mC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=au(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?gC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rp,charCode:function(t){return t.type==="keypress"?au(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?au(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),wC=Xt(_C),xC=De({},Pc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ky=Xt(xC),EC=De({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rp}),TC=Xt(EC),SC=De({},no,{propertyName:0,elapsedTime:0,pseudoElement:0}),IC=Xt(SC),PC=De({},Pc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),CC=Xt(PC),kC=[9,13,27,32],Np=er&&"CompositionEvent"in window,Zo=null;er&&"documentMode"in document&&(Zo=document.documentMode);var bC=er&&"TextEvent"in window&&!Zo,lx=er&&(!Np||Zo&&8<Zo&&11>=Zo),Qy=" ",Yy=!1;function ux(t,e){switch(t){case"keyup":return kC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ci=!1;function AC(t,e){switch(t){case"compositionend":return cx(e);case"keypress":return e.which!==32?null:(Yy=!0,Qy);case"textInput":return t=e.data,t===Qy&&Yy?null:t;default:return null}}function RC(t,e){if(ci)return t==="compositionend"||!Np&&ux(t,e)?(t=ax(),ou=bp=br=null,ci=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lx&&e.locale!=="ko"?null:e.data;default:return null}}var NC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!NC[t.type]:e==="textarea"}function hx(t,e,n,r){zw(r),e=Vu(e,"onChange"),0<e.length&&(n=new Ap("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ea=null,Ea=null;function DC(t){Ex(t,0)}function Cc(t){var e=fi(t);if(jw(e))return t}function VC(t,e){if(t==="change")return e}var dx=!1;if(er){var zh;if(er){var $h="oninput"in document;if(!$h){var Jy=document.createElement("div");Jy.setAttribute("oninput","return;"),$h=typeof Jy.oninput=="function"}zh=$h}else zh=!1;dx=zh&&(!document.documentMode||9<document.documentMode)}function Zy(){ea&&(ea.detachEvent("onpropertychange",fx),Ea=ea=null)}function fx(t){if(t.propertyName==="value"&&Cc(Ea)){var e=[];hx(e,Ea,t,Sp(t)),qw(DC,e)}}function jC(t,e,n){t==="focusin"?(Zy(),ea=e,Ea=n,ea.attachEvent("onpropertychange",fx)):t==="focusout"&&Zy()}function OC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Cc(Ea)}function MC(t,e){if(t==="click")return Cc(e)}function LC(t,e){if(t==="input"||t==="change")return Cc(e)}function FC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xn=typeof Object.is=="function"?Object.is:FC;function Ta(t,e){if(xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Od.call(e,s)||!xn(t[s],e[s]))return!1}return!0}function ev(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function tv(t,e){var n=ev(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ev(n)}}function px(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?px(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mx(){for(var t=window,e=Cu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cu(t.document)}return e}function Dp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function UC(t){var e=mx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&px(n.ownerDocument.documentElement,n)){if(r!==null&&Dp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=tv(n,i);var o=tv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var BC=er&&"documentMode"in document&&11>=document.documentMode,hi=null,tf=null,ta=null,nf=!1;function nv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;nf||hi==null||hi!==Cu(r)||(r=hi,"selectionStart"in r&&Dp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ta&&Ta(ta,r)||(ta=r,r=Vu(tf,"onSelect"),0<r.length&&(e=new Ap("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=hi)))}function Ll(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var di={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},Hh={},gx={};er&&(gx=document.createElement("div").style,"AnimationEvent"in window||(delete di.animationend.animation,delete di.animationiteration.animation,delete di.animationstart.animation),"TransitionEvent"in window||delete di.transitionend.transition);function kc(t){if(Hh[t])return Hh[t];if(!di[t])return t;var e=di[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gx)return Hh[t]=e[n];return t}var yx=kc("animationend"),vx=kc("animationiteration"),_x=kc("animationstart"),wx=kc("transitionend"),xx=new Map,rv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rs(t,e){xx.set(t,e),Hs(e,[t])}for(var Wh=0;Wh<rv.length;Wh++){var qh=rv[Wh],zC=qh.toLowerCase(),$C=qh[0].toUpperCase()+qh.slice(1);rs(zC,"on"+$C)}rs(yx,"onAnimationEnd");rs(vx,"onAnimationIteration");rs(_x,"onAnimationStart");rs("dblclick","onDoubleClick");rs("focusin","onFocus");rs("focusout","onBlur");rs(wx,"onTransitionEnd");ji("onMouseEnter",["mouseout","mouseover"]);ji("onMouseLeave",["mouseout","mouseover"]);ji("onPointerEnter",["pointerout","pointerover"]);ji("onPointerLeave",["pointerout","pointerover"]);Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),HC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function sv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,zP(r,e,void 0,t),t.currentTarget=null}function Ex(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;sv(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;sv(s,a,c),i=u}}}if(bu)throw t=Xd,bu=!1,Xd=null,t}function Pe(t,e){var n=e[lf];n===void 0&&(n=e[lf]=new Set);var r=t+"__bubble";n.has(r)||(Tx(e,t,2,!1),n.add(r))}function Gh(t,e,n){var r=0;e&&(r|=4),Tx(n,t,r,e)}var Fl="_reactListening"+Math.random().toString(36).slice(2);function Sa(t){if(!t[Fl]){t[Fl]=!0,Aw.forEach(function(n){n!=="selectionchange"&&(HC.has(n)||Gh(n,!1,t),Gh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fl]||(e[Fl]=!0,Gh("selectionchange",!1,e))}}function Tx(t,e,n,r){switch(ox(e)){case 1:var s=sC;break;case 4:s=iC;break;default:s=kp}n=s.bind(null,e,n,t),s=void 0,!Yd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Kh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=xs(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}qw(function(){var c=i,d=Sp(n),f=[];e:{var m=xx.get(t);if(m!==void 0){var v=Ap,T=t;switch(t){case"keypress":if(au(n)===0)break e;case"keydown":case"keyup":v=wC;break;case"focusin":T="focus",v=Bh;break;case"focusout":T="blur",v=Bh;break;case"beforeblur":case"afterblur":v=Bh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=qy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=lC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=TC;break;case yx:case vx:case _x:v=hC;break;case wx:v=IC;break;case"scroll":v=oC;break;case"wheel":v=CC;break;case"copy":case"cut":case"paste":v=fC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ky}var x=(e&4)!==0,P=!x&&t==="scroll",E=x?m!==null?m+"Capture":null:m;x=[];for(var y=c,w;y!==null;){w=y;var R=w.stateNode;if(w.tag===5&&R!==null&&(w=R,E!==null&&(R=va(y,E),R!=null&&x.push(Ia(y,R,w)))),P)break;y=y.return}0<x.length&&(m=new v(m,T,null,n,d),f.push({event:m,listeners:x}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==Kd&&(T=n.relatedTarget||n.fromElement)&&(xs(T)||T[tr]))break e;if((v||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,v?(T=n.relatedTarget||n.toElement,v=c,T=T?xs(T):null,T!==null&&(P=Ws(T),T!==P||T.tag!==5&&T.tag!==6)&&(T=null)):(v=null,T=c),v!==T)){if(x=qy,R="onMouseLeave",E="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(x=Ky,R="onPointerLeave",E="onPointerEnter",y="pointer"),P=v==null?m:fi(v),w=T==null?m:fi(T),m=new x(R,y+"leave",v,n,d),m.target=P,m.relatedTarget=w,R=null,xs(d)===c&&(x=new x(E,y+"enter",T,n,d),x.target=w,x.relatedTarget=P,R=x),P=R,v&&T)t:{for(x=v,E=T,y=0,w=x;w;w=ri(w))y++;for(w=0,R=E;R;R=ri(R))w++;for(;0<y-w;)x=ri(x),y--;for(;0<w-y;)E=ri(E),w--;for(;y--;){if(x===E||E!==null&&x===E.alternate)break t;x=ri(x),E=ri(E)}x=null}else x=null;v!==null&&iv(f,m,v,x,!1),T!==null&&P!==null&&iv(f,P,T,x,!0)}}e:{if(m=c?fi(c):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var V=VC;else if(Xy(m))if(dx)V=LC;else{V=OC;var O=jC}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=MC);if(V&&(V=V(t,c))){hx(f,V,n,d);break e}O&&O(t,m,c),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&$d(m,"number",m.value)}switch(O=c?fi(c):window,t){case"focusin":(Xy(O)||O.contentEditable==="true")&&(hi=O,tf=c,ta=null);break;case"focusout":ta=tf=hi=null;break;case"mousedown":nf=!0;break;case"contextmenu":case"mouseup":case"dragend":nf=!1,nv(f,n,d);break;case"selectionchange":if(BC)break;case"keydown":case"keyup":nv(f,n,d)}var I;if(Np)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ci?ux(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(lx&&n.locale!=="ko"&&(ci||_!=="onCompositionStart"?_==="onCompositionEnd"&&ci&&(I=ax()):(br=d,bp="value"in br?br.value:br.textContent,ci=!0)),O=Vu(c,_),0<O.length&&(_=new Gy(_,t,null,n,d),f.push({event:_,listeners:O}),I?_.data=I:(I=cx(n),I!==null&&(_.data=I)))),(I=bC?AC(t,n):RC(t,n))&&(c=Vu(c,"onBeforeInput"),0<c.length&&(d=new Gy("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=I))}Ex(f,e)})}function Ia(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Vu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=va(t,n),i!=null&&r.unshift(Ia(t,i,s)),i=va(t,e),i!=null&&r.push(Ia(t,i,s))),t=t.return}return r}function ri(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function iv(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=va(n,i),u!=null&&o.unshift(Ia(n,u,a))):s||(u=va(n,i),u!=null&&o.push(Ia(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var WC=/\r\n?/g,qC=/\u0000|\uFFFD/g;function ov(t){return(typeof t=="string"?t:""+t).replace(WC,`
`).replace(qC,"")}function Ul(t,e,n){if(e=ov(e),ov(t)!==e&&n)throw Error(U(425))}function ju(){}var rf=null,sf=null;function of(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var af=typeof setTimeout=="function"?setTimeout:void 0,GC=typeof clearTimeout=="function"?clearTimeout:void 0,av=typeof Promise=="function"?Promise:void 0,KC=typeof queueMicrotask=="function"?queueMicrotask:typeof av<"u"?function(t){return av.resolve(null).then(t).catch(QC)}:af;function QC(t){setTimeout(function(){throw t})}function Qh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xa(e)}function Or(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function lv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var ro=Math.random().toString(36).slice(2),Sn="__reactFiber$"+ro,Pa="__reactProps$"+ro,tr="__reactContainer$"+ro,lf="__reactEvents$"+ro,YC="__reactListeners$"+ro,XC="__reactHandles$"+ro;function xs(t){var e=t[Sn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[tr]||n[Sn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=lv(t);t!==null;){if(n=t[Sn])return n;t=lv(t)}return e}t=n,n=t.parentNode}return null}function Ka(t){return t=t[Sn]||t[tr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function bc(t){return t[Pa]||null}var uf=[],pi=-1;function ss(t){return{current:t}}function Ce(t){0>pi||(t.current=uf[pi],uf[pi]=null,pi--)}function Te(t,e){pi++,uf[pi]=t.current,t.current=e}var Qr={},Et=ss(Qr),Mt=ss(!1),Rs=Qr;function Oi(t,e){var n=t.type.contextTypes;if(!n)return Qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Lt(t){return t=t.childContextTypes,t!=null}function Ou(){Ce(Mt),Ce(Et)}function uv(t,e,n){if(Et.current!==Qr)throw Error(U(168));Te(Et,e),Te(Mt,n)}function Sx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,jP(t)||"Unknown",s));return De({},n,r)}function Mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qr,Rs=Et.current,Te(Et,t),Te(Mt,Mt.current),!0}function cv(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Sx(t,e,Rs),r.__reactInternalMemoizedMergedChildContext=t,Ce(Mt),Ce(Et),Te(Et,t)):Ce(Mt),Te(Mt,n)}var zn=null,Ac=!1,Yh=!1;function Ix(t){zn===null?zn=[t]:zn.push(t)}function JC(t){Ac=!0,Ix(t)}function is(){if(!Yh&&zn!==null){Yh=!0;var t=0,e=pe;try{var n=zn;for(pe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,Ac=!1}catch(s){throw zn!==null&&(zn=zn.slice(t+1)),Yw(Ip,is),s}finally{pe=e,Yh=!1}}return null}var mi=[],gi=0,Lu=null,Fu=0,tn=[],nn=0,Ns=null,Hn=1,Wn="";function ms(t,e){mi[gi++]=Fu,mi[gi++]=Lu,Lu=t,Fu=e}function Px(t,e,n){tn[nn++]=Hn,tn[nn++]=Wn,tn[nn++]=Ns,Ns=t;var r=Hn;t=Wn;var s=32-gn(r)-1;r&=~(1<<s),n+=1;var i=32-gn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Hn=1<<32-gn(e)+s|n<<s|r,Wn=i+t}else Hn=1<<i|n<<s|r,Wn=t}function Vp(t){t.return!==null&&(ms(t,1),Px(t,1,0))}function jp(t){for(;t===Lu;)Lu=mi[--gi],mi[gi]=null,Fu=mi[--gi],mi[gi]=null;for(;t===Ns;)Ns=tn[--nn],tn[nn]=null,Wn=tn[--nn],tn[nn]=null,Hn=tn[--nn],tn[nn]=null}var Gt=null,Wt=null,ke=!1,fn=null;function Cx(t,e){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Gt=t,Wt=Or(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Gt=t,Wt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ns!==null?{id:Hn,overflow:Wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Gt=t,Wt=null,!0):!1;default:return!1}}function cf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hf(t){if(ke){var e=Wt;if(e){var n=e;if(!hv(t,e)){if(cf(t))throw Error(U(418));e=Or(n.nextSibling);var r=Gt;e&&hv(t,e)?Cx(r,n):(t.flags=t.flags&-4097|2,ke=!1,Gt=t)}}else{if(cf(t))throw Error(U(418));t.flags=t.flags&-4097|2,ke=!1,Gt=t}}}function dv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Gt=t}function Bl(t){if(t!==Gt)return!1;if(!ke)return dv(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!of(t.type,t.memoizedProps)),e&&(e=Wt)){if(cf(t))throw kx(),Error(U(418));for(;e;)Cx(t,e),e=Or(e.nextSibling)}if(dv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Wt=Or(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Wt=null}}else Wt=Gt?Or(t.stateNode.nextSibling):null;return!0}function kx(){for(var t=Wt;t;)t=Or(t.nextSibling)}function Mi(){Wt=Gt=null,ke=!1}function Op(t){fn===null?fn=[t]:fn.push(t)}var ZC=ur.ReactCurrentBatchConfig;function jo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function zl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function fv(t){var e=t._init;return e(t._payload)}function bx(t){function e(E,y){if(t){var w=E.deletions;w===null?(E.deletions=[y],E.flags|=16):w.push(y)}}function n(E,y){if(!t)return null;for(;y!==null;)e(E,y),y=y.sibling;return null}function r(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function s(E,y){return E=Ur(E,y),E.index=0,E.sibling=null,E}function i(E,y,w){return E.index=w,t?(w=E.alternate,w!==null?(w=w.index,w<y?(E.flags|=2,y):w):(E.flags|=2,y)):(E.flags|=1048576,y)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,y,w,R){return y===null||y.tag!==6?(y=rd(w,E.mode,R),y.return=E,y):(y=s(y,w),y.return=E,y)}function u(E,y,w,R){var V=w.type;return V===ui?d(E,y,w.props.children,R,w.key):y!==null&&(y.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===wr&&fv(V)===y.type)?(R=s(y,w.props),R.ref=jo(E,y,w),R.return=E,R):(R=pu(w.type,w.key,w.props,null,E.mode,R),R.ref=jo(E,y,w),R.return=E,R)}function c(E,y,w,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=sd(w,E.mode,R),y.return=E,y):(y=s(y,w.children||[]),y.return=E,y)}function d(E,y,w,R,V){return y===null||y.tag!==7?(y=ks(w,E.mode,R,V),y.return=E,y):(y=s(y,w),y.return=E,y)}function f(E,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=rd(""+y,E.mode,w),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Rl:return w=pu(y.type,y.key,y.props,null,E.mode,w),w.ref=jo(E,null,y),w.return=E,w;case li:return y=sd(y,E.mode,w),y.return=E,y;case wr:var R=y._init;return f(E,R(y._payload),w)}if(zo(y)||Ao(y))return y=ks(y,E.mode,w,null),y.return=E,y;zl(E,y)}return null}function m(E,y,w,R){var V=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return V!==null?null:a(E,y,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Rl:return w.key===V?u(E,y,w,R):null;case li:return w.key===V?c(E,y,w,R):null;case wr:return V=w._init,m(E,y,V(w._payload),R)}if(zo(w)||Ao(w))return V!==null?null:d(E,y,w,R,null);zl(E,w)}return null}function v(E,y,w,R,V){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(w)||null,a(y,E,""+R,V);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Rl:return E=E.get(R.key===null?w:R.key)||null,u(y,E,R,V);case li:return E=E.get(R.key===null?w:R.key)||null,c(y,E,R,V);case wr:var O=R._init;return v(E,y,w,O(R._payload),V)}if(zo(R)||Ao(R))return E=E.get(w)||null,d(y,E,R,V,null);zl(y,R)}return null}function T(E,y,w,R){for(var V=null,O=null,I=y,_=y=0,C=null;I!==null&&_<w.length;_++){I.index>_?(C=I,I=null):C=I.sibling;var k=m(E,I,w[_],R);if(k===null){I===null&&(I=C);break}t&&I&&k.alternate===null&&e(E,I),y=i(k,y,_),O===null?V=k:O.sibling=k,O=k,I=C}if(_===w.length)return n(E,I),ke&&ms(E,_),V;if(I===null){for(;_<w.length;_++)I=f(E,w[_],R),I!==null&&(y=i(I,y,_),O===null?V=I:O.sibling=I,O=I);return ke&&ms(E,_),V}for(I=r(E,I);_<w.length;_++)C=v(I,E,_,w[_],R),C!==null&&(t&&C.alternate!==null&&I.delete(C.key===null?_:C.key),y=i(C,y,_),O===null?V=C:O.sibling=C,O=C);return t&&I.forEach(function(N){return e(E,N)}),ke&&ms(E,_),V}function x(E,y,w,R){var V=Ao(w);if(typeof V!="function")throw Error(U(150));if(w=V.call(w),w==null)throw Error(U(151));for(var O=V=null,I=y,_=y=0,C=null,k=w.next();I!==null&&!k.done;_++,k=w.next()){I.index>_?(C=I,I=null):C=I.sibling;var N=m(E,I,k.value,R);if(N===null){I===null&&(I=C);break}t&&I&&N.alternate===null&&e(E,I),y=i(N,y,_),O===null?V=N:O.sibling=N,O=N,I=C}if(k.done)return n(E,I),ke&&ms(E,_),V;if(I===null){for(;!k.done;_++,k=w.next())k=f(E,k.value,R),k!==null&&(y=i(k,y,_),O===null?V=k:O.sibling=k,O=k);return ke&&ms(E,_),V}for(I=r(E,I);!k.done;_++,k=w.next())k=v(I,E,_,k.value,R),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?_:k.key),y=i(k,y,_),O===null?V=k:O.sibling=k,O=k);return t&&I.forEach(function(D){return e(E,D)}),ke&&ms(E,_),V}function P(E,y,w,R){if(typeof w=="object"&&w!==null&&w.type===ui&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Rl:e:{for(var V=w.key,O=y;O!==null;){if(O.key===V){if(V=w.type,V===ui){if(O.tag===7){n(E,O.sibling),y=s(O,w.props.children),y.return=E,E=y;break e}}else if(O.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===wr&&fv(V)===O.type){n(E,O.sibling),y=s(O,w.props),y.ref=jo(E,O,w),y.return=E,E=y;break e}n(E,O);break}else e(E,O);O=O.sibling}w.type===ui?(y=ks(w.props.children,E.mode,R,w.key),y.return=E,E=y):(R=pu(w.type,w.key,w.props,null,E.mode,R),R.ref=jo(E,y,w),R.return=E,E=R)}return o(E);case li:e:{for(O=w.key;y!==null;){if(y.key===O)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(E,y.sibling),y=s(y,w.children||[]),y.return=E,E=y;break e}else{n(E,y);break}else e(E,y);y=y.sibling}y=sd(w,E.mode,R),y.return=E,E=y}return o(E);case wr:return O=w._init,P(E,y,O(w._payload),R)}if(zo(w))return T(E,y,w,R);if(Ao(w))return x(E,y,w,R);zl(E,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(E,y.sibling),y=s(y,w),y.return=E,E=y):(n(E,y),y=rd(w,E.mode,R),y.return=E,E=y),o(E)):n(E,y)}return P}var Li=bx(!0),Ax=bx(!1),Uu=ss(null),Bu=null,yi=null,Mp=null;function Lp(){Mp=yi=Bu=null}function Fp(t){var e=Uu.current;Ce(Uu),t._currentValue=e}function df(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bi(t,e){Bu=t,Mp=yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function on(t){var e=t._currentValue;if(Mp!==t)if(t={context:t,memoizedValue:e,next:null},yi===null){if(Bu===null)throw Error(U(308));yi=t,Bu.dependencies={lanes:0,firstContext:t}}else yi=yi.next=t;return e}var Es=null;function Up(t){Es===null?Es=[t]:Es.push(t)}function Rx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Up(e)):(n.next=s.next,s.next=n),e.interleaved=n,nr(t,r)}function nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xr=!1;function Bp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Nx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Yn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Mr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,nr(t,n)}return s=r.interleaved,s===null?(e.next=e,Up(r)):(e.next=s.next,s.next=e),r.interleaved=e,nr(t,n)}function lu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pp(t,n)}}function pv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zu(t,e,n,r){var s=t.updateQueue;xr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;o=0,d=c=u=null,a=i;do{var m=a.lane,v=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var T=t,x=a;switch(m=e,v=n,x.tag){case 1:if(T=x.payload,typeof T=="function"){f=T.call(v,f,m);break e}f=T;break e;case 3:T.flags=T.flags&-65537|128;case 0:if(T=x.payload,m=typeof T=="function"?T.call(v,f,m):T,m==null)break e;f=De({},f,m);break e;case 2:xr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else v={eventTime:v,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=v,u=f):d=d.next=v,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vs|=o,t.lanes=o,t.memoizedState=f}}function mv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Qa={},Pn=ss(Qa),Ca=ss(Qa),ka=ss(Qa);function Ts(t){if(t===Qa)throw Error(U(174));return t}function zp(t,e){switch(Te(ka,e),Te(Ca,t),Te(Pn,Qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wd(e,t)}Ce(Pn),Te(Pn,e)}function Fi(){Ce(Pn),Ce(Ca),Ce(ka)}function Dx(t){Ts(ka.current);var e=Ts(Pn.current),n=Wd(e,t.type);e!==n&&(Te(Ca,t),Te(Pn,n))}function $p(t){Ca.current===t&&(Ce(Pn),Ce(Ca))}var Ae=ss(0);function $u(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xh=[];function Hp(){for(var t=0;t<Xh.length;t++)Xh[t]._workInProgressVersionPrimary=null;Xh.length=0}var uu=ur.ReactCurrentDispatcher,Jh=ur.ReactCurrentBatchConfig,Ds=0,Ne=null,We=null,et=null,Hu=!1,na=!1,ba=0,ek=0;function mt(){throw Error(U(321))}function Wp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xn(t[n],e[n]))return!1;return!0}function qp(t,e,n,r,s,i){if(Ds=i,Ne=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uu.current=t===null||t.memoizedState===null?sk:ik,t=n(r,s),na){i=0;do{if(na=!1,ba=0,25<=i)throw Error(U(301));i+=1,et=We=null,e.updateQueue=null,uu.current=ok,t=n(r,s)}while(na)}if(uu.current=Wu,e=We!==null&&We.next!==null,Ds=0,et=We=Ne=null,Hu=!1,e)throw Error(U(300));return t}function Gp(){var t=ba!==0;return ba=0,t}function Tn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Ne.memoizedState=et=t:et=et.next=t,et}function an(){if(We===null){var t=Ne.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=et===null?Ne.memoizedState:et.next;if(e!==null)et=e,We=t;else{if(t===null)throw Error(U(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},et===null?Ne.memoizedState=et=t:et=et.next=t}return et}function Aa(t,e){return typeof e=="function"?e(t):e}function Zh(t){var e=an(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=We,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var d=c.lane;if((Ds&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Ne.lanes|=d,Vs|=d}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,xn(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ne.lanes|=i,Vs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ed(t){var e=an(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);xn(i,e.memoizedState)||(Ot=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Vx(){}function jx(t,e){var n=Ne,r=an(),s=e(),i=!xn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ot=!0),r=r.queue,Kp(Lx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,Ra(9,Mx.bind(null,n,r,s,e),void 0,null),tt===null)throw Error(U(349));Ds&30||Ox(n,e,s)}return s}function Ox(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Mx(t,e,n,r){e.value=n,e.getSnapshot=r,Fx(e)&&Ux(t)}function Lx(t,e,n){return n(function(){Fx(e)&&Ux(t)})}function Fx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xn(t,n)}catch{return!0}}function Ux(t){var e=nr(t,1);e!==null&&yn(e,t,1,-1)}function gv(t){var e=Tn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:t},e.queue=t,t=t.dispatch=rk.bind(null,Ne,t),[e.memoizedState,t]}function Ra(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ne.updateQueue,e===null?(e={lastEffect:null,stores:null},Ne.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Bx(){return an().memoizedState}function cu(t,e,n,r){var s=Tn();Ne.flags|=t,s.memoizedState=Ra(1|e,n,void 0,r===void 0?null:r)}function Rc(t,e,n,r){var s=an();r=r===void 0?null:r;var i=void 0;if(We!==null){var o=We.memoizedState;if(i=o.destroy,r!==null&&Wp(r,o.deps)){s.memoizedState=Ra(e,n,i,r);return}}Ne.flags|=t,s.memoizedState=Ra(1|e,n,i,r)}function yv(t,e){return cu(8390656,8,t,e)}function Kp(t,e){return Rc(2048,8,t,e)}function zx(t,e){return Rc(4,2,t,e)}function $x(t,e){return Rc(4,4,t,e)}function Hx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wx(t,e,n){return n=n!=null?n.concat([t]):null,Rc(4,4,Hx.bind(null,e,t),n)}function Qp(){}function qx(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Gx(t,e){var n=an();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Kx(t,e,n){return Ds&21?(xn(n,e)||(n=Zw(),Ne.lanes|=n,Vs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function tk(t,e){var n=pe;pe=n!==0&&4>n?n:4,t(!0);var r=Jh.transition;Jh.transition={};try{t(!1),e()}finally{pe=n,Jh.transition=r}}function Qx(){return an().memoizedState}function nk(t,e,n){var r=Fr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yx(t))Xx(e,n);else if(n=Rx(t,e,n,r),n!==null){var s=bt();yn(n,t,r,s),Jx(n,e,r)}}function rk(t,e,n){var r=Fr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yx(t))Xx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,xn(a,o)){var u=e.interleaved;u===null?(s.next=s,Up(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Rx(t,e,s,r),n!==null&&(s=bt(),yn(n,t,r,s),Jx(n,e,r))}}function Yx(t){var e=t.alternate;return t===Ne||e!==null&&e===Ne}function Xx(t,e){na=Hu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pp(t,n)}}var Wu={readContext:on,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},sk={readContext:on,useCallback:function(t,e){return Tn().memoizedState=[t,e===void 0?null:e],t},useContext:on,useEffect:yv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cu(4194308,4,Hx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cu(4194308,4,t,e)},useInsertionEffect:function(t,e){return cu(4,2,t,e)},useMemo:function(t,e){var n=Tn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Tn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=nk.bind(null,Ne,t),[r.memoizedState,t]},useRef:function(t){var e=Tn();return t={current:t},e.memoizedState=t},useState:gv,useDebugValue:Qp,useDeferredValue:function(t){return Tn().memoizedState=t},useTransition:function(){var t=gv(!1),e=t[0];return t=tk.bind(null,t[1]),Tn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ne,s=Tn();if(ke){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),tt===null)throw Error(U(349));Ds&30||Ox(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,yv(Lx.bind(null,r,i,t),[t]),r.flags|=2048,Ra(9,Mx.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Tn(),e=tt.identifierPrefix;if(ke){var n=Wn,r=Hn;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ba++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ek++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ik={readContext:on,useCallback:qx,useContext:on,useEffect:Kp,useImperativeHandle:Wx,useInsertionEffect:zx,useLayoutEffect:$x,useMemo:Gx,useReducer:Zh,useRef:Bx,useState:function(){return Zh(Aa)},useDebugValue:Qp,useDeferredValue:function(t){var e=an();return Kx(e,We.memoizedState,t)},useTransition:function(){var t=Zh(Aa)[0],e=an().memoizedState;return[t,e]},useMutableSource:Vx,useSyncExternalStore:jx,useId:Qx,unstable_isNewReconciler:!1},ok={readContext:on,useCallback:qx,useContext:on,useEffect:Kp,useImperativeHandle:Wx,useInsertionEffect:zx,useLayoutEffect:$x,useMemo:Gx,useReducer:ed,useRef:Bx,useState:function(){return ed(Aa)},useDebugValue:Qp,useDeferredValue:function(t){var e=an();return We===null?e.memoizedState=t:Kx(e,We.memoizedState,t)},useTransition:function(){var t=ed(Aa)[0],e=an().memoizedState;return[t,e]},useMutableSource:Vx,useSyncExternalStore:jx,useId:Qx,unstable_isNewReconciler:!1};function hn(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ff(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Nc={isMounted:function(t){return(t=t._reactInternals)?Ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Fr(t),i=Yn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Mr(t,i,s),e!==null&&(yn(e,t,s,r),lu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Fr(t),i=Yn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Mr(t,i,s),e!==null&&(yn(e,t,s,r),lu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bt(),r=Fr(t),s=Yn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Mr(t,s,r),e!==null&&(yn(e,t,r,n),lu(e,t,r))}};function vv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ta(n,r)||!Ta(s,i):!0}function Zx(t,e,n){var r=!1,s=Qr,i=e.contextType;return typeof i=="object"&&i!==null?i=on(i):(s=Lt(e)?Rs:Et.current,r=e.contextTypes,i=(r=r!=null)?Oi(t,s):Qr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Nc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function _v(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Nc.enqueueReplaceState(e,e.state,null)}function pf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Bp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=on(i):(i=Lt(e)?Rs:Et.current,s.context=Oi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ff(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Nc.enqueueReplaceState(s,s.state,null),zu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ui(t,e){try{var n="",r=e;do n+=VP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function td(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function mf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ak=typeof WeakMap=="function"?WeakMap:Map;function eE(t,e,n){n=Yn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gu||(Gu=!0,If=r),mf(t,e)},n}function tE(t,e,n){n=Yn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){mf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){mf(t,e),typeof r!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function wv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ak;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=xk.bind(null,t,e,n),e.then(t,t))}function xv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ev(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Yn(-1,1),e.tag=2,Mr(n,e,1))),n.lanes|=1),t)}var lk=ur.ReactCurrentOwner,Ot=!1;function kt(t,e,n,r){e.child=t===null?Ax(e,null,n,r):Li(e,t.child,n,r)}function Tv(t,e,n,r,s){n=n.render;var i=e.ref;return bi(e,s),r=qp(t,e,n,r,i,s),n=Gp(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rr(t,e,s)):(ke&&n&&Vp(e),e.flags|=1,kt(t,e,r,s),e.child)}function Sv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!rm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,nE(t,e,i,r,s)):(t=pu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ta,n(o,r)&&t.ref===e.ref)return rr(t,e,s)}return e.flags|=1,t=Ur(i,r),t.ref=e.ref,t.return=e,e.child=t}function nE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ta(i,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,rr(t,e,s)}return gf(t,e,n,r,s)}function rE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(_i,Ht),Ht|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(_i,Ht),Ht|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(_i,Ht),Ht|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(_i,Ht),Ht|=r;return kt(t,e,s,n),e.child}function sE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function gf(t,e,n,r,s){var i=Lt(n)?Rs:Et.current;return i=Oi(e,i),bi(e,s),n=qp(t,e,n,r,i,s),r=Gp(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,rr(t,e,s)):(ke&&r&&Vp(e),e.flags|=1,kt(t,e,n,s),e.child)}function Iv(t,e,n,r,s){if(Lt(n)){var i=!0;Mu(e)}else i=!1;if(bi(e,s),e.stateNode===null)hu(t,e),Zx(e,n,r),pf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=on(c):(c=Lt(n)?Rs:Et.current,c=Oi(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&_v(e,o,r,c),xr=!1;var m=e.memoizedState;o.state=m,zu(e,r,o,s),u=e.memoizedState,a!==r||m!==u||Mt.current||xr?(typeof d=="function"&&(ff(e,n,d,r),u=e.memoizedState),(a=xr||vv(e,n,a,r,m,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Nx(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:hn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=on(u):(u=Lt(n)?Rs:Et.current,u=Oi(e,u));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==u)&&_v(e,o,r,u),xr=!1,m=e.memoizedState,o.state=m,zu(e,r,o,s);var T=e.memoizedState;a!==f||m!==T||Mt.current||xr?(typeof v=="function"&&(ff(e,n,v,r),T=e.memoizedState),(c=xr||vv(e,n,c,r,m,T,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,T,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,T,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=T),o.props=r,o.state=T,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return yf(t,e,n,r,i,s)}function yf(t,e,n,r,s,i){sE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&cv(e,n,!1),rr(t,e,i);r=e.stateNode,lk.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Li(e,t.child,null,i),e.child=Li(e,null,a,i)):kt(t,e,a,i),e.memoizedState=r.state,s&&cv(e,n,!0),e.child}function iE(t){var e=t.stateNode;e.pendingContext?uv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uv(t,e.context,!1),zp(t,e.containerInfo)}function Pv(t,e,n,r,s){return Mi(),Op(s),e.flags|=256,kt(t,e,n,r),e.child}var vf={dehydrated:null,treeContext:null,retryLane:0};function _f(t){return{baseLanes:t,cachePool:null,transitions:null}}function oE(t,e,n){var r=e.pendingProps,s=Ae.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Ae,s&1),t===null)return hf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=jc(o,r,0,null),t=ks(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=_f(n),e.memoizedState=vf,t):Yp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return uk(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ur(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Ur(a,i):(i=ks(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?_f(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=vf,r}return i=t.child,t=i.sibling,r=Ur(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yp(t,e){return e=jc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $l(t,e,n,r){return r!==null&&Op(r),Li(e,t.child,null,n),t=Yp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function uk(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=td(Error(U(422))),$l(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=jc({mode:"visible",children:r.children},s,0,null),i=ks(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Li(e,t.child,null,o),e.child.memoizedState=_f(o),e.memoizedState=vf,i);if(!(e.mode&1))return $l(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=td(i,r,void 0),$l(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ot||a){if(r=tt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,nr(t,s),yn(r,t,s,-1))}return nm(),r=td(Error(U(421))),$l(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Ek.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Wt=Or(s.nextSibling),Gt=e,ke=!0,fn=null,t!==null&&(tn[nn++]=Hn,tn[nn++]=Wn,tn[nn++]=Ns,Hn=t.id,Wn=t.overflow,Ns=e),e=Yp(e,r.children),e.flags|=4096,e)}function Cv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),df(t.return,e,n)}function nd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function aE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(kt(t,e,r.children,n),r=Ae.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Cv(t,n,e);else if(t.tag===19)Cv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Ae,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$u(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),nd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$u(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}nd(e,!0,n,null,i);break;case"together":nd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function hu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function ck(t,e,n){switch(e.tag){case 3:iE(e),Mi();break;case 5:Dx(e);break;case 1:Lt(e.type)&&Mu(e);break;case 4:zp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Uu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Ae,Ae.current&1),e.flags|=128,null):n&e.child.childLanes?oE(t,e,n):(Te(Ae,Ae.current&1),t=rr(t,e,n),t!==null?t.sibling:null);Te(Ae,Ae.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return aE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Ae,Ae.current),r)break;return null;case 22:case 23:return e.lanes=0,rE(t,e,n)}return rr(t,e,n)}var lE,wf,uE,cE;lE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wf=function(){};uE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ts(Pn.current);var i=null;switch(n){case"input":s=Bd(t,s),r=Bd(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=Hd(t,s),r=Hd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ju)}qd(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ga.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ga.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Pe("scroll",t),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};cE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Oo(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function hk(t,e,n){var r=e.pendingProps;switch(jp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return Lt(e.type)&&Ou(),gt(e),null;case 3:return r=e.stateNode,Fi(),Ce(Mt),Ce(Et),Hp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(kf(fn),fn=null))),wf(t,e),gt(e),null;case 5:$p(e);var s=Ts(ka.current);if(n=e.type,t!==null&&e.stateNode!=null)uE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return gt(e),null}if(t=Ts(Pn.current),Bl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Sn]=e,r[Pa]=i,t=(e.mode&1)!==0,n){case"dialog":Pe("cancel",r),Pe("close",r);break;case"iframe":case"object":case"embed":Pe("load",r);break;case"video":case"audio":for(s=0;s<Ho.length;s++)Pe(Ho[s],r);break;case"source":Pe("error",r);break;case"img":case"image":case"link":Pe("error",r),Pe("load",r);break;case"details":Pe("toggle",r);break;case"input":Oy(r,i),Pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Pe("invalid",r);break;case"textarea":Ly(r,i),Pe("invalid",r)}qd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ul(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ul(r.textContent,a,t),s=["children",""+a]):ga.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Pe("scroll",r)}switch(n){case"input":Nl(r),My(r,i,!0);break;case"textarea":Nl(r),Fy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ju)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Lw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Sn]=e,t[Pa]=r,lE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Gd(n,r),n){case"dialog":Pe("cancel",t),Pe("close",t),s=r;break;case"iframe":case"object":case"embed":Pe("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ho.length;s++)Pe(Ho[s],t);s=r;break;case"source":Pe("error",t),s=r;break;case"img":case"image":case"link":Pe("error",t),Pe("load",t),s=r;break;case"details":Pe("toggle",t),s=r;break;case"input":Oy(t,r),s=Bd(t,r),Pe("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Pe("invalid",t);break;case"textarea":Ly(t,r),s=Hd(t,r),Pe("invalid",t);break;default:s=r}qd(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?Bw(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Fw(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ya(t,u):typeof u=="number"&&ya(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ga.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Pe("scroll",t):u!=null&&wp(t,i,u,o))}switch(n){case"input":Nl(t),My(t,r,!1);break;case"textarea":Nl(t),Fy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ii(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ii(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ju)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)cE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Ts(ka.current),Ts(Pn.current),Bl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Sn]=e,(i=r.nodeValue!==n)&&(t=Gt,t!==null))switch(t.tag){case 3:Ul(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ul(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Sn]=e,e.stateNode=r}return gt(e),null;case 13:if(Ce(Ae),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&Wt!==null&&e.mode&1&&!(e.flags&128))kx(),Mi(),e.flags|=98560,i=!1;else if(i=Bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Sn]=e}else Mi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),i=!1}else fn!==null&&(kf(fn),fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ae.current&1?Ge===0&&(Ge=3):nm())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return Fi(),wf(t,e),t===null&&Sa(e.stateNode.containerInfo),gt(e),null;case 10:return Fp(e.type._context),gt(e),null;case 17:return Lt(e.type)&&Ou(),gt(e),null;case 19:if(Ce(Ae),i=e.memoizedState,i===null)return gt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Oo(i,!1);else{if(Ge!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$u(t),o!==null){for(e.flags|=128,Oo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Ae,Ae.current&1|2),e.child}t=t.sibling}i.tail!==null&&Fe()>Bi&&(e.flags|=128,r=!0,Oo(i,!1),e.lanes=4194304)}else{if(!r)if(t=$u(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Oo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ke)return gt(e),null}else 2*Fe()-i.renderingStartTime>Bi&&n!==1073741824&&(e.flags|=128,r=!0,Oo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Fe(),e.sibling=null,n=Ae.current,Te(Ae,r?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return tm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ht&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function dk(t,e){switch(jp(e),e.tag){case 1:return Lt(e.type)&&Ou(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Fi(),Ce(Mt),Ce(Et),Hp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $p(e),null;case 13:if(Ce(Ae),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Mi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Ae),null;case 4:return Fi(),null;case 10:return Fp(e.type._context),null;case 22:case 23:return tm(),null;case 24:return null;default:return null}}var Hl=!1,wt=!1,fk=typeof WeakSet=="function"?WeakSet:Set,H=null;function vi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Me(t,e,r)}else n.current=null}function xf(t,e,n){try{n()}catch(r){Me(t,e,r)}}var kv=!1;function pk(t,e){if(rf=Nu,t=mx(),Dp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,f=t,m=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++d===r&&(u=o),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(sf={focusedElem:t,selectionRange:n},Nu=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var T=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(T!==null){var x=T.memoizedProps,P=T.memoizedState,E=e.stateNode,y=E.getSnapshotBeforeUpdate(e.elementType===e.type?x:hn(e.type,x),P);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){Me(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return T=kv,kv=!1,T}function ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&xf(e,n,i)}s=s.next}while(s!==r)}}function Dc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ef(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hE(t){var e=t.alternate;e!==null&&(t.alternate=null,hE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Sn],delete e[Pa],delete e[lf],delete e[YC],delete e[XC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dE(t){return t.tag===5||t.tag===3||t.tag===4}function bv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Tf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ju));else if(r!==4&&(t=t.child,t!==null))for(Tf(t,e,n),t=t.sibling;t!==null;)Tf(t,e,n),t=t.sibling}function Sf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sf(t,e,n),t=t.sibling;t!==null;)Sf(t,e,n),t=t.sibling}var st=null,dn=!1;function yr(t,e,n){for(n=n.child;n!==null;)fE(t,e,n),n=n.sibling}function fE(t,e,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(Ic,n)}catch{}switch(n.tag){case 5:wt||vi(n,e);case 6:var r=st,s=dn;st=null,yr(t,e,n),st=r,dn=s,st!==null&&(dn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(dn?(t=st,n=n.stateNode,t.nodeType===8?Qh(t.parentNode,n):t.nodeType===1&&Qh(t,n),xa(t)):Qh(st,n.stateNode));break;case 4:r=st,s=dn,st=n.stateNode.containerInfo,dn=!0,yr(t,e,n),st=r,dn=s;break;case 0:case 11:case 14:case 15:if(!wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&xf(n,e,o),s=s.next}while(s!==r)}yr(t,e,n);break;case 1:if(!wt&&(vi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Me(n,e,a)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(wt=(r=wt)||n.memoizedState!==null,yr(t,e,n),wt=r):yr(t,e,n);break;default:yr(t,e,n)}}function Av(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new fk),e.forEach(function(r){var s=Tk.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:st=a.stateNode,dn=!1;break e;case 3:st=a.stateNode.containerInfo,dn=!0;break e;case 4:st=a.stateNode.containerInfo,dn=!0;break e}a=a.return}if(st===null)throw Error(U(160));fE(i,o,s),st=null,dn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Me(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)pE(e,t),e=e.sibling}function pE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cn(e,t),En(t),r&4){try{ra(3,t,t.return),Dc(3,t)}catch(x){Me(t,t.return,x)}try{ra(5,t,t.return)}catch(x){Me(t,t.return,x)}}break;case 1:cn(e,t),En(t),r&512&&n!==null&&vi(n,n.return);break;case 5:if(cn(e,t),En(t),r&512&&n!==null&&vi(n,n.return),t.flags&32){var s=t.stateNode;try{ya(s,"")}catch(x){Me(t,t.return,x)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ow(s,i),Gd(a,o);var c=Gd(a,i);for(o=0;o<u.length;o+=2){var d=u[o],f=u[o+1];d==="style"?Bw(s,f):d==="dangerouslySetInnerHTML"?Fw(s,f):d==="children"?ya(s,f):wp(s,d,f,c)}switch(a){case"input":zd(s,i);break;case"textarea":Mw(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Ii(s,!!i.multiple,v,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ii(s,!!i.multiple,i.defaultValue,!0):Ii(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pa]=i}catch(x){Me(t,t.return,x)}}break;case 6:if(cn(e,t),En(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(x){Me(t,t.return,x)}}break;case 3:if(cn(e,t),En(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xa(e.containerInfo)}catch(x){Me(t,t.return,x)}break;case 4:cn(e,t),En(t);break;case 13:cn(e,t),En(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zp=Fe())),r&4&&Av(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(wt=(c=wt)||d,cn(e,t),wt=c):cn(e,t),En(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(H=t,d=t.child;d!==null;){for(f=H=d;H!==null;){switch(m=H,v=m.child,m.tag){case 0:case 11:case 14:case 15:ra(4,m,m.return);break;case 1:vi(m,m.return);var T=m.stateNode;if(typeof T.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,T.props=e.memoizedProps,T.state=e.memoizedState,T.componentWillUnmount()}catch(x){Me(r,n,x)}}break;case 5:vi(m,m.return);break;case 22:if(m.memoizedState!==null){Nv(f);continue}}v!==null?(v.return=m,H=v):Nv(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Uw("display",o))}catch(x){Me(t,t.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(x){Me(t,t.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cn(e,t),En(t),r&4&&Av(t);break;case 21:break;default:cn(e,t),En(t)}}function En(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dE(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ya(s,""),r.flags&=-33);var i=bv(t);Sf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=bv(t);Tf(t,a,o);break;default:throw Error(U(161))}}catch(u){Me(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function mk(t,e,n){H=t,mE(t)}function mE(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Hl;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||wt;a=Hl;var c=wt;if(Hl=o,(wt=u)&&!c)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?Dv(s):u!==null?(u.return=o,H=u):Dv(s);for(;i!==null;)H=i,mE(i),i=i.sibling;H=s,Hl=a,wt=c}Rv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Rv(t)}}function Rv(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:wt||Dc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!wt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&mv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}mv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&xa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}wt||e.flags&512&&Ef(e)}catch(m){Me(e,e.return,m)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function Nv(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Dv(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dc(4,e)}catch(u){Me(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Me(e,s,u)}}var i=e.return;try{Ef(e)}catch(u){Me(e,i,u)}break;case 5:var o=e.return;try{Ef(e)}catch(u){Me(e,o,u)}}}catch(u){Me(e,e.return,u)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var gk=Math.ceil,qu=ur.ReactCurrentDispatcher,Xp=ur.ReactCurrentOwner,sn=ur.ReactCurrentBatchConfig,le=0,tt=null,He=null,at=0,Ht=0,_i=ss(0),Ge=0,Na=null,Vs=0,Vc=0,Jp=0,sa=null,Vt=null,Zp=0,Bi=1/0,Bn=null,Gu=!1,If=null,Lr=null,Wl=!1,Ar=null,Ku=0,ia=0,Pf=null,du=-1,fu=0;function bt(){return le&6?Fe():du!==-1?du:du=Fe()}function Fr(t){return t.mode&1?le&2&&at!==0?at&-at:ZC.transition!==null?(fu===0&&(fu=Zw()),fu):(t=pe,t!==0||(t=window.event,t=t===void 0?16:ox(t.type)),t):1}function yn(t,e,n,r){if(50<ia)throw ia=0,Pf=null,Error(U(185));qa(t,n,r),(!(le&2)||t!==tt)&&(t===tt&&(!(le&2)&&(Vc|=n),Ge===4&&Ir(t,at)),Ft(t,r),n===1&&le===0&&!(e.mode&1)&&(Bi=Fe()+500,Ac&&is()))}function Ft(t,e){var n=t.callbackNode;ZP(t,e);var r=Ru(t,t===tt?at:0);if(r===0)n!==null&&zy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&zy(n),e===1)t.tag===0?JC(Vv.bind(null,t)):Ix(Vv.bind(null,t)),KC(function(){!(le&6)&&is()}),n=null;else{switch(ex(r)){case 1:n=Ip;break;case 4:n=Xw;break;case 16:n=Au;break;case 536870912:n=Jw;break;default:n=Au}n=TE(n,gE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gE(t,e){if(du=-1,fu=0,le&6)throw Error(U(327));var n=t.callbackNode;if(Ai()&&t.callbackNode!==n)return null;var r=Ru(t,t===tt?at:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qu(t,r);else{e=r;var s=le;le|=2;var i=vE();(tt!==t||at!==e)&&(Bn=null,Bi=Fe()+500,Cs(t,e));do try{_k();break}catch(a){yE(t,a)}while(!0);Lp(),qu.current=i,le=s,He!==null?e=0:(tt=null,at=0,e=Ge)}if(e!==0){if(e===2&&(s=Jd(t),s!==0&&(r=s,e=Cf(t,s))),e===1)throw n=Na,Cs(t,0),Ir(t,r),Ft(t,Fe()),n;if(e===6)Ir(t,r);else{if(s=t.current.alternate,!(r&30)&&!yk(s)&&(e=Qu(t,r),e===2&&(i=Jd(t),i!==0&&(r=i,e=Cf(t,i))),e===1))throw n=Na,Cs(t,0),Ir(t,r),Ft(t,Fe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:gs(t,Vt,Bn);break;case 3:if(Ir(t,r),(r&130023424)===r&&(e=Zp+500-Fe(),10<e)){if(Ru(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=af(gs.bind(null,t,Vt,Bn),e);break}gs(t,Vt,Bn);break;case 4:if(Ir(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Fe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*gk(r/1960))-r,10<r){t.timeoutHandle=af(gs.bind(null,t,Vt,Bn),r);break}gs(t,Vt,Bn);break;case 5:gs(t,Vt,Bn);break;default:throw Error(U(329))}}}return Ft(t,Fe()),t.callbackNode===n?gE.bind(null,t):null}function Cf(t,e){var n=sa;return t.current.memoizedState.isDehydrated&&(Cs(t,e).flags|=256),t=Qu(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&kf(e)),t}function kf(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function yk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!xn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ir(t,e){for(e&=~Jp,e&=~Vc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function Vv(t){if(le&6)throw Error(U(327));Ai();var e=Ru(t,0);if(!(e&1))return Ft(t,Fe()),null;var n=Qu(t,e);if(t.tag!==0&&n===2){var r=Jd(t);r!==0&&(e=r,n=Cf(t,r))}if(n===1)throw n=Na,Cs(t,0),Ir(t,e),Ft(t,Fe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gs(t,Vt,Bn),Ft(t,Fe()),null}function em(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(Bi=Fe()+500,Ac&&is())}}function js(t){Ar!==null&&Ar.tag===0&&!(le&6)&&Ai();var e=le;le|=1;var n=sn.transition,r=pe;try{if(sn.transition=null,pe=1,t)return t()}finally{pe=r,sn.transition=n,le=e,!(le&6)&&is()}}function tm(){Ht=_i.current,Ce(_i)}function Cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,GC(n)),He!==null)for(n=He.return;n!==null;){var r=n;switch(jp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ou();break;case 3:Fi(),Ce(Mt),Ce(Et),Hp();break;case 5:$p(r);break;case 4:Fi();break;case 13:Ce(Ae);break;case 19:Ce(Ae);break;case 10:Fp(r.type._context);break;case 22:case 23:tm()}n=n.return}if(tt=t,He=t=Ur(t.current,null),at=Ht=e,Ge=0,Na=null,Jp=Vc=Vs=0,Vt=sa=null,Es!==null){for(e=0;e<Es.length;e++)if(n=Es[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Es=null}return t}function yE(t,e){do{var n=He;try{if(Lp(),uu.current=Wu,Hu){for(var r=Ne.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hu=!1}if(Ds=0,et=We=Ne=null,na=!1,ba=0,Xp.current=null,n===null||n.return===null){Ge=1,Na=e,He=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=at,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=xv(o);if(v!==null){v.flags&=-257,Ev(v,o,a,i,e),v.mode&1&&wv(i,c,e),e=v,u=c;var T=e.updateQueue;if(T===null){var x=new Set;x.add(u),e.updateQueue=x}else T.add(u);break e}else{if(!(e&1)){wv(i,c,e),nm();break e}u=Error(U(426))}}else if(ke&&a.mode&1){var P=xv(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Ev(P,o,a,i,e),Op(Ui(u,a));break e}}i=u=Ui(u,a),Ge!==4&&(Ge=2),sa===null?sa=[i]:sa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=eE(i,u,e);pv(i,E);break e;case 1:a=u;var y=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Lr===null||!Lr.has(w)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=tE(i,a,e);pv(i,R);break e}}i=i.return}while(i!==null)}wE(n)}catch(V){e=V,He===n&&n!==null&&(He=n=n.return);continue}break}while(!0)}function vE(){var t=qu.current;return qu.current=Wu,t===null?Wu:t}function nm(){(Ge===0||Ge===3||Ge===2)&&(Ge=4),tt===null||!(Vs&268435455)&&!(Vc&268435455)||Ir(tt,at)}function Qu(t,e){var n=le;le|=2;var r=vE();(tt!==t||at!==e)&&(Bn=null,Cs(t,e));do try{vk();break}catch(s){yE(t,s)}while(!0);if(Lp(),le=n,qu.current=r,He!==null)throw Error(U(261));return tt=null,at=0,Ge}function vk(){for(;He!==null;)_E(He)}function _k(){for(;He!==null&&!HP();)_E(He)}function _E(t){var e=EE(t.alternate,t,Ht);t.memoizedProps=t.pendingProps,e===null?wE(t):He=e,Xp.current=null}function wE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=dk(n,e),n!==null){n.flags&=32767,He=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ge=6,He=null;return}}else if(n=hk(n,e,Ht),n!==null){He=n;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Ge===0&&(Ge=5)}function gs(t,e,n){var r=pe,s=sn.transition;try{sn.transition=null,pe=1,wk(t,e,n,r)}finally{sn.transition=s,pe=r}return null}function wk(t,e,n,r){do Ai();while(Ar!==null);if(le&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(eC(t,i),t===tt&&(He=tt=null,at=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wl||(Wl=!0,TE(Au,function(){return Ai(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=sn.transition,sn.transition=null;var o=pe;pe=1;var a=le;le|=4,Xp.current=null,pk(t,n),pE(n,t),UC(sf),Nu=!!rf,sf=rf=null,t.current=n,mk(n),WP(),le=a,pe=o,sn.transition=i}else t.current=n;if(Wl&&(Wl=!1,Ar=t,Ku=s),i=t.pendingLanes,i===0&&(Lr=null),KP(n.stateNode),Ft(t,Fe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Gu)throw Gu=!1,t=If,If=null,t;return Ku&1&&t.tag!==0&&Ai(),i=t.pendingLanes,i&1?t===Pf?ia++:(ia=0,Pf=t):ia=0,is(),null}function Ai(){if(Ar!==null){var t=ex(Ku),e=sn.transition,n=pe;try{if(sn.transition=null,pe=16>t?16:t,Ar===null)var r=!1;else{if(t=Ar,Ar=null,Ku=0,le&6)throw Error(U(331));var s=le;for(le|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(H=c;H!==null;){var d=H;switch(d.tag){case 0:case 11:case 15:ra(8,d,i)}var f=d.child;if(f!==null)f.return=d,H=f;else for(;H!==null;){d=H;var m=d.sibling,v=d.return;if(hE(d),d===c){H=null;break}if(m!==null){m.return=v,H=m;break}H=v}}}var T=i.alternate;if(T!==null){var x=T.child;if(x!==null){T.child=null;do{var P=x.sibling;x.sibling=null,x=P}while(x!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ra(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,H=E;break e}H=i.return}}var y=t.current;for(H=y;H!==null;){o=H;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,H=w;else e:for(o=y;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Dc(9,a)}}catch(V){Me(a,a.return,V)}if(a===o){H=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,H=R;break e}H=a.return}}if(le=s,is(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(Ic,t)}catch{}r=!0}return r}finally{pe=n,sn.transition=e}}return!1}function jv(t,e,n){e=Ui(n,e),e=eE(t,e,1),t=Mr(t,e,1),e=bt(),t!==null&&(qa(t,1,e),Ft(t,e))}function Me(t,e,n){if(t.tag===3)jv(t,t,n);else for(;e!==null;){if(e.tag===3){jv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lr===null||!Lr.has(r))){t=Ui(n,t),t=tE(e,t,1),e=Mr(e,t,1),t=bt(),e!==null&&(qa(e,1,t),Ft(e,t));break}}e=e.return}}function xk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bt(),t.pingedLanes|=t.suspendedLanes&n,tt===t&&(at&n)===n&&(Ge===4||Ge===3&&(at&130023424)===at&&500>Fe()-Zp?Cs(t,0):Jp|=n),Ft(t,e)}function xE(t,e){e===0&&(t.mode&1?(e=jl,jl<<=1,!(jl&130023424)&&(jl=4194304)):e=1);var n=bt();t=nr(t,e),t!==null&&(qa(t,e,n),Ft(t,n))}function Ek(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xE(t,n)}function Tk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),xE(t,n)}var EE;EE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Mt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,ck(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,ke&&e.flags&1048576&&Px(e,Fu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;hu(t,e),t=e.pendingProps;var s=Oi(e,Et.current);bi(e,n),s=qp(null,e,r,t,s,n);var i=Gp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(i=!0,Mu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bp(e),s.updater=Nc,e.stateNode=s,s._reactInternals=e,pf(e,r,t,n),e=yf(null,e,r,!0,i,n)):(e.tag=0,ke&&i&&Vp(e),kt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(hu(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Ik(r),t=hn(r,t),s){case 0:e=gf(null,e,r,t,n);break e;case 1:e=Iv(null,e,r,t,n);break e;case 11:e=Tv(null,e,r,t,n);break e;case 14:e=Sv(null,e,r,hn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),gf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Iv(t,e,r,s,n);case 3:e:{if(iE(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Nx(t,e),zu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ui(Error(U(423)),e),e=Pv(t,e,r,n,s);break e}else if(r!==s){s=Ui(Error(U(424)),e),e=Pv(t,e,r,n,s);break e}else for(Wt=Or(e.stateNode.containerInfo.firstChild),Gt=e,ke=!0,fn=null,n=Ax(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Mi(),r===s){e=rr(t,e,n);break e}kt(t,e,r,n)}e=e.child}return e;case 5:return Dx(e),t===null&&hf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,of(r,s)?o=null:i!==null&&of(r,i)&&(e.flags|=32),sE(t,e),kt(t,e,o,n),e.child;case 6:return t===null&&hf(e),null;case 13:return oE(t,e,n);case 4:return zp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Li(e,null,r,n):kt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Tv(t,e,r,s,n);case 7:return kt(t,e,e.pendingProps,n),e.child;case 8:return kt(t,e,e.pendingProps.children,n),e.child;case 12:return kt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Uu,r._currentValue),r._currentValue=o,i!==null)if(xn(i.value,o)){if(i.children===s.children&&!Mt.current){e=rr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Yn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),df(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),df(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}kt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,bi(e,n),s=on(s),r=r(s),e.flags|=1,kt(t,e,r,n),e.child;case 14:return r=e.type,s=hn(r,e.pendingProps),s=hn(r.type,s),Sv(t,e,r,s,n);case 15:return nE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),hu(t,e),e.tag=1,Lt(r)?(t=!0,Mu(e)):t=!1,bi(e,n),Zx(e,r,s),pf(e,r,s,n),yf(null,e,r,!0,t,n);case 19:return aE(t,e,n);case 22:return rE(t,e,n)}throw Error(U(156,e.tag))};function TE(t,e){return Yw(t,e)}function Sk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,r){return new Sk(t,e,n,r)}function rm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ik(t){if(typeof t=="function")return rm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ep)return 11;if(t===Tp)return 14}return 2}function Ur(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")rm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ui:return ks(n.children,s,i,e);case xp:o=8,s|=8;break;case Md:return t=rn(12,n,e,s|2),t.elementType=Md,t.lanes=i,t;case Ld:return t=rn(13,n,e,s),t.elementType=Ld,t.lanes=i,t;case Fd:return t=rn(19,n,e,s),t.elementType=Fd,t.lanes=i,t;case Dw:return jc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rw:o=10;break e;case Nw:o=9;break e;case Ep:o=11;break e;case Tp:o=14;break e;case wr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=rn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ks(t,e,n,r){return t=rn(7,t,r,e),t.lanes=n,t}function jc(t,e,n,r){return t=rn(22,t,r,e),t.elementType=Dw,t.lanes=n,t.stateNode={isHidden:!1},t}function rd(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function sd(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pk(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Lh(0),this.expirationTimes=Lh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Lh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sm(t,e,n,r,s,i,o,a,u){return t=new Pk(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=rn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bp(i),t}function Ck(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:li,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function SE(t){if(!t)return Qr;t=t._reactInternals;e:{if(Ws(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Lt(n))return Sx(t,n,e)}return e}function IE(t,e,n,r,s,i,o,a,u){return t=sm(n,r,!0,t,s,i,o,a,u),t.context=SE(null),n=t.current,r=bt(),s=Fr(n),i=Yn(r,s),i.callback=e??null,Mr(n,i,s),t.current.lanes=s,qa(t,s,r),Ft(t,r),t}function Oc(t,e,n,r){var s=e.current,i=bt(),o=Fr(s);return n=SE(n),e.context===null?e.context=n:e.pendingContext=n,e=Yn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Mr(s,e,o),t!==null&&(yn(t,s,o,i),lu(t,s,o)),o}function Yu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ov(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function im(t,e){Ov(t,e),(t=t.alternate)&&Ov(t,e)}function kk(){return null}var PE=typeof reportError=="function"?reportError:function(t){console.error(t)};function om(t){this._internalRoot=t}Mc.prototype.render=om.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Oc(t,e,null,null)};Mc.prototype.unmount=om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;js(function(){Oc(null,t,null,null)}),e[tr]=null}};function Mc(t){this._internalRoot=t}Mc.prototype.unstable_scheduleHydration=function(t){if(t){var e=rx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&ix(t)}};function am(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Lc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Mv(){}function bk(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Yu(o);i.call(c)}}var o=IE(e,r,t,0,null,!1,!1,"",Mv);return t._reactRootContainer=o,t[tr]=o.current,Sa(t.nodeType===8?t.parentNode:t),js(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Yu(u);a.call(c)}}var u=sm(t,0,!1,null,null,!1,!1,"",Mv);return t._reactRootContainer=u,t[tr]=u.current,Sa(t.nodeType===8?t.parentNode:t),js(function(){Oc(e,u,n,r)}),u}function Fc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=Yu(o);a.call(u)}}Oc(e,o,t,s)}else o=bk(n,e,t,s,r);return Yu(o)}tx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$o(e.pendingLanes);n!==0&&(Pp(e,n|1),Ft(e,Fe()),!(le&6)&&(Bi=Fe()+500,is()))}break;case 13:js(function(){var r=nr(t,1);if(r!==null){var s=bt();yn(r,t,1,s)}}),im(t,1)}};Cp=function(t){if(t.tag===13){var e=nr(t,134217728);if(e!==null){var n=bt();yn(e,t,134217728,n)}im(t,134217728)}};nx=function(t){if(t.tag===13){var e=Fr(t),n=nr(t,e);if(n!==null){var r=bt();yn(n,t,e,r)}im(t,e)}};rx=function(){return pe};sx=function(t,e){var n=pe;try{return pe=t,e()}finally{pe=n}};Qd=function(t,e,n){switch(e){case"input":if(zd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=bc(r);if(!s)throw Error(U(90));jw(r),zd(r,s)}}}break;case"textarea":Mw(t,n);break;case"select":e=n.value,e!=null&&Ii(t,!!n.multiple,e,!1)}};Hw=em;Ww=js;var Ak={usingClientEntryPoint:!1,Events:[Ka,fi,bc,zw,$w,em]},Mo={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Rk={bundleType:Mo.bundleType,version:Mo.version,rendererPackageName:Mo.rendererPackageName,rendererConfig:Mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Kw(t),t===null?null:t.stateNode},findFiberByHostInstance:Mo.findFiberByHostInstance||kk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{Ic=ql.inject(Rk),In=ql}catch{}}Yt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ak;Yt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!am(e))throw Error(U(200));return Ck(t,e,null,n)};Yt.createRoot=function(t,e){if(!am(t))throw Error(U(299));var n=!1,r="",s=PE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sm(t,1,!1,null,null,n,!1,r,s),t[tr]=e.current,Sa(t.nodeType===8?t.parentNode:t),new om(e)};Yt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Kw(e),t=t===null?null:t.stateNode,t};Yt.flushSync=function(t){return js(t)};Yt.hydrate=function(t,e,n){if(!Lc(e))throw Error(U(200));return Fc(null,t,e,!0,n)};Yt.hydrateRoot=function(t,e,n){if(!am(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=PE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=IE(e,null,t,1,n??null,s,!1,i,o),t[tr]=e.current,Sa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Mc(e)};Yt.render=function(t,e,n){if(!Lc(e))throw Error(U(200));return Fc(null,t,e,!1,n)};Yt.unmountComponentAtNode=function(t){if(!Lc(t))throw Error(U(40));return t._reactRootContainer?(js(function(){Fc(null,null,t,!1,function(){t._reactRootContainer=null,t[tr]=null})}),!0):!1};Yt.unstable_batchedUpdates=em;Yt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Lc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Fc(t,e,n,!1,r)};Yt.version="18.3.1-next-f1338f8080-20240426";function CE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CE)}catch(t){console.error(t)}}CE(),Cw.exports=Yt;var Nk=Cw.exports,Lv=Nk;jd.createRoot=Lv.createRoot,jd.hydrateRoot=Lv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Da(){return Da=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Da.apply(this,arguments)}var Rr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rr||(Rr={}));const Fv="popstate";function Dk(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return bf("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Xu(s)}return jk(e,n,null,t)}function Be(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Vk(){return Math.random().toString(36).substr(2,8)}function Uv(t,e){return{usr:t.state,key:t.key,idx:e}}function bf(t,e,n,r){return n===void 0&&(n=null),Da({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?so(e):e,{state:n,key:e&&e.key||r||Vk()})}function Xu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function so(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function jk(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Rr.Pop,u=null,c=d();c==null&&(c=0,o.replaceState(Da({},o.state,{idx:c}),""));function d(){return(o.state||{idx:null}).idx}function f(){a=Rr.Pop;let P=d(),E=P==null?null:P-c;c=P,u&&u({action:a,location:x.location,delta:E})}function m(P,E){a=Rr.Push;let y=bf(x.location,P,E);c=d()+1;let w=Uv(y,c),R=x.createHref(y);try{o.pushState(w,"",R)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(R)}i&&u&&u({action:a,location:x.location,delta:1})}function v(P,E){a=Rr.Replace;let y=bf(x.location,P,E);c=d();let w=Uv(y,c),R=x.createHref(y);o.replaceState(w,"",R),i&&u&&u({action:a,location:x.location,delta:0})}function T(P){let E=s.location.origin!=="null"?s.location.origin:s.location.href,y=typeof P=="string"?P:Xu(P);return y=y.replace(/ $/,"%20"),Be(E,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,E)}let x={get action(){return a},get location(){return t(s,o)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Fv,f),u=P,()=>{s.removeEventListener(Fv,f),u=null}},createHref(P){return e(s,P)},createURL:T,encodeLocation(P){let E=T(P);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:v,go(P){return o.go(P)}};return x}var Bv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Bv||(Bv={}));function Ok(t,e,n){return n===void 0&&(n="/"),Mk(t,e,n)}function Mk(t,e,n,r){let s=typeof e=="string"?so(e):e,i=um(s.pathname||"/",n);if(i==null)return null;let o=kE(t);Lk(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=Yk(i);a=Gk(o[u],c)}return a}function kE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let u={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Be(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Br([r,u.relativePath]),d=n.concat(u);i.children&&i.children.length>0&&(Be(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),kE(i.children,e,d,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:Wk(c,i.index),routesMeta:d})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let u of bE(i.path))s(i,o,u)}),e}function bE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=bE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function Lk(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:qk(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Fk=/^:[\w-]+$/,Uk=3,Bk=2,zk=1,$k=10,Hk=-2,zv=t=>t==="*";function Wk(t,e){let n=t.split("/"),r=n.length;return n.some(zv)&&(r+=Hk),e&&(r+=Bk),n.filter(s=>!zv(s)).reduce((s,i)=>s+(Fk.test(i)?Uk:i===""?zk:$k),r)}function qk(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Gk(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,d=i==="/"?e:e.slice(i.length)||"/",f=Kk({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},d),m=u.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Br([i,f.pathname]),pathnameBase:tb(Br([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Br([i,f.pathnameBase]))}return o}function Kk(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Qk(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,d,f)=>{let{paramName:m,isOptional:v}=d;if(m==="*"){let x=a[f]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const T=a[f];return v&&!T?c[m]=void 0:c[m]=(T||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function Qk(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),lm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Yk(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function um(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Xk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Jk=t=>Xk.test(t);function Zk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?so(t):t,i;if(n)if(Jk(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),lm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=$v(n.substring(1),"/"):i=$v(n,e)}else i=e;return{pathname:i,search:nb(r),hash:rb(s)}}function $v(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function id(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function eb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cm(t,e){let n=eb(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function hm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=so(t):(s=Da({},t),Be(!s.pathname||!s.pathname.includes("?"),id("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),id("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),id("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let u=Zk(s,a),c=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||d)&&(u.pathname+="/"),u}const Br=t=>t.join("/").replace(/\/\/+/g,"/"),tb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),nb=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,rb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function sb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const AE=["post","put","patch","delete"];new Set(AE);const ib=["get",...AE];new Set(ib);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Va(){return Va=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Va.apply(this,arguments)}const dm=A.createContext(null),ob=A.createContext(null),os=A.createContext(null),Uc=A.createContext(null),cr=A.createContext({outlet:null,matches:[],isDataRoute:!1}),RE=A.createContext(null);function ab(t,e){let{relative:n}=e===void 0?{}:e;io()||Be(!1);let{basename:r,navigator:s}=A.useContext(os),{hash:i,pathname:o,search:a}=DE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Br([r,o])),s.createHref({pathname:u,search:a,hash:i})}function io(){return A.useContext(Uc)!=null}function oo(){return io()||Be(!1),A.useContext(Uc).location}function NE(t){A.useContext(os).static||A.useLayoutEffect(t)}function hr(){let{isDataRoute:t}=A.useContext(cr);return t?xb():lb()}function lb(){io()||Be(!1);let t=A.useContext(dm),{basename:e,future:n,navigator:r}=A.useContext(os),{matches:s}=A.useContext(cr),{pathname:i}=oo(),o=JSON.stringify(cm(s,n.v7_relativeSplatPath)),a=A.useRef(!1);return NE(()=>{a.current=!0}),A.useCallback(function(c,d){if(d===void 0&&(d={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=hm(c,JSON.parse(o),i,d.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Br([e,f.pathname])),(d.replace?r.replace:r.push)(f,d.state,d)},[e,r,o,i,t])}function ub(){let{matches:t}=A.useContext(cr),e=t[t.length-1];return e?e.params:{}}function DE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=A.useContext(os),{matches:s}=A.useContext(cr),{pathname:i}=oo(),o=JSON.stringify(cm(s,r.v7_relativeSplatPath));return A.useMemo(()=>hm(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function cb(t,e){return hb(t,e)}function hb(t,e,n,r){io()||Be(!1);let{navigator:s}=A.useContext(os),{matches:i}=A.useContext(cr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=oo(),d;if(e){var f;let P=typeof e=="string"?so(e):e;u==="/"||(f=P.pathname)!=null&&f.startsWith(u)||Be(!1),d=P}else d=c;let m=d.pathname||"/",v=m;if(u!=="/"){let P=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let T=Ok(t,{pathname:v}),x=gb(T&&T.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:Br([u,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:Br([u,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),i,n,r);return e&&x?A.createElement(Uc.Provider,{value:{location:Va({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Rr.Pop}},x):x}function db(){let t=wb(),e=sb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},e),n?A.createElement("pre",{style:s},n):null,null)}const fb=A.createElement(db,null);class pb extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?A.createElement(cr.Provider,{value:this.props.routeContext},A.createElement(RE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function mb(t){let{routeContext:e,match:n,children:r}=t,s=A.useContext(dm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),A.createElement(cr.Provider,{value:e},r)}function gb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let d=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);d>=0||Be(!1),o=o.slice(0,Math.min(o.length,d+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=d),f.route.id){let{loaderData:m,errors:v}=n,T=f.route.loader&&m[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||T){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((d,f,m)=>{let v,T=!1,x=null,P=null;n&&(v=a&&f.route.id?a[f.route.id]:void 0,x=f.route.errorElement||fb,u&&(c<0&&m===0?(Eb("route-fallback"),T=!0,P=null):c===m&&(T=!0,P=f.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,m+1)),y=()=>{let w;return v?w=x:T?w=P:f.route.Component?w=A.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,A.createElement(mb,{match:f,routeContext:{outlet:d,matches:E,isDataRoute:n!=null},children:w})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?A.createElement(pb,{location:n.location,revalidation:n.revalidation,component:x,error:v,children:y(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):y()},null)}var VE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(VE||{}),jE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(jE||{});function yb(t){let e=A.useContext(dm);return e||Be(!1),e}function vb(t){let e=A.useContext(ob);return e||Be(!1),e}function _b(t){let e=A.useContext(cr);return e||Be(!1),e}function OE(t){let e=_b(),n=e.matches[e.matches.length-1];return n.route.id||Be(!1),n.route.id}function wb(){var t;let e=A.useContext(RE),n=vb(),r=OE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function xb(){let{router:t}=yb(VE.UseNavigateStable),e=OE(jE.UseNavigateStable),n=A.useRef(!1);return NE(()=>{n.current=!0}),A.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Va({fromRouteId:e},i)))},[t,e])}const Hv={};function Eb(t,e,n){Hv[t]||(Hv[t]=!0)}function Tb(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Sb(t){let{to:e,replace:n,state:r,relative:s}=t;io()||Be(!1);let{future:i,static:o}=A.useContext(os),{matches:a}=A.useContext(cr),{pathname:u}=oo(),c=hr(),d=hm(e,cm(a,i.v7_relativeSplatPath),u,s==="path"),f=JSON.stringify(d);return A.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function Dt(t){Be(!1)}function Ib(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Rr.Pop,navigator:i,static:o=!1,future:a}=t;io()&&Be(!1);let u=e.replace(/^\/*/,"/"),c=A.useMemo(()=>({basename:u,navigator:i,static:o,future:Va({v7_relativeSplatPath:!1},a)}),[u,a,i,o]);typeof r=="string"&&(r=so(r));let{pathname:d="/",search:f="",hash:m="",state:v=null,key:T="default"}=r,x=A.useMemo(()=>{let P=um(d,u);return P==null?null:{location:{pathname:P,search:f,hash:m,state:v,key:T},navigationType:s}},[u,d,f,m,v,T,s]);return x==null?null:A.createElement(os.Provider,{value:c},A.createElement(Uc.Provider,{children:n,value:x}))}function Pb(t){let{children:e,location:n}=t;return cb(Af(e),n)}new Promise(()=>{});function Af(t,e){e===void 0&&(e=[]);let n=[];return A.Children.forEach(t,(r,s)=>{if(!A.isValidElement(r))return;let i=[...e,s];if(r.type===A.Fragment){n.push.apply(n,Af(r.props.children,i));return}r.type!==Dt&&Be(!1),!r.props.index||!r.props.children||Be(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Af(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Rf(){return Rf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rf.apply(this,arguments)}function Cb(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function kb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function bb(t,e){return t.button===0&&(!e||e==="_self")&&!kb(t)}const Ab=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Rb="6";try{window.__reactRouterVersion=Rb}catch{}const Nb="startTransition",Wv=xP[Nb];function Db(t){let{basename:e,children:n,future:r,window:s}=t,i=A.useRef();i.current==null&&(i.current=Dk({window:s,v5Compat:!0}));let o=i.current,[a,u]=A.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},d=A.useCallback(f=>{c&&Wv?Wv(()=>u(f)):u(f)},[u,c]);return A.useLayoutEffect(()=>o.listen(d),[o,d]),A.useEffect(()=>Tb(r),[r]),A.createElement(Ib,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Vb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",jb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ae=A.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:u,to:c,preventScrollReset:d,viewTransition:f}=e,m=Cb(e,Ab),{basename:v}=A.useContext(os),T,x=!1;if(typeof c=="string"&&jb.test(c)&&(T=c,Vb))try{let w=new URL(window.location.href),R=c.startsWith("//")?new URL(w.protocol+c):new URL(c),V=um(R.pathname,v);R.origin===w.origin&&V!=null?c=V+R.search+R.hash:x=!0}catch{}let P=ab(c,{relative:s}),E=Ob(c,{replace:o,state:a,target:u,preventScrollReset:d,relative:s,viewTransition:f});function y(w){r&&r(w),w.defaultPrevented||E(w)}return A.createElement("a",Rf({},m,{href:T||P,onClick:x||i?r:y,ref:n,target:u}))});var qv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qv||(qv={}));var Gv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Gv||(Gv={}));function Ob(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,u=hr(),c=oo(),d=DE(t,{relative:o});return A.useCallback(f=>{if(bb(f,n)){f.preventDefault();let m=r!==void 0?r:Xu(c)===Xu(d);u(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,u,d,r,s,n,t,i,o,a])}var Kv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Mb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},LE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,d=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,v=c&63;u||(v=64,o||(m=64)),r.push(n[d],n[f],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ME(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Mb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new Lb;const m=i<<2|a>>4;if(r.push(m),c!==64){const v=a<<4&240|c>>2;if(r.push(v),f!==64){const T=c<<6&192|f;r.push(T)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Lb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Fb=function(t){const e=ME(t);return LE.encodeByteArray(e,!0)},Ju=function(t){return Fb(t).replace(/\./g,"")},FE=function(t){try{return LE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb=()=>Ub().__FIREBASE_DEFAULTS__,zb=()=>{if(typeof process>"u"||typeof Kv>"u")return;const t=Kv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},$b=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&FE(t[1]);return e&&JSON.parse(e)},Bc=()=>{try{return Bb()||zb()||$b()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UE=t=>{var e,n;return(n=(e=Bc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},BE=t=>{const e=UE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zE=()=>{var t;return(t=Bc())===null||t===void 0?void 0:t.config},$E=t=>{var e;return(e=Bc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ju(JSON.stringify(n)),Ju(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Wb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Tt())}function qb(){var t;const e=(t=Bc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Gb(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Kb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Qb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yb(){const t=Tt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Xb(){return!qb()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Jb(){try{return typeof indexedDB=="object"}catch{return!1}}function Zb(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA="FirebaseError";class jn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=eA,Object.setPrototypeOf(this,jn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ya.prototype.create)}}class Ya{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?tA(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new jn(s,a,r)}}function tA(t,e){return t.replace(nA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const nA=/\{\$([^}]+)}/g;function rA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function zi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Qv(i)&&Qv(o)){if(!zi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Qv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function qo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function sA(t,e){const n=new iA(t,e);return n.subscribe.bind(n)}class iA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");oA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=od),s.error===void 0&&(s.error=od),s.complete===void 0&&(s.complete=od);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function oA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function od(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){return t&&t._delegate?t._delegate:t}class Yr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Hb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(uA(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:lA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function lA(t){return t===ys?void 0:t}function uA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new aA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const hA={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},dA=ie.INFO,fA={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},pA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=fA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fm{constructor(e){this.name=e,this._logLevel=dA,this._logHandler=pA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const mA=(t,e)=>e.some(n=>t instanceof n);let Yv,Xv;function gA(){return Yv||(Yv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yA(){return Xv||(Xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const WE=new WeakMap,Nf=new WeakMap,qE=new WeakMap,ad=new WeakMap,pm=new WeakMap;function vA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(zr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&WE.set(n,t)}).catch(()=>{}),pm.set(e,t),e}function _A(t){if(Nf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Nf.set(t,e)}let Df={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return zr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function wA(t){Df=t(Df)}function xA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ld(this),e,...n);return qE.set(r,e.sort?e.sort():[e]),zr(r)}:yA().includes(t)?function(...e){return t.apply(ld(this),e),zr(WE.get(this))}:function(...e){return zr(t.apply(ld(this),e))}}function EA(t){return typeof t=="function"?xA(t):(t instanceof IDBTransaction&&_A(t),mA(t,gA())?new Proxy(t,Df):t)}function zr(t){if(t instanceof IDBRequest)return vA(t);if(ad.has(t))return ad.get(t);const e=EA(t);return e!==t&&(ad.set(t,e),pm.set(e,t)),e}const ld=t=>pm.get(t);function TA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=zr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(zr(o.result),u.oldVersion,u.newVersion,zr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const SA=["get","getKey","getAll","getAllKeys","count"],IA=["put","add","delete","clear"],ud=new Map;function Jv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ud.get(e))return ud.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=IA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||SA.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return ud.set(e,i),i}wA(t=>({...t,get:(e,n,r)=>Jv(e,n)||t.get(e,n,r),has:(e,n)=>!!Jv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function CA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vf="@firebase/app",Zv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr=new fm("@firebase/app"),kA="@firebase/app-compat",bA="@firebase/analytics-compat",AA="@firebase/analytics",RA="@firebase/app-check-compat",NA="@firebase/app-check",DA="@firebase/auth",VA="@firebase/auth-compat",jA="@firebase/database",OA="@firebase/data-connect",MA="@firebase/database-compat",LA="@firebase/functions",FA="@firebase/functions-compat",UA="@firebase/installations",BA="@firebase/installations-compat",zA="@firebase/messaging",$A="@firebase/messaging-compat",HA="@firebase/performance",WA="@firebase/performance-compat",qA="@firebase/remote-config",GA="@firebase/remote-config-compat",KA="@firebase/storage",QA="@firebase/storage-compat",YA="@firebase/firestore",XA="@firebase/vertexai-preview",JA="@firebase/firestore-compat",ZA="firebase",eR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jf="[DEFAULT]",tR={[Vf]:"fire-core",[kA]:"fire-core-compat",[AA]:"fire-analytics",[bA]:"fire-analytics-compat",[NA]:"fire-app-check",[RA]:"fire-app-check-compat",[DA]:"fire-auth",[VA]:"fire-auth-compat",[jA]:"fire-rtdb",[OA]:"fire-data-connect",[MA]:"fire-rtdb-compat",[LA]:"fire-fn",[FA]:"fire-fn-compat",[UA]:"fire-iid",[BA]:"fire-iid-compat",[zA]:"fire-fcm",[$A]:"fire-fcm-compat",[HA]:"fire-perf",[WA]:"fire-perf-compat",[qA]:"fire-rc",[GA]:"fire-rc-compat",[KA]:"fire-gcs",[QA]:"fire-gcs-compat",[YA]:"fire-fst",[JA]:"fire-fst-compat",[XA]:"fire-vertex","fire-js":"fire-js",[ZA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new Map,nR=new Map,Of=new Map;function e0(t,e){try{t.container.addComponent(e)}catch(n){sr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Os(t){const e=t.name;if(Of.has(e))return sr.debug(`There were multiple attempts to register component ${e}.`),!1;Of.set(e,t);for(const n of Zu.values())e0(n,t);for(const n of nR.values())e0(n,t);return!0}function zc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new Ya("app","Firebase",rR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=eR;function GE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:jf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw $r.create("bad-app-name",{appName:String(s)});if(n||(n=zE()),!n)throw $r.create("no-options");const i=Zu.get(s);if(i){if(zi(n,i.options)&&zi(r,i.config))return i;throw $r.create("duplicate-app",{appName:s})}const o=new cA(s);for(const u of Of.values())o.addComponent(u);const a=new sR(n,r,o);return Zu.set(s,a),a}function mm(t=jf){const e=Zu.get(t);if(!e&&t===jf&&zE())return GE();if(!e)throw $r.create("no-app",{appName:t});return e}function Cn(t,e,n){var r;let s=(r=tR[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),sr.warn(a.join(" "));return}Os(new Yr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR="firebase-heartbeat-database",oR=1,ja="firebase-heartbeat-store";let cd=null;function KE(){return cd||(cd=TA(iR,oR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ja)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),cd}async function aR(t){try{const n=(await KE()).transaction(ja),r=await n.objectStore(ja).get(QE(t));return await n.done,r}catch(e){if(e instanceof jn)sr.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});sr.warn(n.message)}}}async function t0(t,e){try{const r=(await KE()).transaction(ja,"readwrite");await r.objectStore(ja).put(e,QE(t)),await r.done}catch(n){if(n instanceof jn)sr.warn(n.message);else{const r=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});sr.warn(r.message)}}}function QE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lR=1024,uR=30*24*60*60*1e3;class cR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=n0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=uR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){sr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=n0(),{heartbeatsToSend:r,unsentEntries:s}=hR(this._heartbeatsCache.heartbeats),i=Ju(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return sr.warn(n),""}}}function n0(){return new Date().toISOString().substring(0,10)}function hR(t,e=lR){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),r0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),r0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Jb()?Zb().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await aR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return t0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return t0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function r0(t){return Ju(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fR(t){Os(new Yr("platform-logger",e=>new PA(e),"PRIVATE")),Os(new Yr("heartbeat",e=>new cR(e),"PRIVATE")),Cn(Vf,Zv,t),Cn(Vf,Zv,"esm2017"),Cn("fire-js","")}fR("");var pR="firebase",mR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Cn(pR,mR,"app");function gm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function YE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gR=YE,XE=new Ya("auth","Firebase",YE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new fm("@firebase/auth");function yR(t,...e){ec.logLevel<=ie.WARN&&ec.warn(`Auth (${qs}): ${t}`,...e)}function mu(t,...e){ec.logLevel<=ie.ERROR&&ec.error(`Auth (${qs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t,...e){throw vm(t,...e)}function vn(t,...e){return vm(t,...e)}function ym(t,e,n){const r=Object.assign(Object.assign({},gR()),{[e]:n});return new Ya("auth","Firebase",r).create(e,{appName:t.name})}function Xn(t){return ym(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function vR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ln(t,"argument-error"),ym(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return XE.create(t,...e)}function J(t,e,...n){if(!t)throw vm(e,...n)}function qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mu(e),new Error(e)}function ir(t,e){t||qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function _R(){return s0()==="http:"||s0()==="https:"}function s0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_R()||Kb()||"connection"in navigator)?navigator.onLine:!0}function xR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this.shortDelay=e,this.longDelay=n,ir(n>e,"Short delay should be less than long delay!"),this.isMobile=Wb()||Qb()}get(){return wR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t,e){ir(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ER={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR=new Ja(3e4,6e4);function dr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function On(t,e,n,r,s={}){return ZE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Xa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return Gb()||(c.referrerPolicy="no-referrer"),JE.fetch()(eT(t,t.config.apiHost,n,a),c)})}async function ZE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},ER),e);try{const s=new IR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Gl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Gl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Gl(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ym(t,d,c);ln(t,d)}}catch(s){if(s instanceof jn)throw s;ln(t,"network-request-failed",{message:String(s)})}}async function Za(t,e,n,r,s={}){const i=await On(t,e,n,r,s);return"mfaPendingCredential"in i&&ln(t,"multi-factor-auth-required",{_serverResponse:i}),i}function eT(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?_m(t.config,s):`${t.config.apiScheme}://${s}`}function SR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class IR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vn(this.auth,"network-request-failed")),TR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=vn(t,e,r);return s.customData._tokenResponse=n,s}function i0(t){return t!==void 0&&t.enterprise!==void 0}class PR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return SR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function CR(t,e){return On(t,"GET","/v2/recaptchaConfig",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(t,e){return On(t,"POST","/v1/accounts:delete",e)}async function tT(t,e){return On(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function bR(t,e=!1){const n=Qe(t),r=await n.getIdToken(e),s=wm(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:oa(hd(s.auth_time)),issuedAtTime:oa(hd(s.iat)),expirationTime:oa(hd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function hd(t){return Number(t)*1e3}function wm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return mu("JWT malformed, contained fewer than 3 sections"),null;try{const s=FE(n);return s?JSON.parse(s):(mu("Failed to decode base64 JWT payload"),null)}catch(s){return mu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function o0(t){const e=wm(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $i(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof jn&&AR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function AR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oa(this.lastLoginAt),this.creationTime=oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await $i(t,tT(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?nT(i.providerUserInfo):[],a=DR(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),d=u?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Lf(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,f)}async function NR(t){const e=Qe(t);await tc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function nT(t){return t.map(e=>{var{providerId:n}=e,r=gm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e){const n=await ZE(t,{},async()=>{const r=Xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=eT(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",JE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jR(t,e){return On(t,"POST","/v2/accounts:revokeToken",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):o0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=o0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await VR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ri;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ri,this.toJSON())}_performRefresh(){return qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=gm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new RR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Lf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $i(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return bR(this,e)}reload(){return NR(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await tc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(Xn(this.auth));const e=await this.getIdToken();return await $i(this,kR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,c,d;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,v=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,T=(o=n.photoURL)!==null&&o!==void 0?o:void 0,x=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,y=(d=n.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:w,emailVerified:R,isAnonymous:V,providerData:O,stsTokenManager:I}=n;J(w&&I,e,"internal-error");const _=Ri.fromJSON(this.name,I);J(typeof w=="string",e,"internal-error"),vr(f,e.name),vr(m,e.name),J(typeof R=="boolean",e,"internal-error"),J(typeof V=="boolean",e,"internal-error"),vr(v,e.name),vr(T,e.name),vr(x,e.name),vr(P,e.name),vr(E,e.name),vr(y,e.name);const C=new Gn({uid:w,auth:e,email:m,emailVerified:R,displayName:f,isAnonymous:V,photoURL:T,phoneNumber:v,tenantId:x,stsTokenManager:_,createdAt:E,lastLoginAt:y});return O&&Array.isArray(O)&&(C.providerData=O.map(k=>Object.assign({},k))),P&&(C._redirectEventId=P),C}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ri;s.updateFromServerResponse(n);const i=new Gn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await tc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?nT(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ri;a.updateFromIdToken(r);const u=new Gn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Lf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a0=new Map;function Kn(t){ir(t instanceof Function,"Expected a class definition");let e=a0.get(t);return e?(ir(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,a0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}rT.type="NONE";const l0=rT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t,e,n){return`firebase:${t}:${e}:${n}`}class Ni{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=gu(this.userKey,s.apiKey,i),this.fullPersistenceKey=gu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ni(Kn(l0),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Kn(l0);const o=gu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){const f=Gn._fromJSON(e,d);c!==i&&(a=f),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ni(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Ni(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(aT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(uT(e))return"Blackberry";if(cT(e))return"Webos";if(iT(e))return"Safari";if((e.includes("chrome/")||oT(e))&&!e.includes("edge/"))return"Chrome";if(lT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sT(t=Tt()){return/firefox\//i.test(t)}function iT(t=Tt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function oT(t=Tt()){return/crios\//i.test(t)}function aT(t=Tt()){return/iemobile/i.test(t)}function lT(t=Tt()){return/android/i.test(t)}function uT(t=Tt()){return/blackberry/i.test(t)}function cT(t=Tt()){return/webos/i.test(t)}function xm(t=Tt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OR(t=Tt()){var e;return xm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function MR(){return Yb()&&document.documentMode===10}function hT(t=Tt()){return xm(t)||lT(t)||cT(t)||uT(t)||/windows phone/i.test(t)||aT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t,e=[]){let n;switch(t){case"Browser":n=u0(Tt());break;case"Worker":n=`${u0(Tt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FR(t,e={}){return On(t,"GET","/v2/passwordPolicy",dr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UR=6;class BR{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:UR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new c0(this),this.idTokenSubscription=new c0(this),this.beforeStateQueue=new LR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=XE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ni.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await tT(this,{idToken:e}),r=await Gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await tc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=xR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(Xn(this));const n=e?Qe(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(Xn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(Xn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await FR(this),n=new BR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ya("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Kn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await Ni.create(this,[Kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=dT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&yR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function fr(t){return Qe(t)}class c0{constructor(e){this.auth=e,this.observer=null,this.addObserver=sA(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $c={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $R(t){$c=t}function fT(t){return $c.loadJS(t)}function HR(){return $c.recaptchaEnterpriseScript}function WR(){return $c.gapiScript}function qR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const GR="recaptcha-enterprise",KR="NO_RECAPTCHA";class QR{constructor(e){this.type=GR,this.auth=fr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{CR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new PR(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;i0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(KR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&i0(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=HR();u.length!==0&&(u+=a),fT(u).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function h0(t,e,n,r=!1){const s=new QR(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function nc(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await h0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await h0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t,e){const n=zc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(zi(i,e??{}))return s;ln(s,"already-initialized")}return n.initialize({options:e})}function XR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Kn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function JR(t,e,n){const r=fr(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=pT(e),{host:o,port:a}=ZR(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),e2()}function pT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ZR(t){const e=pT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:d0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:d0(o)}}}function d0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function e2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qn("not implemented")}_getIdTokenResponse(e){return qn("not implemented")}_linkToIdToken(e,n){return qn("not implemented")}_getReauthenticationResolver(e){return qn("not implemented")}}async function t2(t,e){return On(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(t,e){return Za(t,"POST","/v1/accounts:signInWithPassword",dr(t,e))}async function r2(t,e){return On(t,"POST","/v1/accounts:sendOobCode",dr(t,e))}async function s2(t,e){return r2(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i2(t,e){return Za(t,"POST","/v1/accounts:signInWithEmailLink",dr(t,e))}async function o2(t,e){return Za(t,"POST","/v1/accounts:signInWithEmailLink",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa extends Em{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Oa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Oa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nc(e,n,"signInWithPassword",n2);case"emailLink":return i2(e,{email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return nc(e,r,"signUpPassword",t2);case"emailLink":return o2(e,{idToken:n,email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Di(t,e){return Za(t,"POST","/v1/accounts:signInWithIdp",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="http://localhost";class Ms extends Em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=gm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ms(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Di(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Di(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Di(e,n)}buildRequest(){const e={requestUri:a2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function u2(t){const e=Wo(qo(t)).link,n=e?Wo(qo(e)).deep_link_id:null,r=Wo(qo(t)).deep_link_id;return(r?Wo(qo(r)).link:null)||r||n||e||t}class Tm{constructor(e){var n,r,s,i,o,a;const u=Wo(qo(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,d=(r=u.oobCode)!==null&&r!==void 0?r:null,f=l2((s=u.mode)!==null&&s!==void 0?s:null);J(c&&d&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=d,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=u2(e);try{return new Tm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(){this.providerId=ao.PROVIDER_ID}static credential(e,n){return Oa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Tm.parseLink(n);return J(r,"argument-error"),Oa._fromEmailAndCode(e,r.code,r.tenantId)}}ao.PROVIDER_ID="password";ao.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ao.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends Sm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends el{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n extends el{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ms._fromParams({providerId:$n.PROVIDER_ID,signInMethod:$n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $n.credentialFromTaggedObject(e)}static credentialFromError(e){return $n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $n.credential(n,r)}catch{return null}}}$n.GOOGLE_SIGN_IN_METHOD="google.com";$n.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends el{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.GITHUB_SIGN_IN_METHOD="github.com";Cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends el{constructor(){super("twitter.com")}static credential(e,n){return Ms._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return kr.credential(n,r)}catch{return null}}}kr.TWITTER_SIGN_IN_METHOD="twitter.com";kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c2(t,e){return Za(t,"POST","/v1/accounts:signUp",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Gn._fromIdTokenResponse(e,r,s),o=f0(r);return new Ls({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=f0(r);return new Ls({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function f0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc extends jn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,rc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new rc(e,n,r,s)}}function mT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?rc._fromErrorAndOperation(t,i,e,r):i})}async function h2(t,e,n=!1){const r=await $i(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ls._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(t,e,n=!1){const{auth:r}=t;if(pn(r.app))return Promise.reject(Xn(r));const s="reauthenticate";try{const i=await $i(t,mT(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=wm(i.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),Ls._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ln(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gT(t,e,n=!1){if(pn(t.app))return Promise.reject(Xn(t));const r="signIn",s=await mT(t,r,e),i=await Ls._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function f2(t,e){return gT(fr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yT(t){const e=fr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function p2(t,e,n){const r=fr(t);await nc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",s2)}async function m2(t,e,n){if(pn(t.app))return Promise.reject(Xn(t));const r=fr(t),o=await nc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",c2).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&yT(t),u}),a=await Ls._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function g2(t,e,n){return pn(t.app)?Promise.reject(Xn(t)):f2(Qe(t),ao.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&yT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y2(t,e){return On(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vT(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Qe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await $i(r,y2(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function v2(t,e,n,r){return Qe(t).onIdTokenChanged(e,n,r)}function _2(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function w2(t,e,n,r){return Qe(t).onAuthStateChanged(e,n,r)}function x2(t){return Qe(t).signOut()}const sc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(sc,"1"),this.storage.removeItem(sc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E2=1e3,T2=10;class wT extends _T{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=hT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);MR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,T2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},E2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}wT.type="LOCAL";const S2=wT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xT extends _T{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}xT.type="SESSION";const ET=xT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Hc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await I2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Hc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=Im("",20);s.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(d),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kn(){return window}function C2(t){kn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}async function k2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function b2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function A2(){return TT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="firebaseLocalStorageDb",R2=1,ic="firebaseLocalStorage",IT="fbase_key";class tl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wc(t,e){return t.transaction([ic],e?"readwrite":"readonly").objectStore(ic)}function N2(){const t=indexedDB.deleteDatabase(ST);return new tl(t).toPromise()}function Ff(){const t=indexedDB.open(ST,R2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ic,{keyPath:IT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ic)?e(r):(r.close(),await N2(),e(await Ff()))})})}async function p0(t,e,n){const r=Wc(t,!0).put({[IT]:e,value:n});return new tl(r).toPromise()}async function D2(t,e){const n=Wc(t,!1).get(e),r=await new tl(n).toPromise();return r===void 0?null:r.value}function m0(t,e){const n=Wc(t,!0).delete(e);return new tl(n).toPromise()}const V2=800,j2=3;class PT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ff(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>j2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return TT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Hc._getInstance(A2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await k2(),!this.activeServiceWorker)return;this.sender=new P2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||b2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ff();return await p0(e,sc,"1"),await m0(e,sc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>p0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>D2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>m0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Wc(s,!1).getAll();return new tl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),V2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PT.type="LOCAL";const O2=PT;new Ja(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t,e){return e?Kn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm extends Em{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Di(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Di(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Di(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function M2(t){return gT(t.auth,new Pm(t),t.bypassAuthState)}function L2(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),d2(n,new Pm(t),t.bypassAuthState)}async function F2(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),h2(n,new Pm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return M2;case"linkViaPopup":case"linkViaRedirect":return F2;case"reauthViaPopup":case"reauthViaRedirect":return L2;default:ln(this.auth,"internal-error")}}resolve(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ir(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=new Ja(2e3,1e4);async function B2(t,e,n){if(pn(t.app))return Promise.reject(vn(t,"operation-not-supported-in-this-environment"));const r=fr(t);vR(t,e,Sm);const s=CT(r,n);return new Ss(r,"signInViaPopup",e,s).executeNotNull()}class Ss extends kT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ss.currentPopupAction&&Ss.currentPopupAction.cancel(),Ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){ir(this.filter.length===1,"Popup operations only handle one event");const e=Im();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,U2.get())};e()}}Ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2="pendingRedirect",yu=new Map;class $2 extends kT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=yu.get(this.auth._key());if(!e){try{const r=await H2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}yu.set(this.auth._key(),e)}return this.bypassAuthState||yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function H2(t,e){const n=G2(e),r=q2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function W2(t,e){yu.set(t._key(),e)}function q2(t){return Kn(t._redirectPersistence)}function G2(t){return gu(z2,t.config.apiKey,t.name)}async function K2(t,e,n=!1){if(pn(t.app))return Promise.reject(Xn(t));const r=fr(t),s=CT(r,e),o=await new $2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q2=10*60*1e3;class Y2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!X2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!bT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(vn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Q2&&this.cachedEventUids.clear(),this.cachedEventUids.has(g0(e))}saveEventToCache(e){this.cachedEventUids.add(g0(e)),this.lastProcessedEventTime=Date.now()}}function g0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function bT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function X2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return bT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J2(t,e={}){return On(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eN=/^https?/;async function tN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await J2(t);for(const n of e)try{if(nN(n))return}catch{}ln(t,"unauthorized-domain")}function nN(t){const e=Mf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!eN.test(n))return!1;if(Z2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=new Ja(3e4,6e4);function y0(){const t=kn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sN(t){return new Promise((e,n)=>{var r,s,i;function o(){y0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{y0(),n(vn(t,"network-request-failed"))},timeout:rN.get()})}if(!((s=(r=kn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=kn().gapi)===null||i===void 0)&&i.load)o();else{const a=qR("iframefcb");return kn()[a]=()=>{gapi.load?o():n(vn(t,"network-request-failed"))},fT(`${WR()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw vu=null,e})}let vu=null;function iN(t){return vu=vu||sN(t),vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=new Ja(5e3,15e3),aN="__/auth/iframe",lN="emulator/auth/iframe",uN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hN(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_m(e,lN):`https://${t.config.authDomain}/${aN}`,r={apiKey:e.apiKey,appName:t.name,v:qs},s=cN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Xa(r).slice(1)}`}async function dN(t){const e=await iN(t),n=kn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:hN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=vn(t,"network-request-failed"),a=kn().setTimeout(()=>{i(o)},oN.get());function u(){kn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pN=500,mN=600,gN="_blank",yN="http://localhost";class v0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vN(t,e,n,r=pN,s=mN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},fN),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Tt().toLowerCase();n&&(a=oT(c)?gN:n),sT(c)&&(e=e||yN,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[v,T])=>`${m}${v}=${T},`,"");if(OR(c)&&a!=="_self")return _N(e||"",a),new v0(null);const f=window.open(e||"",a,d);J(f,t,"popup-blocked");try{f.focus()}catch{}return new v0(f)}function _N(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="__/auth/handler",xN="emulator/auth/handler",EN=encodeURIComponent("fac");async function _0(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qs,eventId:s};if(e instanceof Sm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",rA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof el){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await t._getAppCheckToken(),c=u?`#${EN}=${encodeURIComponent(u)}`:"";return`${TN(t)}?${Xa(a).slice(1)}${c}`}function TN({config:t}){return t.emulator?_m(t,xN):`https://${t.authDomain}/${wN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dd="webStorageSupport";class SN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ET,this._completeRedirectFn=K2,this._overrideRedirectResult=W2}async _openPopup(e,n,r,s){var i;ir((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await _0(e,n,r,Mf(),s);return vN(e,o,Im())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await _0(e,n,r,Mf(),s);return C2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(ir(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await dN(e),r=new Y2(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(dd,{type:dd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[dd];o!==void 0&&n(!!o),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return hT()||iT()||xm()}}const IN=SN;var w0="@firebase/auth",x0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kN(t){Os(new Yr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:dT(t)},c=new zR(r,s,i,u);return XR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Os(new Yr("auth-internal",e=>{const n=fr(e.getProvider("auth").getImmediate());return(r=>new PN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Cn(w0,x0,CN(t)),Cn(w0,x0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN=5*60,AN=$E("authIdTokenMaxAge")||bN;let E0=null;const RN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>AN)return;const s=n==null?void 0:n.token;E0!==s&&(E0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function NN(t=mm()){const e=zc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=YR(t,{popupRedirectResolver:IN,persistence:[O2,S2,ET]}),r=$E("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=RN(i.toString());_2(n,o,()=>o(n.currentUser)),v2(n,a=>o(a))}}const s=UE("auth");return s&&JR(n,`http://${s}`),n}function DN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$R({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=vn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",DN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kN("Browser");var T0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bs,AT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function C(){}C.prototype=_.prototype,I.D=_.prototype,I.prototype=new C,I.prototype.constructor=I,I.C=function(k,N,D){for(var b=Array(arguments.length-2),he=2;he<arguments.length;he++)b[he-2]=arguments[he];return _.prototype[N].apply(k,b)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,_,C){C||(C=0);var k=Array(16);if(typeof _=="string")for(var N=0;16>N;++N)k[N]=_.charCodeAt(C++)|_.charCodeAt(C++)<<8|_.charCodeAt(C++)<<16|_.charCodeAt(C++)<<24;else for(N=0;16>N;++N)k[N]=_[C++]|_[C++]<<8|_[C++]<<16|_[C++]<<24;_=I.g[0],C=I.g[1],N=I.g[2];var D=I.g[3],b=_+(D^C&(N^D))+k[0]+3614090360&4294967295;_=C+(b<<7&4294967295|b>>>25),b=D+(N^_&(C^N))+k[1]+3905402710&4294967295,D=_+(b<<12&4294967295|b>>>20),b=N+(C^D&(_^C))+k[2]+606105819&4294967295,N=D+(b<<17&4294967295|b>>>15),b=C+(_^N&(D^_))+k[3]+3250441966&4294967295,C=N+(b<<22&4294967295|b>>>10),b=_+(D^C&(N^D))+k[4]+4118548399&4294967295,_=C+(b<<7&4294967295|b>>>25),b=D+(N^_&(C^N))+k[5]+1200080426&4294967295,D=_+(b<<12&4294967295|b>>>20),b=N+(C^D&(_^C))+k[6]+2821735955&4294967295,N=D+(b<<17&4294967295|b>>>15),b=C+(_^N&(D^_))+k[7]+4249261313&4294967295,C=N+(b<<22&4294967295|b>>>10),b=_+(D^C&(N^D))+k[8]+1770035416&4294967295,_=C+(b<<7&4294967295|b>>>25),b=D+(N^_&(C^N))+k[9]+2336552879&4294967295,D=_+(b<<12&4294967295|b>>>20),b=N+(C^D&(_^C))+k[10]+4294925233&4294967295,N=D+(b<<17&4294967295|b>>>15),b=C+(_^N&(D^_))+k[11]+2304563134&4294967295,C=N+(b<<22&4294967295|b>>>10),b=_+(D^C&(N^D))+k[12]+1804603682&4294967295,_=C+(b<<7&4294967295|b>>>25),b=D+(N^_&(C^N))+k[13]+4254626195&4294967295,D=_+(b<<12&4294967295|b>>>20),b=N+(C^D&(_^C))+k[14]+2792965006&4294967295,N=D+(b<<17&4294967295|b>>>15),b=C+(_^N&(D^_))+k[15]+1236535329&4294967295,C=N+(b<<22&4294967295|b>>>10),b=_+(N^D&(C^N))+k[1]+4129170786&4294967295,_=C+(b<<5&4294967295|b>>>27),b=D+(C^N&(_^C))+k[6]+3225465664&4294967295,D=_+(b<<9&4294967295|b>>>23),b=N+(_^C&(D^_))+k[11]+643717713&4294967295,N=D+(b<<14&4294967295|b>>>18),b=C+(D^_&(N^D))+k[0]+3921069994&4294967295,C=N+(b<<20&4294967295|b>>>12),b=_+(N^D&(C^N))+k[5]+3593408605&4294967295,_=C+(b<<5&4294967295|b>>>27),b=D+(C^N&(_^C))+k[10]+38016083&4294967295,D=_+(b<<9&4294967295|b>>>23),b=N+(_^C&(D^_))+k[15]+3634488961&4294967295,N=D+(b<<14&4294967295|b>>>18),b=C+(D^_&(N^D))+k[4]+3889429448&4294967295,C=N+(b<<20&4294967295|b>>>12),b=_+(N^D&(C^N))+k[9]+568446438&4294967295,_=C+(b<<5&4294967295|b>>>27),b=D+(C^N&(_^C))+k[14]+3275163606&4294967295,D=_+(b<<9&4294967295|b>>>23),b=N+(_^C&(D^_))+k[3]+4107603335&4294967295,N=D+(b<<14&4294967295|b>>>18),b=C+(D^_&(N^D))+k[8]+1163531501&4294967295,C=N+(b<<20&4294967295|b>>>12),b=_+(N^D&(C^N))+k[13]+2850285829&4294967295,_=C+(b<<5&4294967295|b>>>27),b=D+(C^N&(_^C))+k[2]+4243563512&4294967295,D=_+(b<<9&4294967295|b>>>23),b=N+(_^C&(D^_))+k[7]+1735328473&4294967295,N=D+(b<<14&4294967295|b>>>18),b=C+(D^_&(N^D))+k[12]+2368359562&4294967295,C=N+(b<<20&4294967295|b>>>12),b=_+(C^N^D)+k[5]+4294588738&4294967295,_=C+(b<<4&4294967295|b>>>28),b=D+(_^C^N)+k[8]+2272392833&4294967295,D=_+(b<<11&4294967295|b>>>21),b=N+(D^_^C)+k[11]+1839030562&4294967295,N=D+(b<<16&4294967295|b>>>16),b=C+(N^D^_)+k[14]+4259657740&4294967295,C=N+(b<<23&4294967295|b>>>9),b=_+(C^N^D)+k[1]+2763975236&4294967295,_=C+(b<<4&4294967295|b>>>28),b=D+(_^C^N)+k[4]+1272893353&4294967295,D=_+(b<<11&4294967295|b>>>21),b=N+(D^_^C)+k[7]+4139469664&4294967295,N=D+(b<<16&4294967295|b>>>16),b=C+(N^D^_)+k[10]+3200236656&4294967295,C=N+(b<<23&4294967295|b>>>9),b=_+(C^N^D)+k[13]+681279174&4294967295,_=C+(b<<4&4294967295|b>>>28),b=D+(_^C^N)+k[0]+3936430074&4294967295,D=_+(b<<11&4294967295|b>>>21),b=N+(D^_^C)+k[3]+3572445317&4294967295,N=D+(b<<16&4294967295|b>>>16),b=C+(N^D^_)+k[6]+76029189&4294967295,C=N+(b<<23&4294967295|b>>>9),b=_+(C^N^D)+k[9]+3654602809&4294967295,_=C+(b<<4&4294967295|b>>>28),b=D+(_^C^N)+k[12]+3873151461&4294967295,D=_+(b<<11&4294967295|b>>>21),b=N+(D^_^C)+k[15]+530742520&4294967295,N=D+(b<<16&4294967295|b>>>16),b=C+(N^D^_)+k[2]+3299628645&4294967295,C=N+(b<<23&4294967295|b>>>9),b=_+(N^(C|~D))+k[0]+4096336452&4294967295,_=C+(b<<6&4294967295|b>>>26),b=D+(C^(_|~N))+k[7]+1126891415&4294967295,D=_+(b<<10&4294967295|b>>>22),b=N+(_^(D|~C))+k[14]+2878612391&4294967295,N=D+(b<<15&4294967295|b>>>17),b=C+(D^(N|~_))+k[5]+4237533241&4294967295,C=N+(b<<21&4294967295|b>>>11),b=_+(N^(C|~D))+k[12]+1700485571&4294967295,_=C+(b<<6&4294967295|b>>>26),b=D+(C^(_|~N))+k[3]+2399980690&4294967295,D=_+(b<<10&4294967295|b>>>22),b=N+(_^(D|~C))+k[10]+4293915773&4294967295,N=D+(b<<15&4294967295|b>>>17),b=C+(D^(N|~_))+k[1]+2240044497&4294967295,C=N+(b<<21&4294967295|b>>>11),b=_+(N^(C|~D))+k[8]+1873313359&4294967295,_=C+(b<<6&4294967295|b>>>26),b=D+(C^(_|~N))+k[15]+4264355552&4294967295,D=_+(b<<10&4294967295|b>>>22),b=N+(_^(D|~C))+k[6]+2734768916&4294967295,N=D+(b<<15&4294967295|b>>>17),b=C+(D^(N|~_))+k[13]+1309151649&4294967295,C=N+(b<<21&4294967295|b>>>11),b=_+(N^(C|~D))+k[4]+4149444226&4294967295,_=C+(b<<6&4294967295|b>>>26),b=D+(C^(_|~N))+k[11]+3174756917&4294967295,D=_+(b<<10&4294967295|b>>>22),b=N+(_^(D|~C))+k[2]+718787259&4294967295,N=D+(b<<15&4294967295|b>>>17),b=C+(D^(N|~_))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(N+(b<<21&4294967295|b>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+D&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var C=_-this.blockSize,k=this.B,N=this.h,D=0;D<_;){if(N==0)for(;D<=C;)s(this,I,D),D+=this.blockSize;if(typeof I=="string"){for(;D<_;)if(k[N++]=I.charCodeAt(D++),N==this.blockSize){s(this,k),N=0;break}}else for(;D<_;)if(k[N++]=I[D++],N==this.blockSize){s(this,k),N=0;break}}this.h=N,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var C=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=C&255,C/=256;for(this.u(I),I=Array(16),_=C=0;4>_;++_)for(var k=0;32>k;k+=8)I[C++]=this.g[_]>>>k&255;return I};function i(I,_){var C=a;return Object.prototype.hasOwnProperty.call(C,I)?C[I]:C[I]=_(I)}function o(I,_){this.h=_;for(var C=[],k=!0,N=I.length-1;0<=N;N--){var D=I[N]|0;k&&D==_||(C[N]=D,k=!1)}this.g=C}var a={};function u(I){return-128<=I&&128>I?i(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return P(c(-I));for(var _=[],C=1,k=0;I>=C;k++)_[k]=I/C|0,C*=4294967296;return new o(_,0)}function d(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return P(d(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=c(Math.pow(_,8)),k=f,N=0;N<I.length;N+=8){var D=Math.min(8,I.length-N),b=parseInt(I.substring(N,N+D),_);8>D?(D=c(Math.pow(_,D)),k=k.j(D).add(c(b))):(k=k.j(C),k=k.add(c(b)))}return k}var f=u(0),m=u(1),v=u(16777216);t=o.prototype,t.m=function(){if(x(this))return-P(this).m();for(var I=0,_=1,C=0;C<this.g.length;C++){var k=this.i(C);I+=(0<=k?k:4294967296+k)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(T(this))return"0";if(x(this))return"-"+P(this).toString(I);for(var _=c(Math.pow(I,6)),C=this,k="";;){var N=R(C,_).g;C=E(C,N.j(_));var D=((0<C.g.length?C.g[0]:C.h)>>>0).toString(I);if(C=N,T(C))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function T(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function x(I){return I.h==-1}t.l=function(I){return I=E(this,I),x(I)?-1:T(I)?0:1};function P(I){for(var _=I.g.length,C=[],k=0;k<_;k++)C[k]=~I.g[k];return new o(C,~I.h).add(m)}t.abs=function(){return x(this)?P(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),C=[],k=0,N=0;N<=_;N++){var D=k+(this.i(N)&65535)+(I.i(N)&65535),b=(D>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);k=b>>>16,D&=65535,b&=65535,C[N]=b<<16|D}return new o(C,C[C.length-1]&-2147483648?-1:0)};function E(I,_){return I.add(P(_))}t.j=function(I){if(T(this)||T(I))return f;if(x(this))return x(I)?P(this).j(P(I)):P(P(this).j(I));if(x(I))return P(this.j(P(I)));if(0>this.l(v)&&0>I.l(v))return c(this.m()*I.m());for(var _=this.g.length+I.g.length,C=[],k=0;k<2*_;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<I.g.length;N++){var D=this.i(k)>>>16,b=this.i(k)&65535,he=I.i(N)>>>16,Ye=I.i(N)&65535;C[2*k+2*N]+=b*Ye,y(C,2*k+2*N),C[2*k+2*N+1]+=D*Ye,y(C,2*k+2*N+1),C[2*k+2*N+1]+=b*he,y(C,2*k+2*N+1),C[2*k+2*N+2]+=D*he,y(C,2*k+2*N+2)}for(k=0;k<_;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=_;k<2*_;k++)C[k]=0;return new o(C,0)};function y(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function w(I,_){this.g=I,this.h=_}function R(I,_){if(T(_))throw Error("division by zero");if(T(I))return new w(f,f);if(x(I))return _=R(P(I),_),new w(P(_.g),P(_.h));if(x(_))return _=R(I,P(_)),new w(P(_.g),_.h);if(30<I.g.length){if(x(I)||x(_))throw Error("slowDivide_ only works with positive integers.");for(var C=m,k=_;0>=k.l(I);)C=V(C),k=V(k);var N=O(C,1),D=O(k,1);for(k=O(k,2),C=O(C,2);!T(k);){var b=D.add(k);0>=b.l(I)&&(N=N.add(C),D=b),k=O(k,1),C=O(C,1)}return _=E(I,N.j(_)),new w(N,_)}for(N=f;0<=I.l(_);){for(C=Math.max(1,Math.floor(I.m()/_.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=c(C),b=D.j(_);x(b)||0<b.l(I);)C-=k,D=c(C),b=D.j(_);T(D)&&(D=m),N=N.add(D),I=E(I,b)}return new w(N,I)}t.A=function(I){return R(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),C=[],k=0;k<_;k++)C[k]=this.i(k)&I.i(k);return new o(C,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),C=[],k=0;k<_;k++)C[k]=this.i(k)|I.i(k);return new o(C,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),C=[],k=0;k<_;k++)C[k]=this.i(k)^I.i(k);return new o(C,this.h^I.h)};function V(I){for(var _=I.g.length+1,C=[],k=0;k<_;k++)C[k]=I.i(k)<<1|I.i(k-1)>>>31;return new o(C,I.h)}function O(I,_){var C=_>>5;_%=32;for(var k=I.g.length-C,N=[],D=0;D<k;D++)N[D]=0<_?I.i(D+C)>>>_|I.i(D+C+1)<<32-_:I.i(D+C);return new o(N,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,AT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,bs=o}).apply(typeof T0<"u"?T0:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var RT,Go,NT,_u,Uf,DT,VT,jT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,g){return l==Array.prototype||l==Object.prototype||(l[p]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var p=0;p<l.length;++p){var g=l[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,p){if(p)e:{var g=r;l=l.split(".");for(var S=0;S<l.length-1;S++){var j=l[S];if(!(j in g))break e;g=g[j]}l=l[l.length-1],S=g[l],p=p(S),p!=S&&p!=null&&e(g,l,{configurable:!0,writable:!0,value:p})}}function i(l,p){l instanceof String&&(l+="");var g=0,S=!1,j={next:function(){if(!S&&g<l.length){var M=g++;return{value:p(M,l[M]),done:!1}}return S=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(l){return l||function(){return i(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function c(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function d(l,p,g){return l.call.apply(l.bind,arguments)}function f(l,p,g){if(!l)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,S),l.apply(p,j)}}return function(){return l.apply(p,arguments)}}function m(l,p,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:f,m.apply(null,arguments)}function v(l,p){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function T(l,p){function g(){}g.prototype=p.prototype,l.aa=p.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(S,j,M){for(var B=Array(arguments.length-2),ve=2;ve<arguments.length;ve++)B[ve-2]=arguments[ve];return p.prototype[j].apply(S,B)}}function x(l){const p=l.length;if(0<p){const g=Array(p);for(let S=0;S<p;S++)g[S]=l[S];return g}return[]}function P(l,p){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(u(S)){const j=l.length||0,M=S.length||0;l.length=j+M;for(let B=0;B<M;B++)l[j+B]=S[B]}else l.push(S)}}class E{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function y(l){return/^[\s\xa0]*$/.test(l)}function w(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function R(l){return R[" "](l),l}R[" "]=function(){};var V=w().indexOf("Gecko")!=-1&&!(w().toLowerCase().indexOf("webkit")!=-1&&w().indexOf("Edge")==-1)&&!(w().indexOf("Trident")!=-1||w().indexOf("MSIE")!=-1)&&w().indexOf("Edge")==-1;function O(l,p,g){for(const S in l)p.call(g,l[S],S,l)}function I(l,p){for(const g in l)p.call(void 0,l[g],g,l)}function _(l){const p={};for(const g in l)p[g]=l[g];return p}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,p){let g,S;for(let j=1;j<arguments.length;j++){S=arguments[j];for(g in S)l[g]=S[g];for(let M=0;M<C.length;M++)g=C[M],Object.prototype.hasOwnProperty.call(S,g)&&(l[g]=S[g])}}function N(l){var p=1;l=l.split(":");const g=[];for(;0<p&&l.length;)g.push(l.shift()),p--;return l.length&&g.push(l.join(":")),g}function D(l){a.setTimeout(()=>{throw l},0)}function b(){var l=q;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class he{constructor(){this.h=this.g=null}add(p,g){const S=Ye.get();S.set(p,g),this.h?this.h.next=S:this.g=S,this.h=S}}var Ye=new E(()=>new ge,l=>l.reset());class ge{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let we,$=!1,q=new he,X=()=>{const l=a.Promise.resolve(void 0);we=()=>{l.then(Q)}};var Q=()=>{for(var l;l=b();){try{l.h.call(l.g)}catch(g){D(g)}var p=Ye;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}$=!1};function ne(){this.s=this.s,this.C=this.C}ne.prototype.s=!1,ne.prototype.ma=function(){this.s||(this.s=!0,this.N())},ne.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var ye=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return l}();function xe(l,p){if(de.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(V){e:{try{R(p.nodeName);var j=!0;break e}catch{}j=!1}j||(p=null)}}else g=="mouseover"?p=l.fromElement:g=="mouseout"&&(p=l.toElement);this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Xe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&xe.aa.h.call(this)}}T(xe,de);var Xe={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var nt="closure_listenable_"+(1e6*Math.random()|0),Xs=0;function us(l,p,g,S,j){this.listener=l,this.proxy=null,this.src=p,this.type=g,this.capture=!!S,this.ha=j,this.key=++Xs,this.da=this.fa=!1}function St(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Nt(l){this.src=l,this.g={},this.h=0}Nt.prototype.add=function(l,p,g,S,j){var M=l.toString();l=this.g[M],l||(l=this.g[M]=[],this.h++);var B=po(l,p,S,j);return-1<B?(p=l[B],g||(p.fa=!1)):(p=new us(p,this.src,M,!!S,j),p.fa=g,l.push(p)),p};function Js(l,p){var g=p.type;if(g in l.g){var S=l.g[g],j=Array.prototype.indexOf.call(S,p,void 0),M;(M=0<=j)&&Array.prototype.splice.call(S,j,1),M&&(St(p),l.g[g].length==0&&(delete l.g[g],l.h--))}}function po(l,p,g,S){for(var j=0;j<l.length;++j){var M=l[j];if(!M.da&&M.listener==p&&M.capture==!!g&&M.ha==S)return j}return-1}var mo="closure_lm_"+(1e6*Math.random()|0),go={};function z(l,p,g,S,j){if(Array.isArray(p)){for(var M=0;M<p.length;M++)z(l,p[M],g,S,j);return null}return g=Vg(g),l&&l[nt]?l.K(p,g,c(S)?!!S.capture:!1,j):je(l,p,g,!1,S,j)}function je(l,p,g,S,j,M){if(!p)throw Error("Invalid event type");var B=c(j)?!!j.capture:!!j,ve=mh(l);if(ve||(l[mo]=ve=new Nt(l)),g=ve.add(p,g,S,B,M),g.proxy)return g;if(S=ht(),g.proxy=S,S.src=l,S.listener=g,l.addEventListener)ye||(j=B),j===void 0&&(j=!1),l.addEventListener(p.toString(),S,j);else if(l.attachEvent)l.attachEvent(Jt(p.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function ht(){function l(g){return p.call(l.src,l.listener,g)}const p=RI;return l}function Je(l,p,g,S,j){if(Array.isArray(p))for(var M=0;M<p.length;M++)Je(l,p[M],g,S,j);else S=c(S)?!!S.capture:!!S,g=Vg(g),l&&l[nt]?(l=l.i,p=String(p).toString(),p in l.g&&(M=l.g[p],g=po(M,g,S,j),-1<g&&(St(M[g]),Array.prototype.splice.call(M,g,1),M.length==0&&(delete l.g[p],l.h--)))):l&&(l=mh(l))&&(p=l.g[p.toString()],l=-1,p&&(l=po(p,g,S,j)),(g=-1<l?p[l]:null)&&fe(g))}function fe(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[nt])Js(p.i,l);else{var g=l.type,S=l.proxy;p.removeEventListener?p.removeEventListener(g,S,l.capture):p.detachEvent?p.detachEvent(Jt(g),S):p.addListener&&p.removeListener&&p.removeListener(S),(g=mh(p))?(Js(g,l),g.h==0&&(g.src=null,p[mo]=null)):St(l)}}}function Jt(l){return l in go?go[l]:go[l]="on"+l}function RI(l,p){if(l.da)l=!0;else{p=new xe(p,this);var g=l.listener,S=l.ha||l.src;l.fa&&fe(l),l=g.call(S,p)}return l}function mh(l){return l=l[mo],l instanceof Nt?l:null}var gh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vg(l){return typeof l=="function"?l:(l[gh]||(l[gh]=function(p){return l.handleEvent(p)}),l[gh])}function dt(){ne.call(this),this.i=new Nt(this),this.M=this,this.F=null}T(dt,ne),dt.prototype[nt]=!0,dt.prototype.removeEventListener=function(l,p,g,S){Je(this,l,p,g,S)};function It(l,p){var g,S=l.F;if(S)for(g=[];S;S=S.F)g.push(S);if(l=l.M,S=p.type||p,typeof p=="string")p=new de(p,l);else if(p instanceof de)p.target=p.target||l;else{var j=p;p=new de(S,l),k(p,j)}if(j=!0,g)for(var M=g.length-1;0<=M;M--){var B=p.g=g[M];j=pl(B,S,!0,p)&&j}if(B=p.g=l,j=pl(B,S,!0,p)&&j,j=pl(B,S,!1,p)&&j,g)for(M=0;M<g.length;M++)B=p.g=g[M],j=pl(B,S,!1,p)&&j}dt.prototype.N=function(){if(dt.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var g=l.g[p],S=0;S<g.length;S++)St(g[S]);delete l.g[p],l.h--}}this.F=null},dt.prototype.K=function(l,p,g,S){return this.i.add(String(l),p,!1,g,S)},dt.prototype.L=function(l,p,g,S){return this.i.add(String(l),p,!0,g,S)};function pl(l,p,g,S){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var j=!0,M=0;M<p.length;++M){var B=p[M];if(B&&!B.da&&B.capture==g){var ve=B.listener,rt=B.ha||B.src;B.fa&&Js(l.i,B),j=ve.call(rt,S)!==!1&&j}}return j&&!S.defaultPrevented}function jg(l,p,g){if(typeof l=="function")g&&(l=m(l,g));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function Og(l){l.g=jg(()=>{l.g=null,l.i&&(l.i=!1,Og(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class NI extends ne{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Og(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yo(l){ne.call(this),this.h=l,this.g={}}T(yo,ne);var Mg=[];function Lg(l){O(l.g,function(p,g){this.g.hasOwnProperty(g)&&fe(p)},l),l.g={}}yo.prototype.N=function(){yo.aa.N.call(this),Lg(this)},yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yh=a.JSON.stringify,DI=a.JSON.parse,VI=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function vh(){}vh.prototype.h=null;function Fg(l){return l.h||(l.h=l.i())}function Ug(){}var vo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function _h(){de.call(this,"d")}T(_h,de);function wh(){de.call(this,"c")}T(wh,de);var cs={},Bg=null;function ml(){return Bg=Bg||new dt}cs.La="serverreachability";function zg(l){de.call(this,cs.La,l)}T(zg,de);function _o(l){const p=ml();It(p,new zg(p))}cs.STAT_EVENT="statevent";function $g(l,p){de.call(this,cs.STAT_EVENT,l),this.stat=p}T($g,de);function Pt(l){const p=ml();It(p,new $g(p,l))}cs.Ma="timingevent";function Hg(l,p){de.call(this,cs.Ma,l),this.size=p}T(Hg,de);function wo(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function xo(){this.g=!0}xo.prototype.xa=function(){this.g=!1};function jI(l,p,g,S,j,M){l.info(function(){if(l.g)if(M)for(var B="",ve=M.split("&"),rt=0;rt<ve.length;rt++){var ue=ve[rt].split("=");if(1<ue.length){var ft=ue[0];ue=ue[1];var pt=ft.split("_");B=2<=pt.length&&pt[1]=="type"?B+(ft+"="+ue+"&"):B+(ft+"=redacted&")}}else B=null;else B=M;return"XMLHTTP REQ ("+S+") [attempt "+j+"]: "+p+`
`+g+`
`+B})}function OI(l,p,g,S,j,M,B){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+j+"]: "+p+`
`+g+`
`+M+" "+B})}function Zs(l,p,g,S){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+LI(l,g)+(S?" "+S:"")})}function MI(l,p){l.info(function(){return"TIMEOUT: "+p})}xo.prototype.info=function(){};function LI(l,p){if(!l.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var S=g[l];if(!(2>S.length)){var j=S[1];if(Array.isArray(j)&&!(1>j.length)){var M=j[0];if(M!="noop"&&M!="stop"&&M!="close")for(var B=1;B<j.length;B++)j[B]=""}}}}return yh(g)}catch{return p}}var gl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Wg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xh;function yl(){}T(yl,vh),yl.prototype.g=function(){return new XMLHttpRequest},yl.prototype.i=function(){return{}},xh=new yl;function pr(l,p,g,S){this.j=l,this.i=p,this.l=g,this.R=S||1,this.U=new yo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qg}function qg(){this.i=null,this.g="",this.h=!1}var Gg={},Eh={};function Th(l,p,g){l.L=1,l.v=xl(Fn(p)),l.m=g,l.P=!0,Kg(l,null)}function Kg(l,p){l.F=Date.now(),vl(l),l.A=Fn(l.v);var g=l.A,S=l.R;Array.isArray(S)||(S=[String(S)]),ly(g.i,"t",S),l.C=0,g=l.j.J,l.h=new qg,l.g=Py(l.j,g?p:null,!l.m),0<l.O&&(l.M=new NI(m(l.Y,l,l.g),l.O)),p=l.U,g=l.g,S=l.ca;var j="readystatechange";Array.isArray(j)||(j&&(Mg[0]=j.toString()),j=Mg);for(var M=0;M<j.length;M++){var B=z(g,j[M],S||p.handleEvent,!1,p.h||p);if(!B)break;p.g[B.key]=B}p=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),_o(),jI(l.i,l.u,l.A,l.l,l.R,l.m)}pr.prototype.ca=function(l){l=l.target;const p=this.M;p&&Un(l)==3?p.j():this.Y(l)},pr.prototype.Y=function(l){try{if(l==this.g)e:{const pt=Un(this.g);var p=this.g.Ba();const ni=this.g.Z();if(!(3>pt)&&(pt!=3||this.g&&(this.h.h||this.g.oa()||my(this.g)))){this.J||pt!=4||p==7||(p==8||0>=ni?_o(3):_o(2)),Sh(this);var g=this.g.Z();this.X=g;t:if(Qg(this)){var S=my(this.g);l="";var j=S.length,M=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hs(this),Eo(this);var B="";break t}this.h.i=new a.TextDecoder}for(p=0;p<j;p++)this.h.h=!0,l+=this.h.i.decode(S[p],{stream:!(M&&p==j-1)});S.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=g==200,OI(this.i,this.u,this.A,this.l,this.R,pt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ve,rt=this.g;if((ve=rt.g?rt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!y(ve)){var ue=ve;break t}}ue=null}if(g=ue)Zs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ih(this,g);else{this.o=!1,this.s=3,Pt(12),hs(this),Eo(this);break e}}if(this.P){g=!0;let un;for(;!this.J&&this.C<B.length;)if(un=FI(this,B),un==Eh){pt==4&&(this.s=4,Pt(14),g=!1),Zs(this.i,this.l,null,"[Incomplete Response]");break}else if(un==Gg){this.s=4,Pt(15),Zs(this.i,this.l,B,"[Invalid Chunk]"),g=!1;break}else Zs(this.i,this.l,un,null),Ih(this,un);if(Qg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pt!=4||B.length!=0||this.h.h||(this.s=1,Pt(16),g=!1),this.o=this.o&&g,!g)Zs(this.i,this.l,B,"[Invalid Chunked Response]"),hs(this),Eo(this);else if(0<B.length&&!this.W){this.W=!0;var ft=this.j;ft.g==this&&ft.ba&&!ft.M&&(ft.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Rh(ft),ft.M=!0,Pt(11))}}else Zs(this.i,this.l,B,null),Ih(this,B);pt==4&&hs(this),this.o&&!this.J&&(pt==4?Ey(this.j,this):(this.o=!1,vl(this)))}else nP(this.g),g==400&&0<B.indexOf("Unknown SID")?(this.s=3,Pt(12)):(this.s=0,Pt(13)),hs(this),Eo(this)}}}catch{}finally{}};function Qg(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function FI(l,p){var g=l.C,S=p.indexOf(`
`,g);return S==-1?Eh:(g=Number(p.substring(g,S)),isNaN(g)?Gg:(S+=1,S+g>p.length?Eh:(p=p.slice(S,S+g),l.C=S+g,p)))}pr.prototype.cancel=function(){this.J=!0,hs(this)};function vl(l){l.S=Date.now()+l.I,Yg(l,l.I)}function Yg(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=wo(m(l.ba,l),p)}function Sh(l){l.B&&(a.clearTimeout(l.B),l.B=null)}pr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(MI(this.i,this.A),this.L!=2&&(_o(),Pt(17)),hs(this),this.s=2,Eo(this)):Yg(this,this.S-l)};function Eo(l){l.j.G==0||l.J||Ey(l.j,l)}function hs(l){Sh(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,Lg(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function Ih(l,p){try{var g=l.j;if(g.G!=0&&(g.g==l||Ph(g.h,l))){if(!l.K&&Ph(g.h,l)&&g.G==3){try{var S=g.Da.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var j=S;if(j[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Cl(g),Il(g);else break e;Ah(g),Pt(18)}}else g.za=j[1],0<g.za-g.T&&37500>j[2]&&g.F&&g.v==0&&!g.C&&(g.C=wo(m(g.Za,g),6e3));if(1>=Zg(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else fs(g,11)}else if((l.K||g.g==l)&&Cl(g),!y(p))for(j=g.Da.g.parse(p),p=0;p<j.length;p++){let ue=j[p];if(g.T=ue[0],ue=ue[1],g.G==2)if(ue[0]=="c"){g.K=ue[1],g.ia=ue[2];const ft=ue[3];ft!=null&&(g.la=ft,g.j.info("VER="+g.la));const pt=ue[4];pt!=null&&(g.Aa=pt,g.j.info("SVER="+g.Aa));const ni=ue[5];ni!=null&&typeof ni=="number"&&0<ni&&(S=1.5*ni,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const un=l.g;if(un){const bl=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(bl){var M=S.h;M.g||bl.indexOf("spdy")==-1&&bl.indexOf("quic")==-1&&bl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Ch(M,M.h),M.h=null))}if(S.D){const Nh=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Nh&&(S.ya=Nh,Ie(S.I,S.D,Nh))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var B=l;if(S.qa=Iy(S,S.J?S.ia:null,S.W),B.K){ey(S.h,B);var ve=B,rt=S.L;rt&&(ve.I=rt),ve.B&&(Sh(ve),vl(ve)),S.g=B}else wy(S);0<g.i.length&&Pl(g)}else ue[0]!="stop"&&ue[0]!="close"||fs(g,7);else g.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?fs(g,7):bh(g):ue[0]!="noop"&&g.l&&g.l.ta(ue),g.v=0)}}_o(4)}catch{}}var UI=class{constructor(l,p){this.g=l,this.map=p}};function Xg(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Jg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Zg(l){return l.h?1:l.g?l.g.size:0}function Ph(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Ch(l,p){l.g?l.g.add(p):l.h=p}function ey(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Xg.prototype.cancel=function(){if(this.i=ty(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function ty(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const g of l.g.values())p=p.concat(g.D);return p}return x(l.i)}function BI(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var p=[],g=l.length,S=0;S<g;S++)p.push(l[S]);return p}p=[],g=0;for(S in l)p[g++]=l[S];return p}function zI(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var p=[];l=l.length;for(var g=0;g<l;g++)p.push(g);return p}p=[],g=0;for(const S in l)p[g++]=S;return p}}}function ny(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var g=zI(l),S=BI(l),j=S.length,M=0;M<j;M++)p.call(void 0,S[M],g&&g[M],l)}var ry=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $I(l,p){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var S=l[g].indexOf("="),j=null;if(0<=S){var M=l[g].substring(0,S);j=l[g].substring(S+1)}else M=l[g];p(M,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function ds(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ds){this.h=l.h,_l(this,l.j),this.o=l.o,this.g=l.g,wl(this,l.s),this.l=l.l;var p=l.i,g=new Io;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),sy(this,g),this.m=l.m}else l&&(p=String(l).match(ry))?(this.h=!1,_l(this,p[1]||"",!0),this.o=To(p[2]||""),this.g=To(p[3]||"",!0),wl(this,p[4]),this.l=To(p[5]||"",!0),sy(this,p[6]||"",!0),this.m=To(p[7]||"")):(this.h=!1,this.i=new Io(null,this.h))}ds.prototype.toString=function(){var l=[],p=this.j;p&&l.push(So(p,iy,!0),":");var g=this.g;return(g||p=="file")&&(l.push("//"),(p=this.o)&&l.push(So(p,iy,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(So(g,g.charAt(0)=="/"?qI:WI,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",So(g,KI)),l.join("")};function Fn(l){return new ds(l)}function _l(l,p,g){l.j=g?To(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function wl(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function sy(l,p,g){p instanceof Io?(l.i=p,QI(l.i,l.h)):(g||(p=So(p,GI)),l.i=new Io(p,l.h))}function Ie(l,p,g){l.i.set(p,g)}function xl(l){return Ie(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function To(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function So(l,p,g){return typeof l=="string"?(l=encodeURI(l).replace(p,HI),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function HI(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var iy=/[#\/\?@]/g,WI=/[#\?:]/g,qI=/[#\?]/g,GI=/[#\?@]/g,KI=/#/g;function Io(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function mr(l){l.g||(l.g=new Map,l.h=0,l.i&&$I(l.i,function(p,g){l.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Io.prototype,t.add=function(l,p){mr(this),this.i=null,l=ei(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(p),this.h+=1,this};function oy(l,p){mr(l),p=ei(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function ay(l,p){return mr(l),p=ei(l,p),l.g.has(p)}t.forEach=function(l,p){mr(this),this.g.forEach(function(g,S){g.forEach(function(j){l.call(p,j,S,this)},this)},this)},t.na=function(){mr(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let S=0;S<p.length;S++){const j=l[S];for(let M=0;M<j.length;M++)g.push(p[S])}return g},t.V=function(l){mr(this);let p=[];if(typeof l=="string")ay(this,l)&&(p=p.concat(this.g.get(ei(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)p=p.concat(l[g])}return p},t.set=function(l,p){return mr(this),this.i=null,l=ei(this,l),ay(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function ly(l,p,g){oy(l,p),0<g.length&&(l.i=null,l.g.set(ei(l,p),x(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var S=p[g];const M=encodeURIComponent(String(S)),B=this.V(S);for(S=0;S<B.length;S++){var j=M;B[S]!==""&&(j+="="+encodeURIComponent(String(B[S]))),l.push(j)}}return this.i=l.join("&")};function ei(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function QI(l,p){p&&!l.j&&(mr(l),l.i=null,l.g.forEach(function(g,S){var j=S.toLowerCase();S!=j&&(oy(this,S),ly(this,j,g))},l)),l.j=p}function YI(l,p){const g=new xo;if(a.Image){const S=new Image;S.onload=v(gr,g,"TestLoadImage: loaded",!0,p,S),S.onerror=v(gr,g,"TestLoadImage: error",!1,p,S),S.onabort=v(gr,g,"TestLoadImage: abort",!1,p,S),S.ontimeout=v(gr,g,"TestLoadImage: timeout",!1,p,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else p(!1)}function XI(l,p){const g=new xo,S=new AbortController,j=setTimeout(()=>{S.abort(),gr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:S.signal}).then(M=>{clearTimeout(j),M.ok?gr(g,"TestPingServer: ok",!0,p):gr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(j),gr(g,"TestPingServer: error",!1,p)})}function gr(l,p,g,S,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),S(g)}catch{}}function JI(){this.g=new VI}function ZI(l,p,g){const S=g||"";try{ny(l,function(j,M){let B=j;c(j)&&(B=yh(j)),p.push(S+M+"="+encodeURIComponent(B))})}catch(j){throw p.push(S+"type="+encodeURIComponent("_badmap")),j}}function El(l){this.l=l.Ub||null,this.j=l.eb||!1}T(El,vh),El.prototype.g=function(){return new Tl(this.l,this.j)},El.prototype.i=function(l){return function(){return l}}({});function Tl(l,p){dt.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Tl,dt),t=Tl.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Co(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Co(this)),this.g&&(this.readyState=3,Co(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;uy(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function uy(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Po(this):Co(this),this.readyState==3&&uy(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Po(this))},t.Qa=function(l){this.g&&(this.response=l,Po(this))},t.ga=function(){this.g&&Po(this)};function Po(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Co(l)}t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=p.next();return l.join(`\r
`)};function Co(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function cy(l){let p="";return O(l,function(g,S){p+=S,p+=":",p+=g,p+=`\r
`}),p}function kh(l,p,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=cy(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Ie(l,p,g))}function Oe(l){dt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Oe,dt);var eP=/^https?$/i,tP=["POST","PUT"];t=Oe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,p,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xh.g(),this.v=this.o?Fg(this.o):Fg(xh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(M){hy(this,M);return}if(l=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var j in S)g.set(j,S[j]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const M of S.keys())g.set(M,S.get(M));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(M=>M.toLowerCase()=="content-type"),j=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(tP,p,void 0))||S||j||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[M,B]of g)this.g.setRequestHeader(M,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{py(this),this.u=!0,this.g.send(l),this.u=!1}catch(M){hy(this,M)}};function hy(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,dy(l),Sl(l)}function dy(l){l.A||(l.A=!0,It(l,"complete"),It(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,It(this,"complete"),It(this,"abort"),Sl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sl(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?fy(this):this.bb())},t.bb=function(){fy(this)};function fy(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Un(l)!=4||l.Z()!=2)){if(l.u&&Un(l)==4)jg(l.Ea,0,l);else if(It(l,"readystatechange"),Un(l)==4){l.h=!1;try{const B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var S;if(S=B===0){var j=String(l.D).match(ry)[1]||null;!j&&a.self&&a.self.location&&(j=a.self.location.protocol.slice(0,-1)),S=!eP.test(j?j.toLowerCase():"")}g=S}if(g)It(l,"complete"),It(l,"success");else{l.m=6;try{var M=2<Un(l)?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.Z()+"]",dy(l)}}finally{Sl(l)}}}}function Sl(l,p){if(l.g){py(l);const g=l.g,S=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||It(l,"ready");try{g.onreadystatechange=S}catch{}}}function py(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Un(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),DI(p)}};function my(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function nP(l){const p={};l=(l.g&&2<=Un(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(y(l[S]))continue;var g=N(l[S]);const j=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const M=p[j]||[];p[j]=M,M.push(g)}I(p,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ko(l,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||p}function gy(l){this.Aa=0,this.i=[],this.j=new xo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ko("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ko("baseRetryDelayMs",5e3,l),this.cb=ko("retryDelaySeedMs",1e4,l),this.Wa=ko("forwardChannelMaxRetries",2,l),this.wa=ko("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Xg(l&&l.concurrentRequestLimit),this.Da=new JI,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=gy.prototype,t.la=8,t.G=1,t.connect=function(l,p,g,S){Pt(0),this.W=l,this.H=p||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=Iy(this,null,this.W),Pl(this)};function bh(l){if(yy(l),l.G==3){var p=l.U++,g=Fn(l.I);if(Ie(g,"SID",l.K),Ie(g,"RID",p),Ie(g,"TYPE","terminate"),bo(l,g),p=new pr(l,l.j,p),p.L=2,p.v=xl(Fn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Py(p.j,null),p.g.ea(p.v)),p.F=Date.now(),vl(p)}Sy(l)}function Il(l){l.g&&(Rh(l),l.g.cancel(),l.g=null)}function yy(l){Il(l),l.u&&(a.clearTimeout(l.u),l.u=null),Cl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Pl(l){if(!Jg(l.h)&&!l.s){l.s=!0;var p=l.Ga;we||X(),$||(we(),$=!0),q.add(p,l),l.B=0}}function rP(l,p){return Zg(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=wo(m(l.Ga,l,p),Ty(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const j=new pr(this,this.j,l);let M=this.o;if(this.S&&(M?(M=_(M),k(M,this.S)):M=this.S),this.m!==null||this.O||(j.H=M,M=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=_y(this,j,p),g=Fn(this.I),Ie(g,"RID",l),Ie(g,"CVER",22),this.D&&Ie(g,"X-HTTP-Session-Id",this.D),bo(this,g),M&&(this.O?p="headers="+encodeURIComponent(String(cy(M)))+"&"+p:this.m&&kh(g,this.m,M)),Ch(this.h,j),this.Ua&&Ie(g,"TYPE","init"),this.P?(Ie(g,"$req",p),Ie(g,"SID","null"),j.T=!0,Th(j,g,null)):Th(j,g,p),this.G=2}}else this.G==3&&(l?vy(this,l):this.i.length==0||Jg(this.h)||vy(this))};function vy(l,p){var g;p?g=p.l:g=l.U++;const S=Fn(l.I);Ie(S,"SID",l.K),Ie(S,"RID",g),Ie(S,"AID",l.T),bo(l,S),l.m&&l.o&&kh(S,l.m,l.o),g=new pr(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),p&&(l.i=p.D.concat(l.i)),p=_y(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ch(l.h,g),Th(g,S,p)}function bo(l,p){l.H&&O(l.H,function(g,S){Ie(p,S,g)}),l.l&&ny({},function(g,S){Ie(p,S,g)})}function _y(l,p,g){g=Math.min(l.i.length,g);var S=l.l?m(l.l.Na,l.l,l):null;e:{var j=l.i;let M=-1;for(;;){const B=["count="+g];M==-1?0<g?(M=j[0].g,B.push("ofs="+M)):M=0:B.push("ofs="+M);let ve=!0;for(let rt=0;rt<g;rt++){let ue=j[rt].g;const ft=j[rt].map;if(ue-=M,0>ue)M=Math.max(0,j[rt].g-100),ve=!1;else try{ZI(ft,B,"req"+ue+"_")}catch{S&&S(ft)}}if(ve){S=B.join("&");break e}}}return l=l.i.splice(0,g),p.D=l,S}function wy(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;we||X(),$||(we(),$=!0),q.add(p,l),l.v=0}}function Ah(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=wo(m(l.Fa,l),Ty(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,xy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=wo(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pt(10),Il(this),xy(this))};function Rh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function xy(l){l.g=new pr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=Fn(l.qa);Ie(p,"RID","rpc"),Ie(p,"SID",l.K),Ie(p,"AID",l.T),Ie(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&Ie(p,"TO",l.ja),Ie(p,"TYPE","xmlhttp"),bo(l,p),l.m&&l.o&&kh(p,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=xl(Fn(p)),g.m=null,g.P=!0,Kg(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Il(this),Ah(this),Pt(19))};function Cl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Ey(l,p){var g=null;if(l.g==p){Cl(l),Rh(l),l.g=null;var S=2}else if(Ph(l.h,p))g=p.D,ey(l.h,p),S=1;else return;if(l.G!=0){if(p.o)if(S==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var j=l.B;S=ml(),It(S,new Hg(S,g)),Pl(l)}else wy(l);else if(j=p.s,j==3||j==0&&0<p.X||!(S==1&&rP(l,p)||S==2&&Ah(l)))switch(g&&0<g.length&&(p=l.h,p.i=p.i.concat(g)),j){case 1:fs(l,5);break;case 4:fs(l,10);break;case 3:fs(l,6);break;default:fs(l,2)}}}function Ty(l,p){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*p}function fs(l,p){if(l.j.info("Error code "+p),p==2){var g=m(l.fb,l),S=l.Xa;const j=!S;S=new ds(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_l(S,"https"),xl(S),j?YI(S.toString(),g):XI(S.toString(),g)}else Pt(2);l.G=0,l.l&&l.l.sa(p),Sy(l),yy(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function Sy(l){if(l.G=0,l.ka=[],l.l){const p=ty(l.h);(p.length!=0||l.i.length!=0)&&(P(l.ka,p),P(l.ka,l.i),l.h.i.length=0,x(l.i),l.i.length=0),l.l.ra()}}function Iy(l,p,g){var S=g instanceof ds?Fn(g):new ds(g);if(S.g!="")p&&(S.g=p+"."+S.g),wl(S,S.s);else{var j=a.location;S=j.protocol,p=p?p+"."+j.hostname:j.hostname,j=+j.port;var M=new ds(null);S&&_l(M,S),p&&(M.g=p),j&&wl(M,j),g&&(M.l=g),S=M}return g=l.D,p=l.ya,g&&p&&Ie(S,g,p),Ie(S,"VER",l.la),bo(l,S),S}function Py(l,p,g){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new Oe(new El({eb:g})):new Oe(l.pa),p.Ha(l.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Cy(){}t=Cy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function kl(){}kl.prototype.g=function(l,p){return new zt(l,p)};function zt(l,p){dt.call(this),this.g=new gy(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!y(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!y(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new ti(this)}T(zt,dt),zt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},zt.prototype.close=function(){bh(this.g)},zt.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=yh(l),l=g);p.i.push(new UI(p.Ya++,l)),p.G==3&&Pl(p)},zt.prototype.N=function(){this.g.l=null,delete this.j,bh(this.g),delete this.g,zt.aa.N.call(this)};function ky(l){_h.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const g in p){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}T(ky,_h);function by(){wh.call(this),this.status=1}T(by,wh);function ti(l){this.g=l}T(ti,Cy),ti.prototype.ua=function(){It(this.g,"a")},ti.prototype.ta=function(l){It(this.g,new ky(l))},ti.prototype.sa=function(l){It(this.g,new by)},ti.prototype.ra=function(){It(this.g,"b")},kl.prototype.createWebChannel=kl.prototype.g,zt.prototype.send=zt.prototype.o,zt.prototype.open=zt.prototype.m,zt.prototype.close=zt.prototype.close,jT=function(){return new kl},VT=function(){return ml()},DT=cs,Uf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gl.NO_ERROR=0,gl.TIMEOUT=8,gl.HTTP_ERROR=6,_u=gl,Wg.COMPLETE="complete",NT=Wg,Ug.EventType=vo,vo.OPEN="a",vo.CLOSE="b",vo.ERROR="c",vo.MESSAGE="d",dt.prototype.listen=dt.prototype.K,Go=Ug,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,RT=Oe}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const S0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _t=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new fm("@firebase/firestore");function Lo(){return Fs.logLevel}function W(t,...e){if(Fs.logLevel<=ie.DEBUG){const n=e.map(Cm);Fs.debug(`Firestore (${lo}): ${t}`,...n)}}function or(t,...e){if(Fs.logLevel<=ie.ERROR){const n=e.map(Cm);Fs.error(`Firestore (${lo}): ${t}`,...n)}}function Hi(t,...e){if(Fs.logLevel<=ie.WARN){const n=e.map(Cm);Fs.warn(`Firestore (${lo}): ${t}`,...n)}}function Cm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${lo}) INTERNAL ASSERTION FAILED: `+t;throw or(e),new Error(e)}function me(t,e){t||Z()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends jn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class VN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class jN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class ON{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){me(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Hr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Hr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Hr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(me(typeof r.accessToken=="string"),new OT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new _t(e)}}class MN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class LN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new MN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class FN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){me(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(me(typeof n.token=="string"),this.R=n.token,new FN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=BN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function Wi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Ke(0,0))}static max(){return new ee(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ma.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ma?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class be extends Ma{construct(e,n,r){return new be(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new be(n)}static emptyPath(){return new be([])}}const zN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ot extends Ma{construct(e,n,r){return new ot(e,n,r)}static isValidIdentifier(e){return zN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ot.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ot(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new G(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new G(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new G(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ot(n)}static emptyPath(){return new ot([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(be.fromString(e))}static fromName(e){return new K(be.fromString(e).popFirst(5))}static empty(){return new K(be.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&be.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return be.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new be(e.slice()))}}function $N(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Xr(s,K.empty(),e)}function HN(t){return new Xr(t.readTime,t.key,-1)}class Xr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Xr(ee.min(),K.empty(),-1)}static max(){return new Xr(ee.max(),K.empty(),-1)}}function WN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==qN)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===i&&r(o)},d=>s(d))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function KN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class km{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}km.oe=-1;function qc(t){return t==null}function oc(t){return t===0&&1/t==-1/0}function QN(t){return typeof t=="number"&&Number.isInteger(t)&&!oc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||it.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}}class Ql{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class it{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??it.RED,this.left=s??it.EMPTY,this.right=i??it.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new it(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return it.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return it.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,it.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,it.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new it(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new P0(this.data.getIterator())}getIteratorFrom(e){return new P0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class P0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.fields=e,e.sort(ot.comparator)}static empty(){return new qt([])}unionWith(e){let n=new lt(ot.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new FT("Invalid base64 string: "+i):i}}(e);return new ct(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new ct(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ct.EMPTY_BYTE_STRING=new ct("");const YN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jr(t){if(me(!!t),typeof t=="string"){let e=0;const n=YN.exec(t);if(me(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Us(t){return typeof t=="string"?ct.fromBase64String(t):ct.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Am(t){const e=t.mapValue.fields.__previous_value__;return bm(e)?Am(e):e}function La(t){const e=Jr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XN{constructor(e,n,r,s,i,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Fa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl={mapValue:{}};function Bs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bm(t)?4:ZN(t)?9007199254740991:JN(t)?10:11:Z()}function Nn(t,e){if(t===e)return!0;const n=Bs(t);if(n!==Bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return La(t).isEqual(La(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Jr(s.timestampValue),a=Jr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Us(s.bytesValue).isEqual(Us(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Le(s.geoPointValue.latitude)===Le(i.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Le(s.integerValue)===Le(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Le(s.doubleValue),a=Le(i.doubleValue);return o===a?oc(o)===oc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Wi(t.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(I0(o)!==I0(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Nn(o[u],a[u])))return!1;return!0}(t,e);default:return Z()}}function Ua(t,e){return(t.values||[]).find(n=>Nn(n,e))!==void 0}function qi(t,e){if(t===e)return 0;const n=Bs(t),r=Bs(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Le(i.integerValue||i.doubleValue),u=Le(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return C0(t.timestampValue,e.timestampValue);case 4:return C0(La(t),La(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Us(i),u=Us(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=ce(a[c],u[c]);if(d!==0)return d}return ce(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ce(Le(i.latitude),Le(o.latitude));return a!==0?a:ce(Le(i.longitude),Le(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return k0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,c,d;const f=i.fields||{},m=o.fields||{},v=(a=f.value)===null||a===void 0?void 0:a.arrayValue,T=(u=m.value)===null||u===void 0?void 0:u.arrayValue,x=ce(((c=v==null?void 0:v.values)===null||c===void 0?void 0:c.length)||0,((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0);return x!==0?x:k0(v,T)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Yl.mapValue&&o===Yl.mapValue)return 0;if(i===Yl.mapValue)return 1;if(o===Yl.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){const m=ce(u[f],d[f]);if(m!==0)return m;const v=qi(a[u[f]],c[d[f]]);if(v!==0)return v}return ce(u.length,d.length)}(t.mapValue,e.mapValue);default:throw Z()}}function C0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Jr(t),r=Jr(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function k0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=qi(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function Gi(t){return Bf(t)}function Bf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Jr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Us(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Bf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Bf(n.fields[o])}`;return s+"}"}(t.mapValue):Z()}function zf(t){return!!t&&"integerValue"in t}function Rm(t){return!!t&&"arrayValue"in t}function b0(t){return!!t&&"nullValue"in t}function A0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wu(t){return!!t&&"mapValue"in t}function JN(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function aa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Gs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=aa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=aa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function ZN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=aa(n)}setAll(e){let n=ot.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=aa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];wu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Gs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new jt(aa(this.value))}}function UT(t){const e=[];return Gs(t.fields,(n,r)=>{const s=new ot([n]);if(wu(r)){const i=UT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new xt(e,0,ee.min(),ee.min(),ee.min(),jt.empty(),0)}static newFoundDocument(e,n,r,s){return new xt(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new xt(e,2,n,ee.min(),ee.min(),jt.empty(),0)}static newUnknownDocument(e,n){return new xt(e,3,n,ee.min(),ee.min(),jt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof xt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new xt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ac{constructor(e,n){this.position=e,this.inclusive=n}}function R0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=qi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function N0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n="asc"){this.field=e,this.dir=n}}function eD(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BT=class{};class qe extends BT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new nD(e,n,r):n==="array-contains"?new iD(e,r):n==="in"?new oD(e,r):n==="not-in"?new aD(e,r):n==="array-contains-any"?new lD(e,r):new qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new rD(e,r):new sD(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(qi(n,this.value)):n!==null&&Bs(this.value)===Bs(n)&&this.matchesComparison(qi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends BT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Dn(e,n)}matches(e){return zT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function zT(t){return t.op==="and"}function $T(t){return tD(t)&&zT(t)}function tD(t){for(const e of t.filters)if(e instanceof Dn)return!1;return!0}function $f(t){if(t instanceof qe)return t.field.canonicalString()+t.op.toString()+Gi(t.value);if($T(t))return t.filters.map(e=>$f(e)).join(",");{const e=t.filters.map(n=>$f(n)).join(",");return`${t.op}(${e})`}}function HT(t,e){return t instanceof qe?function(r,s){return s instanceof qe&&r.op===s.op&&r.field.isEqual(s.field)&&Nn(r.value,s.value)}(t,e):t instanceof Dn?function(r,s){return s instanceof Dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&HT(o,s.filters[a]),!0):!1}(t,e):void Z()}function WT(t){return t instanceof qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Gi(n.value)}`}(t):t instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map(WT).join(" ,")+"}"}(t):"Filter"}class nD extends qe{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class rD extends qe{constructor(e,n){super(e,"in",n),this.keys=qT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class sD extends qe{constructor(e,n){super(e,"not-in",n),this.keys=qT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function qT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class iD extends qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rm(n)&&Ua(n.arrayValue,this.value)}}class oD extends qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ua(this.value.arrayValue,n)}}class aD extends qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ua(this.value.arrayValue,n)}}class lD extends qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ua(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function D0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new uD(t,e,n,r,s,i,o)}function Nm(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$f(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),qc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Gi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Gi(r)).join(",")),e.ue=n}return e.ue}function Dm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!eD(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!HT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!N0(t.startAt,e.startAt)&&N0(t.endAt,e.endAt)}function Hf(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function cD(t,e,n,r,s,i,o,a){return new Gc(t,e,n,r,s,i,o,a)}function Vm(t){return new Gc(t)}function V0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function hD(t){return t.collectionGroup!==null}function la(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new lt(ot.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new lc(i,r))}),n.has(ot.keyField().canonicalString())||e.ce.push(new lc(ot.keyField(),r))}return e.ce}function bn(t){const e=te(t);return e.le||(e.le=dD(e,la(t))),e.le}function dD(t,e){if(t.limitType==="F")return D0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new lc(s.field,i)});const n=t.endAt?new ac(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ac(t.startAt.position,t.startAt.inclusive):null;return D0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Wf(t,e,n){return new Gc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Kc(t,e){return Dm(bn(t),bn(e))&&t.limitType===e.limitType}function GT(t){return`${Nm(bn(t))}|lt:${t.limitType}`}function ii(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>WT(s)).join(", ")}]`),qc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Gi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Gi(s)).join(",")),`Target(${r})`}(bn(t))}; limitType=${t.limitType})`}function Qc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of la(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=R0(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,la(r),s)||r.endAt&&!function(o,a,u){const c=R0(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,la(r),s))}(t,e)}function fD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function KT(t){return(e,n)=>{let r=!1;for(const s of la(t)){const i=pD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function pD(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?qi(u,c):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Gs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return LT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mD=new Ve(K.comparator);function ar(){return mD}const QT=new Ve(K.comparator);function Ko(...t){let e=QT;for(const n of t)e=e.insert(n.key,n);return e}function YT(t){let e=QT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Is(){return ua()}function XT(){return ua()}function ua(){return new uo(t=>t.toString(),(t,e)=>t.isEqual(e))}const gD=new Ve(K.comparator),yD=new lt(K.comparator);function se(...t){let e=yD;for(const n of t)e=e.add(n);return e}const vD=new lt(ce);function _D(){return vD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:oc(e)?"-0":e}}function JT(t){return{integerValue:""+t}}function wD(t,e){return QN(e)?JT(e):jm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(){this._=void 0}}function xD(t,e,n){return t instanceof Ba?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&bm(i)&&(i=Am(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ki?e1(t,e):t instanceof Qi?t1(t,e):function(s,i){const o=ZT(s,i),a=j0(o)+j0(s.Pe);return zf(o)&&zf(s.Pe)?JT(a):jm(s.serializer,a)}(t,e)}function ED(t,e,n){return t instanceof Ki?e1(t,e):t instanceof Qi?t1(t,e):n}function ZT(t,e){return t instanceof uc?function(r){return zf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ba extends Yc{}class Ki extends Yc{constructor(e){super(),this.elements=e}}function e1(t,e){const n=n1(e);for(const r of t.elements)n.some(s=>Nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Qi extends Yc{constructor(e){super(),this.elements=e}}function t1(t,e){let n=n1(e);for(const r of t.elements)n=n.filter(s=>!Nn(s,r));return{arrayValue:{values:n}}}class uc extends Yc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function j0(t){return Le(t.integerValue||t.doubleValue)}function n1(t){return Rm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){this.field=e,this.transform=n}}function TD(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ki&&s instanceof Ki||r instanceof Qi&&s instanceof Qi?Wi(r.elements,s.elements,Nn):r instanceof uc&&s instanceof uc?Nn(r.Pe,s.Pe):r instanceof Ba&&s instanceof Ba}(t.transform,e.transform)}class SD{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xc{}function r1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new i1(t.key,_n.none()):new sl(t.key,t.data,_n.none());{const n=t.data,r=jt.empty();let s=new lt(ot.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new as(t.key,r,new qt(s.toArray()),_n.none())}}function ID(t,e,n){t instanceof sl?function(s,i,o){const a=s.value.clone(),u=M0(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof as?function(s,i,o){if(!xu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=M0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(s1(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ca(t,e,n,r){return t instanceof sl?function(i,o,a,u){if(!xu(i.precondition,o))return a;const c=i.value.clone(),d=L0(i.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof as?function(i,o,a,u){if(!xu(i.precondition,o))return a;const c=L0(i.fieldTransforms,u,o),d=o.data;return d.setAll(s1(i)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return xu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function PD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=ZT(r.transform,s||null);i!=null&&(n===null&&(n=jt.empty()),n.set(r.field,i))}return n||null}function O0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wi(r,s,(i,o)=>TD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sl extends Xc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class as extends Xc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function s1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function M0(t,e,n){const r=new Map;me(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,ED(o,a,n[s]))}return r}function L0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,xD(i,o,e))}return r}class i1 extends Xc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class CD extends Xc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&ID(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=XT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=r1(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&Wi(this.mutations,e.mutations,(n,r)=>O0(n,r))&&Wi(this.baseMutations,e.baseMutations,(n,r)=>O0(n,r))}}class Mm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){me(e.mutations.length===r.length);let s=function(){return gD}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Mm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze,oe;function RD(t){switch(t){default:return Z();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function o1(t){if(t===void 0)return or("GRPC error has no .code"),F.UNKNOWN;switch(t){case ze.OK:return F.OK;case ze.CANCELLED:return F.CANCELLED;case ze.UNKNOWN:return F.UNKNOWN;case ze.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case ze.INTERNAL:return F.INTERNAL;case ze.UNAVAILABLE:return F.UNAVAILABLE;case ze.UNAUTHENTICATED:return F.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case ze.NOT_FOUND:return F.NOT_FOUND;case ze.ALREADY_EXISTS:return F.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return F.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case ze.ABORTED:return F.ABORTED;case ze.OUT_OF_RANGE:return F.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return F.UNIMPLEMENTED;case ze.DATA_LOSS:return F.DATA_LOSS;default:return Z()}}(oe=ze||(ze={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ND(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DD=new bs([4294967295,4294967295],0);function F0(t){const e=ND().encode(t),n=new AT;return n.update(e),new Uint8Array(n.digest())}function U0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new bs([n,r],0),new bs([s,i],0)]}class Lm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qo(`Invalid padding: ${n}`);if(r<0)throw new Qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=bs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(bs.fromNumber(r)));return s.compare(DD)===1&&(s=new bs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=F0(e),[r,s]=U0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Lm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=F0(e),[r,s]=U0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Jc(ee.min(),s,new Ve(ce),ar(),se())}}class il{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new il(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class a1{constructor(e,n){this.targetId=e,this.me=n}}class l1{constructor(e,n,r=ct.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class B0{constructor(){this.fe=0,this.ge=$0(),this.pe=ct.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new il(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=$0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class VD{constructor(e){this.Le=e,this.Be=new Map,this.ke=ar(),this.qe=z0(),this.Qe=new Ve(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Hf(i))if(r===0){const o=new K(i.path);this.Ue(n,o,xt.newNoDocument(o,ee.min()))}else me(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Us(r).toUint8Array()}catch(u){if(u instanceof FT)return Hi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Lm(o,s,i)}catch(u){return Hi(u instanceof Qo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Hf(a.target)){const u=new K(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,xt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=se();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Jc(e,n,this.Qe,this.ke,r);return this.ke=ar(),this.qe=z0(),this.Qe=new Ve(ce),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new B0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new lt(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new B0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function z0(){return new Ve(K.comparator)}function $0(){return new Ve(K.comparator)}const jD={asc:"ASCENDING",desc:"DESCENDING"},OD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},MD={and:"AND",or:"OR"};class LD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qf(t,e){return t.useProto3Json||qc(e)?e:{value:e}}function cc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function u1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function FD(t,e){return cc(t,e.toTimestamp())}function An(t){return me(!!t),ee.fromTimestamp(function(n){const r=Jr(n);return new Ke(r.seconds,r.nanos)}(t))}function Fm(t,e){return Gf(t,e).canonicalString()}function Gf(t,e){const n=function(s){return new be(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function c1(t){const e=be.fromString(t);return me(m1(e)),e}function Kf(t,e){return Fm(t.databaseId,e.path)}function fd(t,e){const n=c1(e);if(n.get(1)!==t.databaseId.projectId)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(d1(n))}function h1(t,e){return Fm(t.databaseId,e)}function UD(t){const e=c1(t);return e.length===4?be.emptyPath():d1(e)}function Qf(t){return new be(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function d1(t){return me(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function H0(t,e,n){return{name:Kf(t,e),fields:n.value.mapValue.fields}}function BD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,d){return c.useProto3Json?(me(d===void 0||typeof d=="string"),ct.fromBase64String(d||"")):(me(d===void 0||d instanceof Buffer||d instanceof Uint8Array),ct.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?F.UNKNOWN:o1(c.code);return new G(d,c.message||"")}(o);n=new l1(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=fd(t,r.document.name),i=An(r.document.updateTime),o=r.document.createTime?An(r.document.createTime):ee.min(),a=new jt({mapValue:{fields:r.document.fields}}),u=xt.newFoundDocument(s,i,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Eu(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=fd(t,r.document),i=r.readTime?An(r.readTime):ee.min(),o=xt.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Eu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=fd(t,r.document),i=r.removedTargetIds||[];n=new Eu([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new AD(s,i),a=r.targetId;n=new a1(a,o)}}return n}function zD(t,e){let n;if(e instanceof sl)n={update:H0(t,e.key,e.value)};else if(e instanceof i1)n={delete:Kf(t,e.key)};else if(e instanceof as)n={update:H0(t,e.key,e.data),updateMask:XD(e.fieldMask)};else{if(!(e instanceof CD))return Z();n={verify:Kf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ba)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Ki)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Qi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof uc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:FD(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function $D(t,e){return t&&t.length>0?(me(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?An(s.updateTime):An(i);return o.isEqual(ee.min())&&(o=An(i)),new SD(o,s.transformResults||[])}(n,e))):[]}function HD(t,e){return{documents:[h1(t,e.path)]}}function WD(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=h1(t,s);const i=function(c){if(c.length!==0)return p1(Dn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:oi(m.field),direction:KD(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=qf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function qD(t){let e=UD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){me(r===1);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let i=[];n.where&&(i=function(f){const m=f1(f);return m instanceof Dn&&$T(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(T){return new lc(ai(T.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,qc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){const m=!!f.before,v=f.values||[];return new ac(v,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,v=f.values||[];return new ac(v,m)}(n.endAt)),cD(e,s,o,i,a,"F",u,c)}function GD(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function f1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ai(n.unaryFilter.field);return qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ai(n.unaryFilter.field);return qe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ai(n.unaryFilter.field);return qe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ai(n.unaryFilter.field);return qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return qe.create(ai(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(r=>f1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function KD(t){return jD[t]}function QD(t){return OD[t]}function YD(t){return MD[t]}function oi(t){return{fieldPath:t.canonicalString()}}function ai(t){return ot.fromServerFormat(t.fieldPath)}function p1(t){return t instanceof qe?function(n){if(n.op==="=="){if(A0(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NAN"}};if(b0(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(A0(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NAN"}};if(b0(n.value))return{unaryFilter:{field:oi(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:oi(n.field),op:QD(n.op),value:n.value}}}(t):t instanceof Dn?function(n){const r=n.getFilters().map(s=>p1(s));return r.length===1?r[0]:{compositeFilter:{op:YD(n.op),filters:r}}}(t):Z()}function XD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function m1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n,r,s,i=ee.min(),o=ee.min(),a=ct.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Nr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Nr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e){this.ct=e}}function ZD(t){const e=qD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(){this.un=new tV}addToCollectionParentIndex(e,n){return this.un.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(Xr.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(Xr.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class tV{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new lt(be.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new lt(be.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Yi(0)}static kn(){return new Yi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(){this.changes=new uo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,xt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sV{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ca(r.mutation,s,qt.empty(),Ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=Is();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ko();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=ar();const o=ua(),a=function(){return ua()}();return n.forEach((u,c)=>{const d=r.get(c.key);s.has(c.key)&&(d===void 0||d.mutation instanceof as)?i=i.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),ca(d.mutation,c,d.mutation.getFieldMask(),Ke.now())):o.set(c.key,qt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>{var f;return a.set(c,new rV(d,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ua();let s=new Ve((o,a)=>o-a),i=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||qt.empty();d=a.applyToLocalView(c,d),r.set(u,d);const f=(s.get(a.batchId)||se()).add(u);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,f=XT();d.forEach(m=>{if(!i.has(m)){const v=r1(n.get(m),r.get(m));v!==null&&f.set(m,v),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):hD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Is());let a=-1,u=i;return o.next(c=>L.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(d)?L.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,se())).next(d=>({batchId:a,changes:YT(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=Ko();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ko();return this.indexManager.getCollectionParents(e,i).next(a=>L.forEach(a,u=>{const c=function(f,m){return new Gc(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,xt.newInvalidDocument(d)))});let a=Ko();return o.forEach((u,c)=>{const d=i.get(u);d!==void 0&&ca(d.mutation,c,qt.empty(),Ke.now()),Qc(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return L.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:An(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:ZD(s.bundledQuery),readTime:An(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.overlays=new Ve(K.comparator),this.Ir=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Is();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Is(),i=n.length+1,o=new K(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ve((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=i.get(c.largestBatchId);d===null&&(d=Is(),i=i.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Is(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=s)););return L.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new bD(n,r));let i=this.Ir.get(n);i===void 0&&(i=se(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(){this.sessionToken=ct.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(){this.Tr=new lt(Ze.Er),this.dr=new lt(Ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ze(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ze(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new be([])),r=new Ze(n,e),s=new Ze(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new be([])),r=new Ze(n,e),s=new Ze(n,e+1);let i=se();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ze(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ze{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lV{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new lt(Ze.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new kD(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Ze(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ze(n,0),s=new Ze(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(ce);return n.forEach(s=>{const i=new Ze(s,0),o=new Ze(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new Ze(new K(i),0);let a=new lt(ce);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.wr)),!0)},o),L.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){me(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(n.mutations,s=>{const i=new Ze(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ze(n,0),s=this.br.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uV{constructor(e){this.Mr=e,this.docs=function(){return new Ve(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():xt.newInvalidDocument(n))}getEntries(e,n){let r=ar();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():xt.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ar();const o=n.path,a=new K(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||WN(HN(d),r)<=0||(s.has(d.key)||Qc(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new cV(this)}getSize(e){return L.resolve(this.size)}}class cV extends nV{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hV{constructor(e){this.persistence=e,this.Nr=new uo(n=>Nm(n),Dm),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Um,this.targetCount=0,this.kr=Yi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),L.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Yi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Kn(n),L.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dV{constructor(e,n){this.qr={},this.overlays={},this.Qr=new km(0),this.Kr=!1,this.Kr=!0,this.$r=new aV,this.referenceDelegate=e(this),this.Ur=new hV(this),this.indexManager=new eV,this.remoteDocumentCache=function(s){return new uV(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new JD(n),this.Gr=new iV(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new oV,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new lV(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new fV(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class fV extends GN{constructor(e){super(),this.currentSequenceNumber=e}}class Bm{constructor(e){this.persistence=e,this.Jr=new Um,this.Yr=null}static Zr(e){return new Bm(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{const s=K.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return L.or([()=>L.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=se(),s=se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new zm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Xb()?8:KN(Tt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new pV;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Lo()<=ie.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",ii(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(Lo()<=ie.DEBUG&&W("QueryEngine","Query:",ii(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Lo()<=ie.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",ii(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(n))):L.resolve())}Yi(e,n){if(V0(n))return L.resolve(null);let r=bn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Wf(n,null,"F"),r=bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=se(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,Wf(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,s){return V0(n)||s.isEqual(ee.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?L.resolve(null):(Lo()<=ie.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ii(n)),this.rs(e,o,n,$N(s,-1)).next(a=>a))})}ts(e,n){let r=new lt(KT(e));return n.forEach((s,i)=>{Qc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Lo()<=ie.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",ii(n)),this.Ji.getDocumentsMatchingQuery(e,n,Xr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ve(ce),this._s=new uo(i=>Nm(i),Dm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new sV(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function yV(t,e,n,r){return new gV(t,e,n,r)}async function g1(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=se();for(const c of s){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of i){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function vV(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const f=c.batch,m=f.keys();let v=L.resolve();return m.forEach(T=>{v=v.next(()=>d.getEntry(u,T)).next(x=>{const P=c.docVersions.get(T);me(P!==null),x.version.compareTo(P)<0&&(f.applyToRemoteDocument(x,c),x.isValidDocument()&&(x.setReadTime(c.commitVersion),d.addEntry(x)))})}),v.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function y1(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function _V(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((d,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,d.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,d.addedDocuments,f)));let v=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(ct.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):d.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(d.resumeToken,r)),s=s.insert(f,v),function(x,P,E){return x.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,v,d)&&a.push(n.Ur.updateTargetData(i,v))});let u=ar(),c=se();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),a.push(wV(i,o,e.documentUpdates).next(d=>{u=d.Ps,c=d.Is})),!r.isEqual(ee.min())){const d=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(d)}return L.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.os=s,i))}function wV(t,e,n){let r=se(),s=se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ar();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function xV(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function EV(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Nr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Yf(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!rl(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function W0(t,e,n){const r=te(t);let s=ee.min(),i=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const f=te(u),m=f._s.get(d);return m!==void 0?L.resolve(f.os.get(m)):f.Ur.getTargetData(c,d)}(r,o,bn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:se())).next(a=>(TV(r,fD(e),a),{documents:a,Ts:i})))}function TV(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class q0{constructor(){this.activeTargetIds=_D()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class SV{constructor(){this.so=new q0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new q0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl=null;function pd(){return Xl===null?Xl=function(){return 268435456+Math.round(2147483648*Math.random())}():Xl++,"0x"+Xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yt="WebChannelConnection";class kV extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=pd(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,u,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,u,c,s).then(d=>(W("RestConnection",`Received RPC '${n}' ${a}: `,d),d),d=>{throw Hi("RestConnection",`RPC '${n}' ${a} failed with error: `,d,"url: ",u,"request:",s),d})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+lo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=PV[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=pd();return new Promise((o,a)=>{const u=new RT;u.setWithCredentials(!0),u.listenOnce(NT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _u.NO_ERROR:const d=u.getResponseJson();W(yt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(d)),o(d);break;case _u.TIMEOUT:W(yt,`RPC '${e}' ${i} timed out`),a(new G(F.DEADLINE_EXCEEDED,"Request time out"));break;case _u.HTTP_ERROR:const f=u.getStatus();if(W(yt,`RPC '${e}' ${i} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const v=m==null?void 0:m.error;if(v&&v.status&&v.message){const T=function(P){const E=P.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(E)>=0?E:F.UNKNOWN}(v.status);a(new G(T,v.message))}else a(new G(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new G(F.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{W(yt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);W(yt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=pd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=jT(),a=VT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");W(yt,`Creating RPC '${e}' stream ${s}: ${d}`,u);const f=o.createWebChannel(d,u);let m=!1,v=!1;const T=new CV({Io:P=>{v?W(yt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(m||(W(yt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),W(yt,`RPC '${e}' stream ${s} sending:`,P),f.send(P))},To:()=>f.close()}),x=(P,E,y)=>{P.listen(E,w=>{try{y(w)}catch(R){setTimeout(()=>{throw R},0)}})};return x(f,Go.EventType.OPEN,()=>{v||(W(yt,`RPC '${e}' stream ${s} transport opened.`),T.yo())}),x(f,Go.EventType.CLOSE,()=>{v||(v=!0,W(yt,`RPC '${e}' stream ${s} transport closed`),T.So())}),x(f,Go.EventType.ERROR,P=>{v||(v=!0,Hi(yt,`RPC '${e}' stream ${s} transport errored:`,P),T.So(new G(F.UNAVAILABLE,"The operation could not be completed")))}),x(f,Go.EventType.MESSAGE,P=>{var E;if(!v){const y=P.data[0];me(!!y);const w=y,R=w.error||((E=w[0])===null||E===void 0?void 0:E.error);if(R){W(yt,`RPC '${e}' stream ${s} received error:`,R);const V=R.status;let O=function(C){const k=ze[C];if(k!==void 0)return o1(k)}(V),I=R.message;O===void 0&&(O=F.INTERNAL,I="Unknown error status: "+V+" with message "+R.message),v=!0,T.So(new G(O,I)),f.close()}else W(yt,`RPC '${e}' stream ${s} received:`,y),T.bo(y)}}),x(a,DT.STAT_EVENT,P=>{P.stat===Uf.PROXY?W(yt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Uf.NOPROXY&&W(yt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{T.wo()},0),T}}function md(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t){return new LD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _1{constructor(e,n,r,s,i,o,a,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new v1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new G(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class bV extends _1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=BD(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?An(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Qf(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=Hf(u)?{documents:HD(i,u)}:{query:WD(i,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=u1(i,o.resumeToken);const c=qf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=cc(i,o.snapshotVersion.toTimestamp());const c=qf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=GD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Qf(this.serializer),n.removeTarget=e,this.a_(n)}}class AV extends _1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=$D(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Qf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>zD(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Gf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Gf(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class NV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(or(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ks(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=te(u);c.L_.add(4),await ol(c),c.q_.set("Unknown"),c.L_.delete(4),await eh(c)}(this))})}),this.q_=new NV(r,s)}}async function eh(t){if(Ks(t))for(const e of t.B_)await e(!0)}async function ol(t){for(const e of t.B_)await e(!1)}function w1(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),qm(n)?Wm(n):co(n).r_()&&Hm(n,e))}function $m(t,e){const n=te(t),r=co(n);n.N_.delete(e),r.r_()&&x1(n,e),n.N_.size===0&&(r.r_()?r.o_():Ks(n)&&n.q_.set("Unknown"))}function Hm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}co(t).A_(e)}function x1(t,e){t.Q_.xe(e),co(t).R_(e)}function Wm(t){t.Q_=new VD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),co(t).start(),t.q_.v_()}function qm(t){return Ks(t)&&!co(t).n_()&&t.N_.size>0}function Ks(t){return te(t).L_.size===0}function E1(t){t.Q_=void 0}async function VV(t){t.q_.set("Online")}async function jV(t){t.N_.forEach((e,n)=>{Hm(t,e)})}async function OV(t,e){E1(t),qm(t)?(t.q_.M_(e),Wm(t)):t.q_.set("Unknown")}async function MV(t,e,n){if(t.q_.set("Online"),e instanceof l1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hc(t,r)}else if(e instanceof Eu?t.Q_.Ke(e):e instanceof a1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await y1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=i.N_.get(c);d&&i.N_.set(c,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const d=i.N_.get(u);if(!d)return;i.N_.set(u,d.withResumeToken(ct.EMPTY_BYTE_STRING,d.snapshotVersion)),x1(i,u);const f=new Nr(d.target,u,c,d.sequenceNumber);Hm(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await hc(t,r)}}async function hc(t,e,n){if(!rl(e))throw e;t.L_.add(1),await ol(t),t.q_.set("Offline"),n||(n=()=>y1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await eh(t)})}function T1(t,e){return e().catch(n=>hc(t,n,e))}async function th(t){const e=te(t),n=Zr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;LV(e);)try{const s=await xV(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,FV(e,s)}catch(s){await hc(e,s)}S1(e)&&I1(e)}function LV(t){return Ks(t)&&t.O_.length<10}function FV(t,e){t.O_.push(e);const n=Zr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function S1(t){return Ks(t)&&!Zr(t).n_()&&t.O_.length>0}function I1(t){Zr(t).start()}async function UV(t){Zr(t).p_()}async function BV(t){const e=Zr(t);for(const n of t.O_)e.m_(n.mutations)}async function zV(t,e,n){const r=t.O_.shift(),s=Mm.from(r,e,n);await T1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await th(t)}async function $V(t,e){e&&Zr(t).V_&&await async function(r,s){if(function(o){return RD(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Zr(r).s_(),await T1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await th(r)}}(t,e),S1(t)&&I1(t)}async function K0(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Ks(n);n.L_.add(3),await ol(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await eh(n)}async function HV(t,e){const n=te(t);e?(n.L_.delete(2),await eh(n)):e||(n.L_.add(2),await ol(n),n.q_.set("Unknown"))}function co(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new bV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:VV.bind(null,t),Ro:jV.bind(null,t),mo:OV.bind(null,t),d_:MV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),qm(t)?Wm(t):t.q_.set("Unknown")):(await t.K_.stop(),E1(t))})),t.K_}function Zr(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new AV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:UV.bind(null,t),mo:$V.bind(null,t),f_:BV.bind(null,t),g_:zV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await th(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Hr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Gm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(t,e){if(or("AsyncQueue",`${e}: ${t}`),rl(t))return new G(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=Ko(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new Vi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Vi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q0{constructor(){this.W_=new Ve(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Xi{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Xi(e,n,Vi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Kc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class qV{constructor(){this.queries=Y0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=Y0(),i.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new G(F.ABORTED,"Firestore shutting down"))}}function Y0(){return new uo(t=>GT(t),Kc)}async function GV(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new WV,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Km(o,`Initialization of query '${ii(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Qm(n)}async function KV(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function QV(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Qm(n)}function YV(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Qm(t){t.Y_.forEach(e=>{e.next()})}var Xf,X0;(X0=Xf||(Xf={})).ea="default",X0.Cache="cache";class XV{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Xi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Xi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Xf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.key=e}}class C1{constructor(e){this.key=e}}class JV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=KT(e),this.Ra=new Vi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Q0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,f)=>{const m=s.get(d),v=Qc(this.query,f)?f:null,T=!!m&&this.mutatedKeys.has(m.key),x=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let P=!1;m&&v?m.data.isEqual(v.data)?T!==x&&(r.track({type:3,doc:v}),P=!0):this.ga(m,v)||(r.track({type:2,doc:v}),P=!0,(u&&this.Aa(v,u)>0||c&&this.Aa(v,c)<0)&&(a=!0)):!m&&v?(r.track({type:0,doc:v}),P=!0):m&&!v&&(r.track({type:1,doc:m}),P=!0,(u||c)&&(a=!0)),P&&(v?(o=o.add(v),i=x?i.add(d):i.delete(d)):(o=o.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((d,f)=>function(v,T){const x=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return x(v)-x(T)}(d.type,f.type)||this.Aa(d.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new Xi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Q0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new C1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new P1(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Xi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ZV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class ej{constructor(e){this.key=e,this.va=!1}}class tj{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new uo(a=>GT(a),Kc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ve(K.comparator),this.Na=new Map,this.La=new Um,this.Ba={},this.ka=new Map,this.qa=Yi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function nj(t,e,n=!0){const r=D1(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await k1(r,e,n,!0),s}async function rj(t,e){const n=D1(t);await k1(n,e,!0,!1)}async function k1(t,e,n,r){const s=await EV(t.localStore,bn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await sj(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&w1(t.remoteStore,s),a}async function sj(t,e,n,r,s){t.Ka=(f,m,v)=>async function(x,P,E,y){let w=P.view.ma(E);w.ns&&(w=await W0(x.localStore,P.query,!1).then(({documents:I})=>P.view.ma(I,w)));const R=y&&y.targetChanges.get(P.targetId),V=y&&y.targetMismatches.get(P.targetId)!=null,O=P.view.applyChanges(w,x.isPrimaryClient,R,V);return Z0(x,P.targetId,O.wa),O.snapshot}(t,f,m,v);const i=await W0(t.localStore,e,!0),o=new JV(e,i.Ts),a=o.ma(i.documents),u=il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);Z0(t,n,c.wa);const d=new ZV(e,n,o);return t.Fa.set(e,d),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function ij(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Kc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Yf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&$m(r.remoteStore,s.targetId),Jf(r,s.targetId)}).catch(nl)):(Jf(r,s.targetId),await Yf(r.localStore,s.targetId,!0))}async function oj(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$m(n.remoteStore,r.targetId))}async function aj(t,e,n){const r=pj(t);try{const s=await function(o,a){const u=te(o),c=Ke.now(),d=a.reduce((v,T)=>v.add(T.key),se());let f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let T=ar(),x=se();return u.cs.getEntries(v,d).next(P=>{T=P,T.forEach((E,y)=>{y.isValidDocument()||(x=x.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,T)).next(P=>{f=P;const E=[];for(const y of a){const w=PD(y,f.get(y.key).overlayedDocument);w!=null&&E.push(new as(y.key,w,UT(w.value.mapValue),_n.exists(!0)))}return u.mutationQueue.addMutationBatch(v,c,E,a)}).next(P=>{m=P;const E=P.applyToLocalDocumentSet(f,x);return u.documentOverlayCache.saveOverlays(v,P.batchId,E)})}).then(()=>({batchId:m.batchId,changes:YT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ve(ce)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await al(r,s.changes),await th(r.remoteStore)}catch(s){const i=Km(s,"Failed to persist write");n.reject(i)}}async function b1(t,e){const n=te(t);try{const r=await _V(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(me(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?me(o.va):s.removedDocuments.size>0&&(me(o.va),o.va=!1))}),await al(n,r,e)}catch(r){await nl(r)}}function J0(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=te(o);u.onlineState=a;let c=!1;u.queries.forEach((d,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&Qm(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function lj(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ve(K.comparator);o=o.insert(i,xt.newNoDocument(i,ee.min()));const a=se().add(i),u=new Jc(ee.min(),new Map,new Ve(ce),o,a);await b1(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Ym(r)}else await Yf(r.localStore,e,!1).then(()=>Jf(r,e,n)).catch(nl)}async function uj(t,e){const n=te(t),r=e.batch.batchId;try{const s=await vV(n.localStore,e);R1(n,r,null),A1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await al(n,s)}catch(s){await nl(s)}}async function cj(t,e,n){const r=te(t);try{const s=await function(o,a){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(me(f!==null),d=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);R1(r,e,n),A1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await al(r,s)}catch(s){await nl(s)}}function A1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function R1(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Jf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||N1(t,r)})}function N1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&($m(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ym(t))}function Z0(t,e,n){for(const r of n)r instanceof P1?(t.La.addReference(r.key,e),hj(t,r)):r instanceof C1?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||N1(t,r.key)):Z()}function hj(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ym(t))}function Ym(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(be.fromString(e)),r=t.qa.next();t.Na.set(r,new ej(n)),t.Oa=t.Oa.insert(n,r),w1(t.remoteStore,new Nr(bn(Vm(n.path)),r,"TargetPurposeLimboResolution",km.oe))}}async function al(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=zm.Wi(u.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,c){const d=te(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>L.forEach(c,m=>L.forEach(m.$i,v=>d.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>L.forEach(m.Ui,v=>d.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!rl(f))throw f;W("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const v=d.os.get(m),T=v.snapshotVersion,x=v.withLastLimboFreeSnapshotVersion(T);d.os=d.os.insert(m,x)}}}(r.localStore,i))}async function dj(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await g1(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(u=>{u.reject(new G(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await al(n,r.hs)}}function fj(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let s=se();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function D1(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=b1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=fj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lj.bind(null,e),e.Ca.d_=QV.bind(null,e.eventManager),e.Ca.$a=YV.bind(null,e.eventManager),e}function pj(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=cj.bind(null,e),e}class dc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return yV(this.persistence,new mV,e.initialUser,this.serializer)}Ga(e){return new dV(Bm.Zr,this.serializer)}Wa(e){return new SV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}dc.provider={build:()=>new dc};class Zf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>J0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=dj.bind(null,this.syncEngine),await HV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new qV}()}createDatastore(e){const n=Zc(e.databaseInfo.databaseId),r=function(i){return new kV(i)}(e.databaseInfo);return function(i,o,a,u){return new RV(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new DV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>J0(this.syncEngine,n,0),function(){return G0.D()?new G0:new IV}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,d){const f=new tj(s,i,o,a,u,c);return d&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ol(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Zf.provider={build:()=>new Zf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=_t.UNAUTHENTICATED,this.clientId=MT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Hr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Km(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gd(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await g1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function e_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await yj(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>K0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>K0(e.remoteStore,s)),t._onlineComponents=e}async function yj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await gd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Hi("Error using user provided cache. Falling back to memory cache: "+n),await gd(t,new dc)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await gd(t,new dc);return t._offlineComponents}async function V1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await e_(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await e_(t,new Zf))),t._onlineComponents}function vj(t){return V1(t).then(e=>e.syncEngine)}async function _j(t){const e=await V1(t),n=e.eventManager;return n.onListen=nj.bind(null,e.syncEngine),n.onUnlisten=ij.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=rj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=oj.bind(null,e.syncEngine),n}function wj(t,e,n={}){const r=new Hr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const d=new mj({next:m=>{d.Za(),o.enqueueAndForget(()=>KV(i,f));const v=m.docs.has(a);!v&&m.fromCache?c.reject(new G(F.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?c.reject(new G(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new XV(Vm(a.path),d,{includeMetadataChanges:!0,_a:!0});return GV(i,f)}(await _j(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(t,e,n){if(!n)throw new G(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function xj(t,e,n,r){if(e===!0&&r===!0)throw new G(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function n_(t){if(!K.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function r_(t){if(K.isDocumentKey(t))throw new G(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function es(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xm(t);throw new G(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}xj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=j1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new G(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nh{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new s_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new s_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new VN;switch(r.type){case"firstParty":return new LN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=t_.get(n);r&&(W("ComponentProvider","Removing Datastore"),t_.delete(n),r.terminate())}(this),Promise.resolve()}}function Ej(t,e,n,r={}){var s;const i=(t=es(t,nh))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Hi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=_t.MOCK_USER;else{a=HE(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new _t(c)}t._authCredentials=new jN(new OT(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jm(this.firestore,e,this._query)}}class Ut{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Wr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ut(this.firestore,e,this._key)}}class Wr extends Jm{constructor(e,n,r){super(e,n,Vm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ut(this.firestore,null,new K(e))}withConverter(e){return new Wr(this.firestore,e,this._path)}}function Tj(t,e,...n){if(t=Qe(t),O1("collection","path",e),t instanceof nh){const r=be.fromString(e,...n);return r_(r),new Wr(t,null,r)}{if(!(t instanceof Ut||t instanceof Wr))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return r_(r),new Wr(t.firestore,null,r)}}function zs(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=MT.newId()),O1("doc","path",e),t instanceof nh){const r=be.fromString(e,...n);return n_(r),new Ut(t,null,new K(r))}{if(!(t instanceof Ut||t instanceof Wr))throw new G(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(be.fromString(e,...n));return n_(r),new Ut(t.firestore,t instanceof Wr?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new v1(this,"async_queue_retry"),this.Vu=()=>{const r=md();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=md();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=md();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Hr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!rl(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw or("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Gm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ll extends nh{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new i_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new i_(e),this._firestoreClient=void 0,await e}}}function Sj(t,e){const n=typeof t=="object"?t:mm(),r=typeof t=="string"?t:"(default)",s=zc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=BE("firestore");i&&Ej(s,...i)}return s}function M1(t){if(t._terminated)throw new G(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Ij(t),t._firestoreClient}function Ij(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,c,d){return new XN(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,j1(d.experimentalLongPollingOptions),d.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new gj(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Ji(ct.fromBase64String(e))}catch(n){throw new G(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Ji(ct.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ot(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pj=/^__.*__$/;class Cj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new as(e,this.data,this.fieldMask,n,this.fieldTransforms):new sl(e,this.data,n,this.fieldTransforms)}}class L1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new as(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function F1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class sh{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new sh(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return fc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(F1(this.Cu)&&Pj.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class kj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zc(e)}Qu(e,n,r,s=!1){return new sh({Cu:e,methodName:n,qu:r,path:ot.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tg(t){const e=t._freezeSettings(),n=Zc(t._databaseId);return new kj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function U1(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);ig("Data must be an object, but it was:",o,r);const a=z1(r,o);let u,c;if(i.merge)u=new qt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const d=[];for(const f of i.mergeFields){const m=ep(e,f,n);if(!o.contains(m))throw new G(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);H1(d,m)||d.push(m)}u=new qt(d),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new Cj(new jt(a),u,c)}class ih extends ho{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ih}}function B1(t,e,n){return new sh({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ng extends ho{_toFieldTransform(e){return new Om(e.path,new Ba)}isEqual(e){return e instanceof ng}}class rg extends ho{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=B1(this,e,!0),r=this.Ku.map(i=>fo(i,n)),s=new Ki(r);return new Om(e.path,s)}isEqual(e){return e instanceof rg&&zi(this.Ku,e.Ku)}}class sg extends ho{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=B1(this,e,!0),r=this.Ku.map(i=>fo(i,n)),s=new Qi(r);return new Om(e.path,s)}isEqual(e){return e instanceof sg&&zi(this.Ku,e.Ku)}}function bj(t,e,n,r){const s=t.Qu(1,e,n);ig("Data must be an object, but it was:",s,r);const i=[],o=jt.empty();Gs(r,(u,c)=>{const d=og(e,u,n);c=Qe(c);const f=s.Nu(d);if(c instanceof ih)i.push(d);else{const m=fo(c,f);m!=null&&(i.push(d),o.set(d,m))}});const a=new qt(i);return new L1(o,a,s.fieldTransforms)}function Aj(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[ep(e,r,n)],u=[s];if(i.length%2!=0)throw new G(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(ep(e,i[m])),u.push(i[m+1]);const c=[],d=jt.empty();for(let m=a.length-1;m>=0;--m)if(!H1(c,a[m])){const v=a[m];let T=u[m];T=Qe(T);const x=o.Nu(v);if(T instanceof ih)c.push(v);else{const P=fo(T,x);P!=null&&(c.push(v),d.set(v,P))}}const f=new qt(c);return new L1(d,f,o.fieldTransforms)}function fo(t,e){if($1(t=Qe(t)))return ig("Unsupported field value:",e,t),z1(t,e);if(t instanceof ho)return function(r,s){if(!F1(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=fo(a,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wD(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:cc(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:cc(s.serializer,i)}}if(r instanceof Zm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ji)return{bytesValue:u1(s.serializer,r._byteString)};if(r instanceof Ut){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof eg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return jm(a.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Xm(r)}`)}(t,e)}function z1(t,e){const n={};return LT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gs(t,(r,s)=>{const i=fo(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function $1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Zm||t instanceof Ji||t instanceof Ut||t instanceof ho||t instanceof eg)}function ig(t,e,n){if(!$1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Xm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ep(t,e,n){if((e=Qe(e))instanceof rh)return e._internalPath;if(typeof e=="string")return og(t,e);throw fc("Field path arguments must be of type string or ",t,!1,void 0,n)}const Rj=new RegExp("[~\\*/\\[\\]]");function og(t,e,n){if(e.search(Rj)>=0)throw fc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new rh(...e.split("."))._internalPath}catch{throw fc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function fc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new G(F.INVALID_ARGUMENT,a+t+u)}function H1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ut(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Nj(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(q1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Nj extends W1{data(){return super.data()}}function q1(t,e){return typeof e=="string"?og(t,e):e instanceof rh?e._internalPath:e._delegate._internalPath}class Dj{convertValue(e,n="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Gs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Le(o.doubleValue));return new eg(i)}convertGeoPoint(e){return new Zm(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Am(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(La(e));default:return null}}convertTimestamp(e){const n=Jr(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=be.fromString(e);me(m1(r));const s=new Fa(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||or(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class K1 extends W1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new jj(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(q1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class jj extends K1{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oh(t){t=es(t,Ut);const e=es(t.firestore,ll);return wj(M1(e),t._key).then(n=>Lj(e,t,n))}class Oj extends Dj{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ji(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ut(this.firestore,null,n)}}function Q1(t,e,n){t=es(t,Ut);const r=es(t.firestore,ll),s=G1(t.converter,e,n);return ag(r,[U1(tg(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,_n.none())])}function Y1(t,e,n,...r){t=es(t,Ut);const s=es(t.firestore,ll),i=tg(s);let o;return o=typeof(e=Qe(e))=="string"||e instanceof rh?Aj(i,"updateDoc",t._key,e,n,r):bj(i,"updateDoc",t._key,e),ag(s,[o.toMutation(t._key,_n.exists(!0))])}function Mj(t,e){const n=es(t.firestore,ll),r=zs(t),s=G1(t.converter,e);return ag(n,[U1(tg(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,_n.exists(!1))]).then(()=>r)}function ag(t,e){return function(r,s){const i=new Hr;return r.asyncQueue.enqueueAndForget(async()=>aj(await vj(r),s,i)),i.promise}(M1(t),e)}function Lj(t,e,n){const r=n.docs.get(e._key),s=new Oj(t);return new K1(t,s,e._key,r,new Vj(n.hasPendingWrites,n.fromCache),e.converter)}function Tu(){return new ng("serverTimestamp")}function Fj(...t){return new rg("arrayUnion",t)}function Uj(...t){return new sg("arrayRemove",t)}(function(e,n=!0){(function(s){lo=s})(qs),Os(new Yr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new ll(new ON(r.getProvider("auth-internal")),new UN(r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fa(c.options.projectId,d)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Cn(S0,"4.7.3",e),Cn(S0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X1="firebasestorage.googleapis.com",Bj="storageBucket",zj=2*60*1e3,$j=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends jn{constructor(e,n,r=0){super(yd(e),`Firebase Storage: ${n} (${yd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vn||(Vn={}));function yd(t){return"storage/"+t}function Hj(){const t="An unknown error occurred, please check the error payload for server response.";return new Mn(Vn.UNKNOWN,t)}function Wj(){return new Mn(Vn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qj(){return new Mn(Vn.CANCELED,"User canceled the upload/download.")}function Gj(t){return new Mn(Vn.INVALID_URL,"Invalid URL '"+t+"'.")}function Kj(t){return new Mn(Vn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function o_(t){return new Mn(Vn.INVALID_ARGUMENT,t)}function J1(){return new Mn(Vn.APP_DELETED,"The Firebase app was deleted.")}function Qj(t){return new Mn(Vn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=mn.makeFromUrl(e,n)}catch{return new mn(e,"")}if(r.path==="")return r;throw Kj(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",v=new RegExp(`^https?://${f}/${d}/b/${s}/o${m}`,"i"),T={bucket:1,path:3},x=n===X1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",E=new RegExp(`^https?://${x}/${s}/${P}`,"i"),w=[{regex:a,indices:u,postModify:i},{regex:v,indices:T,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<w.length;R++){const V=w[R],O=V.regex.exec(e);if(O){const I=O[V.indices.bucket];let _=O[V.indices.path];_||(_=""),r=new mn(I,_),V.postModify(r);break}}if(r==null)throw Gj(e);return r}}class Yj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xj(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function d(...P){c||(c=!0,e.apply(null,P))}function f(P){s=setTimeout(()=>{s=null,t(v,u())},P)}function m(){i&&clearTimeout(i)}function v(P,...E){if(c){m();return}if(P){m(),d.call(null,P,...E);return}if(u()||o){m(),d.call(null,P,...E);return}r<64&&(r*=2);let w;a===1?(a=2,w=0):w=(r+Math.random())*1e3,f(w)}let T=!1;function x(P){T||(T=!0,m(),!c&&(s!==null?(P||(a=2),clearTimeout(s),f(0)):P||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,x(!0)},n),x}function Jj(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zj(t){return t!==void 0}function a_(t,e,n,r){if(r<e)throw o_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw o_(`Invalid value for '${t}'. Expected ${n} or less.`)}function eO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var pc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(pc||(pc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,n,r,s,i,o,a,u,c,d,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((v,T)=>{this.resolve_=v,this.reject_=T,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Jl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===pc.NO_ERROR,u=i.getStatus();if(!a||tO(u,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===pc.ABORT;r(!1,new Jl(!1,null,d));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new Jl(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());Zj(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=Hj();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(s.canceled){const u=this.appDelete_?J1():qj();o(u)}else{const u=Wj();o(u)}};this.canceled_?n(!1,new Jl(!1,null,!0)):this.backoffId_=Xj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Jj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function rO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function sO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function iO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function oO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function aO(t,e,n,r,s,i,o=!0){const a=eO(t.urlParams),u=t.url+a,c=Object.assign({},t.headers);return iO(c,e),rO(c,n),sO(c,i),oO(c,r),new nO(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function uO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mc{constructor(e,n){this._service=e,n instanceof mn?this._location=n:this._location=mn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new mc(e,n)}get root(){const e=new mn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uO(this._location.path)}get storage(){return this._service}get parent(){const e=lO(this._location.path);if(e===null)return null;const n=new mn(this._location.bucket,e);return new mc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Qj(e)}}function l_(t,e){const n=e==null?void 0:e[Bj];return n==null?null:mn.makeFromBucketSpec(n,t)}function cO(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:HE(s,t.app.options.projectId))}class hO{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=X1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=zj,this._maxUploadRetryTime=$j,this._requests=new Set,s!=null?this._bucket=mn.makeFromBucketSpec(s,this._host):this._bucket=l_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mn.makeFromBucketSpec(this._url,e):this._bucket=l_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){a_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){a_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new mc(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new Yj(J1());{const o=aO(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const u_="@firebase/storage",c_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="storage";function dO(t=mm(),e){t=Qe(t);const r=zc(t,Z1).getImmediate({identifier:e}),s=BE("storage");return s&&fO(r,...s),r}function fO(t,e,n,r={}){cO(t,e,n,r)}function pO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new hO(n,r,s,e,qs)}function mO(){Os(new Yr(Z1,pO,"PUBLIC").setMultipleInstances(!0)),Cn(u_,c_,""),Cn(u_,c_,"esm2017")}mO();const gO={apiKey:"AIzaSyC2kTYKi-JwDxh7MH2Kdzp1blvWdvMb-4w",authDomain:"valentine-6ccc1.firebaseapp.com",projectId:"valentine-6ccc1",storageBucket:"valentine-6ccc1.appspot.com",messagingSenderId:"160547094369",appId:"1:160547094369:web:4171314829d38c8b5c4f20"},lg=GE(gO),si=NN(lg),yO=new $n,$s=Sj(lg);dO(lg);const eS=A.createContext();function Ln(){return A.useContext(eS)}function vO({children:t}){const[e,n]=A.useState(null),[r,s]=A.useState(!0);async function i(m,v={}){if(!m)return;const T=zs($s,"users",m.uid);(await oh(T)).exists()?await Y1(T,{email:m.email||null,displayName:m.displayName||null,photoURL:m.photoURL||null,lastLoginAt:Tu(),...v}):await Q1(T,{uid:m.uid,email:m.email||null,displayName:m.displayName||null,photoURL:m.photoURL||null,createdAt:Tu(),lastLoginAt:Tu(),...v})}function o(m,v,T){return m2(si,m,v).then(async x=>{if(T!=null&&T.displayName)try{await vT(x.user,{displayName:T.displayName})}catch{}return await i(x.user,T),x})}function a(m,v){return g2(si,m,v).then(async T=>(await i(T.user),T))}function u(){return B2(si,yO).then(async m=>(await i(m.user),m))}function c(){return x2(si)}function d(m){return p2(si,m)}A.useEffect(()=>w2(si,v=>{n(v),s(!1)}),[]);const f={currentUser:e,login:a,signup:o,loginWithGoogle:u,logout:c,resetPassword:d};return h.jsx(eS.Provider,{value:f,children:!r&&t})}const tS=A.createContext();function ul(){return A.useContext(tS)}function _O({children:t}){const{currentUser:e}=Ln(),n=hr(),r=A.useRef(!1),[s,i]=A.useState(()=>{try{const x=e?`cart_${e.uid}`:"cart_guest",P=localStorage.getItem(x);return P?JSON.parse(P):[]}catch{return[]}}),o=x=>x?`cart_${x.uid}`:"cart_guest",a=x=>{try{const P=localStorage.getItem(o(x));i(P?JSON.parse(P):[])}catch(P){console.error("Failed to load cart from local storage",P),i([])}};A.useEffect(()=>{a(e),r.current=!!e},[e]),A.useEffect(()=>{try{localStorage.setItem(o(e),JSON.stringify(s))}catch(x){console.error("Failed to save cart to local storage",x)}},[s,e]);function u(x,P=1,E=""){if(!e){window.confirm("Please log in to add items to your cart. Go to login now?")&&n("/login");return}i(y=>{const w=y.findIndex(R=>R.id===x.id&&R.customText===E);if(w>-1){const R=[...y];return R[w].quantity+=P,R}else return[...y,{...x,quantity:P,customText:E}]})}function c(x,P=""){i(E=>E.filter(y=>!(y.id===x&&y.customText===P)))}function d(x,P,E){E<1||i(y=>y.map(w=>w.id===x&&w.customText===P?{...w,quantity:E}:w))}function f(){i([])}const m=s.reduce((x,P)=>x+P.quantity,0),v=s.reduce((x,P)=>x+P.price*P.quantity,0),T={cartItems:s,addToCart:u,removeFromCart:c,updateQuantity:d,clearCart:f,cartCount:m,cartTotal:v};return h.jsx(tS.Provider,{value:T,children:t})}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),_e=(t,e)=>{const n=A.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:u,...c},d)=>A.createElement("svg",{ref:d,...wO,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${xO(t)}`,a].join(" "),...c},[...e.map(([f,m])=>A.createElement(f,m)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=_e("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nS=_e("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=_e("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=_e("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=_e("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=_e("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=_e("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=_e("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rS=_e("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=_e("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wn=_e("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=_e("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bO=_e("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=_e("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=_e("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=_e("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=_e("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=_e("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=_e("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=_e("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=_e("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=_e("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=_e("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=_e("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=_e("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=_e("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=_e("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),lS=A.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),ah=A.createContext({}),lh=A.createContext(null),uh=typeof document<"u",cg=uh?A.useLayoutEffect:A.useEffect,uS=A.createContext({strict:!1}),hg=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),UO="framerAppearId",cS="data-"+hg(UO);function BO(t,e,n,r){const{visualElement:s}=A.useContext(ah),i=A.useContext(uS),o=A.useContext(lh),a=A.useContext(lS).reducedMotion,u=A.useRef();r=r||i.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=u.current;A.useInsertionEffect(()=>{c&&c.update(n,o)});const d=A.useRef(!!(n[cS]&&!window.HandoffComplete));return cg(()=>{c&&(c.render(),d.current&&c.animationState&&c.animationState.animateChanges())}),A.useEffect(()=>{c&&(c.updateFeatures(),!d.current&&c.animationState&&c.animationState.animateChanges(),d.current&&(d.current=!1,window.HandoffComplete=!0))}),c}function wi(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function zO(t,e,n){return A.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):wi(n)&&(n.current=r))},[e])}function za(t){return typeof t=="string"||Array.isArray(t)}function ch(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const dg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fg=["initial",...dg];function hh(t){return ch(t.animate)||fg.some(e=>za(t[e]))}function hS(t){return!!(hh(t)||t.variants)}function $O(t,e){if(hh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||za(n)?n:void 0,animate:za(r)?r:void 0}}return t.inherit!==!1?e:{}}function HO(t){const{initial:e,animate:n}=$O(t,A.useContext(ah));return A.useMemo(()=>({initial:e,animate:n}),[h_(e),h_(n)])}function h_(t){return Array.isArray(t)?t.join(" "):t}const d_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$a={};for(const t in d_)$a[t]={isEnabled:e=>d_[t].some(n=>!!e[n])};function WO(t){for(const e in t)$a[e]={...$a[e],...t[e]}}const pg=A.createContext({}),dS=A.createContext({}),qO=Symbol.for("motionComponentSymbol");function GO({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&WO(t);function i(a,u){let c;const d={...A.useContext(lS),...a,layoutId:KO(a)},{isStatic:f}=d,m=HO(a),v=r(a,f);if(!f&&uh){m.visualElement=BO(s,v,d,e);const T=A.useContext(dS),x=A.useContext(uS).strict;m.visualElement&&(c=m.visualElement.loadFeatures(d,x,t,T))}return A.createElement(ah.Provider,{value:m},c&&m.visualElement?A.createElement(c,{visualElement:m.visualElement,...d}):null,n(s,a,zO(v,m.visualElement,u),v,f,m.visualElement))}const o=A.forwardRef(i);return o[qO]=s,o}function KO({layoutId:t}){const e=A.useContext(pg).id;return e&&t!==void 0?e+"-"+t:t}function QO(t){function e(r,s={}){return GO(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const YO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mg(t){return typeof t!="string"||t.includes("-")?!1:!!(YO.indexOf(t)>-1||/[A-Z]/.test(t))}const gc={};function XO(t){Object.assign(gc,t)}const cl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qs=new Set(cl);function fS(t,{layout:e,layoutId:n}){return Qs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!gc[t]||t==="opacity")}const Bt=t=>!!(t&&t.getVelocity),JO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ZO=cl.length;function eM(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<ZO;o++){const a=cl[o];if(t[a]!==void 0){const u=JO[a]||a;i+=`${u}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const pS=t=>e=>typeof e=="string"&&e.startsWith(t),mS=pS("--"),tp=pS("var(--"),tM=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,nM=(t,e)=>e&&typeof t=="number"?e.transform(t):t,ts=(t,e,n)=>Math.min(Math.max(n,t),e),Ys={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},ha={...Ys,transform:t=>ts(0,1,t)},Zl={...Ys,default:1},da=t=>Math.round(t*1e5)/1e5,dh=/(-)?([\d]*\.?[\d])+/g,gS=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,rM=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function hl(t){return typeof t=="string"}const dl=t=>({test:e=>hl(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_r=dl("deg"),Rn=dl("%"),Y=dl("px"),sM=dl("vh"),iM=dl("vw"),f_={...Rn,parse:t=>Rn.parse(t)/100,transform:t=>Rn.transform(t*100)},p_={...Ys,transform:Math.round},yS={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,size:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,rotate:_r,rotateX:_r,rotateY:_r,rotateZ:_r,scale:Zl,scaleX:Zl,scaleY:Zl,scaleZ:Zl,skew:_r,skewX:_r,skewY:_r,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:ha,originX:f_,originY:f_,originZ:Y,zIndex:p_,fillOpacity:ha,strokeOpacity:ha,numOctaves:p_};function gg(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let u=!1,c=!1,d=!0;for(const f in e){const m=e[f];if(mS(f)){i[f]=m;continue}const v=yS[f],T=nM(m,v);if(Qs.has(f)){if(u=!0,o[f]=T,!d)continue;m!==(v.default||0)&&(d=!1)}else f.startsWith("origin")?(c=!0,a[f]=T):s[f]=T}if(e.transform||(u||r?s.transform=eM(t.transform,n,d,r):s.transform&&(s.transform="none")),c){const{originX:f="50%",originY:m="50%",originZ:v=0}=a;s.transformOrigin=`${f} ${m} ${v}`}}const yg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vS(t,e,n){for(const r in e)!Bt(e[r])&&!fS(r,n)&&(t[r]=e[r])}function oM({transformTemplate:t},e,n){return A.useMemo(()=>{const r=yg();return gg(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function aM(t,e,n){const r=t.style||{},s={};return vS(s,r,t),Object.assign(s,oM(t,e,n)),t.transformValues?t.transformValues(s):s}function lM(t,e,n){const r={},s=aM(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const uM=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function yc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||uM.has(t)}let _S=t=>!yc(t);function cM(t){t&&(_S=e=>e.startsWith("on")?!yc(e):t(e))}try{cM(require("@emotion/is-prop-valid").default)}catch{}function hM(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(_S(s)||n===!0&&yc(s)||!e&&!yc(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function m_(t,e,n){return typeof t=="string"?t:Y.transform(e+n*t)}function dM(t,e,n){const r=m_(e,t.x,t.width),s=m_(n,t.y,t.height);return`${r} ${s}`}const fM={offset:"stroke-dashoffset",array:"stroke-dasharray"},pM={offset:"strokeDashoffset",array:"strokeDasharray"};function mM(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?fM:pM;t[i.offset]=Y.transform(-r);const o=Y.transform(e),a=Y.transform(n);t[i.array]=`${o} ${a}`}function vg(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:u=0,...c},d,f,m){if(gg(t,c,d,m),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:v,style:T,dimensions:x}=t;v.transform&&(x&&(T.transform=v.transform),delete v.transform),x&&(s!==void 0||i!==void 0||T.transform)&&(T.transformOrigin=dM(x,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(v.x=e),n!==void 0&&(v.y=n),r!==void 0&&(v.scale=r),o!==void 0&&mM(v,o,a,u,!1)}const wS=()=>({...yg(),attrs:{}}),_g=t=>typeof t=="string"&&t.toLowerCase()==="svg";function gM(t,e,n,r){const s=A.useMemo(()=>{const i=wS();return vg(i,e,{enableHardwareAcceleration:!1},_g(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};vS(i,t.style,t),s.style={...i,...s.style}}return s}function yM(t=!1){return(n,r,s,{latestValues:i},o)=>{const u=(mg(n)?gM:lM)(r,i,o,n),d={...hM(r,typeof n=="string",t),...u,ref:s},{children:f}=r,m=A.useMemo(()=>Bt(f)?f.get():f,[f]);return A.createElement(n,{...d,children:m})}}function xS(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const ES=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function TS(t,e,n,r){xS(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(ES.has(s)?s:hg(s),e.attrs[s])}function wg(t,e){const{style:n}=t,r={};for(const s in n)(Bt(n[s])||e.style&&Bt(e.style[s])||fS(s,t))&&(r[s]=n[s]);return r}function SS(t,e){const n=wg(t,e);for(const r in t)if(Bt(t[r])||Bt(e[r])){const s=cl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function xg(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function IS(t){const e=A.useRef(null);return e.current===null&&(e.current=t()),e.current}const vc=t=>Array.isArray(t),vM=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),_M=t=>vc(t)?t[t.length-1]||0:t;function Su(t){const e=Bt(t)?t.get():t;return vM(e)?e.toValue():e}function wM({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:xM(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const PS=t=>(e,n)=>{const r=A.useContext(ah),s=A.useContext(lh),i=()=>wM(t,e,r,s);return n?i():IS(i)};function xM(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=Su(i[m]);let{initial:o,animate:a}=t;const u=hh(t),c=hS(t);e&&c&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let d=n?n.initial===!1:!1;d=d||o===!1;const f=d?a:o;return f&&typeof f!="boolean"&&!ch(f)&&(Array.isArray(f)?f:[f]).forEach(v=>{const T=xg(t,v);if(!T)return;const{transitionEnd:x,transition:P,...E}=T;for(const y in E){let w=E[y];if(Array.isArray(w)){const R=d?w.length-1:0;w=w[R]}w!==null&&(s[y]=w)}for(const y in x)s[y]=x[y]}),s}const Ue=t=>t;class g_{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function EM(t){let e=new g_,n=new g_,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(u,c=!1,d=!1)=>{const f=d&&s,m=f?e:n;return c&&o.add(u),m.add(u)&&f&&s&&(r=e.order.length),u},cancel:u=>{n.remove(u),o.delete(u)},process:u=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const d=e.order[c];d(u),o.has(d)&&(a.schedule(d),t())}s=!1,i&&(i=!1,a.process(u))}};return a}const eu=["prepare","read","update","preRender","render","postRender"],TM=40;function SM(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=eu.reduce((f,m)=>(f[m]=EM(()=>n=!0),f),{}),o=f=>i[f].process(s),a=()=>{const f=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(f-s.timestamp,TM),1),s.timestamp=f,s.isProcessing=!0,eu.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},u=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:eu.reduce((f,m)=>{const v=i[m];return f[m]=(T,x=!1,P=!1)=>(n||u(),v.schedule(T,x,P)),f},{}),cancel:f=>eu.forEach(m=>i[m].cancel(f)),state:s,steps:i}}const{schedule:Se,cancel:lr,state:vt,steps:_d}=SM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ue,!0),IM={useVisualState:PS({scrapeMotionValuesFromProps:SS,createRenderState:wS,onMount:(t,e,{renderState:n,latestValues:r})=>{Se.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Se.render(()=>{vg(n,r,{enableHardwareAcceleration:!1},_g(e.tagName),t.transformTemplate),TS(e,n)})}})},PM={useVisualState:PS({scrapeMotionValuesFromProps:wg,createRenderState:yg})};function CM(t,{forwardMotionProps:e=!1},n,r){return{...mg(t)?IM:PM,preloadedFeatures:n,useRender:yM(e),createVisualElement:r,Component:t}}function Qn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const CS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function fh(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const kM=t=>e=>CS(e)&&t(e,fh(e));function Jn(t,e,n,r){return Qn(t,e,kM(n),r)}const bM=(t,e)=>n=>e(t(n)),qr=(...t)=>t.reduce(bM);function kS(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const y_=kS("dragHorizontal"),v_=kS("dragVertical");function bS(t){let e=!1;if(t==="y")e=v_();else if(t==="x")e=y_();else{const n=y_(),r=v_();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function AS(){const t=bS(!0);return t?(t(),!1):!0}class ls{constructor(e){this.isMounted=!1,this.node=e}update(){}}function __(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||AS())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Se.update(()=>a[r](i,o))};return Jn(t.current,n,s,{passive:!t.getProps()[r]})}class AM extends ls{mount(){this.unmount=qr(__(this.node,!0),__(this.node,!1))}unmount(){}}class RM extends ls{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=qr(Qn(this.node.current,"focus",()=>this.onFocus()),Qn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const RS=(t,e)=>e?t===e?!0:RS(t,e.parentElement):!1;function wd(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,fh(n))}class NM extends ls{constructor(){super(...arguments),this.removeStartListeners=Ue,this.removeEndListeners=Ue,this.removeAccessibleListeners=Ue,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Jn(window,"pointerup",(a,u)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:d,globalTapTarget:f}=this.node.getProps();Se.update(()=>{!f&&!RS(this.node.current,a.target)?d&&d(a,u):c&&c(a,u)})},{passive:!(r.onTap||r.onPointerUp)}),o=Jn(window,"pointercancel",(a,u)=>this.cancelPress(a,u),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=qr(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||wd("up",(u,c)=>{const{onTap:d}=this.node.getProps();d&&Se.update(()=>d(u,c))})};this.removeEndListeners(),this.removeEndListeners=Qn(this.node.current,"keyup",o),wd("down",(a,u)=>{this.startPress(a,u)})},n=Qn(this.node.current,"keydown",e),r=()=>{this.isPressing&&wd("cancel",(i,o)=>this.cancelPress(i,o))},s=Qn(this.node.current,"blur",r);this.removeAccessibleListeners=qr(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Se.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!AS()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Se.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Jn(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Qn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=qr(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const np=new WeakMap,xd=new WeakMap,DM=t=>{const e=np.get(t.target);e&&e(t)},VM=t=>{t.forEach(DM)};function jM({root:t,...e}){const n=t||document;xd.has(n)||xd.set(n,{});const r=xd.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(VM,{root:t,...e})),r[s]}function OM(t,e,n){const r=jM(e);return np.set(t,n),r.observe(t),()=>{np.delete(t),r.unobserve(t)}}const MM={some:0,all:1};class LM extends ls{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:MM[s]},a=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),m=c?d:f;m&&m(u)};return OM(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(FM(e,n))&&this.startObserver()}unmount(){}}function FM({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const UM={inView:{Feature:LM},tap:{Feature:NM},focus:{Feature:RM},hover:{Feature:AM}};function NS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function BM(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function zM(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function ph(t,e,n){const r=t.getProps();return xg(r,e,n!==void 0?n:r.custom,BM(t),zM(t))}let Eg=Ue;const As=t=>t*1e3,Zn=t=>t/1e3,$M={current:!1},DS=t=>Array.isArray(t)&&typeof t[0]=="number";function VS(t){return!!(!t||typeof t=="string"&&jS[t]||DS(t)||Array.isArray(t)&&t.every(VS))}const Yo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,jS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yo([0,.65,.55,1]),circOut:Yo([.55,0,1,.45]),backIn:Yo([.31,.01,.66,-.59]),backOut:Yo([.33,1.53,.69,.99])};function OS(t){if(t)return DS(t)?Yo(t):Array.isArray(t)?t.map(OS):jS[t]}function HM(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:u}={}){const c={[e]:n};u&&(c.offset=u);const d=OS(a);return Array.isArray(d)&&(c.easing=d),t.animate(c,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function WM(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const MS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,qM=1e-7,GM=12;function KM(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=MS(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>qM&&++a<GM);return o}function fl(t,e,n,r){if(t===e&&n===r)return Ue;const s=i=>KM(i,0,1,t,n);return i=>i===0||i===1?i:MS(s(i),e,r)}const QM=fl(.42,0,1,1),YM=fl(0,0,.58,1),LS=fl(.42,0,.58,1),XM=t=>Array.isArray(t)&&typeof t[0]!="number",FS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,US=t=>e=>1-t(1-e),Tg=t=>1-Math.sin(Math.acos(t)),BS=US(Tg),JM=FS(Tg),zS=fl(.33,1.53,.69,.99),Sg=US(zS),ZM=FS(Sg),eL=t=>(t*=2)<1?.5*Sg(t):.5*(2-Math.pow(2,-10*(t-1))),tL={linear:Ue,easeIn:QM,easeInOut:LS,easeOut:YM,circIn:Tg,circInOut:JM,circOut:BS,backIn:Sg,backInOut:ZM,backOut:zS,anticipate:eL},w_=t=>{if(Array.isArray(t)){Eg(t.length===4);const[e,n,r,s]=t;return fl(e,n,r,s)}else if(typeof t=="string")return tL[t];return t},Ig=(t,e)=>n=>!!(hl(n)&&rM.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),$S=(t,e,n)=>r=>{if(!hl(r))return r;const[s,i,o,a]=r.match(dh);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},nL=t=>ts(0,255,t),Ed={...Ys,transform:t=>Math.round(nL(t))},Ps={test:Ig("rgb","red"),parse:$S("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Ed.transform(t)+", "+Ed.transform(e)+", "+Ed.transform(n)+", "+da(ha.transform(r))+")"};function rL(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const rp={test:Ig("#"),parse:rL,transform:Ps.transform},xi={test:Ig("hsl","hue"),parse:$S("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Rn.transform(da(e))+", "+Rn.transform(da(n))+", "+da(ha.transform(r))+")"},Ct={test:t=>Ps.test(t)||rp.test(t)||xi.test(t),parse:t=>Ps.test(t)?Ps.parse(t):xi.test(t)?xi.parse(t):rp.parse(t),transform:t=>hl(t)?t:t.hasOwnProperty("red")?Ps.transform(t):xi.transform(t)},Re=(t,e,n)=>-n*t+n*e+t;function Td(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function sL({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;s=Td(u,a,t+1/3),i=Td(u,a,t),o=Td(u,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Sd=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},iL=[rp,Ps,xi],oL=t=>iL.find(e=>e.test(t));function x_(t){const e=oL(t);let n=e.parse(t);return e===xi&&(n=sL(n)),n}const HS=(t,e)=>{const n=x_(t),r=x_(e),s={...n};return i=>(s.red=Sd(n.red,r.red,i),s.green=Sd(n.green,r.green,i),s.blue=Sd(n.blue,r.blue,i),s.alpha=Re(n.alpha,r.alpha,i),Ps.transform(s))};function aL(t){var e,n;return isNaN(t)&&hl(t)&&(((e=t.match(dh))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(gS))===null||n===void 0?void 0:n.length)||0)>0}const WS={regex:tM,countKey:"Vars",token:"${v}",parse:Ue},qS={regex:gS,countKey:"Colors",token:"${c}",parse:Ct.parse},GS={regex:dh,countKey:"Numbers",token:"${n}",parse:Ys.parse};function Id(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function _c(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Id(n,WS),Id(n,qS),Id(n,GS),n}function KS(t){return _c(t).values}function QS(t){const{values:e,numColors:n,numVars:r,tokenised:s}=_c(t),i=e.length;return o=>{let a=s;for(let u=0;u<i;u++)u<r?a=a.replace(WS.token,o[u]):u<r+n?a=a.replace(qS.token,Ct.transform(o[u])):a=a.replace(GS.token,da(o[u]));return a}}const lL=t=>typeof t=="number"?0:t;function uL(t){const e=KS(t);return QS(t)(e.map(lL))}const ns={test:aL,parse:KS,createTransformer:QS,getAnimatableNone:uL},YS=(t,e)=>n=>`${n>0?e:t}`;function XS(t,e){return typeof t=="number"?n=>Re(t,e,n):Ct.test(t)?HS(t,e):t.startsWith("var(")?YS(t,e):ZS(t,e)}const JS=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>XS(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},cL=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=XS(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},ZS=(t,e)=>{const n=ns.createTransformer(e),r=_c(t),s=_c(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?qr(JS(r.values,s.values),n):YS(t,e)},Ha=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},E_=(t,e)=>n=>Re(t,e,n);function hL(t){return typeof t=="number"?E_:typeof t=="string"?Ct.test(t)?HS:ZS:Array.isArray(t)?JS:typeof t=="object"?cL:E_}function dL(t,e,n){const r=[],s=n||hL(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Ue:e;a=qr(u,a)}r.push(a)}return r}function eI(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Eg(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=dL(e,r,s),a=o.length,u=c=>{let d=0;if(a>1)for(;d<t.length-2&&!(c<t[d+1]);d++);const f=Ha(t[d],t[d+1],c);return o[d](f)};return n?c=>u(ts(t[0],t[i-1],c)):u}function fL(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Ha(0,e,r);t.push(Re(n,1,s))}}function pL(t){const e=[0];return fL(e,t.length-1),e}function mL(t,e){return t.map(n=>n*e)}function gL(t,e){return t.map(()=>e||LS).splice(0,t.length-1)}function wc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=XM(r)?r.map(w_):w_(r),i={done:!1,value:e[0]},o=mL(n&&n.length===e.length?n:pL(e),t),a=eI(o,e,{ease:Array.isArray(s)?s:gL(e,s)});return{calculatedDuration:t,next:u=>(i.value=a(u),i.done=u>=t,i)}}function tI(t,e){return e?t*(1e3/e):0}const yL=5;function nI(t,e,n){const r=Math.max(e-yL,0);return tI(n-t(r),e-r)}const Pd=.001,vL=.01,_L=10,wL=.05,xL=1;function EL({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=ts(wL,xL,o),t=ts(vL,_L,Zn(t)),o<1?(s=c=>{const d=c*o,f=d*t,m=d-n,v=sp(c,o),T=Math.exp(-f);return Pd-m/v*T},i=c=>{const f=c*o*t,m=f*n+n,v=Math.pow(o,2)*Math.pow(c,2)*t,T=Math.exp(-f),x=sp(Math.pow(c,2),o);return(-s(c)+Pd>0?-1:1)*((m-v)*T)/x}):(s=c=>{const d=Math.exp(-c*t),f=(c-n)*t+1;return-Pd+d*f},i=c=>{const d=Math.exp(-c*t),f=(n-c)*(t*t);return d*f});const a=5/t,u=SL(s,i,a);if(t=As(t),isNaN(u))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const TL=12;function SL(t,e,n){let r=n;for(let s=1;s<TL;s++)r=r-t(r)/e(r);return r}function sp(t,e){return t*Math.sqrt(1-e*e)}const IL=["duration","bounce"],PL=["stiffness","damping","mass"];function T_(t,e){return e.some(n=>t[n]!==void 0)}function CL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!T_(t,PL)&&T_(t,IL)){const n=EL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function rI({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:u,mass:c,duration:d,velocity:f,isResolvedFromDuration:m}=CL({...r,velocity:-Zn(r.velocity||0)}),v=f||0,T=u/(2*Math.sqrt(a*c)),x=i-s,P=Zn(Math.sqrt(a/c)),E=Math.abs(x)<5;n||(n=E?.01:2),e||(e=E?.005:.5);let y;if(T<1){const w=sp(P,T);y=R=>{const V=Math.exp(-T*P*R);return i-V*((v+T*P*x)/w*Math.sin(w*R)+x*Math.cos(w*R))}}else if(T===1)y=w=>i-Math.exp(-P*w)*(x+(v+P*x)*w);else{const w=P*Math.sqrt(T*T-1);y=R=>{const V=Math.exp(-T*P*R),O=Math.min(w*R,300);return i-V*((v+T*P*x)*Math.sinh(O)+w*x*Math.cosh(O))/w}}return{calculatedDuration:m&&d||null,next:w=>{const R=y(w);if(m)o.done=w>=d;else{let V=v;w!==0&&(T<1?V=nI(y,w,R):V=0);const O=Math.abs(V)<=n,I=Math.abs(i-R)<=e;o.done=O&&I}return o.value=o.done?i:R,o}}}function S_({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:u,restDelta:c=.5,restSpeed:d}){const f=t[0],m={done:!1,value:f},v=_=>a!==void 0&&_<a||u!==void 0&&_>u,T=_=>a===void 0?u:u===void 0||Math.abs(a-_)<Math.abs(u-_)?a:u;let x=n*e;const P=f+x,E=o===void 0?P:o(P);E!==P&&(x=E-f);const y=_=>-x*Math.exp(-_/r),w=_=>E+y(_),R=_=>{const C=y(_),k=w(_);m.done=Math.abs(C)<=c,m.value=m.done?E:k};let V,O;const I=_=>{v(m.value)&&(V=_,O=rI({keyframes:[m.value,T(m.value)],velocity:nI(w,_,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:d}))};return I(0),{calculatedDuration:null,next:_=>{let C=!1;return!O&&V===void 0&&(C=!0,R(_),I(_)),V!==void 0&&_>V?O.next(_-V):(!C&&R(_),m)}}}const kL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Se.update(e,!0),stop:()=>lr(e),now:()=>vt.isProcessing?vt.timestamp:performance.now()}},I_=2e4;function P_(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<I_;)e+=n,r=t.next(e);return e>=I_?1/0:e}const bL={decay:S_,inertia:S_,tween:wc,keyframes:wc,spring:rI};function xc({autoplay:t=!0,delay:e=0,driver:n=kL,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:u,onStop:c,onComplete:d,onUpdate:f,...m}){let v=1,T=!1,x,P;const E=()=>{P=new Promise(Q=>{x=Q})};E();let y;const w=bL[s]||wc;let R;w!==wc&&typeof r[0]!="number"&&(R=eI([0,100],r,{clamp:!1}),r=[0,100]);const V=w({...m,keyframes:r});let O;a==="mirror"&&(O=w({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let I="idle",_=null,C=null,k=null;V.calculatedDuration===null&&i&&(V.calculatedDuration=P_(V));const{calculatedDuration:N}=V;let D=1/0,b=1/0;N!==null&&(D=N+o,b=D*(i+1)-o);let he=0;const Ye=Q=>{if(C===null)return;v>0&&(C=Math.min(C,Q)),v<0&&(C=Math.min(Q-b/v,C)),_!==null?he=_:he=Math.round(Q-C)*v;const ne=he-e*(v>=0?1:-1),de=v>=0?ne<0:ne>b;he=Math.max(ne,0),I==="finished"&&_===null&&(he=b);let ye=he,xe=V;if(i){const us=Math.min(he,b)/D;let St=Math.floor(us),Nt=us%1;!Nt&&us>=1&&(Nt=1),Nt===1&&St--,St=Math.min(St,i+1),!!(St%2)&&(a==="reverse"?(Nt=1-Nt,o&&(Nt-=o/D)):a==="mirror"&&(xe=O)),ye=ts(0,1,Nt)*D}const Xe=de?{done:!1,value:r[0]}:xe.next(ye);R&&(Xe.value=R(Xe.value));let{done:nt}=Xe;!de&&N!==null&&(nt=v>=0?he>=b:he<=0);const Xs=_===null&&(I==="finished"||I==="running"&&nt);return f&&f(Xe.value),Xs&&$(),Xe},ge=()=>{y&&y.stop(),y=void 0},we=()=>{I="idle",ge(),x(),E(),C=k=null},$=()=>{I="finished",d&&d(),ge(),x()},q=()=>{if(T)return;y||(y=n(Ye));const Q=y.now();u&&u(),_!==null?C=Q-_:(!C||I==="finished")&&(C=Q),I==="finished"&&E(),k=C,_=null,I="running",y.start()};t&&q();const X={then(Q,ne){return P.then(Q,ne)},get time(){return Zn(he)},set time(Q){Q=As(Q),he=Q,_!==null||!y||v===0?_=Q:C=y.now()-Q/v},get duration(){const Q=V.calculatedDuration===null?P_(V):V.calculatedDuration;return Zn(Q)},get speed(){return v},set speed(Q){Q===v||!y||(v=Q,X.time=Zn(he))},get state(){return I},play:q,pause:()=>{I="paused",_=he},stop:()=>{T=!0,I!=="idle"&&(I="idle",c&&c(),we())},cancel:()=>{k!==null&&Ye(k),we()},complete:()=>{I="finished"},sample:Q=>(C=0,Ye(Q))};return X}function AL(t){let e;return()=>(e===void 0&&(e=t()),e)}const RL=AL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),NL=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),tu=10,DL=2e4,VL=(t,e)=>e.type==="spring"||t==="backgroundColor"||!VS(e.ease);function jL(t,e,{onUpdate:n,onComplete:r,...s}){if(!(RL()&&NL.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,u,c=!1;const d=()=>{u=new Promise(w=>{a=w})};d();let{keyframes:f,duration:m=300,ease:v,times:T}=s;if(VL(e,s)){const w=xc({...s,repeat:0,delay:0});let R={done:!1,value:f[0]};const V=[];let O=0;for(;!R.done&&O<DL;)R=w.sample(O),V.push(R.value),O+=tu;T=void 0,f=V,m=O-tu,v="linear"}const x=HM(t.owner.current,e,f,{...s,duration:m,ease:v,times:T}),P=()=>{c=!1,x.cancel()},E=()=>{c=!0,Se.update(P),a(),d()};return x.onfinish=()=>{c||(t.set(WM(f,s)),r&&r(),E())},{then(w,R){return u.then(w,R)},attachTimeline(w){return x.timeline=w,x.onfinish=null,Ue},get time(){return Zn(x.currentTime||0)},set time(w){x.currentTime=As(w)},get speed(){return x.playbackRate},set speed(w){x.playbackRate=w},get duration(){return Zn(m)},play:()=>{o||(x.play(),lr(P))},pause:()=>x.pause(),stop:()=>{if(o=!0,x.playState==="idle")return;const{currentTime:w}=x;if(w){const R=xc({...s,autoplay:!1});t.setWithVelocity(R.sample(w-tu).value,R.sample(w).value,tu)}E()},complete:()=>{c||x.finish()},cancel:E}}function OL({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Ue,pause:Ue,stop:Ue,then:i=>(i(),Promise.resolve()),cancel:Ue,complete:Ue});return e?xc({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const ML={type:"spring",stiffness:500,damping:25,restSpeed:10},LL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),FL={type:"keyframes",duration:.8},UL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},BL=(t,{keyframes:e})=>e.length>2?FL:Qs.has(t)?t.startsWith("scale")?LL(e[1]):ML:UL,ip=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(ns.test(e)||e==="0")&&!e.startsWith("url(")),zL=new Set(["brightness","contrast","saturate","opacity"]);function $L(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(dh)||[];if(!r)return t;const s=n.replace(r,"");let i=zL.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const HL=/([a-z-]*)\(.*?\)/g,op={...ns,getAnimatableNone:t=>{const e=t.match(HL);return e?e.map($L).join(" "):t}},WL={...yS,color:Ct,backgroundColor:Ct,outlineColor:Ct,fill:Ct,stroke:Ct,borderColor:Ct,borderTopColor:Ct,borderRightColor:Ct,borderBottomColor:Ct,borderLeftColor:Ct,filter:op,WebkitFilter:op},Pg=t=>WL[t];function sI(t,e){let n=Pg(t);return n!==op&&(n=ns),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const iI=t=>/^0[^.\s]+$/.test(t);function qL(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||iI(t)}function GL(t,e,n,r){const s=ip(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const u=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),qL(i[c])&&u.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&u.length&&a)for(let c=0;c<u.length;c++){const d=u[c];i[d]=sI(e,a)}return i}function KL({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:u,elapsed:c,...d}){return!!Object.keys(d).length}function Cg(t,e){return t[e]||t.default||t}const QL={skipAnimations:!1},kg=(t,e,n,r={})=>s=>{const i=Cg(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-As(o);const u=GL(e,t,n,i),c=u[0],d=u[u.length-1],f=ip(t,c),m=ip(t,d);let v={keyframes:u,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:T=>{e.set(T),i.onUpdate&&i.onUpdate(T)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(KL(i)||(v={...v,...BL(t,v)}),v.duration&&(v.duration=As(v.duration)),v.repeatDelay&&(v.repeatDelay=As(v.repeatDelay)),!f||!m||$M.current||i.type===!1||QL.skipAnimations)return OL(v);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const T=jL(e,t,v);if(T)return T}return xc(v)};function Ec(t){return!!(Bt(t)&&t.add)}const oI=t=>/^\-?\d*\.?\d+$/.test(t);function bg(t,e){t.indexOf(e)===-1&&t.push(e)}function Ag(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Rg{constructor(){this.subscriptions=[]}add(e){return bg(this.subscriptions,e),()=>Ag(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const YL=t=>!isNaN(parseFloat(t));class XL{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=vt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Se.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Se.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=YL(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Rg);const r=this.events[e].add(n);return e==="change"?()=>{r(),Se.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?tI(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Zi(t,e){return new XL(t,e)}const aI=t=>e=>e.test(t),JL={test:t=>t==="auto",parse:t=>t},lI=[Ys,Y,Rn,_r,iM,sM,JL],Fo=t=>lI.find(aI(t)),ZL=[...lI,Ct,ns],e4=t=>ZL.find(aI(t));function t4(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Zi(n))}function n4(t,e){const n=ph(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=_M(i[o]);t4(t,o,a)}}function r4(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const u=i[a],c=e[u];let d=null;Array.isArray(c)&&(d=c[0]),d===null&&(d=(s=(r=n[u])!==null&&r!==void 0?r:t.readValue(u))!==null&&s!==void 0?s:e[u]),d!=null&&(typeof d=="string"&&(oI(d)||iI(d))?d=parseFloat(d):!e4(d)&&ns.test(c)&&(d=sI(u,c)),t.addValue(u,Zi(d,{owner:t})),n[u]===void 0&&(n[u]=d),d!==null&&t.setBaseTarget(u,d))}}function s4(t,e){return e?(e[t]||e.default||e).from:void 0}function i4(t,e,n){const r={};for(const s in t){const i=s4(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function o4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function a4(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function uI(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const u=t.getValue("willChange");r&&(i=r);const c=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const f in a){const m=t.getValue(f),v=a[f];if(!m||v===void 0||d&&o4(d,f))continue;const T={delay:n,elapsed:0,...Cg(i||{},f)};if(window.HandoffAppearAnimations){const E=t.getProps()[cS];if(E){const y=window.HandoffAppearAnimations(E,f,m,Se);y!==null&&(T.elapsed=y,T.isHandoff=!0)}}let x=!T.isHandoff&&!a4(m,v);if(T.type==="spring"&&(m.getVelocity()||T.velocity)&&(x=!1),m.animation&&(x=!1),x)continue;m.start(kg(f,m,v,t.shouldReduceMotion&&Qs.has(f)?{type:!1}:T));const P=m.animation;Ec(u)&&(u.add(f),P.then(()=>u.remove(f))),c.push(P)}return o&&Promise.all(c).then(()=>{o&&n4(t,o)}),c}function ap(t,e,n={}){const r=ph(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(uI(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:d,staggerDirection:f}=s;return l4(t,e,c+u,d,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,c]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function l4(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,u=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(u4).forEach((c,d)=>{c.notify("AnimationStart",e),o.push(ap(c,e,{...i,delay:n+u(d)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function u4(t,e){return t.sortNodePosition(e)}function c4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>ap(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=ap(t,e,n);else{const s=typeof e=="function"?ph(t,e,n.custom):e;r=Promise.all(uI(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const h4=[...dg].reverse(),d4=dg.length;function f4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>c4(t,n,r)))}function p4(t){let e=f4(t);const n=g4();let r=!0;const s=(u,c)=>{const d=ph(t,c);if(d){const{transition:f,transitionEnd:m,...v}=d;u={...u,...v,...m}}return u};function i(u){e=u(t)}function o(u,c){const d=t.getProps(),f=t.getVariantContext(!0)||{},m=[],v=new Set;let T={},x=1/0;for(let E=0;E<d4;E++){const y=h4[E],w=n[y],R=d[y]!==void 0?d[y]:f[y],V=za(R),O=y===c?w.isActive:null;O===!1&&(x=E);let I=R===f[y]&&R!==d[y]&&V;if(I&&r&&t.manuallyAnimateOnMount&&(I=!1),w.protectedKeys={...T},!w.isActive&&O===null||!R&&!w.prevProp||ch(R)||typeof R=="boolean")continue;let C=m4(w.prevProp,R)||y===c&&w.isActive&&!I&&V||E>x&&V,k=!1;const N=Array.isArray(R)?R:[R];let D=N.reduce(s,{});O===!1&&(D={});const{prevResolvedValues:b={}}=w,he={...b,...D},Ye=ge=>{C=!0,v.has(ge)&&(k=!0,v.delete(ge)),w.needsAnimating[ge]=!0};for(const ge in he){const we=D[ge],$=b[ge];if(T.hasOwnProperty(ge))continue;let q=!1;vc(we)&&vc($)?q=!NS(we,$):q=we!==$,q?we!==void 0?Ye(ge):v.add(ge):we!==void 0&&v.has(ge)?Ye(ge):w.protectedKeys[ge]=!0}w.prevProp=R,w.prevResolvedValues=D,w.isActive&&(T={...T,...D}),r&&t.blockInitialAnimation&&(C=!1),C&&(!I||k)&&m.push(...N.map(ge=>({animation:ge,options:{type:y,...u}})))}if(v.size){const E={};v.forEach(y=>{const w=t.getBaseTarget(y);w!==void 0&&(E[y]=w)}),m.push({animation:E})}let P=!!m.length;return r&&(d.initial===!1||d.initial===d.animate)&&!t.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(m):Promise.resolve()}function a(u,c,d){var f;if(n[u].isActive===c)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(v=>{var T;return(T=v.animationState)===null||T===void 0?void 0:T.setActive(u,c)}),n[u].isActive=c;const m=o(d,u);for(const v in n)n[v].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function m4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!NS(e,t):!1}function ps(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function g4(){return{animate:ps(!0),whileInView:ps(),whileHover:ps(),whileTap:ps(),whileDrag:ps(),whileFocus:ps(),exit:ps()}}class y4 extends ls{constructor(e){super(e),e.animationState||(e.animationState=p4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ch(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let v4=0;class _4 extends ls{constructor(){super(...arguments),this.id=v4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const w4={animation:{Feature:y4},exit:{Feature:_4}},C_=(t,e)=>Math.abs(t-e);function x4(t,e){const n=C_(t.x,e.x),r=C_(t.y,e.y);return Math.sqrt(n**2+r**2)}class cI{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=kd(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,v=x4(f.offset,{x:0,y:0})>=3;if(!m&&!v)return;const{point:T}=f,{timestamp:x}=vt;this.history.push({...T,timestamp:x});const{onStart:P,onMove:E}=this.handlers;m||(P&&P(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=Cd(m,this.transformPagePoint),Se.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:v,onSessionEnd:T,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=kd(f.type==="pointercancel"?this.lastMoveEventInfo:Cd(m,this.transformPagePoint),this.history);this.startEvent&&v&&v(f,P),T&&T(f,P)},!CS(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=fh(e),a=Cd(o,this.transformPagePoint),{point:u}=a,{timestamp:c}=vt;this.history=[{...u,timestamp:c}];const{onSessionStart:d}=n;d&&d(e,kd(a,this.history)),this.removeListeners=qr(Jn(this.contextWindow,"pointermove",this.handlePointerMove),Jn(this.contextWindow,"pointerup",this.handlePointerUp),Jn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),lr(this.updatePoint)}}function Cd(t,e){return e?{point:e(t.point)}:t}function k_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function kd({point:t},e){return{point:t,delta:k_(t,hI(e)),offset:k_(t,E4(e)),velocity:T4(e,.1)}}function E4(t){return t[0]}function hI(t){return t[t.length-1]}function T4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=hI(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>As(e)));)n--;if(!r)return{x:0,y:0};const i=Zn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Qt(t){return t.max-t.min}function lp(t,e=0,n=.01){return Math.abs(t-e)<=n}function b_(t,e,n,r=.5){t.origin=r,t.originPoint=Re(e.min,e.max,t.origin),t.scale=Qt(n)/Qt(e),(lp(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Re(n.min,n.max,t.origin)-t.originPoint,(lp(t.translate)||isNaN(t.translate))&&(t.translate=0)}function fa(t,e,n,r){b_(t.x,e.x,n.x,r?r.originX:void 0),b_(t.y,e.y,n.y,r?r.originY:void 0)}function A_(t,e,n){t.min=n.min+e.min,t.max=t.min+Qt(e)}function S4(t,e,n){A_(t.x,e.x,n.x),A_(t.y,e.y,n.y)}function R_(t,e,n){t.min=e.min-n.min,t.max=t.min+Qt(e)}function pa(t,e,n){R_(t.x,e.x,n.x),R_(t.y,e.y,n.y)}function I4(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Re(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Re(n,t,r.max):Math.min(t,n)),t}function N_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function P4(t,{top:e,left:n,bottom:r,right:s}){return{x:N_(t.x,n,s),y:N_(t.y,e,r)}}function D_(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function C4(t,e){return{x:D_(t.x,e.x),y:D_(t.y,e.y)}}function k4(t,e){let n=.5;const r=Qt(t),s=Qt(e);return s>r?n=Ha(e.min,e.max-r,t.min):r>s&&(n=Ha(t.min,t.max-s,e.min)),ts(0,1,n)}function b4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const up=.35;function A4(t=up){return t===!1?t=0:t===!0&&(t=up),{x:V_(t,"left","right"),y:V_(t,"top","bottom")}}function V_(t,e,n){return{min:j_(t,e),max:j_(t,n)}}function j_(t,e){return typeof t=="number"?t:t[e]||0}const O_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ei=()=>({x:O_(),y:O_()}),M_=()=>({min:0,max:0}),$e=()=>({x:M_(),y:M_()});function en(t){return[t("x"),t("y")]}function dI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function R4({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function N4(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function bd(t){return t===void 0||t===1}function cp({scale:t,scaleX:e,scaleY:n}){return!bd(t)||!bd(e)||!bd(n)}function vs(t){return cp(t)||fI(t)||t.z||t.rotate||t.rotateX||t.rotateY}function fI(t){return L_(t.x)||L_(t.y)}function L_(t){return t&&t!=="0%"}function Tc(t,e,n){const r=t-n,s=e*r;return n+s}function F_(t,e,n,r,s){return s!==void 0&&(t=Tc(t,s,r)),Tc(t,n,r)+e}function hp(t,e=0,n=1,r,s){t.min=F_(t.min,e,n,r,s),t.max=F_(t.max,e,n,r,s)}function pI(t,{x:e,y:n}){hp(t.x,e.translate,e.scale,e.originPoint),hp(t.y,n.translate,n.scale,n.originPoint)}function D4(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const u=i.instance;u&&u.style&&u.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Ti(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,pI(t,o)),r&&vs(i.latestValues)&&Ti(t,i.latestValues))}e.x=U_(e.x),e.y=U_(e.y)}function U_(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Er(t,e){t.min=t.min+e,t.max=t.max+e}function B_(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=Re(t.min,t.max,i);hp(t,e[n],e[r],o,e.scale)}const V4=["x","scaleX","originX"],j4=["y","scaleY","originY"];function Ti(t,e){B_(t.x,e,V4),B_(t.y,e,j4)}function mI(t,e){return dI(N4(t.getBoundingClientRect(),e))}function O4(t,e,n){const r=mI(t,n),{scroll:s}=e;return s&&(Er(r.x,s.offset.x),Er(r.y,s.offset.y)),r}const gI=({current:t})=>t?t.ownerDocument.defaultView:null,M4=new WeakMap;class L4{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=$e(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(fh(d,"page").point)},i=(d,f)=>{const{drag:m,dragPropagation:v,onDragStart:T}=this.getProps();if(m&&!v&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=bS(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),en(P=>{let E=this.getAxisMotionValue(P).get()||0;if(Rn.test(E)){const{projection:y}=this.visualElement;if(y&&y.layout){const w=y.layout.layoutBox[P];w&&(E=Qt(w)*(parseFloat(E)/100))}}this.originPoint[P]=E}),T&&Se.update(()=>T(d,f),!1,!0);const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},o=(d,f)=>{const{dragPropagation:m,dragDirectionLock:v,onDirectionLock:T,onDrag:x}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:P}=f;if(v&&this.currentDirection===null){this.currentDirection=F4(P),this.currentDirection!==null&&T&&T(this.currentDirection);return}this.updateAxis("x",f.point,P),this.updateAxis("y",f.point,P),this.visualElement.render(),x&&x(d,f)},a=(d,f)=>this.stop(d,f),u=()=>en(d=>{var f;return this.getAnimationState(d)==="paused"&&((f=this.getAxisMotionValue(d).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new cI(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:gI(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Se.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!nu(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=I4(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&wi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=P4(s.layoutBox,n):this.constraints=!1,this.elastic=A4(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&en(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=b4(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!wi(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=O4(r,s.root,this.visualElement.getTransformPagePoint());let o=C4(s.layout.layoutBox,i);if(n){const a=n(R4(o));this.hasMutatedConstraints=!!a,a&&(o=dI(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},c=en(d=>{if(!nu(d,n,this.currentDirection))return;let f=u&&u[d]||{};o&&(f={min:0,max:0});const m=s?200:1e6,v=s?40:1e7,T={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(d,T)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(kg(e,r,0,n))}stopAnimation(){en(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){en(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){en(n=>{const{drag:r}=this.getProps();if(!nu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Re(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!wi(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};en(o=>{const a=this.getAxisMotionValue(o);if(a){const u=a.get();s[o]=k4({min:u,max:u},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),en(o=>{if(!nu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:u,max:c}=this.constraints[o];a.set(Re(u,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;M4.set(this.visualElement,this);const e=this.visualElement.current,n=Jn(e,"pointerdown",u=>{const{drag:c,dragListener:d=!0}=this.getProps();c&&d&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();wi(u)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Qn(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(en(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=u[d].translate,f.set(f.get()+u[d].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=up,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function nu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function F4(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class U4 extends ls{constructor(e){super(e),this.removeGroupControls=Ue,this.removeListeners=Ue,this.controls=new L4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ue}unmount(){this.removeGroupControls(),this.removeListeners()}}const z_=t=>(e,n)=>{t&&Se.update(()=>t(e,n))};class B4 extends ls{constructor(){super(...arguments),this.removePointerDownListener=Ue}onPointerDown(e){this.session=new cI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:gI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:z_(e),onStart:z_(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Se.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Jn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function z4(){const t=A.useContext(lh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=A.useId();return A.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const Iu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function $_(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Uo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Y.test(t))t=parseFloat(t);else return t;const n=$_(t,e.target.x),r=$_(t,e.target.y);return`${n}% ${r}%`}},$4={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=ns.parse(t);if(s.length>5)return r;const i=ns.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,u=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=u;const c=Re(a,u,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class H4 extends Gr.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;XO(W4),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Iu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Se.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function yI(t){const[e,n]=z4(),r=A.useContext(pg);return Gr.createElement(H4,{...t,layoutGroup:r,switchLayoutGroup:A.useContext(dS),isPresent:e,safeToRemove:n})}const W4={borderRadius:{...Uo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Uo,borderTopRightRadius:Uo,borderBottomLeftRadius:Uo,borderBottomRightRadius:Uo,boxShadow:$4},vI=["TopLeft","TopRight","BottomLeft","BottomRight"],q4=vI.length,H_=t=>typeof t=="string"?parseFloat(t):t,W_=t=>typeof t=="number"||Y.test(t);function G4(t,e,n,r,s,i){s?(t.opacity=Re(0,n.opacity!==void 0?n.opacity:1,K4(r)),t.opacityExit=Re(e.opacity!==void 0?e.opacity:1,0,Q4(r))):i&&(t.opacity=Re(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<q4;o++){const a=`border${vI[o]}Radius`;let u=q_(e,a),c=q_(n,a);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||W_(u)===W_(c)?(t[a]=Math.max(Re(H_(u),H_(c),r),0),(Rn.test(c)||Rn.test(u))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Re(e.rotate||0,n.rotate||0,r))}function q_(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const K4=_I(0,.5,BS),Q4=_I(.5,.95,Ue);function _I(t,e,n){return r=>r<t?0:r>e?1:n(Ha(t,e,r))}function G_(t,e){t.min=e.min,t.max=e.max}function Zt(t,e){G_(t.x,e.x),G_(t.y,e.y)}function K_(t,e,n,r,s){return t-=e,t=Tc(t,1/n,r),s!==void 0&&(t=Tc(t,1/s,r)),t}function Y4(t,e=0,n=1,r=.5,s,i=t,o=t){if(Rn.test(e)&&(e=parseFloat(e),e=Re(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Re(i.min,i.max,r);t===i&&(a-=e),t.min=K_(t.min,e,n,a,s),t.max=K_(t.max,e,n,a,s)}function Q_(t,e,[n,r,s],i,o){Y4(t,e[n],e[r],e[s],e.scale,i,o)}const X4=["x","scaleX","originX"],J4=["y","scaleY","originY"];function Y_(t,e,n,r){Q_(t.x,e,X4,n?n.x:void 0,r?r.x:void 0),Q_(t.y,e,J4,n?n.y:void 0,r?r.y:void 0)}function X_(t){return t.translate===0&&t.scale===1}function wI(t){return X_(t.x)&&X_(t.y)}function Z4(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function xI(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function J_(t){return Qt(t.x)/Qt(t.y)}class eF{constructor(){this.members=[]}add(e){bg(this.members,e),e.scheduleRender()}remove(e){if(Ag(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Z_(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:u,rotateX:c,rotateY:d}=n;u&&(r+=`rotate(${u}deg) `),c&&(r+=`rotateX(${c}deg) `),d&&(r+=`rotateY(${d}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const tF=(t,e)=>t.depth-e.depth;class nF{constructor(){this.children=[],this.isDirty=!1}add(e){bg(this.children,e),this.isDirty=!0}remove(e){Ag(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(tF),this.isDirty=!1,this.children.forEach(e)}}function rF(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(lr(r),t(i-e))};return Se.read(r,!0),()=>lr(r)}function sF(t){window.MotionDebug&&window.MotionDebug.record(t)}function iF(t){return t instanceof SVGElement&&t.tagName!=="svg"}function oF(t,e,n){const r=Bt(t)?t:Zi(t);return r.start(kg("",r,e,n)),r.animation}const ew=["","X","Y","Z"],aF={visibility:"hidden"},tw=1e3;let lF=0;const _s={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function EI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=lF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_s.totalNodes=_s.resolvedTargetDeltas=_s.recalculatedProjection=0,this.nodes.forEach(hF),this.nodes.forEach(gF),this.nodes.forEach(yF),this.nodes.forEach(dF),sF(_s)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new nF)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Rg),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=iF(o),this.instance=o;const{layoutId:u,layout:c,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||u)&&(this.isLayoutDirty=!0),t){let f;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=rF(m,250),Iu.hasAnimatedSinceResize&&(Iu.hasAnimatedSinceResize=!1,this.nodes.forEach(rw))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&d&&(u||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:v,layout:T})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||EF,{onLayoutAnimationStart:P,onLayoutAnimationComplete:E}=d.getProps(),y=!this.targetLayout||!xI(this.targetLayout,T)||v,w=!m&&v;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||w||m&&(y||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,w);const R={...Cg(x,"layout"),onPlay:P,onComplete:E};(d.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else m||rw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=T})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,lr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(vF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nw);return}this.isUpdating||this.nodes.forEach(pF),this.isUpdating=!1,this.nodes.forEach(mF),this.nodes.forEach(uF),this.nodes.forEach(cF),this.clearAllSnapshots();const a=performance.now();vt.delta=ts(0,1e3/60,a-vt.timestamp),vt.timestamp=a,vt.isProcessing=!0,_d.update.process(vt),_d.preRender.process(vt),_d.render.process(vt),vt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(fF),this.sharedNodes.forEach(_F)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=$e(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!wI(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,d=c!==this.prevTransformTemplateValue;o&&(a||vs(this.latestValues)||d)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),TF(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return $e();const a=o.measureViewportBox(),{scroll:u}=this.root;return u&&(Er(a.x,u.offset.x),Er(a.y,u.offset.y)),a}removeElementScroll(o){const a=$e();Zt(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:d,options:f}=c;if(c!==this.root&&d&&f.layoutScroll){if(d.isRoot){Zt(a,o);const{scroll:m}=this.root;m&&(Er(a.x,-m.offset.x),Er(a.y,-m.offset.y))}Er(a.x,d.offset.x),Er(a.y,d.offset.y)}}return a}applyTransform(o,a=!1){const u=$e();Zt(u,o);for(let c=0;c<this.path.length;c++){const d=this.path[c];!a&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ti(u,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),vs(d.latestValues)&&Ti(u,d.latestValues)}return vs(this.latestValues)&&Ti(u,this.latestValues),u}removeTransform(o){const a=$e();Zt(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!vs(c.latestValues))continue;cp(c.latestValues)&&c.updateSnapshot();const d=$e(),f=c.measurePageBox();Zt(d,f),Y_(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,d)}return vs(this.latestValues)&&Y_(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==vt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=vt.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),pa(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=$e(),this.targetWithTransforms=$e()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),S4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Zt(this.target,this.layout.layoutBox),pI(this.target,this.targetDelta)):Zt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=$e(),this.relativeTargetOrigin=$e(),pa(this.relativeTargetOrigin,this.target,v.target),Zt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_s.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||cp(this.parent.latestValues)||fI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===vt.timestamp&&(c=!1),c)return;const{layout:d,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||f))return;Zt(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,v=this.treeScale.y;D4(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:T}=a;if(!T){this.projectionTransform&&(this.projectionDelta=Ei(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ei(),this.projectionDeltaWithTransform=Ei());const x=this.projectionTransform;fa(this.projectionDelta,this.layoutCorrected,T,this.latestValues),this.projectionTransform=Z_(this.projectionDelta,this.treeScale),(this.projectionTransform!==x||this.treeScale.x!==m||this.treeScale.y!==v)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",T)),_s.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const u=this.snapshot,c=u?u.latestValues:{},d={...this.latestValues},f=Ei();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=$e(),v=u?u.source:void 0,T=this.layout?this.layout.source:void 0,x=v!==T,P=this.getStack(),E=!P||P.members.length<=1,y=!!(x&&!E&&this.options.crossfade===!0&&!this.path.some(xF));this.animationProgress=0;let w;this.mixTargetDelta=R=>{const V=R/1e3;sw(f.x,o.x,V),sw(f.y,o.y,V),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pa(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),wF(this.relativeTarget,this.relativeTargetOrigin,m,V),w&&Z4(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=$e()),Zt(w,this.relativeTarget)),x&&(this.animationValues=d,G4(d,c,this.latestValues,V,y,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(lr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Se.update(()=>{Iu.hasAnimatedSinceResize=!0,this.currentAnimation=oF(0,tw,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tw),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:c,latestValues:d}=o;if(!(!a||!u||!c)){if(this!==o&&this.layout&&c&&TI(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||$e();const f=Qt(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const m=Qt(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}Zt(a,u),Ti(a,d),fa(this.projectionDeltaWithTransform,this.layoutCorrected,a,d)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new eF),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(a=!0),!a)return;const c={};for(let d=0;d<ew.length;d++){const f="rotate"+ew[d];u[f]&&(c[f]=u[f],o.setStaticValue(f,0))}o.render();for(const d in c)o.setStaticValue(d,c[d]);o.scheduleRender()}getProjectionStyles(o){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return aF;const c={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Su(o==null?void 0:o.pointerEvents)||"",c.transform=d?d(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const x={};return this.options.layoutId&&(x.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,x.pointerEvents=Su(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!vs(this.latestValues)&&(x.transform=d?d({},""):"none",this.hasProjected=!1),x}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=Z_(this.projectionDeltaWithTransform,this.treeScale,m),d&&(c.transform=d(m,c.transform));const{x:v,y:T}=this.projectionDelta;c.transformOrigin=`${v.origin*100}% ${T.origin*100}% 0`,f.animationValues?c.opacity=f===this?(u=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const x in gc){if(m[x]===void 0)continue;const{correct:P,applyTo:E}=gc[x],y=c.transform==="none"?m[x]:P(m[x],f);if(E){const w=E.length;for(let R=0;R<w;R++)c[E[R]]=y}else c[x]=y}return this.options.layoutId&&(c.pointerEvents=f===this?Su(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(nw),this.root.sharedNodes.clear()}}}function uF(t){t.updateLayout()}function cF(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?en(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],v=Qt(m);m.min=r[f].min,m.max=m.min+v}):TI(i,n.layoutBox,r)&&en(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],v=Qt(r[f]);m.max=m.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+v)});const a=Ei();fa(a,r,n.layoutBox);const u=Ei();o?fa(u,t.applyTransform(s,!0),n.measuredBox):fa(u,r,n.layoutBox);const c=!wI(a);let d=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:v}=f;if(m&&v){const T=$e();pa(T,n.layoutBox,m.layoutBox);const x=$e();pa(x,r,v.layoutBox),xI(T,x)||(d=!0),f.options.layoutRoot&&(t.relativeTarget=x,t.relativeTargetOrigin=T,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function hF(t){_s.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function dF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function fF(t){t.clearSnapshot()}function nw(t){t.clearMeasurements()}function pF(t){t.isLayoutDirty=!1}function mF(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function rw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function gF(t){t.resolveTargetDelta()}function yF(t){t.calcProjection()}function vF(t){t.resetRotation()}function _F(t){t.removeLeadSnapshot()}function sw(t,e,n){t.translate=Re(e.translate,0,n),t.scale=Re(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function iw(t,e,n,r){t.min=Re(e.min,n.min,r),t.max=Re(e.max,n.max,r)}function wF(t,e,n,r){iw(t.x,e.x,n.x,r),iw(t.y,e.y,n.y,r)}function xF(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const EF={duration:.45,ease:[.4,0,.1,1]},ow=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),aw=ow("applewebkit/")&&!ow("chrome/")?Math.round:Ue;function lw(t){t.min=aw(t.min),t.max=aw(t.max)}function TF(t){lw(t.x),lw(t.y)}function TI(t,e,n){return t==="position"||t==="preserve-aspect"&&!lp(J_(e),J_(n),.2)}const SF=EI({attachResizeListener:(t,e)=>Qn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Ad={current:void 0},SI=EI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Ad.current){const t=new SF({});t.mount(window),t.setOptions({layoutScroll:!0}),Ad.current=t}return Ad.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),IF={pan:{Feature:B4},drag:{Feature:U4,ProjectionNode:SI,MeasureLayout:yI}},PF=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function CF(t){const e=PF.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function dp(t,e,n=1){const[r,s]=CF(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return oI(o)?parseFloat(o):o}else return tp(s)?dp(s,e,n+1):s}function kF(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!tp(i))return;const o=dp(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!tp(i))continue;const o=dp(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const bF=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),II=t=>bF.has(t),AF=t=>Object.keys(t).some(II),uw=t=>t===Ys||t===Y,cw=(t,e)=>parseFloat(t.split(", ")[e]),hw=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return cw(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?cw(i[1],t):0}},RF=new Set(["x","y","z"]),NF=cl.filter(t=>!RF.has(t));function DF(t){const e=[];return NF.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const eo={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:hw(4,13),y:hw(5,14)};eo.translateX=eo.x;eo.translateY=eo.y;const VF=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=eo[c](r,i)}),e.render();const u=e.measureViewportBox();return n.forEach(c=>{const d=e.getValue(c);d&&d.jump(a[c]),t[c]=eo[c](u,i)}),t},jF=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(II);let i=[],o=!1;const a=[];if(s.forEach(u=>{const c=t.getValue(u);if(!t.hasValue(u))return;let d=n[u],f=Fo(d);const m=e[u];let v;if(vc(m)){const T=m.length,x=m[0]===null?1:0;d=m[x],f=Fo(d);for(let P=x;P<T&&m[P]!==null;P++)v?Eg(Fo(m[P])===v):v=Fo(m[P])}else v=Fo(m);if(f!==v)if(uw(f)&&uw(v)){const T=c.get();typeof T=="string"&&c.set(parseFloat(T)),typeof m=="string"?e[u]=parseFloat(m):Array.isArray(m)&&v===Y&&(e[u]=m.map(parseFloat))}else f!=null&&f.transform&&(v!=null&&v.transform)&&(d===0||m===0)?d===0?c.set(v.transform(d)):e[u]=f.transform(m):(o||(i=DF(t),o=!0),a.push(u),r[u]=r[u]!==void 0?r[u]:e[u],c.jump(m))}),a.length){const u=a.indexOf("height")>=0?window.pageYOffset:null,c=VF(e,t,a);return i.length&&i.forEach(([d,f])=>{t.getValue(d).set(f)}),t.render(),uh&&u!==null&&window.scrollTo({top:u}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function OF(t,e,n,r){return AF(e)?jF(t,e,n,r):{target:e,transitionEnd:r}}const MF=(t,e,n,r)=>{const s=kF(t,e,r);return e=s.target,r=s.transitionEnd,OF(t,e,n,r)},fp={current:null},PI={current:!1};function LF(){if(PI.current=!0,!!uh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>fp.current=t.matches;t.addListener(e),e()}else fp.current=!1}function FF(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(Bt(i))t.addValue(s,i),Ec(r)&&r.add(s);else if(Bt(o))t.addValue(s,Zi(i,{owner:t})),Ec(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Zi(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const dw=new WeakMap,CI=Object.keys($a),UF=CI.length,fw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],BF=fg.length;class zF{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Se.render(this.render,!1,!0);const{latestValues:a,renderState:u}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=hh(n),this.isVariantNode=hS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(n,{});for(const f in d){const m=d[f];a[f]!==void 0&&Bt(m)&&(m.set(a[f],!1),Ec(c)&&c.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,dw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),PI.current||LF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){dw.delete(this.current),this.projection&&this.projection.unmount(),lr(this.notifyUpdate),lr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Qs.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Se.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let u=0;u<UF;u++){const c=CI[u],{isEnabled:d,Feature:f,ProjectionNode:m,MeasureLayout:v}=$a[c];m&&(o=m),d(n)&&(!this.features[c]&&f&&(this.features[c]=new f(this)),v&&(a=v))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:c,drag:d,dragConstraints:f,layoutScroll:m,layoutRoot:v}=n;this.projection.setOptions({layoutId:u,layout:c,alwaysMeasureLayout:!!d||f&&wi(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:v})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):$e()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fw.length;r++){const s=fw[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=FF(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<BF;r++){const s=fg[r],i=this.props[s];(za(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Zi(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=xg(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Bt(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Rg),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class kI extends zF{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=i4(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){r4(this,r,o);const a=MF(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function $F(t){return window.getComputedStyle(t)}class HF extends kI{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Qs.has(n)){const r=Pg(n);return r&&r.default||0}else{const r=$F(e),s=(mS(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return mI(e,n)}build(e,n,r,s){gg(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return wg(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Bt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){xS(e,n,r,s)}}class WF extends kI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Qs.has(n)){const r=Pg(n);return r&&r.default||0}return n=ES.has(n)?n:hg(n),e.getAttribute(n)}measureInstanceViewportBox(){return $e()}scrapeMotionValuesFromProps(e,n){return SS(e,n)}build(e,n,r,s){vg(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){TS(e,n,r,s)}mount(e){this.isSVGTag=_g(e.tagName),super.mount(e)}}const qF=(t,e)=>mg(t)?new WF(e,{enableHardwareAcceleration:!1}):new HF(e,{enableHardwareAcceleration:!0}),GF={layout:{ProjectionNode:SI,MeasureLayout:yI}},KF={...w4,...UM,...IF,...GF},Ee=QO((t,e)=>CM(t,e,KF,qF));function bI(){const t=A.useRef(!1);return cg(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function QF(){const t=bI(),[e,n]=A.useState(0),r=A.useCallback(()=>{t.current&&n(e+1)},[e]);return[A.useCallback(()=>Se.postRender(r),[r]),e]}class YF extends A.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function XF({children:t,isPresent:e}){const n=A.useId(),r=A.useRef(null),s=A.useRef({width:0,height:0,top:0,left:0});return A.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:u}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),A.createElement(YF,{isPresent:e,childRef:r,sizeRef:s},A.cloneElement(t,{ref:r}))}const Rd=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=IS(JF),u=A.useId(),c=A.useMemo(()=>({id:u,initial:e,isPresent:n,custom:s,onExitComplete:d=>{a.set(d,!0);for(const f of a.values())if(!f)return;r&&r()},register:d=>(a.set(d,!1),()=>a.delete(d))}),i?void 0:[n]);return A.useMemo(()=>{a.forEach((d,f)=>a.set(f,!1))},[n]),A.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=A.createElement(XF,{isPresent:n},t)),A.createElement(lh.Provider,{value:c},t)};function JF(){return new Map}function ZF(t){return A.useEffect(()=>()=>t(),[])}const ws=t=>t.key||"";function e3(t,e){t.forEach(n=>{const r=ws(n);e.set(r,n)})}function t3(t){const e=[];return A.Children.forEach(t,n=>{A.isValidElement(n)&&e.push(n)}),e}const AI=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=A.useContext(pg).forceRender||QF()[0],u=bI(),c=t3(t);let d=c;const f=A.useRef(new Map).current,m=A.useRef(d),v=A.useRef(new Map).current,T=A.useRef(!0);if(cg(()=>{T.current=!1,e3(c,v),m.current=d}),ZF(()=>{T.current=!0,v.clear(),f.clear()}),T.current)return A.createElement(A.Fragment,null,d.map(y=>A.createElement(Rd,{key:ws(y),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},y)));d=[...d];const x=m.current.map(ws),P=c.map(ws),E=x.length;for(let y=0;y<E;y++){const w=x[y];P.indexOf(w)===-1&&!f.has(w)&&f.set(w,void 0)}return o==="wait"&&f.size&&(d=[]),f.forEach((y,w)=>{if(P.indexOf(w)!==-1)return;const R=v.get(w);if(!R)return;const V=x.indexOf(w);let O=y;if(!O){const I=()=>{f.delete(w);const _=Array.from(v.keys()).filter(C=>!P.includes(C));if(_.forEach(C=>v.delete(C)),m.current=c.filter(C=>{const k=ws(C);return k===w||_.includes(k)}),!f.size){if(u.current===!1)return;a(),r&&r()}};O=A.createElement(Rd,{key:ws(R),isPresent:!1,onExitComplete:I,custom:e,presenceAffectsLayout:i,mode:o},R),f.set(w,O)}d.splice(V,0,O)}),d=d.map(y=>{const w=y.key;return f.has(w)?y:A.createElement(Rd,{key:ws(y),isPresent:!0,presenceAffectsLayout:i,mode:o},y)}),A.createElement(A.Fragment,null,f.size?d:d.map(y=>A.cloneElement(y)))};function n3(){const{currentUser:t,logout:e}=Ln(),{cartCount:n}=ul(),[r,s]=A.useState(!1),[i,o]=A.useState(""),[a,u]=A.useState(""),c=hr(),d=oo(),[f,m]=A.useState(!1),v=async()=>{try{await e(),c("/login")}catch(P){console.error("Failed to log out",P)}};A.useEffect(()=>{let P=!0;async function E(){if(!t){P&&(o(""),u(""));return}try{const y=zs($s,"users",t.uid),w=await oh(y);if(!P)return;if(w.exists()){const R=w.data();o(R.name||""),u(R.photoURL||"")}else o(""),u("")}catch{o(""),u("")}}return E(),()=>{P=!1}},[t]),A.useEffect(()=>{function P(){m(window.scrollY>8)}return P(),window.addEventListener("scroll",P,{passive:!0}),()=>window.removeEventListener("scroll",P)},[]);const T="relative group text-love-dark font-medium";function x({to:P,children:E}){const y=d.pathname===P;return h.jsxs(ae,{to:P,className:`${T} hover:text-love-red transition-colors`,children:[h.jsx("span",{children:E}),h.jsx("span",{className:`absolute left-0 -bottom-1 h-0.5 bg-gradient-to-r from-love-red to-love-pink transition-all duration-300 ${y?"w-full":"w-0 group-hover:w-full"}`})]})}return h.jsxs("nav",{className:`sticky top-0 z-50 border-b border-love-pink/30 transition-all ${f?"bg-white/85 backdrop-blur-xl shadow-lg":"bg-love-light/80 backdrop-blur-md"}`,children:[h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:`flex justify-between ${f?"h-14":"h-16"} transition-all`,children:[h.jsx("div",{className:"flex items-center",children:h.jsxs(ae,{to:"/",className:"flex items-center space-x-2 group",children:[h.jsx(Ee.div,{whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400,damping:10},children:h.jsx(wn,{className:"h-8 w-8 text-love-red fill-current group-hover:animate-pulse"})}),h.jsx(Ee.span,{initial:!1,animate:{color:f?"#0f172a":"#1f2937"},className:"font-cursive text-3xl font-bold",children:"LoveCraft"})]})}),h.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[h.jsx(x,{to:"/",children:"Home"}),h.jsx(x,{to:"/products",children:"Gifts"}),h.jsx(x,{to:"/contact",children:"Contact"}),h.jsx(x,{to:"/wish",children:"Wish"}),h.jsxs(ae,{to:"/cart",className:"relative group text-love-dark hover:text-love-red transition-colors",children:[h.jsx(Ee.div,{whileHover:{scale:1.1},className:"relative",children:h.jsx(ug,{className:"h-6 w-6"})}),n>0&&h.jsx("span",{className:"absolute -top-2 -right-2 bg-love-red text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-bounce",children:n})]}),t?h.jsxs("div",{className:"relative group",children:[h.jsxs("button",{className:"flex items-center space-x-2 text-love-dark hover:text-love-red",children:[a||t.photoURL?h.jsx("img",{src:a||t.photoURL,alt:"Avatar",className:"h-8 w-8 rounded-full object-cover border border-love-pink/30"}):h.jsx(LO,{className:"h-6 w-6"}),h.jsx("span",{className:"max-w-[160px] truncate",children:i||t.displayName||t.email})]}),h.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-right",children:[h.jsx(ae,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-love-light",children:"Profile"}),h.jsx("button",{onClick:v,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-love-light",children:"Sign out"})]})]}):h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx(x,{to:"/login",children:"Login"}),h.jsx(ae,{to:"/signup",className:"bg-love-red text-white px-4 py-2 rounded-full hover:bg-red-700 transition-colors shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"Sign Up"})]})]}),h.jsx("div",{className:"md:hidden flex items-center",children:h.jsx("button",{onClick:()=>s(!r),className:"text-love-dark hover:text-love-red focus:outline-none",children:r?h.jsx(FO,{className:"h-6 w-6"}):h.jsx(AO,{className:"h-6 w-6"})})})]})}),h.jsx(AI,{children:r&&h.jsx(Ee.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white border-t border-love-pink/30 overflow-hidden",children:h.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[h.jsx(ae,{to:"/",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Home"}),h.jsx(ae,{to:"/products",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Gifts"}),h.jsx(ae,{to:"/contact",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Contact"}),h.jsx(ae,{to:"/wish",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Wish"}),h.jsx(ae,{to:"/cart",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Cart"}),t?h.jsxs(h.Fragment,{children:[h.jsx(ae,{to:"/profile",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Profile"}),h.jsx("button",{onClick:()=>{v(),s(!1)},className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Sign Out"})]}):h.jsxs(h.Fragment,{children:[h.jsx(ae,{to:"/login",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Login"}),h.jsx(ae,{to:"/signup",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Sign Up"})]})]})})})]})}function r3(){return h.jsx("footer",{className:"bg-white border-t border-love-pink/30 pt-12 pb-8",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[h.jsxs("div",{className:"col-span-1 md:col-span-1",children:[h.jsxs(ae,{to:"/",className:"flex items-center space-x-2 mb-4",children:[h.jsx(wn,{className:"h-6 w-6 text-love-red fill-current"}),h.jsx("span",{className:"font-cursive text-2xl text-love-dark font-bold",children:"LoveCraft"})]}),h.jsx("p",{className:"text-gray-600 text-sm",children:"Handcrafted gifts for your special moments. Celebrating love, one gift at a time."})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-love-dark mb-4",children:"Shop"}),h.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[h.jsx("li",{children:h.jsx(ae,{to:"/products",className:"hover:text-love-red transition-colors",children:"All Gifts"})}),h.jsx("li",{children:h.jsx(ae,{to:"/products?category=handmade",className:"hover:text-love-red transition-colors",children:"Handmade Crafts"})}),h.jsx("li",{children:h.jsx(ae,{to:"/products?category=personalized",className:"hover:text-love-red transition-colors",children:"Personalized Items"})}),h.jsx("li",{children:h.jsx(ae,{to:"/products?category=cards",className:"hover:text-love-red transition-colors",children:"Gift Cards"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-love-dark mb-4",children:"Support"}),h.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[h.jsx("li",{children:h.jsx(ae,{to:"/contact",className:"hover:text-love-red transition-colors",children:"Contact Us"})}),h.jsx("li",{children:h.jsx(ae,{to:"/faq",className:"hover:text-love-red transition-colors",children:"FAQs"})}),h.jsx("li",{children:h.jsx(ae,{to:"/shipping",className:"hover:text-love-red transition-colors",children:"Shipping Info"})}),h.jsx("li",{children:h.jsx(ae,{to:"/returns",className:"hover:text-love-red transition-colors",children:"Returns"})})]})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-semibold text-love-dark mb-4",children:"Stay in Love"}),h.jsxs("div",{className:"flex space-x-4 mb-4",children:[h.jsx("a",{href:"#",className:"text-gray-400 hover:text-love-red transition-colors",children:h.jsx(sS,{className:"h-5 w-5"})}),h.jsx("a",{href:"#",className:"text-gray-400 hover:text-love-red transition-colors",children:h.jsx(PO,{className:"h-5 w-5"})}),h.jsx("a",{href:"#",className:"text-gray-400 hover:text-love-red transition-colors",children:h.jsx(MO,{className:"h-5 w-5"})})]}),h.jsxs("p",{className:"text-xs text-gray-500",children:[" ",new Date().getFullYear()," LoveCraft. All rights reserved."]})]})]})})})}function s3(){const t={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.8}}};return h.jsxs(Ee.div,{initial:"hidden",animate:"visible",variants:t,className:"space-y-16 pb-16",children:[h.jsxs("section",{className:"relative min-h-[80vh] flex items-center justify-center overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-love-light via-white to-love-light opacity-90 z-10"}),h.jsx("div",{className:"absolute inset-0 bg-hearts-pattern opacity-10 z-0"}),h.jsx("div",{className:"pointer-events-none absolute -left-24 -top-24 w-72 h-72 bg-pink-400/40 rounded-full blur-3xl z-10"}),h.jsx("div",{className:"pointer-events-none absolute -right-24 top-32 w-80 h-80 bg-red-400/30 rounded-full blur-3xl z-10"}),h.jsxs("div",{className:"relative z-20 px-4 max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between gap-10",children:[h.jsxs(Ee.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.8},className:"text-center md:text-left md:max-w-xl",children:[h.jsx("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-white/70 border border-love-pink/40 text-xs font-medium text-love-red mb-4 shadow-sm backdrop-blur",children:h.jsxs("span",{className:"inline-flex items-center",children:[h.jsx(wn,{className:"h-4 w-4 mr-2"}),"Valentine's 2025 Collection"]})}),h.jsx("h1",{className:"text-5xl md:text-7xl font-cursive text-love-red mb-4 md:mb-6 drop-shadow-sm leading-tight",children:"Make This Valentine's Unforgettable"}),h.jsx("p",{className:"text-lg md:text-xl text-gray-700 mb-6 md:mb-8 max-w-2xl font-light",children:"Discover handcrafted gifts, personalized treasures and romantic surprises designed to celebrate your unique love story."}),h.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 justify-center md:justify-start",children:[h.jsxs(ae,{to:"/products",className:"inline-flex items-center bg-love-red text-white px-8 py-4 rounded-full text-lg font-medium hover:bg-red-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:["Shop Gifts ",h.jsx(nS,{className:"ml-2 h-5 w-5"})]}),h.jsx(ae,{to:"/products?cat=sets",className:"inline-flex items-center px-6 py-3 rounded-full text-sm md:text-base font-medium bg-white/80 backdrop-blur border border-love-pink/40 text-love-dark hover:text-love-red hover:border-love-red transition-all shadow-sm",children:"Browse Romantic Sets"})]}),h.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center md:justify-start gap-4 text-xs md:text-sm text-gray-500",children:[h.jsx("div",{className:"inline-flex items-center gap-2",children:h.jsx("span",{className:"inline-flex h-6 px-3 items-center rounded-full bg-green-100 text-green-700 font-medium",children:"4.9 loved by couples"})}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-love-red"}),h.jsx("span",{children:"Handmade & personalised"})]}),h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-love-red"}),h.jsx("span",{children:"Ships in 35 business days"})]})]})]}),h.jsxs("div",{className:"relative w-full md:w-[380px] h-[320px] md:h-[380px]",children:[h.jsx(Ee.div,{initial:{y:20,opacity:0},animate:{y:[-10,10,-10]},transition:{duration:8,repeat:1/0,repeatType:"reverse"},className:"absolute inset-y-4 left-4 right-10 rounded-3xl shadow-2xl overflow-hidden border border-white/60 bg-white/80 backdrop-blur",children:h.jsx("img",{src:"https://images.unsplash.com/photo-1518895949257-7621c3c786d4?auto=format&fit=crop&q=80&w=900",alt:"Romantic gift set",className:"w-full h-full object-cover"})}),h.jsxs(Ee.div,{initial:{y:-10,opacity:0},animate:{y:[0,-16,0]},transition:{duration:7,repeat:1/0,repeatType:"reverse",delay:.5},className:"absolute -bottom-6 right-0 w-40 rounded-2xl shadow-xl overflow-hidden border border-love-pink/40 bg-white",children:[h.jsx("img",{src:"https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&q=80&w=600",alt:"Jewelry gift",className:"w-full h-28 object-cover"}),h.jsxs("div",{className:"px-3 py-2",children:[h.jsx("p",{className:"text-xs font-semibold text-gray-800 truncate",children:"Personalised Jewelry"}),h.jsx("p",{className:"text-[11px] text-love-red font-medium",children:"From $39"})]})]}),h.jsxs(Ee.div,{initial:{x:10,opacity:0},animate:{x:[-6,6,-6]},transition:{duration:6,repeat:1/0,repeatType:"reverse",delay:.8},className:"absolute -top-4 left-0 px-4 py-3 rounded-2xl bg-white/90 backdrop-blur shadow-lg border border-love-pink/40 flex items-center gap-3",children:[h.jsxs("div",{className:"flex -space-x-2",children:[h.jsx("span",{className:"w-7 h-7 rounded-full bg-love-light border border-white"}),h.jsx("span",{className:"w-7 h-7 rounded-full bg-love-red/70 border border-white"}),h.jsx("span",{className:"w-7 h-7 rounded-full bg-rose-300 border border-white"})]}),h.jsxs("div",{children:[h.jsx("p",{className:"text-xs font-semibold text-gray-800",children:"5,000+ happy couples"}),h.jsx("p",{className:"text-[11px] text-gray-500",children:"Gifting with LoveCraft"})]})]})]})]})]}),h.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h2",{className:"text-4xl font-cursive text-love-dark mb-4",children:"Featured Collections"}),h.jsx("p",{className:"text-gray-600",children:"Handpicked favorites for your special someone"})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{title:"Personalized Jewelry",img:"https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?auto=format&fit=crop&q=80&w=800",link:"/products?cat=jewelry"},{title:"Handmade Crafts",img:"https://images.unsplash.com/photo-1513201099705-a9746e1e201f?auto=format&fit=crop&q=80&w=800",link:"/products?cat=crafts"},{title:"Romantic Gift Sets",img:"https://images.unsplash.com/photo-1549465220-1a8b9238cd48?auto=format&fit=crop&q=80&w=800",link:"/products?cat=sets"}].map((e,n)=>h.jsxs(Ee.div,{whileHover:{y:-10},className:"relative group overflow-hidden rounded-2xl shadow-md aspect-[4/5]",children:[h.jsx("img",{src:e.img,alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-6",children:h.jsxs("div",{children:[h.jsx("h3",{className:"text-white text-2xl font-cursive mb-2",children:e.title}),h.jsx(ae,{to:e.link,className:"text-white/90 text-sm hover:text-white underline",children:"Explore Collection"})]})})]},n))})]}),h.jsx("section",{className:"bg-white py-16",children:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[h.jsxs("div",{className:"p-6",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-love-light text-love-red mb-4",children:h.jsx(rS,{className:"h-8 w-8"})}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Unique Handmade Gifts"}),h.jsx("p",{className:"text-gray-600",children:"Each item is crafted with love and care, ensuring a unique gift for your partner."})]}),h.jsxs("div",{className:"p-6",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-love-light text-love-red mb-4",children:h.jsx(aS,{className:"h-8 w-8"})}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Fast & Secure Delivery"}),h.jsx("p",{className:"text-gray-600",children:"We ensure your gifts arrive on time and in perfect condition for the big day."})]}),h.jsxs("div",{className:"p-6",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-love-light text-love-red mb-4",children:h.jsx(iS,{className:"h-8 w-8"})}),h.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Secure Payments"}),h.jsx("p",{className:"text-gray-600",children:"Shop with confidence using our secure payment gateways."})]})]})})})]})}function i3({product:t,isFavorite:e,onToggleFavorite:n}){const{addToCart:r}=ul(),{currentUser:s}=Ln(),i=hr();return h.jsxs(Ee.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{y:-5},className:"bg-white rounded-xl shadow-sm hover:shadow-md overflow-hidden border border-love-pink/20 transition-all",children:[h.jsxs("div",{className:"relative aspect-square overflow-hidden",children:[h.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-110"}),h.jsx("button",{onClick:n,"aria-pressed":!!e,className:"absolute top-3 right-3 p-2 bg-white/80 rounded-full transition-colors",children:h.jsx(wn,{className:`h-5 w-5 ${e?"text-love-red":"text-gray-400"}`})})]}),h.jsxs("div",{className:"p-4",children:[h.jsx("div",{className:"text-xs text-love-red font-medium mb-1 uppercase tracking-wider",children:t.category}),h.jsx(ae,{to:`/products/${t.id}`,children:h.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2 hover:text-love-red transition-colors truncate",children:t.name})}),h.jsxs("div",{className:"flex items-center justify-between mt-4",children:[h.jsxs("span",{className:"text-xl font-bold text-love-dark",children:["$",t.price.toFixed(2)]}),h.jsxs("button",{onClick:()=>{if(!s){window.confirm(`Please log in to add items to your cart.
Press OK to log in, or Cancel to browse more.`)&&i("/login");return}window.confirm("Add this item to your cart?")&&r(t)},className:"flex items-center space-x-1 bg-love-light text-love-red px-3 py-2 rounded-lg hover:bg-love-red hover:text-white transition-colors text-sm font-medium",children:[h.jsx(ug,{className:"h-4 w-4"}),h.jsx("span",{children:"Add"})]})]})]})]})}const o3=["Jewelry","Handmade","Gifts","Apparel","Personalized","Food","Home","Romance","Tech","Books","Experiences","Accessories","Beauty","Stationery","Games","Plants","Art","Luxury Gifts","DIY Kits","Couple Sets","Memory Keepsakes","Spa & Relaxation","Pet Valentine","Eco-Friendly","Subscription Boxes","Custom Art","Wine & Chocolate"],a3={Jewelry:"Elegant pieces crafted to celebrate love and connection.",Handmade:"Artisan creations made with care and attention.",Gifts:"Thoughtful surprises perfect for special moments.",Apparel:"Cozy styles to match and share together.",Personalized:"Customize to make memories uniquely yours.",Food:"Sweet treats to delight and indulge.",Home:"Warm accents to set a romantic mood.",Romance:"Romantic picks to spark connection and sweet moments.",Tech:"Gadgets and accessories for modern love.",Books:"Stories and journals to share and cherish.",Experiences:"Memorable activities to enjoy together.",Accessories:"Stylish extras to complete the look.",Beauty:"Self-care and grooming for date-ready vibes.",Stationery:"Cards and paper goods for heartfelt notes.",Games:"Fun challenges and play for couples.",Plants:"Green gifts to grow together.",Art:"Creative pieces to decorate with love.","Luxury Gifts":"High-end treasures for unforgettable gestures.","DIY Kits":"Create together with step-by-step craft kits.","Couple Sets":"Perfectly paired items made for two.","Memory Keepsakes":"Stylish ways to preserve special moments.","Spa & Relaxation":"Relaxing essentials for a calm retreat.","Pet Valentine":"Adorable gifts to spoil your furry love.","Eco-Friendly":"Sustainable choices that show you care.","Subscription Boxes":"Monthly surprises curated with love.","Custom Art":"Unique artwork tailored to your story.","Wine & Chocolate":"Romantic pairings of fine wine and chocolate."},Nd={Jewelry:["Heart Pendant Necklace","Infinity Love Necklace","Rose Gold Locket","Engraved Bar Necklace","Crystal Teardrop Earrings","Pearl Stud Earrings","Couples Ring Set","Birthstone Bracelet","Dainty Chain Bracelet","Charm Bracelet","Solitaire Pendant","Knot Ring","Cuff Bracelet","Stackable Rings","Nameplate Necklace","Moon & Star Necklace","Beaded Anklet","Tennis Bracelet","Hoop Earrings","Initial Pendant"],Handmade:["Rose Bear","Crochet Heart Keychain","Hand-painted Mug","Pressed Flower Frame","Knitted Scarf","Macrame Wall Hanging","Handmade Soap Set","Leather Journal","Resin Coaster Set","Clay Trinket Dish","Dried Flower Bouquet","Embroidered Tote","Beaded Phone Charm","Hand-poured Candle","Origami Love Box","Wood Photo Stand","Woven Basket","Felt Rose Corsage","Rope Plant Hanger","Hand-sewn Plush Heart"],Gifts:["Love Letters Box","Photo Memory Album","Couple Quiz Game","Surprise Gift Box","Message in a Bottle","Date Night Cards","Scratch-off Adventure Poster","Polaroid Film Set","Stainless Travel Mug","Bluetooth Mini Speaker","Personalized Calendar","Story of Us Book","Wine Accessories Kit","Hot Cocoa Gift Set","Spa Gift Basket","Bath Bomb Kit","Aromatherapy Diffuser","Keepsake Trinket Box","Greeting Card Pack","Mini Succulent Set"],Apparel:["Matching Hoodies","Couple T-Shirts","Satin Pajama Set","Cozy Knit Sweater","Embroidered Hat","Silk Robe","Flannel Lounge Pants","Fleece Blanket Poncho","Graphic Tee","Varsity Jacket","Denim Couple Jacket","Cotton Socks Pack","Scarf & Beanie Set","Summer Dress","Button-up Shirt","Lightweight Cardigan","Yoga Set","Baseball Cap","Windbreaker","Pullover Hoodie"],Personalized:["Custom Star Map","Engraved Keychain","Photo Crystal","Monogram Throw Pillow","Custom Photo Mug","Personalized Notebook","Custom Phone Case","Engraved Wallet","Name Necklace","Coordinates Bracelet","Photo Puzzle","Personalized Apron","Custom Night Light","Nameplate Door Sign","Custom Doormat","Pet Portrait Print","Custom Calendar","Engraved Pen","Custom Flask","Personalized Cutting Board"],Food:["Luxury Chocolate Box","Macaron Assortment","Gourmet Truffle Set","Heart-shaped Cookies","Artisanal Honey Jar","Strawberry Jam Duo","Specialty Tea Sampler","Coffee Lover Kit","Red Velvet Cupcakes","Chocolate-dipped Strawberries","Caramel Popcorn Tin","Cheese and Crackers Set","Mini Cheesecake Bites","Brownie Gift Box","Marshmallow Treats","Hot Sauce Pair","Olive Oil Tasting Set","Fruit Basket","Nuts Mix Jar","Candy Heart Tin"],Home:["Scented Candle Set","String Lights","Velvet Throw Pillow","Cozy Knit Blanket","Ceramic Vase","Picture Frame Set","Table Runner","Rose Diffuser","Wall Art Print","Decorative Tray","Ceramic Planter","Crystal Decor Bowl","Reed Diffuser Set","Lantern Candle Holder","Gold Mirror","Desk Organizer","Bookends Pair","Floor Lamp","Curtain Fairy Lights","Room Mist Spray"],Romance:Array.from({length:20},(t,e)=>`Romance Gift ${e+1}`),Tech:Array.from({length:20},(t,e)=>`Tech Love Gadget ${e+1}`),Books:Array.from({length:20},(t,e)=>`Couple Book ${e+1}`),Experiences:Array.from({length:20},(t,e)=>`Date Experience ${e+1}`),Accessories:Array.from({length:20},(t,e)=>`Love Accessory ${e+1}`),Beauty:Array.from({length:20},(t,e)=>`Beauty Care Set ${e+1}`),Stationery:Array.from({length:20},(t,e)=>`Love Stationery ${e+1}`),Games:Array.from({length:20},(t,e)=>`Couple Game ${e+1}`),Plants:Array.from({length:20},(t,e)=>`Love Plant ${e+1}`),Art:Array.from({length:20},(t,e)=>`Love Art Print ${e+1}`),"Luxury Gifts":Array.from({length:20},(t,e)=>`Luxury Gift ${e+1}`),"DIY Kits":Array.from({length:20},(t,e)=>`DIY Kit ${e+1}`),"Couple Sets":Array.from({length:20},(t,e)=>`Couple Set ${e+1}`),"Memory Keepsakes":Array.from({length:20},(t,e)=>`Keepsake ${e+1}`),"Spa & Relaxation":Array.from({length:20},(t,e)=>`Spa Relax ${e+1}`),"Pet Valentine":Array.from({length:20},(t,e)=>`Pet Valentine ${e+1}`),"Eco-Friendly":Array.from({length:20},(t,e)=>`Eco Gift ${e+1}`),"Subscription Boxes":Array.from({length:20},(t,e)=>`Subscription Box ${e+1}`),"Custom Art":Array.from({length:20},(t,e)=>`Custom Art ${e+1}`),"Wine & Chocolate":Array.from({length:20},(t,e)=>`Wine & Chocolate ${e+1}`)},l3={Jewelry:50,Handmade:25,Gifts:30,Apparel:40,Personalized:35,Food:20,Home:28,Romance:38,Tech:60,Books:22,Experiences:75,Accessories:27,Beauty:32,Stationery:18,Games:29,Plants:24,Art:33,"Luxury Gifts":80,"DIY Kits":22,"Couple Sets":38,"Memory Keepsakes":32,"Spa & Relaxation":30,"Pet Valentine":24,"Eco-Friendly":28,"Subscription Boxes":45,"Custom Art":50,"Wine & Chocolate":40},u3=(t,e)=>{const n=e.toLowerCase(),r=[t.toLowerCase(),"valentine"];return t==="Jewelry"?n.includes("necklace")?r.push("necklace"):n.includes("earring")?r.push("earrings"):n.includes("ring")?r.push("ring"):n.includes("bracelet")?r.push("bracelet"):r.push("accessory"):t==="Handmade"?n.includes("candle")?r.push("candle"):n.includes("soap")?r.push("soap"):n.includes("knit")||n.includes("scarf")?r.push("knitting"):n.includes("macrame")?r.push("macrame"):n.includes("leather")?r.push("leather"):n.includes("resin")?r.push("resin"):r.push("craft"):t==="Gifts"?n.includes("album")||n.includes("photo")?r.push("photo"):n.includes("box")?r.push("giftbox"):n.includes("mug")?r.push("mug"):n.includes("speaker")?r.push("speaker"):r.push("gift"):t==="Apparel"?n.includes("hoodie")?r.push("hoodie"):n.includes("t-shirt")||n.includes("tee")?r.push("tshirt"):n.includes("pajama")?r.push("pajama"):n.includes("sweater")?r.push("sweater"):n.includes("jacket")?r.push("jacket"):n.includes("dress")?r.push("dress"):n.includes("cardigan")?r.push("cardigan"):r.push("clothing"):t==="Personalized"?n.includes("engraved")?r.push("engraved"):n.includes("custom")?r.push("custom"):n.includes("photo")?r.push("photo"):n.includes("name")?r.push("name"):r.push("personalized"):t==="Food"?n.includes("chocolate")?r.push("chocolate"):n.includes("macaron")?r.push("macaron"):n.includes("truffle")?r.push("truffle"):n.includes("cookie")?r.push("cookies"):n.includes("honey")?r.push("honey"):n.includes("jam")?r.push("jam"):n.includes("tea")?r.push("tea"):n.includes("coffee")?r.push("coffee"):n.includes("cupcake")?r.push("cupcakes"):n.includes("strawberry")?r.push("strawberries"):n.includes("popcorn")?r.push("popcorn"):n.includes("cheese")?r.push("cheese"):n.includes("brownie")?r.push("brownie"):n.includes("marshmallow")?r.push("marshmallow"):n.includes("sauce")?r.push("sauce"):n.includes("oil")?r.push("oil"):n.includes("fruit")?r.push("fruit"):n.includes("nut")?r.push("nuts"):n.includes("candy")?r.push("candy"):r.push("dessert"):t==="Home"?n.includes("candle")?r.push("candle"):n.includes("light")?r.push("lights"):n.includes("pillow")?r.push("pillow"):n.includes("blanket")?r.push("blanket"):n.includes("vase")?r.push("vase"):n.includes("frame")?r.push("frame"):n.includes("diffuser")?r.push("diffuser"):n.includes("art")?r.push("art"):n.includes("tray")?r.push("tray"):n.includes("planter")?r.push("planter"):n.includes("mirror")?r.push("mirror"):n.includes("organizer")?r.push("organizer"):n.includes("lamp")?r.push("lamp"):n.includes("curtain")?r.push("curtain"):n.includes("spray")?r.push("spray"):r.push("decor"):n.includes("gift")?r.push("gift"):n.includes("set")?r.push("set"):n.includes("print")?r.push("print"):n.includes("experience")&&r.push("experience"),r.join(",")},Si=o3.flatMap((t,e)=>Array.from({length:20},(n,r)=>({id:e*100+r+1,name:Nd[t][r],price:Number((l3[t]+r%10*2+e*3).toFixed(2)),category:t,image:`https://placehold.co/800x800/ffffff/cc1d4f/png?text=${encodeURIComponent(Nd[t][r])}`,description:a3[t],tags:u3(t,Nd[t][r]).split(",")})));function c3(){const[t,e]=A.useState("All"),[n,r]=A.useState(""),[s,i]=A.useState("none"),[o,a]=A.useState(""),[u,c]=A.useState(""),[d,f]=A.useState(!1),[m,v]=A.useState(""),[T,x]=A.useState("none"),[P,E]=A.useState(""),[y,w]=A.useState(""),[R,V]=A.useState(1),[O,I]=A.useState([]),{currentUser:_}=Ln(),[C,k]=A.useState([]),[N,D]=A.useState([]),[b,he]=A.useState(!1),[Ye,ge]=A.useState(!1),[we,$]=A.useState("none"),[q,X]=A.useState("none"),Q=A.useMemo(()=>{const z=new Set(Si.map(je=>je.category));return["All",...Array.from(z)]},[]),ne=A.useMemo(()=>{let z=t==="All"?Si:Si.filter(fe=>fe.category===t);const je=n.trim().toLowerCase();je&&(z=z.filter(fe=>fe.name.toLowerCase().includes(je)));let ht=o!==""?parseFloat(o):null,Je=u!==""?parseFloat(u):null;return we!=="none"&&(we==="under30"?(ht=null,Je=30):we==="30to50"?(ht=30,Je=50):we==="50plus"&&(ht=50,Je=null)),ht!==null&&(z=z.filter(fe=>fe.price>=ht)),Je!==null&&(z=z.filter(fe=>fe.price<=Je)),C.length>0&&(z=z.filter(fe=>fe.tags&&fe.tags.some(Jt=>C.includes(Jt)))),b&&_&&(z=z.filter(fe=>O.includes(fe.id))),s==="price_asc"?z=[...z].sort((fe,Jt)=>fe.price-Jt.price):s==="price_desc"?z=[...z].sort((fe,Jt)=>Jt.price-fe.price):s==="name_asc"?z=[...z].sort((fe,Jt)=>fe.name.localeCompare(Jt.name)):s==="name_desc"&&(z=[...z].sort((fe,Jt)=>Jt.name.localeCompare(fe.name))),z},[t,n,o,u,s,C,b,we,O,_]),de=10,ye=Math.max(1,Math.ceil(ne.length/de)),xe=Math.min(R,ye),Xe=ne.slice((xe-1)*de,xe*de),nt=ne.length,Xs=nt===0?0:(xe-1)*de+1,us=nt===0?0:Xs+Xe.length-1;let St=[];ye<=5?St=Array.from({length:ye},(z,je)=>je+1):xe<=3?St=[1,2,3,4,"dots",ye]:xe>=ye-2?St=[1,"dots",ye-3,ye-2,ye-1,ye]:St=[1,"dots",xe-1,xe,xe+1,"dots",ye];const Nt=A.useMemo(()=>{const z=new Set;return Si.forEach(je=>(je.tags||[]).forEach(ht=>z.add(ht))),Array.from(z).sort()},[]);A.useEffect(()=>{let z=!0;async function je(){if(!_){z&&I([]);return}try{const ht=zs($s,"users",_.uid),Je=await oh(ht);if(!z)return;const fe=Je.exists()?Je.data():{};I(Array.isArray(fe.favorites)?fe.favorites:[])}catch{z&&I([])}}return je(),()=>{z=!1}},[_]);async function Js(z){if(!_){alert("Please log in to save favorites");return}const je=O.includes(z),ht=zs($s,"users",_.uid);try{await Y1(ht,{favorites:je?Uj(z):Fj(z)}),I(Je=>je?Je.filter(fe=>fe!==z):[...Je,z])}catch(Je){console.error("Failed to update favorites",Je)}}function po(){v(n),x(s),E(o),w(u),D(C),ge(b),X(we),f(!0)}function mo(){r(m),i(T),a(P),c(y),k(N),he(Ye),$(q),f(!1),V(1)}function go(){f(!1),v(n),x(s),E(o),w(u),D(C),ge(b),X(we)}return h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8",children:h.jsxs("div",{children:[h.jsx("h1",{className:"text-4xl font-cursive text-love-dark",children:"Shop Gifts"}),h.jsx("p",{className:"text-gray-600 mt-2",children:"Find the perfect token of your affection"})]})}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[h.jsx("aside",{className:"order-2 md:order-1 md:col-span-1",children:h.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-love-pink/20",children:[h.jsx("h2",{className:"text-lg font-semibold text-love-dark mb-4",children:"Categories"}),h.jsx("div",{className:"space-y-2",children:Q.map(z=>h.jsx("button",{onClick:()=>{e(z),V(1)},className:`w-full text-left px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===z?"bg-love-red text-white shadow-md":"bg-white border border-gray-200 text-gray-700 hover:bg-love-light"}`,children:z},z))})]})}),h.jsxs("section",{className:"order-1 md:order-2 md:col-span-3",children:[h.jsx("div",{className:"flex items-center justify-between mb-4",children:h.jsx("button",{onClick:po,className:"p-2 rounded-lg bg-white border border-love-pink/30 text-gray-600 hover:text-love-red hover:border-love-red transition-colors","aria-label":"Open Filters",title:"Filters",children:h.jsx(CO,{className:"h-5 w-5"})})}),d&&h.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-love-pink/20 mb-6",children:[h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[h.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:m,onChange:z=>v(z.target.value)}),h.jsxs("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:T,onChange:z=>x(z.target.value),children:[h.jsx("option",{value:"none",children:"Sort by"}),h.jsx("option",{value:"price_asc",children:"Price: Low to High"}),h.jsx("option",{value:"price_desc",children:"Price: High to Low"}),h.jsx("option",{value:"name_asc",children:"Name: A to Z"}),h.jsx("option",{value:"name_desc",children:"Name: Z to A"})]}),h.jsx("input",{type:"number",min:"0",step:"0.01",placeholder:"Min price",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:P,onChange:z=>E(z.target.value)}),h.jsx("input",{type:"number",min:"0",step:"0.01",placeholder:"Max price",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:y,onChange:z=>w(z.target.value)})]}),h.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4",children:[h.jsxs("div",{className:"md:col-span-2",children:[h.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tags"}),h.jsx("div",{className:"flex flex-wrap gap-2",children:Nt.map(z=>{const je=N.includes(z);return h.jsx("button",{onClick:()=>{D(ht=>je?ht.filter(Je=>Je!==z):[...ht,z])},className:`px-3 py-1 rounded-full text-sm border ${je?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:z},z)})})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Price"}),h.jsx("div",{className:"space-y-2",children:[{id:"none",label:"None"},{id:"under30",label:"Under $30"},{id:"30to50",label:"$30  $50"},{id:"50plus",label:"$50+"}].map(z=>h.jsx("button",{onClick:()=>X(z.id),className:`w-full text-left px-3 py-2 rounded-lg border text-sm ${q===z.id?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:z.label},z.id))})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Only Favorites"}),h.jsx("button",{onClick:()=>ge(z=>!z),disabled:!_,className:`w-full px-3 py-2 rounded-lg border text-sm ${Ye?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"} ${_?"":"opacity-50 cursor-not-allowed"}`,children:Ye?"Enabled":"Disabled"})]})]}),h.jsxs("div",{className:"mt-4 flex items-center justify-end space-x-3",children:[h.jsx("button",{onClick:go,className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),h.jsx("button",{onClick:mo,className:"px-4 py-2 rounded-lg bg-love-red text-white hover:bg-red-700 transition-colors",children:"Show Results"})]})]}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Xe.map(z=>{const je=O.includes(z.id);return h.jsx(i3,{product:z,isFavorite:je,onToggleFavorite:()=>Js(z.id)},z.id)})}),h.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-between gap-4",children:[h.jsx("div",{className:"text-sm text-gray-600",children:nt===0?"No gifts found. Try adjusting your filters.":`Showing ${Xs}-${us} of ${nt} gifts`}),ye>1&&h.jsxs("div",{className:"flex items-center gap-1",children:[h.jsx("button",{onClick:()=>V(z=>Math.max(1,z-1)),disabled:xe===1,className:`px-3 py-2 rounded-md border text-sm ${xe===1?"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Previous"}),St.map((z,je)=>z==="dots"?h.jsx("span",{className:"px-2 text-gray-400 text-sm",children:"..."},`dots-${je}`):h.jsx("button",{onClick:()=>V(z),className:`px-3 py-2 rounded-md border text-sm ${z===xe?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:z},z)),h.jsx("button",{onClick:()=>V(z=>Math.min(ye,z+1)),disabled:xe===ye,className:`px-3 py-2 rounded-md border text-sm ${xe===ye?"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Next"})]})]})]})]})]})}function h3(){const{id:t}=ub(),e=Si.find(v=>v.id===parseInt(t)),[n,r]=A.useState(""),[s,i]=A.useState(1),{addToCart:o}=ul(),[a,u]=A.useState(!1),{currentUser:c}=Ln(),d=hr(),f=()=>{if(!c){window.confirm(`Please log in to add items to your cart.
Press OK to log in, or Cancel to browse more.`)&&d("/login");return}window.confirm("Add this item to your cart?")&&(o(e,s,n),u(!0),setTimeout(()=>u(!1),2e3))};function m(){const T=document.createElement("canvas");T.width=1080,T.height=1080;const x=T.getContext("2d"),P=x.createLinearGradient(0,0,1080,1080);P.addColorStop(0,"#ffe4e6"),P.addColorStop(1,"#fb7185"),x.fillStyle=P,x.fillRect(0,0,1080,1080);function E(_,C,k,N){x.save(),x.translate(_,C),x.scale(k,k),x.beginPath(),x.moveTo(0,-10),x.bezierCurveTo(12,-28,40,-18,40,6),x.bezierCurveTo(40,26,18,40,0,52),x.bezierCurveTo(-18,40,-40,26,-40,6),x.bezierCurveTo(-40,-18,-12,-28,0,-10),x.closePath(),x.fillStyle=N,x.fill(),x.restore()}for(let _=0;_<24;_++){const C=Math.random()*1080,k=Math.random()*1080,N=.3+Math.random()*.8,D=Math.random()<.5?"rgba(225,29,72,0.15)":"rgba(251,113,133,0.15)";E(C,k,N,D)}x.fillStyle="rgba(255,255,255,0.85)";const y=80;x.beginPath(),x.moveTo(140+y,180),x.arcTo(940,180,940,900,y),x.arcTo(940,900,140,900,y),x.arcTo(140,900,140,180,y),x.arcTo(140,180,940,180,y),x.closePath(),x.fill(),x.fillStyle="#e11d48",x.textAlign="center",x.font="bold 72px Georgia",x.fillText("With Love",1080/2,300),x.fillStyle="#0f172a",x.font="600 56px Georgia",x.fillText(e.name,1080/2,390),x.fillStyle="#334155",x.font="italic 36px Georgia";const w=n!=null&&n.trim()?n.trim():"You make my world brighter",R=[];let V="";w.split(/\s+/).forEach(_=>{const C=V?V+" "+_:_;x.measureText(C).width>720?(R.push(V),V=_):V=C}),V&&R.push(V),R.slice(0,4).forEach((_,C)=>{x.fillText(_,1080/2,480+C*48)}),x.fillStyle="#e11d48",E(1080/2,620,1.2,"#e11d48"),x.fillStyle="#64748b",x.font="500 28px Georgia",x.fillText("LoveCraft",1080/2,860);const I=document.createElement("a");I.download="wish-card.png",I.href=T.toDataURL("image/png"),I.click()}return e?h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsxs(ae,{to:"/products",className:"inline-flex items-center text-gray-500 hover:text-love-red mb-8 transition-colors",children:[h.jsx(EO,{className:"h-4 w-4 mr-2"})," Back to Gifts"]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[h.jsx(Ee.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"rounded-2xl overflow-hidden shadow-lg border border-love-pink/20",children:h.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"})}),h.jsxs(Ee.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm text-love-red font-medium uppercase tracking-wider mb-2",children:e.category}),h.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-2",children:e.name}),h.jsxs("div",{className:"flex items-center space-x-2 text-yellow-500 text-sm mb-4",children:[h.jsx("div",{className:"flex",children:[...Array(5)].map((v,T)=>h.jsx(OO,{className:"h-4 w-4 fill-current"},T))}),h.jsx("span",{className:"text-gray-400",children:"(24 reviews)"})]}),h.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",e.price.toFixed(2)]})]}),h.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description||"Celebrate your love with this handcrafted treasure. Perfect for anniversaries, Valentine's Day, or just because."}),h.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"custom-text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Message (Optional)"}),h.jsx("textarea",{id:"custom-text",rows:3,className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-love-pink focus:ring-love-pink text-sm p-3 border",placeholder:"Enter names, dates, or a short love note...",value:n,onChange:v=>r(v.target.value)})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[h.jsx("button",{onClick:()=>i(Math.max(1,s-1)),className:"px-3 py-2 text-gray-600 hover:bg-gray-50",children:"-"}),h.jsx("span",{className:"px-3 py-2 font-medium w-12 text-center",children:s}),h.jsx("button",{onClick:()=>i(s+1),className:"px-3 py-2 text-gray-600 hover:bg-gray-50",children:"+"})]}),h.jsxs("button",{onClick:f,disabled:a,className:`flex-1 px-6 py-3 rounded-lg font-medium transition-colors shadow-md flex items-center justify-center space-x-2 ${a?"bg-green-600 text-white":"bg-love-red text-white hover:bg-red-700"}`,children:[a?h.jsx(vd,{className:"h-5 w-5"}):h.jsx(ug,{className:"h-5 w-5"}),h.jsx("span",{children:a?"Added to Cart":"Add to Cart"})]}),h.jsxs("button",{onClick:m,className:"px-6 py-3 rounded-lg font-medium transition-colors shadow-md flex items-center justify-center space-x-2 bg-white text-love-red border border-love-pink/30 hover:bg-love-light",children:[h.jsx(IO,{className:"h-5 w-5"}),h.jsx("span",{children:"Download Wish Image"})]}),h.jsx("button",{className:"p-3 border border-gray-300 rounded-lg hover:border-love-red hover:text-love-red transition-colors",children:h.jsx(wn,{className:"h-5 w-5"})})]})]}),h.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 pt-4",children:[h.jsxs("div",{className:"flex items-center",children:[h.jsx(vd,{className:"h-4 w-4 mr-1 text-green-500"})," In Stock"]}),h.jsxs("div",{className:"flex items-center",children:[h.jsx(vd,{className:"h-4 w-4 mr-1 text-green-500"})," Free Shipping"]})]})]})]})]}):h.jsxs("div",{className:"min-h-[50vh] flex flex-col items-center justify-center",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Product not found"}),h.jsx(ae,{to:"/products",className:"mt-4 text-love-red hover:underline",children:"Return to Shop"})]})}function d3(){const{cartItems:t,removeFromCart:e,updateQuantity:n,cartTotal:r}=ul();return t.length===0?h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center",children:[h.jsx("h2",{className:"text-3xl font-cursive text-gray-800 mb-4",children:"Your cart is empty"}),h.jsx("p",{className:"text-gray-600 mb-8",children:"Looks like you haven't found the perfect gift yet."}),h.jsxs(ae,{to:"/products",className:"inline-flex items-center bg-love-red text-white px-6 py-3 rounded-full hover:bg-red-700 transition-colors",children:["Start Shopping ",h.jsx(nS,{className:"ml-2 h-4 w-4"})]})]}):h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-8",children:"Shopping Cart"}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[h.jsx("div",{className:"lg:col-span-2 space-y-6",children:t.map(s=>h.jsxs("div",{className:"flex items-center bg-white p-4 rounded-xl shadow-sm border border-love-pink/20",children:[h.jsx("img",{src:s.image,alt:s.name,className:"w-24 h-24 object-cover rounded-lg"}),h.jsxs("div",{className:"ml-6 flex-1",children:[h.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s.name}),h.jsxs("p",{className:"text-love-red font-medium",children:["$",s.price.toFixed(2)]}),s.customText&&h.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Note: ",s.customText]})]}),h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[h.jsx("button",{onClick:()=>n(s.id,s.customText,s.quantity-1),className:"px-3 py-1 text-gray-600 hover:bg-gray-50",children:"-"}),h.jsx("span",{className:"px-2 font-medium",children:s.quantity}),h.jsx("button",{onClick:()=>n(s.id,s.customText,s.quantity+1),className:"px-3 py-1 text-gray-600 hover:bg-gray-50",children:"+"})]}),h.jsx("button",{onClick:()=>e(s.id,s.customText),className:"text-gray-400 hover:text-red-500 transition-colors",children:h.jsx(oS,{className:"h-5 w-5"})})]})]},`${s.id}-${s.customText}`))}),h.jsx("div",{className:"lg:col-span-1",children:h.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-love-pink/20 sticky top-24",children:[h.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Order Summary"}),h.jsxs("div",{className:"space-y-4 text-sm",children:[h.jsxs("div",{className:"flex justify-between text-gray-600",children:[h.jsx("span",{children:"Subtotal"}),h.jsxs("span",{children:["$",r.toFixed(2)]})]}),h.jsxs("div",{className:"flex justify-between text-gray-600",children:[h.jsx("span",{children:"Shipping"}),h.jsx("span",{children:"Free"})]}),h.jsxs("div",{className:"border-t border-gray-100 pt-4 flex justify-between font-bold text-lg text-gray-900",children:[h.jsx("span",{children:"Total"}),h.jsxs("span",{children:["$",r.toFixed(2)]})]})]}),h.jsx(ae,{to:"/checkout",className:"block text-center w-full mt-8 bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Proceed to Checkout"})]})})]})]})}const f3=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},q3={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:f3()};function p3(){const{cartItems:t,cartTotal:e,clearCart:n}=ul(),{currentUser:r}=Ln(),s=hr(),[i,o]=A.useState(!1),[a,u]=A.useState(""),[c,d]=A.useState({firstName:"",lastName:"",email:(r==null?void 0:r.email)||"",address:"",city:"",zipCode:"",country:"",cardNumber:"",expiryDate:"",cvv:""}),f=v=>{d({...c,[v.target.name]:v.target.value})},m=async v=>{v.preventDefault(),o(!0),u("");try{const T={userId:r?r.uid:"guest",userEmail:c.email,items:t,total:e,shippingDetails:{firstName:c.firstName,lastName:c.lastName,address:c.address,city:c.city,zipCode:c.zipCode,country:c.country},status:"pending",createdAt:Tu()},x=await Mj(Tj($s,"orders"),T);try{const P={order_id:x.id,to_name:`${c.firstName} ${c.lastName}`,to_email:c.email,message:`Thank you for your order! Your total is $${e.toFixed(2)}. We will ship your romantic gifts to ${c.address}, ${c.city}.`,reply_to:"support@lovecraft.com"},E=void 0,y=void 0,w="GNdiN4DMl_vTXQ7iE";E&&y||console.warn("EmailJS service/template IDs are not set"),console.log("Email sent successfully!")}catch(P){console.error("Failed to send email:",P)}n(),s("/order-success")}catch(T){console.error("Error placing order:",T),u("Failed to place order. Please try again.")}finally{o(!1)}};return A.useEffect(()=>{t.length===0&&s("/cart")},[t,s]),t.length===0?null:h.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:h.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[h.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-8 text-center",children:"Checkout"}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[h.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md border border-love-pink/20",children:[h.jsx("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:"Shipping Details"}),a&&h.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:a}),h.jsxs("form",{onSubmit:m,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),h.jsx("input",{type:"text",name:"firstName",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.firstName,onChange:f})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),h.jsx("input",{type:"text",name:"lastName",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.lastName,onChange:f})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),h.jsx("input",{type:"email",name:"email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.email,onChange:f})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),h.jsx("input",{type:"text",name:"address",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.address,onChange:f})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),h.jsx("input",{type:"text",name:"city",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.city,onChange:f})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zip Code"}),h.jsx("input",{type:"text",name:"zipCode",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.zipCode,onChange:f})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),h.jsx("input",{type:"text",name:"country",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.country,onChange:f})]}),h.jsxs("div",{className:"pt-6 border-t border-gray-100",children:[h.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Payment Information"}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),h.jsx("input",{type:"text",name:"cardNumber",required:!0,placeholder:"0000 0000 0000 0000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.cardNumber,onChange:f})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),h.jsx("input",{type:"text",name:"expiryDate",required:!0,placeholder:"MM/YY",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.expiryDate,onChange:f})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV"}),h.jsx("input",{type:"text",name:"cvv",required:!0,placeholder:"123",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.cvv,onChange:f})]})]})]})]}),h.jsx("button",{type:"submit",disabled:i,className:"w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Processing...":`Pay $${e.toFixed(2)}`})]})]}),h.jsx("div",{children:h.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-200 sticky top-24",children:[h.jsx("h2",{className:"text-xl font-semibold mb-6 text-gray-800",children:"Order Summary"}),h.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:t.map(v=>h.jsxs("div",{className:"flex gap-4 border-b border-gray-200 pb-4",children:[h.jsx("img",{src:v.image,alt:v.name,className:"w-16 h-16 object-cover rounded-md"}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h4",{className:"font-medium text-gray-800",children:v.name}),h.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",v.quantity]}),h.jsxs("p",{className:"text-love-red font-medium",children:["$",v.price.toFixed(2)]}),v.customText&&h.jsxs("p",{className:"text-xs text-gray-500 italic mt-1",children:['"',v.customText,'"']})]})]},`${v.id}-${v.customText}`))}),h.jsxs("div",{className:"mt-6 space-y-2 pt-4 border-t border-gray-200",children:[h.jsxs("div",{className:"flex justify-between text-gray-600",children:[h.jsx("span",{children:"Subtotal"}),h.jsxs("span",{children:["$",e.toFixed(2)]})]}),h.jsxs("div",{className:"flex justify-between text-gray-600",children:[h.jsx("span",{children:"Shipping"}),h.jsx("span",{children:"Free"})]}),h.jsxs("div",{className:"flex justify-between font-bold text-xl text-love-dark pt-2",children:[h.jsx("span",{children:"Total"}),h.jsxs("span",{children:["$",e.toFixed(2)]})]})]})]})})]})]})})}var Pu={linear:function(t,e,n,r){var s=n-e;return s*t/r+e},easeInQuad:function(t,e,n,r){var s=n-e;return s*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var s=n-e;return-s*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var s=n-e;return-s*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var s=n-e;return-s*Math.cos(t/r*(Math.PI/2))+s+e},easeOutSine:function(t,e,n,r){var s=n-e;return s*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var s=n-e;return-s/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var s=n-e;return t==0?e:s*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var s=n-e;return t==r?e+s:s*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var s=n-e;return t===0?e:t===r?e+s:(t/=r/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var s=n-e;return-s*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var s=n-e;return s*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var s=n-e,i,o,a;return a=1.70158,o=0,i=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var s=n-e,i,o,a;return a=1.70158,o=0,i=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+s+e)},easeInOutElastic:function(t,e,n,r){var s=n-e,i,o,a;return a=1.70158,o=0,i=s,t===0?e:(t/=r/2)===2?e+s:(o||(o=r*(.3*1.5)),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+s+e)},easeInBack:function(t,e,n,r,s){var i=n-e;return s===void 0&&(s=1.70158),i*(t/=r)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,n,r,s){var i=n-e;return s===void 0&&(s=1.70158),i*((t=t/r-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,n,r,s){var i=n-e;return s===void 0&&(s=1.70158),(t/=r/2)<1?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,n,r){var s=n-e,i;return i=Pu.easeOutBounce(r-t,0,s,r),s-i+e},easeOutBounce:function(t,e,n,r){var s=n-e;return(t/=r)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var s=n-e,i;return t<r/2?(i=Pu.easeInBounce(t*2,0,s,r),i*.5+e):(i=Pu.easeOutBounce(t*2-r,0,s,r),i*.5+s*.5+e)}},m3=Pu;function g3(t){return t*Math.PI/180}function $t(t,e){return t+Math.random()*(e-t)}function y3(t,e){return Math.floor(t+Math.random()*(e-t+1))}var ma;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(ma||(ma={}));var Tr;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(Tr||(Tr={}));const v3=1e3/60;class _3{constructor(e,n,r,s){this.getOptions=n;const{colors:i,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=s,this.w=$t(5,20),this.h=$t(5,20),this.radius=$t(5,10),this.vx=typeof o=="number"?$t(-o,o):$t(o.min,o.max),this.vy=typeof a=="number"?$t(-a,0):$t(a.min,a.max),this.shape=y3(0,2),this.angle=g3($t(0,360)),this.angularSpin=$t(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=$t(0,1),this.rotationDirection=$t(0,1)?Tr.Positive:Tr.Negative}update(e){const{gravity:n,wind:r,friction:s,opacity:i,drawShape:o}=this.getOptions(),a=e/v3;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=s**a,this.vy*=s**a,this.rotateY>=1&&this.rotationDirection===Tr.Positive?this.rotationDirection=Tr.Negative:this.rotateY<=-1&&this.rotationDirection===Tr.Negative&&(this.rotationDirection=Tr.Positive);const u=.1*this.rotationDirection*a;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case ma.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case ma.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case ma.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class w3{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=$t(this.x,this.w+this.x),i=$t(this.y,this.h+this.y);return new _3(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:o,particlesGenerated:a,lastNumberOfPieces:u}=this,{run:c,recycle:d,numberOfPieces:f,debug:m,tweenFunction:v,tweenDuration:T}=this.getOptions();if(!c)return!1;const x=this.particles.length,P=d?x:a;if(P<f){u!==f&&(this.tweenProgress=0,this.tweenFrom=P,this.lastNumberOfPieces=f),this.tweenProgress=Math.min(T,Math.max(0,this.tweenProgress+s));const E=v(this.tweenProgress,this.tweenFrom,f,T),y=Math.round(E-P);for(let w=0;w<y;w++)this.particles.push(this.getParticle());this.particlesGenerated+=y}m&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${x}`,i.width-10,i.height-20));for(let E=this.particles.length-1;E>=0;E--){const y=this.particles[E];y.update(s),(y.y>i.height||y.y<-100||y.x>i.width+100||y.x<-100)&&(d&&P<=f?this.particles[E]=this.getParticle():this.removeParticleAt(E))}return x>0||P<f},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const Ng={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:m3.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class x3{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...Ng,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:a},canvas:u,context:c}=this,d=Math.min(s-this.lastFrameTime,50);if(a&&d<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(a?d%a:0),i&&(c.fillStyle="white",c.clearRect(0,0,u.width,u.height)),this.generator.animate(d)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new w3(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var s,i;const n=(s=this._options)==null?void 0:s.run,r=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const E3=Gr.createRef();class Dg extends Gr.Component{constructor(e){super(e),this.canvas=Gr.createRef(),this.canvas=e.canvasRef||E3}componentDidMount(){if(this.canvas.current){const e=Dd(this.props)[0];this.confetti=new x3(this.canvas.current,e)}}componentDidUpdate(){const e=Dd(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=Dd(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return h.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}Dg.defaultProps={...Ng};Dg.displayName="ReactConfetti";function Dd(t){const e={},n={},r={},s=[...Object.keys(Ng),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in t){const a=t[o];s.includes(o)?e[o]=a:i.includes(o)?i[o]=a:r[o]=a}return[e,r,n]}const T3=Gr.forwardRef((t,e)=>h.jsx(Dg,{canvasRef:e,...t}));function S3(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function I3(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var Vd=typeof window<"u",P3=function(t){A.useEffect(t,[])},C3=function(t){var e=A.useRef(t);e.current=t,P3(function(){return function(){return e.current()}})},k3=function(t){var e=A.useRef(0),n=A.useState(t),r=n[0],s=n[1],i=A.useCallback(function(o){cancelAnimationFrame(e.current),e.current=requestAnimationFrame(function(){s(o)})},[]);return C3(function(){cancelAnimationFrame(e.current)}),[r,i]},b3=function(t){var e={},n=e.initialWidth,r=n===void 0?1/0:n,s=e.initialHeight,i=s===void 0?1/0:s,o=e.onChange,a=k3({width:Vd?window.innerWidth:r,height:Vd?window.innerHeight:i}),u=a[0],c=a[1];return A.useEffect(function(){if(Vd){var d=function(){var f=window.innerWidth,m=window.innerHeight;c({width:f,height:m}),o&&o(f,m)};return S3(window,"resize",d),function(){I3(window,"resize",d)}}},[]),u};function A3(){const{width:t,height:e}=b3();return h.jsxs("div",{className:"min-h-[80vh] flex items-center justify-center bg-love-light/30 px-4",children:[h.jsx(T3,{width:t,height:e,recycle:!1,numberOfPieces:200,colors:["#e11d48","#fb7185","#ffe4e6","#ffffff"]}),h.jsxs(Ee.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.8},className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-xl border border-love-pink/20 text-center relative overflow-hidden",children:[h.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-love-red to-love-pink"}),h.jsx(Ee.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:h.jsx(TO,{className:"h-10 w-10 text-green-600"})}),h.jsx("h1",{className:"text-3xl font-cursive text-love-dark mb-4",children:"Order Placed!"}),h.jsx("p",{className:"text-gray-600 mb-8",children:"Thank you for your order. We're preparing your romantic gifts with love! You'll receive a confirmation email shortly."}),h.jsxs("div",{className:"space-y-4",children:[h.jsx(ae,{to:"/products",className:"block w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Continue Shopping"}),h.jsx(ae,{to:"/",className:"block w-full bg-white text-love-dark border border-gray-200 py-3 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Back to Home"})]}),h.jsxs("div",{className:"mt-8 flex justify-center space-x-2 text-love-pink/60",children:[h.jsx(wn,{className:"h-4 w-4 fill-current animate-pulse"}),h.jsx(wn,{className:"h-4 w-4 fill-current animate-pulse delay-75"}),h.jsx(wn,{className:"h-4 w-4 fill-current animate-pulse delay-150"})]})]})]})}function R3(){const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,i]=A.useState(""),[o,a]=A.useState(""),[u,c]=A.useState(!1),{login:d,loginWithGoogle:f,resetPassword:m}=Ln(),v=hr();async function T(E){E.preventDefault();try{i(""),a(""),c(!0),await d(t,n),v("/")}catch(y){console.error("Login error:",y);let w="Failed to log in";y.code==="auth/wrong-password"&&(w="Incorrect password"),y.code==="auth/user-not-found"&&(w="No account found with this email"),y.code==="auth/invalid-email"&&(w="Invalid email address"),y.code==="auth/invalid-credential"&&(w="Invalid credentials"),i(w)}c(!1)}async function x(){try{i(""),c(!0),await f(),v("/")}catch(E){console.error("Google login error:",E);let y="Failed to log in with Google";E.code==="auth/popup-closed-by-user"&&(y="Google sign-in was closed before completing."),E.code==="auth/popup-blocked-by-browser"&&(y="Your browser blocked the Google sign-in popup."),E.code==="auth/cancelled-popup-request"&&(y="Google sign-in was cancelled by another request."),E.code==="auth/unauthorized-domain"&&(y="Google sign-in is not enabled for this website domain."),y==="Failed to log in with Google"&&E.code&&(y+=` (${E.code})`),i(y)}c(!1)}async function P(){if(!t){i("Please enter your email to reset your password");return}try{i(""),a(""),c(!0),await m(t),a("Password reset email sent. Check your inbox.")}catch(E){console.error("Reset password error:",E);let y="Failed to send password reset email";E.code==="auth/user-not-found"&&(y="No account found with this email"),E.code==="auth/invalid-email"&&(y="Invalid email address"),i(y)}c(!1)}return h.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-love-light/30 px-4",children:h.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx(wn,{className:"h-10 w-10 text-love-red mx-auto mb-2 fill-current"}),h.jsx("h2",{className:"text-3xl font-cursive text-love-dark font-bold",children:"Welcome Back"}),h.jsx("p",{className:"text-gray-600",children:"Sign in to continue your love story"})]}),s&&h.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:s}),o&&h.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"status",children:o}),h.jsxs("form",{onSubmit:T,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),h.jsx("input",{type:"email",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:t,onChange:E=>e(E.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),h.jsx("input",{type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:n,onChange:E=>r(E.target.value)})]}),h.jsx("div",{className:"flex justify-end",children:h.jsx("button",{type:"button",onClick:P,disabled:u,className:"text-sm text-love-red hover:underline",children:"Forgot password?"})}),h.jsx("button",{type:"submit",disabled:u,className:"w-full bg-love-red text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-red transition-colors font-medium",children:"Log In"})]}),h.jsx("div",{className:"mt-6",children:h.jsxs("button",{onClick:x,disabled:u,className:"w-full flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-red",children:[h.jsxs("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[h.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),h.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),h.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),h.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]})}),h.jsxs("div",{className:"mt-6 text-center text-sm",children:[h.jsx("span",{className:"text-gray-600",children:"Don't have an account? "}),h.jsx(ae,{to:"/signup",className:"text-love-red hover:underline font-medium",children:"Sign up"})]})]})})}function N3(){const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,i]=A.useState(""),[o,a]=A.useState(""),[u,c]=A.useState(""),[d,f]=A.useState(!1),{signup:m,loginWithGoogle:v}=Ln(),T=hr();async function x(E){if(E.preventDefault(),s!==o)return c("Passwords do not match");try{c(""),f(!0),await m(n,s,{displayName:t}),T("/profile")}catch(y){console.error("Signup error:",y);let w="Failed to create an account";y.code==="auth/email-already-in-use"&&(w="Email is already in use"),y.code==="auth/weak-password"&&(w="Password should be at least 6 characters"),y.code==="auth/invalid-email"&&(w="Invalid email address"),y.code==="auth/operation-not-allowed"&&(w="Email/Password accounts are not enabled in Firebase Console."),w==="Failed to create an account"&&(w+=`: ${y.message} (${y.code})`),c(w)}f(!1)}async function P(){try{c(""),f(!0),await v(),T("/profile")}catch(E){console.error("Google login error:",E);let y="Failed to sign up with Google";E.code==="auth/popup-closed-by-user"&&(y="Google sign-up was closed before completing."),E.code==="auth/popup-blocked-by-browser"&&(y="Your browser blocked the Google sign-up popup."),E.code==="auth/cancelled-popup-request"&&(y="Google sign-up was cancelled by another request."),E.code==="auth/unauthorized-domain"&&(y="Google sign-up is not enabled for this website domain."),y==="Failed to sign up with Google"&&E.code&&(y+=` (${E.code})`),c(y)}f(!1)}return h.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-love-light/30 px-4",children:h.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx(wn,{className:"h-10 w-10 text-love-red mx-auto mb-2 fill-current"}),h.jsx("h2",{className:"text-3xl font-cursive text-love-dark font-bold",children:"Create Account"}),h.jsx("p",{className:"text-gray-600",children:"Join our community of love"})]}),u&&h.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:u}),h.jsxs("form",{onSubmit:x,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),h.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:t,onChange:E=>e(E.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),h.jsx("input",{type:"email",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:n,onChange:E=>r(E.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),h.jsx("input",{type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:s,onChange:E=>i(E.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),h.jsx("input",{type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:o,onChange:E=>a(E.target.value)})]}),h.jsx("button",{type:"submit",disabled:d,className:"w-full bg-love-red text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-red transition-colors font-medium",children:"Sign Up"})]}),h.jsx("div",{className:"mt-6",children:h.jsxs("button",{onClick:P,disabled:d,className:"w-full flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-red",children:[h.jsxs("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[h.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),h.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),h.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),h.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]})}),h.jsxs("div",{className:"mt-6 text-center text-sm",children:[h.jsx("span",{className:"text-gray-600",children:"Already have an account? "}),h.jsx(ae,{to:"/login",className:"text-love-red hover:underline font-medium",children:"Log in"})]})]})})}function D3(){const[t,e]=A.useState([{id:1,name:"Personalized Heart Necklace",price:45,category:"Jewelry"},{id:2,name:"Handmade Rose Bear",price:35.5,category:"Handmade"}]);return h.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsx("h1",{className:"text-4xl font-cursive text-love-dark",children:"Admin Dashboard"}),h.jsxs("button",{className:"flex items-center space-x-2 bg-love-red text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[h.jsx(jO,{className:"h-5 w-5"}),h.jsx("span",{children:"Add Product"})]})]}),h.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-love-pink/20 overflow-hidden",children:h.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[h.jsx("thead",{className:"bg-love-light",children:h.jsxs("tr",{children:[h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),h.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),h.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),h.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(n=>h.jsxs("tr",{children:[h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:n.name}),h.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.category}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",n.price.toFixed(2)]}),h.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[h.jsx("button",{className:"text-indigo-600 hover:text-indigo-900 mr-4",children:h.jsx(DO,{className:"h-4 w-4"})}),h.jsx("button",{className:"text-red-600 hover:text-red-900",children:h.jsx(oS,{className:"h-4 w-4"})})]})]},n.id))})]})})]})}function V3(){const{currentUser:t}=Ln(),[e,n]=A.useState(!0),[r,s]=A.useState(""),[i,o]=A.useState(!1),[a,u]=A.useState({name:"",address:"",postalCode:"",country:"",gender:"",billingName:"",billingAddress:"",billingPostalCode:"",billingCountry:""}),[c,d]=A.useState(null),[f,m]=A.useState(""),[v,T]=A.useState([]),[x,P]=A.useState(!1),E=A.useRef(null);A.useEffect(()=>{async function V(){if(t){o(!1),s(""),n(!0);try{const O=zs($s,"users",t.uid),I=await oh(O),_=I.exists()?I.data():{};u({name:_.name||t.displayName||"",address:_.address||"",postalCode:_.postalCode||"",country:_.country||"",gender:_.gender||"",billingName:_.billingName||_.name||t.displayName||"",billingAddress:_.billingAddress||_.address||"",billingPostalCode:_.billingPostalCode||_.postalCode||"",billingCountry:_.billingCountry||_.country||""}),m(_.photoURL||t.photoURL||""),T(Array.isArray(_.favorites)?_.favorites:[])}catch{s("Failed to load profile")}finally{P(!1),n(!1)}}}V()},[t]);function y(V){const{name:O,value:I}=V.target;u(_=>({..._,[O]:I}))}function w(V){return new Promise((O,I)=>{const _=new FileReader;_.onload=()=>O(_.result),_.onerror=I,_.readAsDataURL(V)})}async function R(V){V.preventDefault(),s(""),o(!1);try{let O=f;if(c){if(!c.type.startsWith("image/")){s("Please upload a valid image file");return}if(c.size>256*1024){s("Image too large (max 256KB)");return}O=await w(c)}const I=zs($s,"users",t.uid);await Q1(I,{name:a.name,address:a.address,postalCode:a.postalCode,country:a.country,gender:a.gender,billingName:a.billingName,billingAddress:a.billingAddress,billingPostalCode:a.billingPostalCode,billingCountry:a.billingCountry,photoURL:O||null},{merge:!0});const _={};if(a.name&&a.name!==t.displayName&&(_.displayName=a.name),Object.keys(_).length)try{await vT(t,_)}catch{}m(O),o(!0),P(!1)}catch{s("Failed to save profile")}}return t?h.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[h.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:h.jsx("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20",children:e?h.jsx("div",{className:"text-gray-600",children:"Loading..."}):h.jsxs("form",{onSubmit:R,className:"space-y-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-2",children:[h.jsx("h2",{className:"text-2xl font-cursive text-love-dark",children:"Personal Details"}),h.jsx("button",{type:"button",onClick:()=>P(V=>!V),className:"px-4 py-2 text-sm font-medium rounded-lg border border-love-red text-love-red hover:bg-love-red hover:text-white transition-colors",children:x?"Cancel":"Update Personal Details"})]}),r&&h.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded",children:r}),i&&h.jsx("div",{className:"bg-green-100 text-green-700 p-3 rounded",children:"Saved"}),h.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[h.jsxs("div",{className:"flex items-center space-x-4",children:[h.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-love-light border border-love-pink/30",children:f?h.jsx("img",{src:f,alt:"Avatar",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Image"})}),h.jsxs("div",{children:[h.jsx("div",{className:"text-2xl font-semibold text-love-dark",children:a.name||t.displayName||"No name set"}),h.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})]}),x&&h.jsxs("div",{className:"flex flex-col items-end",children:[h.jsx("input",{ref:E,type:"file",accept:"image/*",onChange:V=>{var O;return d(((O=V.target.files)==null?void 0:O[0])||null)},className:"hidden"}),h.jsx("button",{type:"button",onClick:()=>E.current&&E.current.click(),className:"px-4 py-2 text-sm font-medium rounded-lg bg-love-light text-love-dark hover:bg-love-pink/40 transition-colors",children:"Change Photo"})]})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Full Name"}),h.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.name,onChange:y,disabled:!x})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Address"}),h.jsx("input",{type:"text",name:"address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.address,onChange:y,disabled:!x})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Postal Code"}),h.jsx("input",{type:"text",name:"postalCode",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.postalCode,onChange:y,disabled:!x})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Country"}),h.jsx("input",{type:"text",name:"country",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.country,onChange:y,disabled:!x})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Gender"}),h.jsxs("select",{name:"gender",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.gender,onChange:y,disabled:!x,children:[h.jsx("option",{value:"",children:"Select"}),h.jsx("option",{value:"male",children:"Male"}),h.jsx("option",{value:"female",children:"Female"}),h.jsx("option",{value:"other",children:"Other"})]})]})]}),h.jsxs("div",{className:"pt-6 border-t border-gray-100",children:[h.jsx("div",{className:"flex items-center justify-between mb-4",children:h.jsx("h2",{className:"text-2xl font-cursive text-love-dark",children:"Billing Details"})}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Billing Name"}),h.jsx("input",{type:"text",name:"billingName",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.billingName,onChange:y,disabled:!x})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Billing Address"}),h.jsx("input",{type:"text",name:"billingAddress",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.billingAddress,onChange:y,disabled:!x})]}),h.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Billing Postal Code"}),h.jsx("input",{type:"text",name:"billingPostalCode",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.billingPostalCode,onChange:y,disabled:!x})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Billing Country"}),h.jsx("input",{type:"text",name:"billingCountry",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.billingCountry,onChange:y,disabled:!x})]})]})]})]}),x&&h.jsx("button",{type:"submit",className:"w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg",children:"Save"})]})})}),h.jsx(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:h.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20 mt-8",children:[h.jsx("h2",{className:"text-2xl font-semibold text-love-dark mb-4",children:"Your Favorites"}),v.length===0?h.jsx("div",{className:"text-gray-600",children:"No favorites yet. Tap the heart on items to save them here."}):h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Si.filter(V=>v.includes(V.id)).map(V=>h.jsxs("div",{className:"border border-love-pink/20 rounded-xl overflow-hidden bg-white shadow-sm",children:[h.jsx("img",{src:V.image,alt:V.name,className:"w-full h-40 object-cover"}),h.jsxs("div",{className:"p-4",children:[h.jsx("div",{className:"text-xs text-love-red font-medium mb-1 uppercase tracking-wider",children:V.category}),h.jsx("div",{className:"font-semibold text-gray-800",children:V.name}),h.jsxs("div",{className:"text-love-dark font-bold mt-2",children:["$",V.price.toFixed(2)]})]})]},V.id))})]})})]}):null}function j3(){const[t,e]=A.useState({name:"",email:"",message:""}),[n,r]=A.useState(!1),[s,i]=A.useState(!1);function o(u){const{name:c,value:d}=u.target;e(f=>({...f,[c]:d}))}async function a(u){u.preventDefault(),i(!0),r(!1),await new Promise(c=>setTimeout(c,600)),i(!1),r(!0)}return h.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:h.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[h.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-3",children:"Contact Us"}),h.jsx("p",{className:"text-gray-600 mb-8",children:"Wed love to hear from you. Choose the way that suits you best."}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[h.jsxs("div",{className:"lg:col-span-2 bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20",children:[n&&h.jsx("div",{className:"mb-4 bg-green-100 text-green-700 px-4 py-2 rounded",children:"Message sent. Thank you!"}),h.jsxs("form",{onSubmit:a,className:"space-y-6",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),h.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:t.name,onChange:o})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),h.jsx("input",{type:"email",name:"email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:t.email,onChange:o})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),h.jsx("textarea",{name:"message",required:!0,rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:t.message,onChange:o})]}),h.jsx("button",{type:"submit",disabled:s,className:"w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg",children:s?"Sending...":"Send Message"})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-love-pink/20",children:[h.jsx("h2",{className:"text-lg font-semibold text-love-dark mb-3",children:"Instant contact"}),h.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Reach us quickly using your favourite app."}),h.jsxs("div",{className:"space-y-3",children:[h.jsx("a",{href:"https://wa.me/15551234567",target:"_blank",rel:"noreferrer",className:"flex items-center justify-between px-4 py-3 rounded-xl border border-green-500 text-green-600 hover:bg-green-50 transition-colors",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"p-2 rounded-full bg-green-500 text-white",children:h.jsx(RO,{className:"h-4 w-4"})}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-semibold",children:"WhatsApp"}),h.jsx("div",{className:"text-xs text-gray-500",children:"Tap to open chat"})]})]})}),h.jsx("a",{href:"https://instagram.com/lovecraft_gifts",target:"_blank",rel:"noreferrer",className:"flex items-center justify-between px-4 py-3 rounded-xl border border-pink-500 text-pink-600 hover:bg-pink-50 transition-colors",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"p-2 rounded-full bg-pink-500 text-white",children:h.jsx(sS,{className:"h-4 w-4"})}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-semibold",children:"Instagram DM"}),h.jsx("div",{className:"text-xs text-gray-500",children:"@lovecraft_gifts"})]})]})}),h.jsx("button",{className:"w-full flex items-center justify-between px-4 py-3 rounded-xl border border-blue-500 text-blue-600 hover:bg-blue-50 transition-colors",children:h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("div",{className:"p-2 rounded-full bg-blue-500 text-white",children:h.jsx(NO,{className:"h-4 w-4"})}),h.jsxs("div",{children:[h.jsx("div",{className:"text-sm font-semibold",children:"Live chat (coming soon)"}),h.jsx("div",{className:"text-xs text-gray-500",children:"Chat with our support team"})]})]})})]})]}),h.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-love-pink/20",children:[h.jsx("h2",{className:"text-lg font-semibold text-love-dark mb-3",children:"More ways to reach us"}),h.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[h.jsxs("a",{href:"mailto:support@lovecraft.com",className:"flex items-center space-x-3 hover:text-love-red transition-colors",children:[h.jsx(bO,{className:"h-4 w-4 text-love-red"}),h.jsx("span",{children:"support@lovecraft.com"})]}),h.jsxs("a",{href:"tel:+15551234567",className:"flex items-center space-x-3 hover:text-love-red transition-colors",children:[h.jsx(VO,{className:"h-4 w-4 text-love-red"}),h.jsx("span",{children:"+1 (555) 123-4567"})]})]})]})]})]})]})})}const pw=[{id:1,question:"How long will my Valentine's gift take to arrive?",answer:"Most Valentine's orders are prepared within 2448 hours and arrive in 35 business days with standard shipping. Express options are available at checkout for lastminute surprises."},{id:2,question:"Can I personalize my gift with names or a custom message?",answer:"Yes. Many of our gifts support custom engraving, names and personal messages. Look for the Personalize it options on the product page and add your details before checkout."},{id:3,question:"What if my partner is in another city or country?",answer:"We ship to most regions worldwide. Simply enter their address at checkout, and we'll show available delivery times and costs for their location."},{id:4,question:"Do you include the price inside the gift box?",answer:"Never. Our packages are romanceready with no price tags inside the box, so your partner only sees the love, not the receipt."},{id:5,question:"Can I track my order in real time?",answer:"Once your order ships, you receive an email with a live tracking link so you can follow your gift's journey from our studio to their doorstep."}];function O3(){var r;const[t,e]=A.useState(((r=pw[0])==null?void 0:r.id)??null);function n(s){e(i=>i===s?null:s)}return h.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:h.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"space-y-10",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-love-light text-love-red mb-4",children:h.jsx(kO,{className:"h-7 w-7"})}),h.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-2",children:"Frequently Asked Questions"}),h.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Answers to the most common questions about gifting, delivery and making this Valentine's unforgettable."})]}),h.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(0,2fr)_minmax(0,1.2fr)] gap-8 items-start",children:[h.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-love-pink/20 divide-y divide-gray-100",children:pw.map(s=>{const i=s.id===t;return h.jsxs("button",{type:"button",onClick:()=>n(s.id),className:`w-full text-left px-5 sm:px-6 py-4 sm:py-5 focus:outline-none transition-colors ${i?"bg-love-light/40":"bg-white hover:bg-love-light/20"}`,children:[h.jsxs("div",{className:"flex items-start justify-between gap-4",children:[h.jsxs("div",{children:[h.jsx("div",{className:"text-sm uppercase tracking-wider text-love-red mb-1 hidden sm:block",children:s.id<10?`0${s.id}`:s.id}),h.jsx("h2",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:s.question})]}),h.jsx(Ee.div,{initial:!1,animate:{rotate:i?180:0},transition:{duration:.2},className:"flex-shrink-0 mt-1 text-love-red",children:h.jsx(SO,{className:"h-5 w-5"})})]}),h.jsx(AI,{initial:!1,children:i&&h.jsx(Ee.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:h.jsx("p",{className:"mt-3 text-sm text-gray-600 leading-relaxed",children:s.answer})})})]},s.id)})}),h.jsx("div",{className:"space-y-4",children:h.jsxs("div",{className:"bg-white rounded-2xl shadow-md border border-love-pink/20 p-6",children:[h.jsx("h3",{className:"text-lg font-semibold text-love-dark mb-3",children:"Still can't find your answer?"}),h.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Our team is happy to help you choose the right gift, track an order, or create something uniquely romantic."}),h.jsxs("div",{className:"space-y-3 text-sm",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(rS,{className:"h-4 w-4 text-love-red"}),h.jsx("span",{children:"Ask us for personalized gift recommendations for your partner."})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(aS,{className:"h-4 w-4 text-love-red"}),h.jsx("span",{children:"Get live help if you're unsure your gift will arrive in time."})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(iS,{className:"h-4 w-4 text-love-red"}),h.jsx("span",{children:"Learn about returns, exchanges and our happiness guarantee."})]})]}),h.jsx("a",{href:"mailto:support@lovecraft.com?subject=FAQ%20question",className:"inline-flex items-center justify-center mt-5 w-full px-4 py-3 rounded-xl bg-love-red text-white text-sm font-medium shadow-lg hover:bg-red-700 transition-colors",children:"Send us your question"})]})})]})]})})}function M3(){const[t,e]=A.useState(""),[n,r]=A.useState(""),[s,i]=A.useState(""),[o,a]=A.useState(!1),[u,c]=A.useState(!1),d=A.useMemo(()=>`${t||"You"}  ${n||"Your Love"}
${s||"Wishing us endless love, laughter, and sweet moments."}
Happy Valentines Day!`,[t,n,s]);async function f(){a(!1);try{await navigator.clipboard.writeText(d),a(!0),setTimeout(()=>a(!1),1500)}catch{}}function m(x,P,E,y){x.font=y;const w=P.split(" "),R=[];let V="";for(let O=0;O<w.length;O++){const I=V?V+" "+w[O]:w[O];x.measureText(I).width>E&&V?(R.push(V),V=w[O]):V=I}return V&&R.push(V),R}function v(){const x=(t||"You").trim(),P=(n||"Your Love").trim(),E=(s||"Wishing us endless love, laughter, and sweet moments.").trim(),y=document.createElement("canvas");y.width=1080,y.height=1080;const w=y.getContext("2d"),R=w.createLinearGradient(0,0,0,y.height);R.addColorStop(0,"#fff1f5"),R.addColorStop(1,"#fde0e6"),w.fillStyle=R,w.fillRect(0,0,y.width,y.height),w.fillStyle="#cc1d4f",w.font="bold 72px Georgia";const V="Happy Valentines Day",O=w.measureText(V).width;w.fillText(V,(y.width-O)/2,180),w.font="bold 64px Georgia";const I=`${x}  ${P}`,_=w.measureText(I).width;w.fillText(I,(y.width-_)/2,300);const C="48px Arial",k=m(w,E,820,C);w.font=C,w.fillStyle="#6b7280";let N=420;return k.forEach(D=>{const b=w.measureText(D).width;w.fillText(D,(y.width-b)/2,N),N+=68}),w.fillStyle="#cc1d4f",w.globalAlpha=.15,w.font="bold 240px Georgia",w.fillText("",160,860),w.fillText("",760,940),w.globalAlpha=1,y.toDataURL("image/png")}async function T(){c(!0);try{const x=v(),P=document.createElement("a"),E=(t||"You").replace(/\s+/g,"_"),y=(n||"Your_Love").replace(/\s+/g,"_");P.href=x,P.download=`valentine_${E}_${y}.png`,document.body.appendChild(P),P.click(),document.body.removeChild(P)}finally{c(!1)}}return h.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:h.jsxs(Ee.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[h.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-6",children:"Create a Valentine Wish"}),h.jsx("p",{className:"text-gray-600 mb-8",children:"Craft a heartfelt message and share it with your partner."}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[h.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-love-pink/20",children:h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name"}),h.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:t,onChange:x=>e(x.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Partner's Name"}),h.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:n,onChange:x=>r(x.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wish Message"}),h.jsx("textarea",{rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",placeholder:"Write your sweet message...",value:s,onChange:x=>i(x.target.value)})]}),h.jsx("button",{onClick:f,className:"w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg",children:"Copy Wish"}),o&&h.jsx("div",{className:"text-green-600 text-sm",children:"Copied to clipboard"}),h.jsx("button",{onClick:T,disabled:u,className:"w-full bg-love-dark text-white py-3 rounded-lg font-medium hover:bg-gray-900 transition-colors shadow-lg",children:u?"Preparing...":"Download Image"})]})}),h.jsxs(Ee.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white p-6 rounded-2xl shadow-lg border border-love-pink/20 flex items-center justify-center relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 pointer-events-none",children:h.jsx(Ee.div,{initial:{y:0,opacity:.2},animate:{y:-20,opacity:.3},transition:{repeat:1/0,duration:4,repeatType:"reverse"},className:"text-love-pink/30 text-7xl select-none",children:"  "})}),h.jsxs("div",{className:"relative z-10 max-w-md text-center",children:[h.jsx("h2",{className:"text-3xl font-cursive text-love-dark mb-4",children:"Your Wish"}),h.jsx("pre",{className:"whitespace-pre-wrap text-gray-700 bg-love-light/30 rounded-xl p-4 border border-love-pink/20",children:d})]})]})]})]})})}function L3(){const t=[...Array(15)].map((e,n)=>({id:n,left:`${Math.random()*100}%`,animationDuration:`${Math.random()*10+10}s`,delay:`${Math.random()*5}s`,scale:Math.random()*.5+.5}));return h.jsx("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:t.map(e=>h.jsx(Ee.div,{initial:{y:"110vh",opacity:0},animate:{y:"-10vh",opacity:[0,.8,0],x:[0,Math.random()*100-50,0]},transition:{duration:parseFloat(e.animationDuration),repeat:1/0,delay:parseFloat(e.delay),ease:"linear"},style:{left:e.left,position:"absolute"},children:h.jsx(wn,{className:"text-love-pink/30 fill-current",style:{width:`${e.scale*40}px`,height:`${e.scale*40}px`}})},e.id))})}function mw({children:t}){const{currentUser:e}=Ln();return e?t:h.jsx(Sb,{to:"/login"})}function F3(){return h.jsx(vO,{children:h.jsx(_O,{children:h.jsxs("div",{className:"min-h-screen bg-love-light/10 flex flex-col relative",children:[h.jsx(L3,{}),h.jsx(n3,{}),h.jsx("main",{className:"flex-grow",children:h.jsxs(Pb,{children:[h.jsx(Dt,{path:"/",element:h.jsx(s3,{})}),h.jsx(Dt,{path:"/products",element:h.jsx(c3,{})}),h.jsx(Dt,{path:"/products/:id",element:h.jsx(h3,{})}),h.jsx(Dt,{path:"/cart",element:h.jsx(d3,{})}),h.jsx(Dt,{path:"/checkout",element:h.jsx(p3,{})}),h.jsx(Dt,{path:"/order-success",element:h.jsx(A3,{})}),h.jsx(Dt,{path:"/login",element:h.jsx(R3,{})}),h.jsx(Dt,{path:"/signup",element:h.jsx(N3,{})}),h.jsx(Dt,{path:"/contact",element:h.jsx(j3,{})}),h.jsx(Dt,{path:"/faq",element:h.jsx(O3,{})}),h.jsx(Dt,{path:"/wish",element:h.jsx(M3,{})}),h.jsx(Dt,{path:"/admin",element:h.jsx(mw,{children:h.jsx(D3,{})})}),h.jsx(Dt,{path:"/profile",element:h.jsx(mw,{children:h.jsx(V3,{})})})]})}),h.jsx(r3,{})]})})})}jd.createRoot(document.getElementById("root")).render(h.jsx(Gr.StrictMode,{children:h.jsx(Db,{children:h.jsx(F3,{})})}));
