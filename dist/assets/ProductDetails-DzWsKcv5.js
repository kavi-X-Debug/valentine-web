import{c as g,l as q,r as d,u as H,a as W,b as F,q as O,o as U,w as $,n as B,p as _,j as e,L as z,m as S,S as K,H as Q,f as V}from"./index-ydXDGJmK.js";import{M as Y}from"./products-ltJaewHY.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=g("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w=g("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=g("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=g("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);function ae(){const{id:T}=q(),a=Y.find(s=>s.id===parseInt(T)),[n,A]=d.useState(""),[c,N]=d.useState(1),{addToCart:M}=H(),[u,k]=d.useState(!1),{currentUser:D}=W(),L=F(),[P,b]=d.useState(!1),[x,C]=d.useState([]),E=()=>{if(!D){L("/login");return}b(!0)};d.useEffect(()=>{if(!a)return;const s=O(B(V,"reviews"),$("productId","==",a.id),U("createdAt","desc")),r=_(s,t=>{const m=t.docs.map(h=>({id:h.id,...h.data()}));C(m)},()=>{C([])});return()=>r()},[a]);function G(){const r=document.createElement("canvas");r.width=1080,r.height=1080;const t=r.getContext("2d"),m=t.createLinearGradient(0,0,1080,1080);m.addColorStop(0,"#ffe4e6"),m.addColorStop(1,"#fb7185"),t.fillStyle=m,t.fillRect(0,0,1080,1080);function h(l,o,p,j){t.save(),t.translate(l,o),t.scale(p,p),t.beginPath(),t.moveTo(0,-10),t.bezierCurveTo(12,-28,40,-18,40,6),t.bezierCurveTo(40,26,18,40,0,52),t.bezierCurveTo(-18,40,-40,26,-40,6),t.bezierCurveTo(-40,-18,-12,-28,0,-10),t.closePath(),t.fillStyle=j,t.fill(),t.restore()}for(let l=0;l<24;l++){const o=Math.random()*1080,p=Math.random()*1080,j=.3+Math.random()*.8,R=Math.random()<.5?"rgba(225,29,72,0.15)":"rgba(251,113,133,0.15)";h(o,p,j,R)}t.fillStyle="rgba(255,255,255,0.85)";const f=80;t.beginPath(),t.moveTo(140+f,180),t.arcTo(940,180,940,900,f),t.arcTo(940,900,140,900,f),t.arcTo(140,900,140,180,f),t.arcTo(140,180,940,180,f),t.closePath(),t.fill(),t.fillStyle="#e11d48",t.textAlign="center",t.font="bold 72px Georgia",t.fillText("With Love",1080/2,300),t.fillStyle="#0f172a",t.font="600 56px Georgia",t.fillText(a.name,1080/2,390),t.fillStyle="#334155",t.font="italic 36px Georgia";const I=n!=null&&n.trim()?n.trim():"You make my world brighter",v=[];let i="";I.split(/\s+/).forEach(l=>{const o=i?i+" "+l:l;t.measureText(o).width>720?(v.push(i),i=l):i=o}),i&&v.push(i),v.slice(0,4).forEach((l,o)=>{t.fillText(l,1080/2,480+o*48)}),t.fillStyle="#e11d48",h(1080/2,620,1.2,"#e11d48"),t.fillStyle="#64748b",t.font="500 28px Georgia",t.fillText("LoveCraft",1080/2,860);const y=document.createElement("a");y.download="wish-card.png",y.href=r.toDataURL("image/png"),y.click()}return a?e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative",children:[e.jsxs(z,{to:"/products",className:"inline-flex items-center text-gray-500 hover:text-love-red mb-8 transition-colors",children:[e.jsx(J,{className:"h-4 w-4 mr-2"})," Back to Gifts"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[e.jsx(S.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"rounded-2xl overflow-hidden shadow-lg border border-love-pink/20",children:e.jsx("img",{src:a.image,alt:a.name,loading:"lazy",className:"w-full h-full object-cover object-top"})}),e.jsxs(S.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-love-red font-medium uppercase tracking-wider mb-2",children:a.category}),e.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-2",children:a.name}),x.length>0&&e.jsxs("div",{className:"flex items-center space-x-2 text-yellow-500 text-sm mb-4",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((s,r)=>e.jsx(Z,{className:"h-4 w-4 fill-current"},r))}),e.jsxs("span",{className:"text-gray-400",children:["(",x.length," ",x.length===1?"review":"reviews",")"]})]}),e.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",a.price.toFixed(2)]})]}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:a.description||"Celebrate your love with this handcrafted treasure. Perfect for anniversaries, Valentine's Day, or just because."}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"custom-text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Message (Optional)"}),e.jsx("textarea",{id:"custom-text",rows:3,className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-love-pink focus:ring-love-pink text-sm p-3 border",placeholder:"Enter names, dates, or a short love note...",value:n,onChange:s=>A(s.target.value)})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[e.jsx("button",{onClick:()=>N(Math.max(1,c-1)),className:"px-3 py-2 text-gray-600 hover:bg-gray-50",children:"-"}),e.jsx("span",{className:"px-3 py-2 font-medium w-12 text-center",children:c}),e.jsx("button",{onClick:()=>N(c+1),className:"px-3 py-2 text-gray-600 hover:bg-gray-50",children:"+"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-3 sm:gap-4 w-full",children:[e.jsxs("button",{onClick:E,disabled:u,className:`w-full sm:flex-1 px-6 py-3 rounded-lg font-medium transition-colors shadow-md flex items-center justify-center space-x-2 ${u?"bg-green-600 text-white":"bg-love-red text-white hover:bg-red-700"}`,children:[u?e.jsx(w,{className:"h-5 w-5"}):e.jsx(K,{className:"h-5 w-5"}),e.jsx("span",{children:u?"Added to Cart":"Add to Cart"})]}),e.jsxs("button",{onClick:G,className:"w-full sm:w-auto px-6 py-3 rounded-lg font-medium transition-colors shadow-md flex items-center justify-center space-x-2 bg-white text-love-red border border-love-pink/30 hover:bg-love-light",children:[e.jsx(X,{className:"h-5 w-5"}),e.jsx("span",{children:"Download Wish Image"})]}),e.jsx("button",{className:"w-full sm:w-auto p-3 border border-gray-300 rounded-lg hover:border-love-red hover:text-love-red transition-colors flex items-center justify-center",children:e.jsx(Q,{className:"h-5 w-5"})})]})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 pt-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-4 w-4 mr-1 text-green-500"})," In Stock"]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(w,{className:"h-4 w-4 mr-1 text-green-500"})," Free Shipping"]})]})]})]}),P&&e.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-love-pink/30 p-6 max-w-sm w-full mx-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-love-dark mb-2",children:"Add to cart?"}),e.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Add "',a.name,'"',c>1?` (x${c})`:""," to your cart?"]}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",children:"Cancel"}),e.jsx("button",{type:"button",onClick:()=>{M(a,c,n),k(!0),b(!1),setTimeout(()=>k(!1),2e3)},className:"px-4 py-2 rounded-lg bg-love-red text-white hover:bg-red-700 text-sm",children:"Confirm"})]})]})}),x.length>0&&e.jsxs("div",{className:"mt-10 max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-2xl font-semibold text-love-dark mb-4",children:"What people say"}),e.jsx("div",{className:"space-y-4",children:x.map(s=>{const r=s.createdAt&&s.createdAt.toDate?s.createdAt.toDate().toLocaleDateString():"";return e.jsxs("div",{className:"bg-white border border-love-pink/20 rounded-xl p-4 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("div",{className:"text-sm font-semibold text-gray-800",children:s.userName||"Someone"}),r&&e.jsx("div",{className:"text-xs text-gray-400",children:r})]}),e.jsx("p",{className:"text-sm text-gray-700",children:s.message})]},s.id)})})]})]}):e.jsxs("div",{className:"min-h-[50vh] flex flex-col items-center justify-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Product not found"}),e.jsx(z,{to:"/products",className:"mt-4 text-love-red hover:underline",children:"Return to Shop"})]})}export{ae as default};
