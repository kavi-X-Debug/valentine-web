function JI(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function ZI(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pw={exports:{}},_c={},mw={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ba=Symbol.for("react.element"),eP=Symbol.for("react.portal"),tP=Symbol.for("react.fragment"),nP=Symbol.for("react.strict_mode"),rP=Symbol.for("react.profiler"),sP=Symbol.for("react.provider"),iP=Symbol.for("react.context"),oP=Symbol.for("react.forward_ref"),aP=Symbol.for("react.suspense"),lP=Symbol.for("react.memo"),uP=Symbol.for("react.lazy"),ky=Symbol.iterator;function cP(t){return t===null||typeof t!="object"?null:(t=ky&&t[ky]||t["@@iterator"],typeof t=="function"?t:null)}var gw={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},yw=Object.assign,vw={};function Ji(t,e,n){this.props=t,this.context=e,this.refs=vw,this.updater=n||gw}Ji.prototype.isReactComponent={};Ji.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ji.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _w(){}_w.prototype=Ji.prototype;function hp(t,e,n){this.props=t,this.context=e,this.refs=vw,this.updater=n||gw}var dp=hp.prototype=new _w;dp.constructor=hp;yw(dp,Ji.prototype);dp.isPureReactComponent=!0;var Ry=Array.isArray,ww=Object.prototype.hasOwnProperty,fp={current:null},xw={key:!0,ref:!0,__self:!0,__source:!0};function Ew(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ww.call(e,r)&&!xw.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Ba,type:t,key:i,ref:o,props:s,_owner:fp.current}}function hP(t,e){return{$$typeof:Ba,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function pp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ba}function dP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var by=/\/+/g;function kh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?dP(""+t.key):e.toString(36)}function Zl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ba:case eP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+kh(o,0):r,Ry(s)?(n="",t!=null&&(n=t.replace(by,"$&/")+"/"),Zl(s,e,n,"",function(c){return c})):s!=null&&(pp(s)&&(s=hP(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(by,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ry(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+kh(i,a);o+=Zl(i,e,n,u,s)}else if(u=cP(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+kh(i,a++),o+=Zl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Pl(t,e,n){if(t==null)return t;var r=[],s=0;return Zl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function fP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},eu={transition:null},pP={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:eu,ReactCurrentOwner:fp};function Tw(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Pl,forEach:function(t,e,n){Pl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Pl(t,function(){e++}),e},toArray:function(t){return Pl(t,function(e){return e})||[]},only:function(t){if(!pp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=Ji;ne.Fragment=tP;ne.Profiler=rP;ne.PureComponent=hp;ne.StrictMode=nP;ne.Suspense=aP;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pP;ne.act=Tw;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=yw({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=fp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)ww.call(e,u)&&!xw.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Ba,type:t.type,key:s,ref:i,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:iP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sP,_context:t},t.Consumer=t};ne.createElement=Ew;ne.createFactory=function(t){var e=Ew.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:oP,render:t}};ne.isValidElement=pp;ne.lazy=function(t){return{$$typeof:uP,_payload:{_status:-1,_result:t},_init:fP}};ne.memo=function(t,e){return{$$typeof:lP,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=eu.transition;eu.transition={};try{t()}finally{eu.transition=e}};ne.unstable_act=Tw;ne.useCallback=function(t,e){return At.current.useCallback(t,e)};ne.useContext=function(t){return At.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return At.current.useDeferredValue(t)};ne.useEffect=function(t,e){return At.current.useEffect(t,e)};ne.useId=function(){return At.current.useId()};ne.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return At.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};ne.useRef=function(t){return At.current.useRef(t)};ne.useState=function(t){return At.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return At.current.useTransition()};ne.version="18.3.1";mw.exports=ne;var b=mw.exports;const Wr=ZI(b),mP=JI({__proto__:null,default:Wr},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gP=b,yP=Symbol.for("react.element"),vP=Symbol.for("react.fragment"),_P=Object.prototype.hasOwnProperty,wP=gP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,xP={key:!0,ref:!0,__self:!0,__source:!0};function Sw(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_P.call(e,r)&&!xP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yP,type:t,key:i,ref:o,props:s,_owner:wP.current}}_c.Fragment=vP;_c.jsx=Sw;_c.jsxs=Sw;pw.exports=_c;var p=pw.exports,bd={},Iw={exports:{}},Qt={},Pw={exports:{}},Cw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,q){var X=z.length;z.push(q);e:for(;0<X;){var Q=X-1>>>1,re=z[Q];if(0<s(re,q))z[Q]=q,z[X]=re,X=Q;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var q=z[0],X=z.pop();if(X!==q){z[0]=X;e:for(var Q=0,re=z.length,pe=re>>>1;Q<pe;){var Et=2*(Q+1)-1,ut=z[Et],et=Et+1,Rt=z[et];if(0>s(ut,X))et<re&&0>s(Rt,ut)?(z[Q]=Rt,z[et]=X,Q=et):(z[Q]=ut,z[Et]=X,Q=Et);else if(et<re&&0>s(Rt,X))z[Q]=Rt,z[et]=X,Q=et;else break e}}return q}function s(z,q){var X=z.sortIndex-q.sortIndex;return X!==0?X:z.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,d=null,m=3,y=!1,S=!1,w=!1,P=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(z){for(var q=n(c);q!==null;){if(q.callback===null)r(c);else if(q.startTime<=z)r(c),q.sortIndex=q.expirationTime,e(u,q);else break;q=n(c)}}function R(z){if(w=!1,_(z),!S)if(n(u)!==null)S=!0,ge(V);else{var q=n(c);q!==null&&ve(R,q.startTime-z)}}function V(z,q){S=!1,w&&(w=!1,E(x),x=-1),y=!0;var X=m;try{for(_(q),d=n(u);d!==null&&(!(d.expirationTime>q)||z&&!N());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,m=d.priorityLevel;var re=Q(d.expirationTime<=q);q=t.unstable_now(),typeof re=="function"?d.callback=re:d===n(u)&&r(u),_(q)}else r(u);d=n(u)}if(d!==null)var pe=!0;else{var Et=n(c);Et!==null&&ve(R,Et.startTime-q),pe=!1}return pe}finally{d=null,m=X,y=!1}}var M=!1,C=null,x=-1,I=5,A=-1;function N(){return!(t.unstable_now()-A<I)}function D(){if(C!==null){var z=t.unstable_now();A=z;var q=!0;try{q=C(!0,z)}finally{q?k():(M=!1,C=null)}}else M=!1}var k;if(typeof v=="function")k=function(){v(D)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,Qe=he.port2;he.port1.onmessage=D,k=function(){Qe.postMessage(null)}}else k=function(){P(D,0)};function ge(z){C=z,M||(M=!0,k())}function ve(z,q){x=P(function(){z(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){S||y||(S=!0,ge(V))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var q=3;break;default:q=m}var X=m;m=q;try{return z()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var X=m;m=z;try{return q()}finally{m=X}},t.unstable_scheduleCallback=function(z,q,X){var Q=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?Q+X:Q):X=Q,z){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=X+re,z={id:h++,callback:q,priorityLevel:z,startTime:X,expirationTime:re,sortIndex:-1},X>Q?(z.sortIndex=X,e(c,z),n(u)===null&&z===n(c)&&(w?(E(x),x=-1):w=!0,ve(R,X-Q))):(z.sortIndex=re,e(u,z),S||y||(S=!0,ge(V))),z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(z){var q=m;return function(){var X=m;m=q;try{return z.apply(this,arguments)}finally{m=X}}}})(Cw);Pw.exports=Cw;var EP=Pw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TP=b,Kt=EP;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Aw=new Set,da={};function Hs(t,e){Ni(t,e),Ni(t+"Capture",e)}function Ni(t,e){for(da[t]=e,t=0;t<e.length;t++)Aw.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nd=Object.prototype.hasOwnProperty,SP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ny={},Dy={};function IP(t){return Nd.call(Dy,t)?!0:Nd.call(Ny,t)?!1:SP.test(t)?Dy[t]=!0:(Ny[t]=!0,!1)}function PP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CP(t,e,n,r){if(e===null||typeof e>"u"||PP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var mp=/[\-:]([a-z])/g;function gp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(mp,gp);at[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(mp,gp);at[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(mp,gp);at[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function yp(t,e,n,r){var s=at.hasOwnProperty(e)?at[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CP(e,n,s,r)&&(n=null),r||s===null?IP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var lr=TP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Cl=Symbol.for("react.element"),ii=Symbol.for("react.portal"),oi=Symbol.for("react.fragment"),vp=Symbol.for("react.strict_mode"),Dd=Symbol.for("react.profiler"),kw=Symbol.for("react.provider"),Rw=Symbol.for("react.context"),_p=Symbol.for("react.forward_ref"),Vd=Symbol.for("react.suspense"),Od=Symbol.for("react.suspense_list"),wp=Symbol.for("react.memo"),vr=Symbol.for("react.lazy"),bw=Symbol.for("react.offscreen"),Vy=Symbol.iterator;function Io(t){return t===null||typeof t!="object"?null:(t=Vy&&t[Vy]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,Rh;function Mo(t){if(Rh===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rh=e&&e[1]||""}return`
`+Rh+t}var bh=!1;function Nh(t,e){if(!t||bh)return"";bh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{bh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Mo(t):""}function AP(t){switch(t.tag){case 5:return Mo(t.type);case 16:return Mo("Lazy");case 13:return Mo("Suspense");case 19:return Mo("SuspenseList");case 0:case 2:case 15:return t=Nh(t.type,!1),t;case 11:return t=Nh(t.type.render,!1),t;case 1:return t=Nh(t.type,!0),t;default:return""}}function Ld(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case oi:return"Fragment";case ii:return"Portal";case Dd:return"Profiler";case vp:return"StrictMode";case Vd:return"Suspense";case Od:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Rw:return(t.displayName||"Context")+".Consumer";case kw:return(t._context.displayName||"Context")+".Provider";case _p:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wp:return e=t.displayName||null,e!==null?e:Ld(t.type)||"Memo";case vr:e=t._payload,t=t._init;try{return Ld(t(e))}catch{}}return null}function kP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ld(e);case 8:return e===vp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Nw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function RP(t){var e=Nw(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Al(t){t._valueTracker||(t._valueTracker=RP(t))}function Dw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Nw(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Tu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Md(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Oy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Vw(t,e){e=e.checked,e!=null&&yp(t,"checked",e,!1)}function jd(t,e){Vw(t,e);var n=qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Fd(t,e.type,qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ly(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Fd(t,e,n){(e!=="number"||Tu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var jo=Array.isArray;function Ei(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ud(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function My(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(jo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qr(n)}}function Ow(t,e){var n=qr(e.value),r=qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Lw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Bd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Lw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var kl,Mw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(kl=kl||document.createElement("div"),kl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=kl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function fa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ko={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bP=["Webkit","ms","Moz","O"];Object.keys(Ko).forEach(function(t){bP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ko[e]=Ko[t]})});function jw(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ko.hasOwnProperty(t)&&Ko[t]?(""+e).trim():e+"px"}function Fw(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=jw(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var NP=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zd(t,e){if(e){if(NP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function $d(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hd=null;function xp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wd=null,Ti=null,Si=null;function Fy(t){if(t=Ha(t)){if(typeof Wd!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Sc(e),Wd(t.stateNode,t.type,e))}}function Uw(t){Ti?Si?Si.push(t):Si=[t]:Ti=t}function Bw(){if(Ti){var t=Ti,e=Si;if(Si=Ti=null,Fy(t),e)for(t=0;t<e.length;t++)Fy(e[t])}}function zw(t,e){return t(e)}function $w(){}var Dh=!1;function Hw(t,e,n){if(Dh)return t(e,n);Dh=!0;try{return zw(t,e,n)}finally{Dh=!1,(Ti!==null||Si!==null)&&($w(),Bw())}}function pa(t,e){var n=t.stateNode;if(n===null)return null;var r=Sc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var qd=!1;if(Zn)try{var Po={};Object.defineProperty(Po,"passive",{get:function(){qd=!0}}),window.addEventListener("test",Po,Po),window.removeEventListener("test",Po,Po)}catch{qd=!1}function DP(t,e,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Go=!1,Su=null,Iu=!1,Kd=null,VP={onError:function(t){Go=!0,Su=t}};function OP(t,e,n,r,s,i,o,a,u){Go=!1,Su=null,DP.apply(VP,arguments)}function LP(t,e,n,r,s,i,o,a,u){if(OP.apply(this,arguments),Go){if(Go){var c=Su;Go=!1,Su=null}else throw Error(U(198));Iu||(Iu=!0,Kd=c)}}function Ws(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Ww(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uy(t){if(Ws(t)!==t)throw Error(U(188))}function MP(t){var e=t.alternate;if(!e){if(e=Ws(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Uy(s),t;if(i===r)return Uy(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function qw(t){return t=MP(t),t!==null?Kw(t):null}function Kw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kw(t);if(e!==null)return e;t=t.sibling}return null}var Gw=Kt.unstable_scheduleCallback,By=Kt.unstable_cancelCallback,jP=Kt.unstable_shouldYield,FP=Kt.unstable_requestPaint,Oe=Kt.unstable_now,UP=Kt.unstable_getCurrentPriorityLevel,Ep=Kt.unstable_ImmediatePriority,Qw=Kt.unstable_UserBlockingPriority,Pu=Kt.unstable_NormalPriority,BP=Kt.unstable_LowPriority,Yw=Kt.unstable_IdlePriority,wc=null,Sn=null;function zP(t){if(Sn&&typeof Sn.onCommitFiberRoot=="function")try{Sn.onCommitFiberRoot(wc,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:WP,$P=Math.log,HP=Math.LN2;function WP(t){return t>>>=0,t===0?32:31-($P(t)/HP|0)|0}var Rl=64,bl=4194304;function Fo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Cu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=Fo(a):(i&=o,i!==0&&(r=Fo(i)))}else o=n&~s,o!==0?r=Fo(o):i!==0&&(r=Fo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),s=1<<n,r|=t[n],e&=~s;return r}function qP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-gn(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=qP(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function Gd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Xw(){var t=Rl;return Rl<<=1,!(Rl&4194240)&&(Rl=64),t}function Vh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function za(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function GP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-gn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Tp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function Jw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zw,Sp,ex,tx,nx,Qd=!1,Nl=[],br=null,Nr=null,Dr=null,ma=new Map,ga=new Map,Er=[],QP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zy(t,e){switch(t){case"focusin":case"focusout":br=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":ma.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ga.delete(e.pointerId)}}function Co(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ha(e),e!==null&&Sp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YP(t,e,n,r,s){switch(e){case"focusin":return br=Co(br,t,e,n,r,s),!0;case"dragenter":return Nr=Co(Nr,t,e,n,r,s),!0;case"mouseover":return Dr=Co(Dr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ma.set(i,Co(ma.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ga.set(i,Co(ga.get(i)||null,t,e,n,r,s)),!0}return!1}function rx(t){var e=xs(t.target);if(e!==null){var n=Ws(e);if(n!==null){if(e=n.tag,e===13){if(e=Ww(n),e!==null){t.blockedOn=e,nx(t.priority,function(){ex(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function tu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Hd=r,n.target.dispatchEvent(r),Hd=null}else return e=Ha(n),e!==null&&Sp(e),t.blockedOn=n,!1;e.shift()}return!0}function $y(t,e,n){tu(t)&&n.delete(e)}function XP(){Qd=!1,br!==null&&tu(br)&&(br=null),Nr!==null&&tu(Nr)&&(Nr=null),Dr!==null&&tu(Dr)&&(Dr=null),ma.forEach($y),ga.forEach($y)}function Ao(t,e){t.blockedOn===e&&(t.blockedOn=null,Qd||(Qd=!0,Kt.unstable_scheduleCallback(Kt.unstable_NormalPriority,XP)))}function ya(t){function e(s){return Ao(s,t)}if(0<Nl.length){Ao(Nl[0],t);for(var n=1;n<Nl.length;n++){var r=Nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(br!==null&&Ao(br,t),Nr!==null&&Ao(Nr,t),Dr!==null&&Ao(Dr,t),ma.forEach(e),ga.forEach(e),n=0;n<Er.length;n++)r=Er[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Er.length&&(n=Er[0],n.blockedOn===null);)rx(n),n.blockedOn===null&&Er.shift()}var Ii=lr.ReactCurrentBatchConfig,Au=!0;function JP(t,e,n,r){var s=de,i=Ii.transition;Ii.transition=null;try{de=1,Ip(t,e,n,r)}finally{de=s,Ii.transition=i}}function ZP(t,e,n,r){var s=de,i=Ii.transition;Ii.transition=null;try{de=4,Ip(t,e,n,r)}finally{de=s,Ii.transition=i}}function Ip(t,e,n,r){if(Au){var s=Yd(t,e,n,r);if(s===null)Hh(t,e,r,ku,n),zy(t,r);else if(YP(s,t,e,n,r))r.stopPropagation();else if(zy(t,r),e&4&&-1<QP.indexOf(t)){for(;s!==null;){var i=Ha(s);if(i!==null&&Zw(i),i=Yd(t,e,n,r),i===null&&Hh(t,e,r,ku,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Hh(t,e,r,null,n)}}var ku=null;function Yd(t,e,n,r){if(ku=null,t=xp(r),t=xs(t),t!==null)if(e=Ws(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Ww(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ku=t,null}function sx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UP()){case Ep:return 1;case Qw:return 4;case Pu:case BP:return 16;case Yw:return 536870912;default:return 16}default:return 16}}var Cr=null,Pp=null,nu=null;function ix(){if(nu)return nu;var t,e=Pp,n=e.length,r,s="value"in Cr?Cr.value:Cr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return nu=s.slice(t,1<r?1-r:void 0)}function ru(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Dl(){return!0}function Hy(){return!1}function Yt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Dl:Hy,this.isPropagationStopped=Hy,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Dl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Dl)},persist:function(){},isPersistent:Dl}),e}var Zi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Cp=Yt(Zi),$a=ke({},Zi,{view:0,detail:0}),eC=Yt($a),Oh,Lh,ko,xc=ke({},$a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ap,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ko&&(ko&&t.type==="mousemove"?(Oh=t.screenX-ko.screenX,Lh=t.screenY-ko.screenY):Lh=Oh=0,ko=t),Oh)},movementY:function(t){return"movementY"in t?t.movementY:Lh}}),Wy=Yt(xc),tC=ke({},xc,{dataTransfer:0}),nC=Yt(tC),rC=ke({},$a,{relatedTarget:0}),Mh=Yt(rC),sC=ke({},Zi,{animationName:0,elapsedTime:0,pseudoElement:0}),iC=Yt(sC),oC=ke({},Zi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aC=Yt(oC),lC=ke({},Zi,{data:0}),qy=Yt(lC),uC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=hC[t])?!!e[t]:!1}function Ap(){return dC}var fC=ke({},$a,{key:function(t){if(t.key){var e=uC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ru(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ap,charCode:function(t){return t.type==="keypress"?ru(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ru(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pC=Yt(fC),mC=ke({},xc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ky=Yt(mC),gC=ke({},$a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ap}),yC=Yt(gC),vC=ke({},Zi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_C=Yt(vC),wC=ke({},xc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),xC=Yt(wC),EC=[9,13,27,32],kp=Zn&&"CompositionEvent"in window,Qo=null;Zn&&"documentMode"in document&&(Qo=document.documentMode);var TC=Zn&&"TextEvent"in window&&!Qo,ox=Zn&&(!kp||Qo&&8<Qo&&11>=Qo),Gy=" ",Qy=!1;function ax(t,e){switch(t){case"keyup":return EC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ai=!1;function SC(t,e){switch(t){case"compositionend":return lx(e);case"keypress":return e.which!==32?null:(Qy=!0,Gy);case"textInput":return t=e.data,t===Gy&&Qy?null:t;default:return null}}function IC(t,e){if(ai)return t==="compositionend"||!kp&&ax(t,e)?(t=ix(),nu=Pp=Cr=null,ai=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return ox&&e.locale!=="ko"?null:e.data;default:return null}}var PC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!PC[t.type]:e==="textarea"}function ux(t,e,n,r){Uw(r),e=Ru(e,"onChange"),0<e.length&&(n=new Cp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Yo=null,va=null;function CC(t){wx(t,0)}function Ec(t){var e=ci(t);if(Dw(e))return t}function AC(t,e){if(t==="change")return e}var cx=!1;if(Zn){var jh;if(Zn){var Fh="oninput"in document;if(!Fh){var Xy=document.createElement("div");Xy.setAttribute("oninput","return;"),Fh=typeof Xy.oninput=="function"}jh=Fh}else jh=!1;cx=jh&&(!document.documentMode||9<document.documentMode)}function Jy(){Yo&&(Yo.detachEvent("onpropertychange",hx),va=Yo=null)}function hx(t){if(t.propertyName==="value"&&Ec(va)){var e=[];ux(e,va,t,xp(t)),Hw(CC,e)}}function kC(t,e,n){t==="focusin"?(Jy(),Yo=e,va=n,Yo.attachEvent("onpropertychange",hx)):t==="focusout"&&Jy()}function RC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ec(va)}function bC(t,e){if(t==="click")return Ec(e)}function NC(t,e){if(t==="input"||t==="change")return Ec(e)}function DC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:DC;function _a(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Nd.call(e,s)||!wn(t[s],e[s]))return!1}return!0}function Zy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function ev(t,e){var n=Zy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Zy(n)}}function dx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?dx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function fx(){for(var t=window,e=Tu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Tu(t.document)}return e}function Rp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function VC(t){var e=fx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&dx(n.ownerDocument.documentElement,n)){if(r!==null&&Rp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=ev(n,i);var o=ev(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var OC=Zn&&"documentMode"in document&&11>=document.documentMode,li=null,Xd=null,Xo=null,Jd=!1;function tv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Jd||li==null||li!==Tu(r)||(r=li,"selectionStart"in r&&Rp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xo&&_a(Xo,r)||(Xo=r,r=Ru(Xd,"onSelect"),0<r.length&&(e=new Cp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=li)))}function Vl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ui={animationend:Vl("Animation","AnimationEnd"),animationiteration:Vl("Animation","AnimationIteration"),animationstart:Vl("Animation","AnimationStart"),transitionend:Vl("Transition","TransitionEnd")},Uh={},px={};Zn&&(px=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function Tc(t){if(Uh[t])return Uh[t];if(!ui[t])return t;var e=ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in px)return Uh[t]=e[n];return t}var mx=Tc("animationend"),gx=Tc("animationiteration"),yx=Tc("animationstart"),vx=Tc("transitionend"),_x=new Map,nv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ts(t,e){_x.set(t,e),Hs(e,[t])}for(var Bh=0;Bh<nv.length;Bh++){var zh=nv[Bh],LC=zh.toLowerCase(),MC=zh[0].toUpperCase()+zh.slice(1);ts(LC,"on"+MC)}ts(mx,"onAnimationEnd");ts(gx,"onAnimationIteration");ts(yx,"onAnimationStart");ts("dblclick","onDoubleClick");ts("focusin","onFocus");ts("focusout","onBlur");ts(vx,"onTransitionEnd");Ni("onMouseEnter",["mouseout","mouseover"]);Ni("onMouseLeave",["mouseout","mouseover"]);Ni("onPointerEnter",["pointerout","pointerover"]);Ni("onPointerLeave",["pointerout","pointerover"]);Hs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Hs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Hs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Hs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Hs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Uo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Uo));function rv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LP(r,e,void 0,t),t.currentTarget=null}function wx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;rv(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;rv(s,a,c),i=u}}}if(Iu)throw t=Kd,Iu=!1,Kd=null,t}function Ee(t,e){var n=e[rf];n===void 0&&(n=e[rf]=new Set);var r=t+"__bubble";n.has(r)||(xx(e,t,2,!1),n.add(r))}function $h(t,e,n){var r=0;e&&(r|=4),xx(n,t,r,e)}var Ol="_reactListening"+Math.random().toString(36).slice(2);function wa(t){if(!t[Ol]){t[Ol]=!0,Aw.forEach(function(n){n!=="selectionchange"&&(jC.has(n)||$h(n,!1,t),$h(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ol]||(e[Ol]=!0,$h("selectionchange",!1,e))}}function xx(t,e,n,r){switch(sx(e)){case 1:var s=JP;break;case 4:s=ZP;break;default:s=Ip}n=s.bind(null,e,n,t),s=void 0,!qd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Hh(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=xs(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Hw(function(){var c=i,h=xp(n),d=[];e:{var m=_x.get(t);if(m!==void 0){var y=Cp,S=t;switch(t){case"keypress":if(ru(n)===0)break e;case"keydown":case"keyup":y=pC;break;case"focusin":S="focus",y=Mh;break;case"focusout":S="blur",y=Mh;break;case"beforeblur":case"afterblur":y=Mh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Wy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=nC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=yC;break;case mx:case gx:case yx:y=iC;break;case vx:y=_C;break;case"scroll":y=eC;break;case"wheel":y=xC;break;case"copy":case"cut":case"paste":y=aC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Ky}var w=(e&4)!==0,P=!w&&t==="scroll",E=w?m!==null?m+"Capture":null:m;w=[];for(var v=c,_;v!==null;){_=v;var R=_.stateNode;if(_.tag===5&&R!==null&&(_=R,E!==null&&(R=pa(v,E),R!=null&&w.push(xa(v,R,_)))),P)break;v=v.return}0<w.length&&(m=new y(m,S,null,n,h),d.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Hd&&(S=n.relatedTarget||n.fromElement)&&(xs(S)||S[er]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(S=n.relatedTarget||n.toElement,y=c,S=S?xs(S):null,S!==null&&(P=Ws(S),S!==P||S.tag!==5&&S.tag!==6)&&(S=null)):(y=null,S=c),y!==S)){if(w=Wy,R="onMouseLeave",E="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(w=Ky,R="onPointerLeave",E="onPointerEnter",v="pointer"),P=y==null?m:ci(y),_=S==null?m:ci(S),m=new w(R,v+"leave",y,n,h),m.target=P,m.relatedTarget=_,R=null,xs(h)===c&&(w=new w(E,v+"enter",S,n,h),w.target=_,w.relatedTarget=P,R=w),P=R,y&&S)t:{for(w=y,E=S,v=0,_=w;_;_=ti(_))v++;for(_=0,R=E;R;R=ti(R))_++;for(;0<v-_;)w=ti(w),v--;for(;0<_-v;)E=ti(E),_--;for(;v--;){if(w===E||E!==null&&w===E.alternate)break t;w=ti(w),E=ti(E)}w=null}else w=null;y!==null&&sv(d,m,y,w,!1),S!==null&&P!==null&&sv(d,P,S,w,!0)}}e:{if(m=c?ci(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var V=AC;else if(Yy(m))if(cx)V=NC;else{V=RC;var M=kC}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=bC);if(V&&(V=V(t,c))){ux(d,V,n,h);break e}M&&M(t,m,c),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Fd(m,"number",m.value)}switch(M=c?ci(c):window,t){case"focusin":(Yy(M)||M.contentEditable==="true")&&(li=M,Xd=c,Xo=null);break;case"focusout":Xo=Xd=li=null;break;case"mousedown":Jd=!0;break;case"contextmenu":case"mouseup":case"dragend":Jd=!1,tv(d,n,h);break;case"selectionchange":if(OC)break;case"keydown":case"keyup":tv(d,n,h)}var C;if(kp)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else ai?ax(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(ox&&n.locale!=="ko"&&(ai||x!=="onCompositionStart"?x==="onCompositionEnd"&&ai&&(C=ix()):(Cr=h,Pp="value"in Cr?Cr.value:Cr.textContent,ai=!0)),M=Ru(c,x),0<M.length&&(x=new qy(x,t,null,n,h),d.push({event:x,listeners:M}),C?x.data=C:(C=lx(n),C!==null&&(x.data=C)))),(C=TC?SC(t,n):IC(t,n))&&(c=Ru(c,"onBeforeInput"),0<c.length&&(h=new qy("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:c}),h.data=C))}wx(d,e)})}function xa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ru(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=pa(t,n),i!=null&&r.unshift(xa(t,i,s)),i=pa(t,e),i!=null&&r.push(xa(t,i,s))),t=t.return}return r}function ti(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function sv(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=pa(n,i),u!=null&&o.unshift(xa(n,u,a))):s||(u=pa(n,i),u!=null&&o.push(xa(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var FC=/\r\n?/g,UC=/\u0000|\uFFFD/g;function iv(t){return(typeof t=="string"?t:""+t).replace(FC,`
`).replace(UC,"")}function Ll(t,e,n){if(e=iv(e),iv(t)!==e&&n)throw Error(U(425))}function bu(){}var Zd=null,ef=null;function tf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var nf=typeof setTimeout=="function"?setTimeout:void 0,BC=typeof clearTimeout=="function"?clearTimeout:void 0,ov=typeof Promise=="function"?Promise:void 0,zC=typeof queueMicrotask=="function"?queueMicrotask:typeof ov<"u"?function(t){return ov.resolve(null).then(t).catch($C)}:nf;function $C(t){setTimeout(function(){throw t})}function Wh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ya(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ya(e)}function Vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function av(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var eo=Math.random().toString(36).slice(2),Tn="__reactFiber$"+eo,Ea="__reactProps$"+eo,er="__reactContainer$"+eo,rf="__reactEvents$"+eo,HC="__reactListeners$"+eo,WC="__reactHandles$"+eo;function xs(t){var e=t[Tn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[Tn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=av(t);t!==null;){if(n=t[Tn])return n;t=av(t)}return e}t=n,n=t.parentNode}return null}function Ha(t){return t=t[Tn]||t[er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ci(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Sc(t){return t[Ea]||null}var sf=[],hi=-1;function ns(t){return{current:t}}function Te(t){0>hi||(t.current=sf[hi],sf[hi]=null,hi--)}function _e(t,e){hi++,sf[hi]=t.current,t.current=e}var Kr={},wt=ns(Kr),Ot=ns(!1),bs=Kr;function Di(t,e){var n=t.type.contextTypes;if(!n)return Kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Lt(t){return t=t.childContextTypes,t!=null}function Nu(){Te(Ot),Te(wt)}function lv(t,e,n){if(wt.current!==Kr)throw Error(U(168));_e(wt,e),_e(Ot,n)}function Ex(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,kP(t)||"Unknown",s));return ke({},n,r)}function Du(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Kr,bs=wt.current,_e(wt,t),_e(Ot,Ot.current),!0}function uv(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Ex(t,e,bs),r.__reactInternalMemoizedMergedChildContext=t,Te(Ot),Te(wt),_e(wt,t)):Te(Ot),_e(Ot,n)}var Bn=null,Ic=!1,qh=!1;function Tx(t){Bn===null?Bn=[t]:Bn.push(t)}function qC(t){Ic=!0,Tx(t)}function rs(){if(!qh&&Bn!==null){qh=!0;var t=0,e=de;try{var n=Bn;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bn=null,Ic=!1}catch(s){throw Bn!==null&&(Bn=Bn.slice(t+1)),Gw(Ep,rs),s}finally{de=e,qh=!1}}return null}var di=[],fi=0,Vu=null,Ou=0,Zt=[],en=0,Ns=null,$n=1,Hn="";function ms(t,e){di[fi++]=Ou,di[fi++]=Vu,Vu=t,Ou=e}function Sx(t,e,n){Zt[en++]=$n,Zt[en++]=Hn,Zt[en++]=Ns,Ns=t;var r=$n;t=Hn;var s=32-gn(r)-1;r&=~(1<<s),n+=1;var i=32-gn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,$n=1<<32-gn(e)+s|n<<s|r,Hn=i+t}else $n=1<<i|n<<s|r,Hn=t}function bp(t){t.return!==null&&(ms(t,1),Sx(t,1,0))}function Np(t){for(;t===Vu;)Vu=di[--fi],di[fi]=null,Ou=di[--fi],di[fi]=null;for(;t===Ns;)Ns=Zt[--en],Zt[en]=null,Hn=Zt[--en],Zt[en]=null,$n=Zt[--en],Zt[en]=null}var qt=null,Ht=null,Se=!1,fn=null;function Ix(t,e){var n=tn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,Ht=Vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,Ht=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ns!==null?{id:$n,overflow:Hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=tn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,Ht=null,!0):!1;default:return!1}}function of(t){return(t.mode&1)!==0&&(t.flags&128)===0}function af(t){if(Se){var e=Ht;if(e){var n=e;if(!cv(t,e)){if(of(t))throw Error(U(418));e=Vr(n.nextSibling);var r=qt;e&&cv(t,e)?Ix(r,n):(t.flags=t.flags&-4097|2,Se=!1,qt=t)}}else{if(of(t))throw Error(U(418));t.flags=t.flags&-4097|2,Se=!1,qt=t}}}function hv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function Ml(t){if(t!==qt)return!1;if(!Se)return hv(t),Se=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!tf(t.type,t.memoizedProps)),e&&(e=Ht)){if(of(t))throw Px(),Error(U(418));for(;e;)Ix(t,e),e=Vr(e.nextSibling)}if(hv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ht=Vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ht=null}}else Ht=qt?Vr(t.stateNode.nextSibling):null;return!0}function Px(){for(var t=Ht;t;)t=Vr(t.nextSibling)}function Vi(){Ht=qt=null,Se=!1}function Dp(t){fn===null?fn=[t]:fn.push(t)}var KC=lr.ReactCurrentBatchConfig;function Ro(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function jl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function dv(t){var e=t._init;return e(t._payload)}function Cx(t){function e(E,v){if(t){var _=E.deletions;_===null?(E.deletions=[v],E.flags|=16):_.push(v)}}function n(E,v){if(!t)return null;for(;v!==null;)e(E,v),v=v.sibling;return null}function r(E,v){for(E=new Map;v!==null;)v.key!==null?E.set(v.key,v):E.set(v.index,v),v=v.sibling;return E}function s(E,v){return E=jr(E,v),E.index=0,E.sibling=null,E}function i(E,v,_){return E.index=_,t?(_=E.alternate,_!==null?(_=_.index,_<v?(E.flags|=2,v):_):(E.flags|=2,v)):(E.flags|=1048576,v)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function a(E,v,_,R){return v===null||v.tag!==6?(v=Zh(_,E.mode,R),v.return=E,v):(v=s(v,_),v.return=E,v)}function u(E,v,_,R){var V=_.type;return V===oi?h(E,v,_.props.children,R,_.key):v!==null&&(v.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===vr&&dv(V)===v.type)?(R=s(v,_.props),R.ref=Ro(E,v,_),R.return=E,R):(R=cu(_.type,_.key,_.props,null,E.mode,R),R.ref=Ro(E,v,_),R.return=E,R)}function c(E,v,_,R){return v===null||v.tag!==4||v.stateNode.containerInfo!==_.containerInfo||v.stateNode.implementation!==_.implementation?(v=ed(_,E.mode,R),v.return=E,v):(v=s(v,_.children||[]),v.return=E,v)}function h(E,v,_,R,V){return v===null||v.tag!==7?(v=As(_,E.mode,R,V),v.return=E,v):(v=s(v,_),v.return=E,v)}function d(E,v,_){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Zh(""+v,E.mode,_),v.return=E,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Cl:return _=cu(v.type,v.key,v.props,null,E.mode,_),_.ref=Ro(E,null,v),_.return=E,_;case ii:return v=ed(v,E.mode,_),v.return=E,v;case vr:var R=v._init;return d(E,R(v._payload),_)}if(jo(v)||Io(v))return v=As(v,E.mode,_,null),v.return=E,v;jl(E,v)}return null}function m(E,v,_,R){var V=v!==null?v.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return V!==null?null:a(E,v,""+_,R);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Cl:return _.key===V?u(E,v,_,R):null;case ii:return _.key===V?c(E,v,_,R):null;case vr:return V=_._init,m(E,v,V(_._payload),R)}if(jo(_)||Io(_))return V!==null?null:h(E,v,_,R,null);jl(E,_)}return null}function y(E,v,_,R,V){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(_)||null,a(v,E,""+R,V);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Cl:return E=E.get(R.key===null?_:R.key)||null,u(v,E,R,V);case ii:return E=E.get(R.key===null?_:R.key)||null,c(v,E,R,V);case vr:var M=R._init;return y(E,v,_,M(R._payload),V)}if(jo(R)||Io(R))return E=E.get(_)||null,h(v,E,R,V,null);jl(v,R)}return null}function S(E,v,_,R){for(var V=null,M=null,C=v,x=v=0,I=null;C!==null&&x<_.length;x++){C.index>x?(I=C,C=null):I=C.sibling;var A=m(E,C,_[x],R);if(A===null){C===null&&(C=I);break}t&&C&&A.alternate===null&&e(E,C),v=i(A,v,x),M===null?V=A:M.sibling=A,M=A,C=I}if(x===_.length)return n(E,C),Se&&ms(E,x),V;if(C===null){for(;x<_.length;x++)C=d(E,_[x],R),C!==null&&(v=i(C,v,x),M===null?V=C:M.sibling=C,M=C);return Se&&ms(E,x),V}for(C=r(E,C);x<_.length;x++)I=y(C,E,x,_[x],R),I!==null&&(t&&I.alternate!==null&&C.delete(I.key===null?x:I.key),v=i(I,v,x),M===null?V=I:M.sibling=I,M=I);return t&&C.forEach(function(N){return e(E,N)}),Se&&ms(E,x),V}function w(E,v,_,R){var V=Io(_);if(typeof V!="function")throw Error(U(150));if(_=V.call(_),_==null)throw Error(U(151));for(var M=V=null,C=v,x=v=0,I=null,A=_.next();C!==null&&!A.done;x++,A=_.next()){C.index>x?(I=C,C=null):I=C.sibling;var N=m(E,C,A.value,R);if(N===null){C===null&&(C=I);break}t&&C&&N.alternate===null&&e(E,C),v=i(N,v,x),M===null?V=N:M.sibling=N,M=N,C=I}if(A.done)return n(E,C),Se&&ms(E,x),V;if(C===null){for(;!A.done;x++,A=_.next())A=d(E,A.value,R),A!==null&&(v=i(A,v,x),M===null?V=A:M.sibling=A,M=A);return Se&&ms(E,x),V}for(C=r(E,C);!A.done;x++,A=_.next())A=y(C,E,x,A.value,R),A!==null&&(t&&A.alternate!==null&&C.delete(A.key===null?x:A.key),v=i(A,v,x),M===null?V=A:M.sibling=A,M=A);return t&&C.forEach(function(D){return e(E,D)}),Se&&ms(E,x),V}function P(E,v,_,R){if(typeof _=="object"&&_!==null&&_.type===oi&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Cl:e:{for(var V=_.key,M=v;M!==null;){if(M.key===V){if(V=_.type,V===oi){if(M.tag===7){n(E,M.sibling),v=s(M,_.props.children),v.return=E,E=v;break e}}else if(M.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===vr&&dv(V)===M.type){n(E,M.sibling),v=s(M,_.props),v.ref=Ro(E,M,_),v.return=E,E=v;break e}n(E,M);break}else e(E,M);M=M.sibling}_.type===oi?(v=As(_.props.children,E.mode,R,_.key),v.return=E,E=v):(R=cu(_.type,_.key,_.props,null,E.mode,R),R.ref=Ro(E,v,_),R.return=E,E=R)}return o(E);case ii:e:{for(M=_.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===_.containerInfo&&v.stateNode.implementation===_.implementation){n(E,v.sibling),v=s(v,_.children||[]),v.return=E,E=v;break e}else{n(E,v);break}else e(E,v);v=v.sibling}v=ed(_,E.mode,R),v.return=E,E=v}return o(E);case vr:return M=_._init,P(E,v,M(_._payload),R)}if(jo(_))return S(E,v,_,R);if(Io(_))return w(E,v,_,R);jl(E,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,v!==null&&v.tag===6?(n(E,v.sibling),v=s(v,_),v.return=E,E=v):(n(E,v),v=Zh(_,E.mode,R),v.return=E,E=v),o(E)):n(E,v)}return P}var Oi=Cx(!0),Ax=Cx(!1),Lu=ns(null),Mu=null,pi=null,Vp=null;function Op(){Vp=pi=Mu=null}function Lp(t){var e=Lu.current;Te(Lu),t._currentValue=e}function lf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Pi(t,e){Mu=t,Vp=pi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Vt=!0),t.firstContext=null)}function rn(t){var e=t._currentValue;if(Vp!==t)if(t={context:t,memoizedValue:e,next:null},pi===null){if(Mu===null)throw Error(U(308));pi=t,Mu.dependencies={lanes:0,firstContext:t}}else pi=pi.next=t;return e}var Es=null;function Mp(t){Es===null?Es=[t]:Es.push(t)}function kx(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Mp(e)):(n.next=s.next,s.next=n),e.interleaved=n,tr(t,r)}function tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var _r=!1;function jp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Or(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,tr(t,n)}return s=r.interleaved,s===null?(e.next=e,Mp(r)):(e.next=s.next,s.next=e),r.interleaved=e,tr(t,n)}function su(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tp(t,n)}}function fv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ju(t,e,n,r){var s=t.updateQueue;_r=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(i!==null){var d=s.baseState;o=0,h=c=u=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var S=t,w=a;switch(m=e,y=n,w.tag){case 1:if(S=w.payload,typeof S=="function"){d=S.call(y,d,m);break e}d=S;break e;case 3:S.flags=S.flags&-65537|128;case 0:if(S=w.payload,m=typeof S=="function"?S.call(y,d,m):S,m==null)break e;d=ke({},d,m);break e;case 2:_r=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,u=d):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(u=d),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Vs|=o,t.lanes=o,t.memoizedState=d}}function pv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Wa={},In=ns(Wa),Ta=ns(Wa),Sa=ns(Wa);function Ts(t){if(t===Wa)throw Error(U(174));return t}function Fp(t,e){switch(_e(Sa,e),_e(Ta,t),_e(In,Wa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Bd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Bd(e,t)}Te(In),_e(In,e)}function Li(){Te(In),Te(Ta),Te(Sa)}function bx(t){Ts(Sa.current);var e=Ts(In.current),n=Bd(e,t.type);e!==n&&(_e(Ta,t),_e(In,n))}function Up(t){Ta.current===t&&(Te(In),Te(Ta))}var Pe=ns(0);function Fu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Kh=[];function Bp(){for(var t=0;t<Kh.length;t++)Kh[t]._workInProgressVersionPrimary=null;Kh.length=0}var iu=lr.ReactCurrentDispatcher,Gh=lr.ReactCurrentBatchConfig,Ds=0,Ae=null,He=null,Je=null,Uu=!1,Jo=!1,Ia=0,GC=0;function ft(){throw Error(U(321))}function zp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function $p(t,e,n,r,s,i){if(Ds=i,Ae=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,iu.current=t===null||t.memoizedState===null?JC:ZC,t=n(r,s),Jo){i=0;do{if(Jo=!1,Ia=0,25<=i)throw Error(U(301));i+=1,Je=He=null,e.updateQueue=null,iu.current=eA,t=n(r,s)}while(Jo)}if(iu.current=Bu,e=He!==null&&He.next!==null,Ds=0,Je=He=Ae=null,Uu=!1,e)throw Error(U(300));return t}function Hp(){var t=Ia!==0;return Ia=0,t}function En(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Ae.memoizedState=Je=t:Je=Je.next=t,Je}function sn(){if(He===null){var t=Ae.alternate;t=t!==null?t.memoizedState:null}else t=He.next;var e=Je===null?Ae.memoizedState:Je.next;if(e!==null)Je=e,He=t;else{if(t===null)throw Error(U(310));He=t,t={memoizedState:He.memoizedState,baseState:He.baseState,baseQueue:He.baseQueue,queue:He.queue,next:null},Je===null?Ae.memoizedState=Je=t:Je=Je.next=t}return Je}function Pa(t,e){return typeof e=="function"?e(t):e}function Qh(t){var e=sn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=He,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var h=c.lane;if((Ds&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=d,o=r):u=u.next=d,Ae.lanes|=h,Vs|=h}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,wn(r,e.memoizedState)||(Vt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ae.lanes|=i,Vs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Yh(t){var e=sn(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);wn(i,e.memoizedState)||(Vt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Nx(){}function Dx(t,e){var n=Ae,r=sn(),s=e(),i=!wn(r.memoizedState,s);if(i&&(r.memoizedState=s,Vt=!0),r=r.queue,Wp(Lx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Je!==null&&Je.memoizedState.tag&1){if(n.flags|=2048,Ca(9,Ox.bind(null,n,r,s,e),void 0,null),Ze===null)throw Error(U(349));Ds&30||Vx(n,e,s)}return s}function Vx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ox(t,e,n,r){e.value=n,e.getSnapshot=r,Mx(e)&&jx(t)}function Lx(t,e,n){return n(function(){Mx(e)&&jx(t)})}function Mx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function jx(t){var e=tr(t,1);e!==null&&yn(e,t,1,-1)}function mv(t){var e=En();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pa,lastRenderedState:t},e.queue=t,t=t.dispatch=XC.bind(null,Ae,t),[e.memoizedState,t]}function Ca(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ae.updateQueue,e===null?(e={lastEffect:null,stores:null},Ae.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Fx(){return sn().memoizedState}function ou(t,e,n,r){var s=En();Ae.flags|=t,s.memoizedState=Ca(1|e,n,void 0,r===void 0?null:r)}function Pc(t,e,n,r){var s=sn();r=r===void 0?null:r;var i=void 0;if(He!==null){var o=He.memoizedState;if(i=o.destroy,r!==null&&zp(r,o.deps)){s.memoizedState=Ca(e,n,i,r);return}}Ae.flags|=t,s.memoizedState=Ca(1|e,n,i,r)}function gv(t,e){return ou(8390656,8,t,e)}function Wp(t,e){return Pc(2048,8,t,e)}function Ux(t,e){return Pc(4,2,t,e)}function Bx(t,e){return Pc(4,4,t,e)}function zx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function $x(t,e,n){return n=n!=null?n.concat([t]):null,Pc(4,4,zx.bind(null,e,t),n)}function qp(){}function Hx(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Wx(t,e){var n=sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&zp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function qx(t,e,n){return Ds&21?(wn(n,e)||(n=Xw(),Ae.lanes|=n,Vs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Vt=!0),t.memoizedState=n)}function QC(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=Gh.transition;Gh.transition={};try{t(!1),e()}finally{de=n,Gh.transition=r}}function Kx(){return sn().memoizedState}function YC(t,e,n){var r=Mr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Gx(t))Qx(e,n);else if(n=kx(t,e,n,r),n!==null){var s=Ct();yn(n,t,r,s),Yx(n,e,r)}}function XC(t,e,n){var r=Mr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Gx(t))Qx(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,wn(a,o)){var u=e.interleaved;u===null?(s.next=s,Mp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=kx(t,e,s,r),n!==null&&(s=Ct(),yn(n,t,r,s),Yx(n,e,r))}}function Gx(t){var e=t.alternate;return t===Ae||e!==null&&e===Ae}function Qx(t,e){Jo=Uu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Yx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Tp(t,n)}}var Bu={readContext:rn,useCallback:ft,useContext:ft,useEffect:ft,useImperativeHandle:ft,useInsertionEffect:ft,useLayoutEffect:ft,useMemo:ft,useReducer:ft,useRef:ft,useState:ft,useDebugValue:ft,useDeferredValue:ft,useTransition:ft,useMutableSource:ft,useSyncExternalStore:ft,useId:ft,unstable_isNewReconciler:!1},JC={readContext:rn,useCallback:function(t,e){return En().memoizedState=[t,e===void 0?null:e],t},useContext:rn,useEffect:gv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,ou(4194308,4,zx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return ou(4194308,4,t,e)},useInsertionEffect:function(t,e){return ou(4,2,t,e)},useMemo:function(t,e){var n=En();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=En();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YC.bind(null,Ae,t),[r.memoizedState,t]},useRef:function(t){var e=En();return t={current:t},e.memoizedState=t},useState:mv,useDebugValue:qp,useDeferredValue:function(t){return En().memoizedState=t},useTransition:function(){var t=mv(!1),e=t[0];return t=QC.bind(null,t[1]),En().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ae,s=En();if(Se){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ze===null)throw Error(U(349));Ds&30||Vx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,gv(Lx.bind(null,r,i,t),[t]),r.flags|=2048,Ca(9,Ox.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=En(),e=Ze.identifierPrefix;if(Se){var n=Hn,r=$n;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ia++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GC++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZC={readContext:rn,useCallback:Hx,useContext:rn,useEffect:Wp,useImperativeHandle:$x,useInsertionEffect:Ux,useLayoutEffect:Bx,useMemo:Wx,useReducer:Qh,useRef:Fx,useState:function(){return Qh(Pa)},useDebugValue:qp,useDeferredValue:function(t){var e=sn();return qx(e,He.memoizedState,t)},useTransition:function(){var t=Qh(Pa)[0],e=sn().memoizedState;return[t,e]},useMutableSource:Nx,useSyncExternalStore:Dx,useId:Kx,unstable_isNewReconciler:!1},eA={readContext:rn,useCallback:Hx,useContext:rn,useEffect:Wp,useImperativeHandle:$x,useInsertionEffect:Ux,useLayoutEffect:Bx,useMemo:Wx,useReducer:Yh,useRef:Fx,useState:function(){return Yh(Pa)},useDebugValue:qp,useDeferredValue:function(t){var e=sn();return He===null?e.memoizedState=t:qx(e,He.memoizedState,t)},useTransition:function(){var t=Yh(Pa)[0],e=sn().memoizedState;return[t,e]},useMutableSource:Nx,useSyncExternalStore:Dx,useId:Kx,unstable_isNewReconciler:!1};function hn(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function uf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cc={isMounted:function(t){return(t=t._reactInternals)?Ws(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ct(),s=Mr(t),i=Qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Or(t,i,s),e!==null&&(yn(e,t,s,r),su(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ct(),s=Mr(t),i=Qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Or(t,i,s),e!==null&&(yn(e,t,s,r),su(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ct(),r=Mr(t),s=Qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Or(t,s,r),e!==null&&(yn(e,t,r,n),su(e,t,r))}};function yv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!_a(n,r)||!_a(s,i):!0}function Xx(t,e,n){var r=!1,s=Kr,i=e.contextType;return typeof i=="object"&&i!==null?i=rn(i):(s=Lt(e)?bs:wt.current,r=e.contextTypes,i=(r=r!=null)?Di(t,s):Kr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function vv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cc.enqueueReplaceState(e,e.state,null)}function cf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},jp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=rn(i):(i=Lt(e)?bs:wt.current,s.context=Di(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(uf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Cc.enqueueReplaceState(s,s.state,null),ju(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Mi(t,e){try{var n="",r=e;do n+=AP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Xh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function hf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tA=typeof WeakMap=="function"?WeakMap:Map;function Jx(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){$u||($u=!0,xf=r),hf(t,e)},n}function Zx(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){hf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){hf(t,e),typeof r!="function"&&(Lr===null?Lr=new Set([this]):Lr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function _v(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tA;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=mA.bind(null,t,e,n),e.then(t,t))}function wv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,Or(n,e,1))),n.lanes|=1),t)}var nA=lr.ReactCurrentOwner,Vt=!1;function Pt(t,e,n,r){e.child=t===null?Ax(e,null,n,r):Oi(e,t.child,n,r)}function Ev(t,e,n,r,s){n=n.render;var i=e.ref;return Pi(e,s),r=$p(t,e,n,r,i,s),n=Hp(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(Se&&n&&bp(e),e.flags|=1,Pt(t,e,r,s),e.child)}function Tv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!em(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,eE(t,e,i,r,s)):(t=cu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:_a,n(o,r)&&t.ref===e.ref)return nr(t,e,s)}return e.flags|=1,t=jr(i,r),t.ref=e.ref,t.return=e,e.child=t}function eE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(_a(i,r)&&t.ref===e.ref)if(Vt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Vt=!0);else return e.lanes=t.lanes,nr(t,e,s)}return df(t,e,n,r,s)}function tE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_e(gi,$t),$t|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_e(gi,$t),$t|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,_e(gi,$t),$t|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,_e(gi,$t),$t|=r;return Pt(t,e,s,n),e.child}function nE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function df(t,e,n,r,s){var i=Lt(n)?bs:wt.current;return i=Di(e,i),Pi(e,s),n=$p(t,e,n,r,i,s),r=Hp(),t!==null&&!Vt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(Se&&r&&bp(e),e.flags|=1,Pt(t,e,n,s),e.child)}function Sv(t,e,n,r,s){if(Lt(n)){var i=!0;Du(e)}else i=!1;if(Pi(e,s),e.stateNode===null)au(t,e),Xx(e,n,r),cf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=rn(c):(c=Lt(n)?bs:wt.current,c=Di(e,c));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&vv(e,o,r,c),_r=!1;var m=e.memoizedState;o.state=m,ju(e,r,o,s),u=e.memoizedState,a!==r||m!==u||Ot.current||_r?(typeof h=="function"&&(uf(e,n,h,r),u=e.memoizedState),(a=_r||yv(e,n,a,r,m,u,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Rx(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:hn(e.type,a),o.props=c,d=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=rn(u):(u=Lt(n)?bs:wt.current,u=Di(e,u));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||m!==u)&&vv(e,o,r,u),_r=!1,m=e.memoizedState,o.state=m,ju(e,r,o,s);var S=e.memoizedState;a!==d||m!==S||Ot.current||_r?(typeof y=="function"&&(uf(e,n,y,r),S=e.memoizedState),(c=_r||yv(e,n,c,r,m,S,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,S,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,S,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=S),o.props=r,o.state=S,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return ff(t,e,n,r,i,s)}function ff(t,e,n,r,s,i){nE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&uv(e,n,!1),nr(t,e,i);r=e.stateNode,nA.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Oi(e,t.child,null,i),e.child=Oi(e,null,a,i)):Pt(t,e,a,i),e.memoizedState=r.state,s&&uv(e,n,!0),e.child}function rE(t){var e=t.stateNode;e.pendingContext?lv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&lv(t,e.context,!1),Fp(t,e.containerInfo)}function Iv(t,e,n,r,s){return Vi(),Dp(s),e.flags|=256,Pt(t,e,n,r),e.child}var pf={dehydrated:null,treeContext:null,retryLane:0};function mf(t){return{baseLanes:t,cachePool:null,transitions:null}}function sE(t,e,n){var r=e.pendingProps,s=Pe.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_e(Pe,s&1),t===null)return af(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Rc(o,r,0,null),t=As(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=mf(n),e.memoizedState=pf,t):Kp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return rA(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=jr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=jr(a,i):(i=As(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?mf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=pf,r}return i=t.child,t=i.sibling,r=jr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Kp(t,e){return e=Rc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fl(t,e,n,r){return r!==null&&Dp(r),Oi(e,t.child,null,n),t=Kp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rA(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Xh(Error(U(422))),Fl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Rc({mode:"visible",children:r.children},s,0,null),i=As(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Oi(e,t.child,null,o),e.child.memoizedState=mf(o),e.memoizedState=pf,i);if(!(e.mode&1))return Fl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=Xh(i,r,void 0),Fl(t,e,o,r)}if(a=(o&t.childLanes)!==0,Vt||a){if(r=Ze,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,tr(t,s),yn(r,t,s,-1))}return Zp(),r=Xh(Error(U(421))),Fl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gA.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ht=Vr(s.nextSibling),qt=e,Se=!0,fn=null,t!==null&&(Zt[en++]=$n,Zt[en++]=Hn,Zt[en++]=Ns,$n=t.id,Hn=t.overflow,Ns=e),e=Kp(e,r.children),e.flags|=4096,e)}function Pv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),lf(t.return,e,n)}function Jh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function iE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Pt(t,e,r.children,n),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Pv(t,n,e);else if(t.tag===19)Pv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(_e(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Fu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Jh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Fu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Jh(e,!0,n,null,i);break;case"together":Jh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function au(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Vs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=jr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=jr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sA(t,e,n){switch(e.tag){case 3:rE(e),Vi();break;case 5:bx(e);break;case 1:Lt(e.type)&&Du(e);break;case 4:Fp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;_e(Lu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(_e(Pe,Pe.current&1),e.flags|=128,null):n&e.child.childLanes?sE(t,e,n):(_e(Pe,Pe.current&1),t=nr(t,e,n),t!==null?t.sibling:null);_e(Pe,Pe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return iE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_e(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,tE(t,e,n)}return nr(t,e,n)}var oE,gf,aE,lE;oE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};gf=function(){};aE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ts(In.current);var i=null;switch(n){case"input":s=Md(t,s),r=Md(t,r),i=[];break;case"select":s=ke({},s,{value:void 0}),r=ke({},r,{value:void 0}),i=[];break;case"textarea":s=Ud(t,s),r=Ud(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=bu)}zd(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(da.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(da.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ee("scroll",t),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};lE=function(t,e,n,r){n!==r&&(e.flags|=4)};function bo(t,e){if(!Se)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function pt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iA(t,e,n){var r=e.pendingProps;switch(Np(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(e),null;case 1:return Lt(e.type)&&Nu(),pt(e),null;case 3:return r=e.stateNode,Li(),Te(Ot),Te(wt),Bp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ml(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,fn!==null&&(Sf(fn),fn=null))),gf(t,e),pt(e),null;case 5:Up(e);var s=Ts(Sa.current);if(n=e.type,t!==null&&e.stateNode!=null)aE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return pt(e),null}if(t=Ts(In.current),Ml(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Tn]=e,r[Ea]=i,t=(e.mode&1)!==0,n){case"dialog":Ee("cancel",r),Ee("close",r);break;case"iframe":case"object":case"embed":Ee("load",r);break;case"video":case"audio":for(s=0;s<Uo.length;s++)Ee(Uo[s],r);break;case"source":Ee("error",r);break;case"img":case"image":case"link":Ee("error",r),Ee("load",r);break;case"details":Ee("toggle",r);break;case"input":Oy(r,i),Ee("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ee("invalid",r);break;case"textarea":My(r,i),Ee("invalid",r)}zd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,a,t),s=["children",""+a]):da.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ee("scroll",r)}switch(n){case"input":Al(r),Ly(r,i,!0);break;case"textarea":Al(r),jy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Lw(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Tn]=e,t[Ea]=r,oE(t,e,!1,!1),e.stateNode=t;e:{switch(o=$d(n,r),n){case"dialog":Ee("cancel",t),Ee("close",t),s=r;break;case"iframe":case"object":case"embed":Ee("load",t),s=r;break;case"video":case"audio":for(s=0;s<Uo.length;s++)Ee(Uo[s],t);s=r;break;case"source":Ee("error",t),s=r;break;case"img":case"image":case"link":Ee("error",t),Ee("load",t),s=r;break;case"details":Ee("toggle",t),s=r;break;case"input":Oy(t,r),s=Md(t,r),Ee("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=ke({},r,{value:void 0}),Ee("invalid",t);break;case"textarea":My(t,r),s=Ud(t,r),Ee("invalid",t);break;default:s=r}zd(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?Fw(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Mw(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&fa(t,u):typeof u=="number"&&fa(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(da.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ee("scroll",t):u!=null&&yp(t,i,u,o))}switch(n){case"input":Al(t),Ly(t,r,!1);break;case"textarea":Al(t),jy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ei(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ei(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=bu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pt(e),null;case 6:if(t&&e.stateNode!=null)lE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Ts(Sa.current),Ts(In.current),Ml(e)){if(r=e.stateNode,n=e.memoizedProps,r[Tn]=e,(i=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Ll(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ll(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Tn]=e,e.stateNode=r}return pt(e),null;case 13:if(Te(Pe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Se&&Ht!==null&&e.mode&1&&!(e.flags&128))Px(),Vi(),e.flags|=98560,i=!1;else if(i=Ml(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[Tn]=e}else Vi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pt(e),i=!1}else fn!==null&&(Sf(fn),fn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Pe.current&1?qe===0&&(qe=3):Zp())),e.updateQueue!==null&&(e.flags|=4),pt(e),null);case 4:return Li(),gf(t,e),t===null&&wa(e.stateNode.containerInfo),pt(e),null;case 10:return Lp(e.type._context),pt(e),null;case 17:return Lt(e.type)&&Nu(),pt(e),null;case 19:if(Te(Pe),i=e.memoizedState,i===null)return pt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)bo(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Fu(t),o!==null){for(e.flags|=128,bo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return _e(Pe,Pe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Oe()>ji&&(e.flags|=128,r=!0,bo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Fu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),bo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Se)return pt(e),null}else 2*Oe()-i.renderingStartTime>ji&&n!==1073741824&&(e.flags|=128,r=!0,bo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Oe(),e.sibling=null,n=Pe.current,_e(Pe,r?n&1|2:n&1),e):(pt(e),null);case 22:case 23:return Jp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$t&1073741824&&(pt(e),e.subtreeFlags&6&&(e.flags|=8192)):pt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function oA(t,e){switch(Np(e),e.tag){case 1:return Lt(e.type)&&Nu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Li(),Te(Ot),Te(wt),Bp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Up(e),null;case 13:if(Te(Pe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Vi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Te(Pe),null;case 4:return Li(),null;case 10:return Lp(e.type._context),null;case 22:case 23:return Jp(),null;case 24:return null;default:return null}}var Ul=!1,vt=!1,aA=typeof WeakSet=="function"?WeakSet:Set,H=null;function mi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){De(t,e,r)}else n.current=null}function yf(t,e,n){try{n()}catch(r){De(t,e,r)}}var Cv=!1;function lA(t,e){if(Zd=Au,t=fx(),Rp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,d=t,m=null;t:for(;;){for(var y;d!==n||s!==0&&d.nodeType!==3||(a=o+s),d!==i||r!==0&&d.nodeType!==3||(u=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)m=d,d=y;for(;;){if(d===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++h===r&&(u=o),(y=d.nextSibling)!==null)break;d=m,m=d.parentNode}d=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(ef={focusedElem:t,selectionRange:n},Au=!1,H=e;H!==null;)if(e=H,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,H=t;else for(;H!==null;){e=H;try{var S=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var w=S.memoizedProps,P=S.memoizedState,E=e.stateNode,v=E.getSnapshotBeforeUpdate(e.elementType===e.type?w:hn(e.type,w),P);E.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var _=e.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(R){De(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,H=t;break}H=e.return}return S=Cv,Cv=!1,S}function Zo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&yf(e,n,i)}s=s.next}while(s!==r)}}function Ac(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function vf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function uE(t){var e=t.alternate;e!==null&&(t.alternate=null,uE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Tn],delete e[Ea],delete e[rf],delete e[HC],delete e[WC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function cE(t){return t.tag===5||t.tag===3||t.tag===4}function Av(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||cE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function _f(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=bu));else if(r!==4&&(t=t.child,t!==null))for(_f(t,e,n),t=t.sibling;t!==null;)_f(t,e,n),t=t.sibling}function wf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(wf(t,e,n),t=t.sibling;t!==null;)wf(t,e,n),t=t.sibling}var nt=null,dn=!1;function mr(t,e,n){for(n=n.child;n!==null;)hE(t,e,n),n=n.sibling}function hE(t,e,n){if(Sn&&typeof Sn.onCommitFiberUnmount=="function")try{Sn.onCommitFiberUnmount(wc,n)}catch{}switch(n.tag){case 5:vt||mi(n,e);case 6:var r=nt,s=dn;nt=null,mr(t,e,n),nt=r,dn=s,nt!==null&&(dn?(t=nt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):nt.removeChild(n.stateNode));break;case 18:nt!==null&&(dn?(t=nt,n=n.stateNode,t.nodeType===8?Wh(t.parentNode,n):t.nodeType===1&&Wh(t,n),ya(t)):Wh(nt,n.stateNode));break;case 4:r=nt,s=dn,nt=n.stateNode.containerInfo,dn=!0,mr(t,e,n),nt=r,dn=s;break;case 0:case 11:case 14:case 15:if(!vt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&yf(n,e,o),s=s.next}while(s!==r)}mr(t,e,n);break;case 1:if(!vt&&(mi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){De(n,e,a)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(vt=(r=vt)||n.memoizedState!==null,mr(t,e,n),vt=r):mr(t,e,n);break;default:mr(t,e,n)}}function kv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aA),e.forEach(function(r){var s=yA.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function cn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:nt=a.stateNode,dn=!1;break e;case 3:nt=a.stateNode.containerInfo,dn=!0;break e;case 4:nt=a.stateNode.containerInfo,dn=!0;break e}a=a.return}if(nt===null)throw Error(U(160));hE(i,o,s),nt=null,dn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){De(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)dE(e,t),e=e.sibling}function dE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(cn(e,t),xn(t),r&4){try{Zo(3,t,t.return),Ac(3,t)}catch(w){De(t,t.return,w)}try{Zo(5,t,t.return)}catch(w){De(t,t.return,w)}}break;case 1:cn(e,t),xn(t),r&512&&n!==null&&mi(n,n.return);break;case 5:if(cn(e,t),xn(t),r&512&&n!==null&&mi(n,n.return),t.flags&32){var s=t.stateNode;try{fa(s,"")}catch(w){De(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Vw(s,i),$d(a,o);var c=$d(a,i);for(o=0;o<u.length;o+=2){var h=u[o],d=u[o+1];h==="style"?Fw(s,d):h==="dangerouslySetInnerHTML"?Mw(s,d):h==="children"?fa(s,d):yp(s,h,d,c)}switch(a){case"input":jd(s,i);break;case"textarea":Ow(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Ei(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ei(s,!!i.multiple,i.defaultValue,!0):Ei(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ea]=i}catch(w){De(t,t.return,w)}}break;case 6:if(cn(e,t),xn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){De(t,t.return,w)}}break;case 3:if(cn(e,t),xn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ya(e.containerInfo)}catch(w){De(t,t.return,w)}break;case 4:cn(e,t),xn(t);break;case 13:cn(e,t),xn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Yp=Oe())),r&4&&kv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(vt=(c=vt)||h,cn(e,t),vt=c):cn(e,t),xn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(H=t,h=t.child;h!==null;){for(d=H=h;H!==null;){switch(m=H,y=m.child,m.tag){case 0:case 11:case 14:case 15:Zo(4,m,m.return);break;case 1:mi(m,m.return);var S=m.stateNode;if(typeof S.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,S.props=e.memoizedProps,S.state=e.memoizedState,S.componentWillUnmount()}catch(w){De(r,n,w)}}break;case 5:mi(m,m.return);break;case 22:if(m.memoizedState!==null){bv(d);continue}}y!==null?(y.return=m,H=y):bv(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{s=d.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,u=d.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=jw("display",o))}catch(w){De(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(w){De(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:cn(e,t),xn(t),r&4&&kv(t);break;case 21:break;default:cn(e,t),xn(t)}}function xn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(cE(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(fa(s,""),r.flags&=-33);var i=Av(t);wf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Av(t);_f(t,a,o);break;default:throw Error(U(161))}}catch(u){De(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uA(t,e,n){H=t,fE(t)}function fE(t,e,n){for(var r=(t.mode&1)!==0;H!==null;){var s=H,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ul;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||vt;a=Ul;var c=vt;if(Ul=o,(vt=u)&&!c)for(H=s;H!==null;)o=H,u=o.child,o.tag===22&&o.memoizedState!==null?Nv(s):u!==null?(u.return=o,H=u):Nv(s);for(;i!==null;)H=i,fE(i),i=i.sibling;H=s,Ul=a,vt=c}Rv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,H=i):Rv(t)}}function Rv(t){for(;H!==null;){var e=H;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:vt||Ac(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!vt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:hn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&pv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}pv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&ya(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}vt||e.flags&512&&vf(e)}catch(m){De(e,e.return,m)}}if(e===t){H=null;break}if(n=e.sibling,n!==null){n.return=e.return,H=n;break}H=e.return}}function bv(t){for(;H!==null;){var e=H;if(e===t){H=null;break}var n=e.sibling;if(n!==null){n.return=e.return,H=n;break}H=e.return}}function Nv(t){for(;H!==null;){var e=H;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ac(4,e)}catch(u){De(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){De(e,s,u)}}var i=e.return;try{vf(e)}catch(u){De(e,i,u)}break;case 5:var o=e.return;try{vf(e)}catch(u){De(e,o,u)}}}catch(u){De(e,e.return,u)}if(e===t){H=null;break}var a=e.sibling;if(a!==null){a.return=e.return,H=a;break}H=e.return}}var cA=Math.ceil,zu=lr.ReactCurrentDispatcher,Gp=lr.ReactCurrentOwner,nn=lr.ReactCurrentBatchConfig,le=0,Ze=null,Be=null,it=0,$t=0,gi=ns(0),qe=0,Aa=null,Vs=0,kc=0,Qp=0,ea=null,Nt=null,Yp=0,ji=1/0,Un=null,$u=!1,xf=null,Lr=null,Bl=!1,Ar=null,Hu=0,ta=0,Ef=null,lu=-1,uu=0;function Ct(){return le&6?Oe():lu!==-1?lu:lu=Oe()}function Mr(t){return t.mode&1?le&2&&it!==0?it&-it:KC.transition!==null?(uu===0&&(uu=Xw()),uu):(t=de,t!==0||(t=window.event,t=t===void 0?16:sx(t.type)),t):1}function yn(t,e,n,r){if(50<ta)throw ta=0,Ef=null,Error(U(185));za(t,n,r),(!(le&2)||t!==Ze)&&(t===Ze&&(!(le&2)&&(kc|=n),qe===4&&Tr(t,it)),Mt(t,r),n===1&&le===0&&!(e.mode&1)&&(ji=Oe()+500,Ic&&rs()))}function Mt(t,e){var n=t.callbackNode;KP(t,e);var r=Cu(t,t===Ze?it:0);if(r===0)n!==null&&By(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&By(n),e===1)t.tag===0?qC(Dv.bind(null,t)):Tx(Dv.bind(null,t)),zC(function(){!(le&6)&&rs()}),n=null;else{switch(Jw(r)){case 1:n=Ep;break;case 4:n=Qw;break;case 16:n=Pu;break;case 536870912:n=Yw;break;default:n=Pu}n=xE(n,pE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function pE(t,e){if(lu=-1,uu=0,le&6)throw Error(U(327));var n=t.callbackNode;if(Ci()&&t.callbackNode!==n)return null;var r=Cu(t,t===Ze?it:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wu(t,r);else{e=r;var s=le;le|=2;var i=gE();(Ze!==t||it!==e)&&(Un=null,ji=Oe()+500,Cs(t,e));do try{fA();break}catch(a){mE(t,a)}while(!0);Op(),zu.current=i,le=s,Be!==null?e=0:(Ze=null,it=0,e=qe)}if(e!==0){if(e===2&&(s=Gd(t),s!==0&&(r=s,e=Tf(t,s))),e===1)throw n=Aa,Cs(t,0),Tr(t,r),Mt(t,Oe()),n;if(e===6)Tr(t,r);else{if(s=t.current.alternate,!(r&30)&&!hA(s)&&(e=Wu(t,r),e===2&&(i=Gd(t),i!==0&&(r=i,e=Tf(t,i))),e===1))throw n=Aa,Cs(t,0),Tr(t,r),Mt(t,Oe()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:gs(t,Nt,Un);break;case 3:if(Tr(t,r),(r&130023424)===r&&(e=Yp+500-Oe(),10<e)){if(Cu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ct(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=nf(gs.bind(null,t,Nt,Un),e);break}gs(t,Nt,Un);break;case 4:if(Tr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-gn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Oe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cA(r/1960))-r,10<r){t.timeoutHandle=nf(gs.bind(null,t,Nt,Un),r);break}gs(t,Nt,Un);break;case 5:gs(t,Nt,Un);break;default:throw Error(U(329))}}}return Mt(t,Oe()),t.callbackNode===n?pE.bind(null,t):null}function Tf(t,e){var n=ea;return t.current.memoizedState.isDehydrated&&(Cs(t,e).flags|=256),t=Wu(t,e),t!==2&&(e=Nt,Nt=n,e!==null&&Sf(e)),t}function Sf(t){Nt===null?Nt=t:Nt.push.apply(Nt,t)}function hA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tr(t,e){for(e&=~Qp,e&=~kc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function Dv(t){if(le&6)throw Error(U(327));Ci();var e=Cu(t,0);if(!(e&1))return Mt(t,Oe()),null;var n=Wu(t,e);if(t.tag!==0&&n===2){var r=Gd(t);r!==0&&(e=r,n=Tf(t,r))}if(n===1)throw n=Aa,Cs(t,0),Tr(t,e),Mt(t,Oe()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,gs(t,Nt,Un),Mt(t,Oe()),null}function Xp(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(ji=Oe()+500,Ic&&rs())}}function Os(t){Ar!==null&&Ar.tag===0&&!(le&6)&&Ci();var e=le;le|=1;var n=nn.transition,r=de;try{if(nn.transition=null,de=1,t)return t()}finally{de=r,nn.transition=n,le=e,!(le&6)&&rs()}}function Jp(){$t=gi.current,Te(gi)}function Cs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,BC(n)),Be!==null)for(n=Be.return;n!==null;){var r=n;switch(Np(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Nu();break;case 3:Li(),Te(Ot),Te(wt),Bp();break;case 5:Up(r);break;case 4:Li();break;case 13:Te(Pe);break;case 19:Te(Pe);break;case 10:Lp(r.type._context);break;case 22:case 23:Jp()}n=n.return}if(Ze=t,Be=t=jr(t.current,null),it=$t=e,qe=0,Aa=null,Qp=kc=Vs=0,Nt=ea=null,Es!==null){for(e=0;e<Es.length;e++)if(n=Es[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Es=null}return t}function mE(t,e){do{var n=Be;try{if(Op(),iu.current=Bu,Uu){for(var r=Ae.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Uu=!1}if(Ds=0,Je=He=Ae=null,Jo=!1,Ia=0,Gp.current=null,n===null||n.return===null){qe=1,Aa=e,Be=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=it,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=wv(o);if(y!==null){y.flags&=-257,xv(y,o,a,i,e),y.mode&1&&_v(i,c,e),e=y,u=c;var S=e.updateQueue;if(S===null){var w=new Set;w.add(u),e.updateQueue=w}else S.add(u);break e}else{if(!(e&1)){_v(i,c,e),Zp();break e}u=Error(U(426))}}else if(Se&&a.mode&1){var P=wv(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),xv(P,o,a,i,e),Dp(Mi(u,a));break e}}i=u=Mi(u,a),qe!==4&&(qe=2),ea===null?ea=[i]:ea.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=Jx(i,u,e);fv(i,E);break e;case 1:a=u;var v=i.type,_=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Lr===null||!Lr.has(_)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=Zx(i,a,e);fv(i,R);break e}}i=i.return}while(i!==null)}vE(n)}catch(V){e=V,Be===n&&n!==null&&(Be=n=n.return);continue}break}while(!0)}function gE(){var t=zu.current;return zu.current=Bu,t===null?Bu:t}function Zp(){(qe===0||qe===3||qe===2)&&(qe=4),Ze===null||!(Vs&268435455)&&!(kc&268435455)||Tr(Ze,it)}function Wu(t,e){var n=le;le|=2;var r=gE();(Ze!==t||it!==e)&&(Un=null,Cs(t,e));do try{dA();break}catch(s){mE(t,s)}while(!0);if(Op(),le=n,zu.current=r,Be!==null)throw Error(U(261));return Ze=null,it=0,qe}function dA(){for(;Be!==null;)yE(Be)}function fA(){for(;Be!==null&&!jP();)yE(Be)}function yE(t){var e=wE(t.alternate,t,$t);t.memoizedProps=t.pendingProps,e===null?vE(t):Be=e,Gp.current=null}function vE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oA(n,e),n!==null){n.flags&=32767,Be=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Be=null;return}}else if(n=iA(n,e,$t),n!==null){Be=n;return}if(e=e.sibling,e!==null){Be=e;return}Be=e=t}while(e!==null);qe===0&&(qe=5)}function gs(t,e,n){var r=de,s=nn.transition;try{nn.transition=null,de=1,pA(t,e,n,r)}finally{nn.transition=s,de=r}return null}function pA(t,e,n,r){do Ci();while(Ar!==null);if(le&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(GP(t,i),t===Ze&&(Be=Ze=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Bl||(Bl=!0,xE(Pu,function(){return Ci(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=nn.transition,nn.transition=null;var o=de;de=1;var a=le;le|=4,Gp.current=null,lA(t,n),dE(n,t),VC(ef),Au=!!Zd,ef=Zd=null,t.current=n,uA(n),FP(),le=a,de=o,nn.transition=i}else t.current=n;if(Bl&&(Bl=!1,Ar=t,Hu=s),i=t.pendingLanes,i===0&&(Lr=null),zP(n.stateNode),Mt(t,Oe()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if($u)throw $u=!1,t=xf,xf=null,t;return Hu&1&&t.tag!==0&&Ci(),i=t.pendingLanes,i&1?t===Ef?ta++:(ta=0,Ef=t):ta=0,rs(),null}function Ci(){if(Ar!==null){var t=Jw(Hu),e=nn.transition,n=de;try{if(nn.transition=null,de=16>t?16:t,Ar===null)var r=!1;else{if(t=Ar,Ar=null,Hu=0,le&6)throw Error(U(331));var s=le;for(le|=4,H=t.current;H!==null;){var i=H,o=i.child;if(H.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(H=c;H!==null;){var h=H;switch(h.tag){case 0:case 11:case 15:Zo(8,h,i)}var d=h.child;if(d!==null)d.return=h,H=d;else for(;H!==null;){h=H;var m=h.sibling,y=h.return;if(uE(h),h===c){H=null;break}if(m!==null){m.return=y,H=m;break}H=y}}}var S=i.alternate;if(S!==null){var w=S.child;if(w!==null){S.child=null;do{var P=w.sibling;w.sibling=null,w=P}while(w!==null)}}H=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,H=o;else e:for(;H!==null;){if(i=H,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Zo(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,H=E;break e}H=i.return}}var v=t.current;for(H=v;H!==null;){o=H;var _=o.child;if(o.subtreeFlags&2064&&_!==null)_.return=o,H=_;else e:for(o=v;H!==null;){if(a=H,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Ac(9,a)}}catch(V){De(a,a.return,V)}if(a===o){H=null;break e}var R=a.sibling;if(R!==null){R.return=a.return,H=R;break e}H=a.return}}if(le=s,rs(),Sn&&typeof Sn.onPostCommitFiberRoot=="function")try{Sn.onPostCommitFiberRoot(wc,t)}catch{}r=!0}return r}finally{de=n,nn.transition=e}}return!1}function Vv(t,e,n){e=Mi(n,e),e=Jx(t,e,1),t=Or(t,e,1),e=Ct(),t!==null&&(za(t,1,e),Mt(t,e))}function De(t,e,n){if(t.tag===3)Vv(t,t,n);else for(;e!==null;){if(e.tag===3){Vv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Lr===null||!Lr.has(r))){t=Mi(n,t),t=Zx(e,t,1),e=Or(e,t,1),t=Ct(),e!==null&&(za(e,1,t),Mt(e,t));break}}e=e.return}}function mA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ct(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(it&n)===n&&(qe===4||qe===3&&(it&130023424)===it&&500>Oe()-Yp?Cs(t,0):Qp|=n),Mt(t,e)}function _E(t,e){e===0&&(t.mode&1?(e=bl,bl<<=1,!(bl&130023424)&&(bl=4194304)):e=1);var n=Ct();t=tr(t,e),t!==null&&(za(t,e,n),Mt(t,n))}function gA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_E(t,n)}function yA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),_E(t,n)}var wE;wE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ot.current)Vt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Vt=!1,sA(t,e,n);Vt=!!(t.flags&131072)}else Vt=!1,Se&&e.flags&1048576&&Sx(e,Ou,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;au(t,e),t=e.pendingProps;var s=Di(e,wt.current);Pi(e,n),s=$p(null,e,r,t,s,n);var i=Hp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Lt(r)?(i=!0,Du(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,jp(e),s.updater=Cc,e.stateNode=s,s._reactInternals=e,cf(e,r,t,n),e=ff(null,e,r,!0,i,n)):(e.tag=0,Se&&i&&bp(e),Pt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(au(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_A(r),t=hn(r,t),s){case 0:e=df(null,e,r,t,n);break e;case 1:e=Sv(null,e,r,t,n);break e;case 11:e=Ev(null,e,r,t,n);break e;case 14:e=Tv(null,e,r,hn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),df(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Sv(t,e,r,s,n);case 3:e:{if(rE(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Rx(t,e),ju(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Mi(Error(U(423)),e),e=Iv(t,e,r,n,s);break e}else if(r!==s){s=Mi(Error(U(424)),e),e=Iv(t,e,r,n,s);break e}else for(Ht=Vr(e.stateNode.containerInfo.firstChild),qt=e,Se=!0,fn=null,n=Ax(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Vi(),r===s){e=nr(t,e,n);break e}Pt(t,e,r,n)}e=e.child}return e;case 5:return bx(e),t===null&&af(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,tf(r,s)?o=null:i!==null&&tf(r,i)&&(e.flags|=32),nE(t,e),Pt(t,e,o,n),e.child;case 6:return t===null&&af(e),null;case 13:return sE(t,e,n);case 4:return Fp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Oi(e,null,r,n):Pt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),Ev(t,e,r,s,n);case 7:return Pt(t,e,e.pendingProps,n),e.child;case 8:return Pt(t,e,e.pendingProps.children,n),e.child;case 12:return Pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_e(Lu,r._currentValue),r._currentValue=o,i!==null)if(wn(i.value,o)){if(i.children===s.children&&!Ot.current){e=nr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Qn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),lf(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),lf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Pi(e,n),s=rn(s),r=r(s),e.flags|=1,Pt(t,e,r,n),e.child;case 14:return r=e.type,s=hn(r,e.pendingProps),s=hn(r.type,s),Tv(t,e,r,s,n);case 15:return eE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:hn(r,s),au(t,e),e.tag=1,Lt(r)?(t=!0,Du(e)):t=!1,Pi(e,n),Xx(e,r,s),cf(e,r,s,n),ff(null,e,r,!0,t,n);case 19:return iE(t,e,n);case 22:return tE(t,e,n)}throw Error(U(156,e.tag))};function xE(t,e){return Gw(t,e)}function vA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tn(t,e,n,r){return new vA(t,e,n,r)}function em(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _A(t){if(typeof t=="function")return em(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_p)return 11;if(t===wp)return 14}return 2}function jr(t,e){var n=t.alternate;return n===null?(n=tn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function cu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")em(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case oi:return As(n.children,s,i,e);case vp:o=8,s|=8;break;case Dd:return t=tn(12,n,e,s|2),t.elementType=Dd,t.lanes=i,t;case Vd:return t=tn(13,n,e,s),t.elementType=Vd,t.lanes=i,t;case Od:return t=tn(19,n,e,s),t.elementType=Od,t.lanes=i,t;case bw:return Rc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kw:o=10;break e;case Rw:o=9;break e;case _p:o=11;break e;case wp:o=14;break e;case vr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=tn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function As(t,e,n,r){return t=tn(7,t,r,e),t.lanes=n,t}function Rc(t,e,n,r){return t=tn(22,t,r,e),t.elementType=bw,t.lanes=n,t.stateNode={isHidden:!1},t}function Zh(t,e,n){return t=tn(6,t,null,e),t.lanes=n,t}function ed(t,e,n){return e=tn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function wA(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Vh(0),this.expirationTimes=Vh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Vh(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function tm(t,e,n,r,s,i,o,a,u){return t=new wA(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=tn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},jp(i),t}function xA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ii,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function EE(t){if(!t)return Kr;t=t._reactInternals;e:{if(Ws(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Lt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Lt(n))return Ex(t,n,e)}return e}function TE(t,e,n,r,s,i,o,a,u){return t=tm(n,r,!0,t,s,i,o,a,u),t.context=EE(null),n=t.current,r=Ct(),s=Mr(n),i=Qn(r,s),i.callback=e??null,Or(n,i,s),t.current.lanes=s,za(t,s,r),Mt(t,r),t}function bc(t,e,n,r){var s=e.current,i=Ct(),o=Mr(s);return n=EE(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Or(s,e,o),t!==null&&(yn(t,s,o,i),su(t,s,o)),o}function qu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ov(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function nm(t,e){Ov(t,e),(t=t.alternate)&&Ov(t,e)}function EA(){return null}var SE=typeof reportError=="function"?reportError:function(t){console.error(t)};function rm(t){this._internalRoot=t}Nc.prototype.render=rm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));bc(t,e,null,null)};Nc.prototype.unmount=rm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Os(function(){bc(null,t,null,null)}),e[er]=null}};function Nc(t){this._internalRoot=t}Nc.prototype.unstable_scheduleHydration=function(t){if(t){var e=tx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Er.length&&e!==0&&e<Er[n].priority;n++);Er.splice(n,0,t),n===0&&rx(t)}};function sm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lv(){}function TA(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=qu(o);i.call(c)}}var o=TE(e,r,t,0,null,!1,!1,"",Lv);return t._reactRootContainer=o,t[er]=o.current,wa(t.nodeType===8?t.parentNode:t),Os(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=qu(u);a.call(c)}}var u=tm(t,0,!1,null,null,!1,!1,"",Lv);return t._reactRootContainer=u,t[er]=u.current,wa(t.nodeType===8?t.parentNode:t),Os(function(){bc(e,u,n,r)}),u}function Vc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=qu(o);a.call(u)}}bc(e,o,t,s)}else o=TA(n,e,t,s,r);return qu(o)}Zw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Fo(e.pendingLanes);n!==0&&(Tp(e,n|1),Mt(e,Oe()),!(le&6)&&(ji=Oe()+500,rs()))}break;case 13:Os(function(){var r=tr(t,1);if(r!==null){var s=Ct();yn(r,t,1,s)}}),nm(t,1)}};Sp=function(t){if(t.tag===13){var e=tr(t,134217728);if(e!==null){var n=Ct();yn(e,t,134217728,n)}nm(t,134217728)}};ex=function(t){if(t.tag===13){var e=Mr(t),n=tr(t,e);if(n!==null){var r=Ct();yn(n,t,e,r)}nm(t,e)}};tx=function(){return de};nx=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};Wd=function(t,e,n){switch(e){case"input":if(jd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Sc(r);if(!s)throw Error(U(90));Dw(r),jd(r,s)}}}break;case"textarea":Ow(t,n);break;case"select":e=n.value,e!=null&&Ei(t,!!n.multiple,e,!1)}};zw=Xp;$w=Os;var SA={usingClientEntryPoint:!1,Events:[Ha,ci,Sc,Uw,Bw,Xp]},No={findFiberByHostInstance:xs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IA={bundleType:No.bundleType,version:No.version,rendererPackageName:No.rendererPackageName,rendererConfig:No.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qw(t),t===null?null:t.stateNode},findFiberByHostInstance:No.findFiberByHostInstance||EA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{wc=zl.inject(IA),Sn=zl}catch{}}Qt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SA;Qt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sm(e))throw Error(U(200));return xA(t,e,null,n)};Qt.createRoot=function(t,e){if(!sm(t))throw Error(U(299));var n=!1,r="",s=SE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=tm(t,1,!1,null,null,n,!1,r,s),t[er]=e.current,wa(t.nodeType===8?t.parentNode:t),new rm(e)};Qt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=qw(e),t=t===null?null:t.stateNode,t};Qt.flushSync=function(t){return Os(t)};Qt.hydrate=function(t,e,n){if(!Dc(e))throw Error(U(200));return Vc(null,t,e,!0,n)};Qt.hydrateRoot=function(t,e,n){if(!sm(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=SE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=TE(e,null,t,1,n??null,s,!1,i,o),t[er]=e.current,wa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Nc(e)};Qt.render=function(t,e,n){if(!Dc(e))throw Error(U(200));return Vc(null,t,e,!1,n)};Qt.unmountComponentAtNode=function(t){if(!Dc(t))throw Error(U(40));return t._reactRootContainer?(Os(function(){Vc(null,null,t,!1,function(){t._reactRootContainer=null,t[er]=null})}),!0):!1};Qt.unstable_batchedUpdates=Xp;Qt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Vc(t,e,n,!1,r)};Qt.version="18.3.1-next-f1338f8080-20240426";function IE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IE)}catch(t){console.error(t)}}IE(),Iw.exports=Qt;var PA=Iw.exports,Mv=PA;bd.createRoot=Mv.createRoot,bd.hydrateRoot=Mv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ka(){return ka=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ka.apply(this,arguments)}var kr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(kr||(kr={}));const jv="popstate";function CA(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return If("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Ku(s)}return kA(e,n,null,t)}function Me(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function im(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AA(){return Math.random().toString(36).substr(2,8)}function Fv(t,e){return{usr:t.state,key:t.key,idx:e}}function If(t,e,n,r){return n===void 0&&(n=null),ka({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?to(e):e,{state:n,key:e&&e.key||r||AA()})}function Ku(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function to(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function kA(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=kr.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(ka({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function d(){a=kr.Pop;let P=h(),E=P==null?null:P-c;c=P,u&&u({action:a,location:w.location,delta:E})}function m(P,E){a=kr.Push;let v=If(w.location,P,E);c=h()+1;let _=Fv(v,c),R=w.createHref(v);try{o.pushState(_,"",R)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;s.location.assign(R)}i&&u&&u({action:a,location:w.location,delta:1})}function y(P,E){a=kr.Replace;let v=If(w.location,P,E);c=h();let _=Fv(v,c),R=w.createHref(v);o.replaceState(_,"",R),i&&u&&u({action:a,location:w.location,delta:0})}function S(P){let E=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof P=="string"?P:Ku(P);return v=v.replace(/ $/,"%20"),Me(E,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,E)}let w={get action(){return a},get location(){return t(s,o)},listen(P){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(jv,d),u=P,()=>{s.removeEventListener(jv,d),u=null}},createHref(P){return e(s,P)},createURL:S,encodeLocation(P){let E=S(P);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:y,go(P){return o.go(P)}};return w}var Uv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Uv||(Uv={}));function RA(t,e,n){return n===void 0&&(n="/"),bA(t,e,n)}function bA(t,e,n,r){let s=typeof e=="string"?to(e):e,i=om(s.pathname||"/",n);if(i==null)return null;let o=PE(t);NA(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=HA(i);a=BA(o[u],c)}return a}function PE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let u={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Me(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Fr([r,u.relativePath]),h=n.concat(u);i.children&&i.children.length>0&&(Me(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),PE(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:FA(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let u of CE(i.path))s(i,o,u)}),e}function CE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=CE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function NA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:UA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const DA=/^:[\w-]+$/,VA=3,OA=2,LA=1,MA=10,jA=-2,Bv=t=>t==="*";function FA(t,e){let n=t.split("/"),r=n.length;return n.some(Bv)&&(r+=jA),e&&(r+=OA),n.filter(s=>!Bv(s)).reduce((s,i)=>s+(DA.test(i)?VA:i===""?LA:MA),r)}function UA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function BA(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=zA({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!d)return null;Object.assign(s,d.params),o.push({params:s,pathname:Fr([i,d.pathname]),pathnameBase:QA(Fr([i,d.pathnameBase])),route:m}),d.pathnameBase!=="/"&&(i=Fr([i,d.pathnameBase]))}return o}function zA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=$A(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,d)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let w=a[d]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const S=a[d];return y&&!S?c[m]=void 0:c[m]=(S||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function $A(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),im(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function HA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return im(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function om(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const WA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qA=t=>WA.test(t);function KA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?to(t):t,i;if(n)if(qA(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),im(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=zv(n.substring(1),"/"):i=zv(n,e)}else i=e;return{pathname:i,search:YA(r),hash:XA(s)}}function zv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function td(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function GA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function am(t,e){let n=GA(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function lm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=to(t):(s=ka({},t),Me(!s.pathname||!s.pathname.includes("?"),td("?","pathname","search",s)),Me(!s.pathname||!s.pathname.includes("#"),td("#","pathname","hash",s)),Me(!s.search||!s.search.includes("#"),td("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),d-=1;s.pathname=m.join("/")}a=d>=0?e[d]:"/"}let u=KA(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const Fr=t=>t.join("/").replace(/\/\/+/g,"/"),QA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),YA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,XA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function JA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const AE=["post","put","patch","delete"];new Set(AE);const ZA=["get",...AE];new Set(ZA);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ra(){return Ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ra.apply(this,arguments)}const um=b.createContext(null),ek=b.createContext(null),ss=b.createContext(null),Oc=b.createContext(null),ur=b.createContext({outlet:null,matches:[],isDataRoute:!1}),kE=b.createContext(null);function tk(t,e){let{relative:n}=e===void 0?{}:e;no()||Me(!1);let{basename:r,navigator:s}=b.useContext(ss),{hash:i,pathname:o,search:a}=bE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Fr([r,o])),s.createHref({pathname:u,search:a,hash:i})}function no(){return b.useContext(Oc)!=null}function ro(){return no()||Me(!1),b.useContext(Oc).location}function RE(t){b.useContext(ss).static||b.useLayoutEffect(t)}function cr(){let{isDataRoute:t}=b.useContext(ur);return t?mk():nk()}function nk(){no()||Me(!1);let t=b.useContext(um),{basename:e,future:n,navigator:r}=b.useContext(ss),{matches:s}=b.useContext(ur),{pathname:i}=ro(),o=JSON.stringify(am(s,n.v7_relativeSplatPath)),a=b.useRef(!1);return RE(()=>{a.current=!0}),b.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let d=lm(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Fr([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,i,t])}function rk(){let{matches:t}=b.useContext(ur),e=t[t.length-1];return e?e.params:{}}function bE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=b.useContext(ss),{matches:s}=b.useContext(ur),{pathname:i}=ro(),o=JSON.stringify(am(s,r.v7_relativeSplatPath));return b.useMemo(()=>lm(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function sk(t,e){return ik(t,e)}function ik(t,e,n,r){no()||Me(!1);let{navigator:s}=b.useContext(ss),{matches:i}=b.useContext(ur),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=ro(),h;if(e){var d;let P=typeof e=="string"?to(e):e;u==="/"||(d=P.pathname)!=null&&d.startsWith(u)||Me(!1),h=P}else h=c;let m=h.pathname||"/",y=m;if(u!=="/"){let P=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let S=RA(t,{pathname:y}),w=ck(S&&S.map(P=>Object.assign({},P,{params:Object.assign({},a,P.params),pathname:Fr([u,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?u:Fr([u,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),i,n,r);return e&&w?b.createElement(Oc.Provider,{value:{location:Ra({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:kr.Pop}},w):w}function ok(){let t=pk(),e=JA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:s},n):null,null)}const ak=b.createElement(ok,null);class lk extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(ur.Provider,{value:this.props.routeContext},b.createElement(kE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uk(t){let{routeContext:e,match:n,children:r}=t,s=b.useContext(um);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(ur.Provider,{value:e},r)}function ck(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);h>=0||Me(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(c=h),d.route.id){let{loaderData:m,errors:y}=n,S=d.route.loader&&m[d.route.id]===void 0&&(!y||y[d.route.id]===void 0);if(d.route.lazy||S){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,d,m)=>{let y,S=!1,w=null,P=null;n&&(y=a&&d.route.id?a[d.route.id]:void 0,w=d.route.errorElement||ak,u&&(c<0&&m===0?(gk("route-fallback"),S=!0,P=null):c===m&&(S=!0,P=d.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,m+1)),v=()=>{let _;return y?_=w:S?_=P:d.route.Component?_=b.createElement(d.route.Component,null):d.route.element?_=d.route.element:_=h,b.createElement(uk,{match:d,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:_})};return n&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?b.createElement(lk,{location:n.location,revalidation:n.revalidation,component:w,error:y,children:v(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):v()},null)}var NE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(NE||{}),DE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(DE||{});function hk(t){let e=b.useContext(um);return e||Me(!1),e}function dk(t){let e=b.useContext(ek);return e||Me(!1),e}function fk(t){let e=b.useContext(ur);return e||Me(!1),e}function VE(t){let e=fk(),n=e.matches[e.matches.length-1];return n.route.id||Me(!1),n.route.id}function pk(){var t;let e=b.useContext(kE),n=dk(),r=VE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function mk(){let{router:t}=hk(NE.UseNavigateStable),e=VE(DE.UseNavigateStable),n=b.useRef(!1);return RE(()=>{n.current=!0}),b.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ra({fromRouteId:e},i)))},[t,e])}const $v={};function gk(t,e,n){$v[t]||($v[t]=!0)}function yk(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function vk(t){let{to:e,replace:n,state:r,relative:s}=t;no()||Me(!1);let{future:i,static:o}=b.useContext(ss),{matches:a}=b.useContext(ur),{pathname:u}=ro(),c=cr(),h=lm(e,am(a,i.v7_relativeSplatPath),u,s==="path"),d=JSON.stringify(h);return b.useEffect(()=>c(JSON.parse(d),{replace:n,state:r,relative:s}),[c,d,s,n,r]),null}function Bt(t){Me(!1)}function _k(t){let{basename:e="/",children:n=null,location:r,navigationType:s=kr.Pop,navigator:i,static:o=!1,future:a}=t;no()&&Me(!1);let u=e.replace(/^\/*/,"/"),c=b.useMemo(()=>({basename:u,navigator:i,static:o,future:Ra({v7_relativeSplatPath:!1},a)}),[u,a,i,o]);typeof r=="string"&&(r=to(r));let{pathname:h="/",search:d="",hash:m="",state:y=null,key:S="default"}=r,w=b.useMemo(()=>{let P=om(h,u);return P==null?null:{location:{pathname:P,search:d,hash:m,state:y,key:S},navigationType:s}},[u,h,d,m,y,S,s]);return w==null?null:b.createElement(ss.Provider,{value:c},b.createElement(Oc.Provider,{children:n,value:w}))}function wk(t){let{children:e,location:n}=t;return sk(Pf(e),n)}new Promise(()=>{});function Pf(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(r,s)=>{if(!b.isValidElement(r))return;let i=[...e,s];if(r.type===b.Fragment){n.push.apply(n,Pf(r.props.children,i));return}r.type!==Bt&&Me(!1),!r.props.index||!r.props.children||Me(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Pf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Cf(){return Cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Cf.apply(this,arguments)}function xk(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Ek(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Tk(t,e){return t.button===0&&(!e||e==="_self")&&!Ek(t)}const Sk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Ik="6";try{window.__reactRouterVersion=Ik}catch{}const Pk="startTransition",Hv=mP[Pk];function Ck(t){let{basename:e,children:n,future:r,window:s}=t,i=b.useRef();i.current==null&&(i.current=CA({window:s,v5Compat:!0}));let o=i.current,[a,u]=b.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=b.useCallback(d=>{c&&Hv?Hv(()=>u(d)):u(d)},[u,c]);return b.useLayoutEffect(()=>o.listen(h),[o,h]),b.useEffect(()=>yk(r),[r]),b.createElement(_k,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Ak=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kk=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ae=b.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:d}=e,m=xk(e,Sk),{basename:y}=b.useContext(ss),S,w=!1;if(typeof c=="string"&&kk.test(c)&&(S=c,Ak))try{let _=new URL(window.location.href),R=c.startsWith("//")?new URL(_.protocol+c):new URL(c),V=om(R.pathname,y);R.origin===_.origin&&V!=null?c=V+R.search+R.hash:w=!0}catch{}let P=tk(c,{relative:s}),E=Rk(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:s,viewTransition:d});function v(_){r&&r(_),_.defaultPrevented||E(_)}return b.createElement("a",Cf({},m,{href:S||P,onClick:w||i?r:v,ref:n,target:u}))});var Wv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Wv||(Wv={}));var qv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(qv||(qv={}));function Rk(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,u=cr(),c=ro(),h=bE(t,{relative:o});return b.useCallback(d=>{if(Tk(d,n)){d.preventDefault();let m=r!==void 0?r:Ku(c)===Ku(h);u(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,u,h,r,s,n,t,i,o,a])}var Kv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},bk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},LE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=i>>2,d=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;u||(y=64,o||(m=64)),r.push(n[h],n[d],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(OE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):bk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const d=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new Nk;const m=i<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),d!==64){const S=c<<6&192|d;r.push(S)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Nk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Dk=function(t){const e=OE(t);return LE.encodeByteArray(e,!0)},Gu=function(t){return Dk(t).replace(/\./g,"")},ME=function(t){try{return LE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ok=()=>Vk().__FIREBASE_DEFAULTS__,Lk=()=>{if(typeof process>"u"||typeof Kv>"u")return;const t=Kv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Mk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&ME(t[1]);return e&&JSON.parse(e)},Lc=()=>{try{return Ok()||Lk()||Mk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jE=t=>{var e,n;return(n=(e=Lc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},FE=t=>{const e=jE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},UE=()=>{var t;return(t=Lc())===null||t===void 0?void 0:t.config},BE=t=>{var e;return(e=Lc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gu(JSON.stringify(n)),Gu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Fk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xt())}function Uk(){var t;const e=(t=Lc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Bk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $k(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Hk(){const t=xt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Wk(){return!Uk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qk(){try{return typeof indexedDB=="object"}catch{return!1}}function Kk(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gk="FirebaseError";class On extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Gk,Object.setPrototypeOf(this,On.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qa.prototype.create)}}class qa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Qk(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new On(s,a,r)}}function Qk(t,e){return t.replace(Yk,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Yk=/\{\$([^}]+)}/g;function Xk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Fi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Gv(i)&&Gv(o)){if(!Fi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Gv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Bo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function zo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Jk(t,e){const n=new Zk(t,e);return n.subscribe.bind(n)}class Zk{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");eR(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=nd),s.error===void 0&&(s.error=nd),s.complete===void 0&&(s.complete=nd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function eR(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function nd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ge(t){return t&&t._delegate?t._delegate:t}class Gr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new jk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(rR(e))try{this.getOrInitializeService({instanceIdentifier:ys})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ys){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ys){return this.instances.has(e)}getOptions(e=ys){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:nR(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ys){return this.component?this.component.multipleInstances?e:ys:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function nR(t){return t===ys?void 0:t}function rR(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new tR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const iR={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},oR=ie.INFO,aR={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},lR=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=aR[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cm{constructor(e){this.name=e,this._logLevel=oR,this._logHandler=lR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?iR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const uR=(t,e)=>e.some(n=>t instanceof n);let Qv,Yv;function cR(){return Qv||(Qv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function hR(){return Yv||(Yv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const $E=new WeakMap,Af=new WeakMap,HE=new WeakMap,rd=new WeakMap,hm=new WeakMap;function dR(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Ur(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&$E.set(n,t)}).catch(()=>{}),hm.set(e,t),e}function fR(t){if(Af.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Af.set(t,e)}let kf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Af.get(t);if(e==="objectStoreNames")return t.objectStoreNames||HE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function pR(t){kf=t(kf)}function mR(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(sd(this),e,...n);return HE.set(r,e.sort?e.sort():[e]),Ur(r)}:hR().includes(t)?function(...e){return t.apply(sd(this),e),Ur($E.get(this))}:function(...e){return Ur(t.apply(sd(this),e))}}function gR(t){return typeof t=="function"?mR(t):(t instanceof IDBTransaction&&fR(t),uR(t,cR())?new Proxy(t,kf):t)}function Ur(t){if(t instanceof IDBRequest)return dR(t);if(rd.has(t))return rd.get(t);const e=gR(t);return e!==t&&(rd.set(t,e),hm.set(e,t)),e}const sd=t=>hm.get(t);function yR(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Ur(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Ur(o.result),u.oldVersion,u.newVersion,Ur(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const vR=["get","getKey","getAll","getAllKeys","count"],_R=["put","add","delete","clear"],id=new Map;function Xv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(id.get(e))return id.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=_R.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||vR.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return id.set(e,i),i}pR(t=>({...t,get:(e,n,r)=>Xv(e,n)||t.get(e,n,r),has:(e,n)=>!!Xv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(xR(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function xR(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Rf="@firebase/app",Jv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new cm("@firebase/app"),ER="@firebase/app-compat",TR="@firebase/analytics-compat",SR="@firebase/analytics",IR="@firebase/app-check-compat",PR="@firebase/app-check",CR="@firebase/auth",AR="@firebase/auth-compat",kR="@firebase/database",RR="@firebase/data-connect",bR="@firebase/database-compat",NR="@firebase/functions",DR="@firebase/functions-compat",VR="@firebase/installations",OR="@firebase/installations-compat",LR="@firebase/messaging",MR="@firebase/messaging-compat",jR="@firebase/performance",FR="@firebase/performance-compat",UR="@firebase/remote-config",BR="@firebase/remote-config-compat",zR="@firebase/storage",$R="@firebase/storage-compat",HR="@firebase/firestore",WR="@firebase/vertexai-preview",qR="@firebase/firestore-compat",KR="firebase",GR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bf="[DEFAULT]",QR={[Rf]:"fire-core",[ER]:"fire-core-compat",[SR]:"fire-analytics",[TR]:"fire-analytics-compat",[PR]:"fire-app-check",[IR]:"fire-app-check-compat",[CR]:"fire-auth",[AR]:"fire-auth-compat",[kR]:"fire-rtdb",[RR]:"fire-data-connect",[bR]:"fire-rtdb-compat",[NR]:"fire-fn",[DR]:"fire-fn-compat",[VR]:"fire-iid",[OR]:"fire-iid-compat",[LR]:"fire-fcm",[MR]:"fire-fcm-compat",[jR]:"fire-perf",[FR]:"fire-perf-compat",[UR]:"fire-rc",[BR]:"fire-rc-compat",[zR]:"fire-gcs",[$R]:"fire-gcs-compat",[HR]:"fire-fst",[qR]:"fire-fst-compat",[WR]:"fire-vertex","fire-js":"fire-js",[KR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qu=new Map,YR=new Map,Nf=new Map;function Zv(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ls(t){const e=t.name;if(Nf.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;Nf.set(e,t);for(const n of Qu.values())Zv(n,t);for(const n of YR.values())Zv(n,t);return!0}function Mc(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Br=new qa("app","Firebase",XR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Br.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs=GR;function WE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:bf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Br.create("bad-app-name",{appName:String(s)});if(n||(n=UE()),!n)throw Br.create("no-options");const i=Qu.get(s);if(i){if(Fi(n,i.options)&&Fi(r,i.config))return i;throw Br.create("duplicate-app",{appName:s})}const o=new sR(s);for(const u of Nf.values())o.addComponent(u);const a=new JR(n,r,o);return Qu.set(s,a),a}function dm(t=bf){const e=Qu.get(t);if(!e&&t===bf&&UE())return WE();if(!e)throw Br.create("no-app",{appName:t});return e}function Pn(t,e,n){var r;let s=(r=QR[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(a.join(" "));return}Ls(new Gr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZR="firebase-heartbeat-database",eb=1,ba="firebase-heartbeat-store";let od=null;function qE(){return od||(od=yR(ZR,eb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ba)}catch(n){console.warn(n)}}}}).catch(t=>{throw Br.create("idb-open",{originalErrorMessage:t.message})})),od}async function tb(t){try{const n=(await qE()).transaction(ba),r=await n.objectStore(ba).get(KE(t));return await n.done,r}catch(e){if(e instanceof On)rr.warn(e.message);else{const n=Br.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function e0(t,e){try{const r=(await qE()).transaction(ba,"readwrite");await r.objectStore(ba).put(e,KE(t)),await r.done}catch(n){if(n instanceof On)rr.warn(n.message);else{const r=Br.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(r.message)}}}function KE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nb=1024,rb=30*24*60*60*1e3;class sb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ob(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=t0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=rb}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=t0(),{heartbeatsToSend:r,unsentEntries:s}=ib(this._heartbeatsCache.heartbeats),i=Gu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return rr.warn(n),""}}}function t0(){return new Date().toISOString().substring(0,10)}function ib(t,e=nb){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),n0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),n0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ob{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qk()?Kk().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await tb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return e0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return e0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function n0(t){return Gu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ab(t){Ls(new Gr("platform-logger",e=>new wR(e),"PRIVATE")),Ls(new Gr("heartbeat",e=>new sb(e),"PRIVATE")),Pn(Rf,Jv,t),Pn(Rf,Jv,"esm2017"),Pn("fire-js","")}ab("");var lb="firebase",ub="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Pn(lb,ub,"app");function fm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function GE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const cb=GE,QE=new qa("auth","Firebase",GE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yu=new cm("@firebase/auth");function hb(t,...e){Yu.logLevel<=ie.WARN&&Yu.warn(`Auth (${qs}): ${t}`,...e)}function hu(t,...e){Yu.logLevel<=ie.ERROR&&Yu.error(`Auth (${qs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t,...e){throw mm(t,...e)}function vn(t,...e){return mm(t,...e)}function pm(t,e,n){const r=Object.assign(Object.assign({},cb()),{[e]:n});return new qa("auth","Firebase",r).create(e,{appName:t.name})}function Yn(t){return pm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function db(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&on(t,"argument-error"),pm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return QE.create(t,...e)}function J(t,e,...n){if(!t)throw mm(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw hu(e),new Error(e)}function sr(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Df(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function fb(){return r0()==="http:"||r0()==="https:"}function r0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pb(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(fb()||zk()||"connection"in navigator)?navigator.onLine:!0}function mb(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e,n){this.shortDelay=e,this.longDelay=n,sr(n>e,"Short delay should be less than long delay!"),this.isMobile=Fk()||$k()}get(){return pb()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gm(t,e){sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=new Ga(3e4,6e4);function is(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function hr(t,e,n,r,s={}){return XE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Ka(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return Bk()||(c.referrerPolicy="no-referrer"),YE.fetch()(JE(t,t.config.apiHost,n,a),c)})}async function XE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},gb),e);try{const s=new _b(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw $l(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw $l(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw $l(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw $l(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw pm(t,h,c);on(t,h)}}catch(s){if(s instanceof On)throw s;on(t,"network-request-failed",{message:String(s)})}}async function Qa(t,e,n,r,s={}){const i=await hr(t,e,n,r,s);return"mfaPendingCredential"in i&&on(t,"multi-factor-auth-required",{_serverResponse:i}),i}function JE(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?gm(t.config,s):`${t.config.apiScheme}://${s}`}function vb(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class _b{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(vn(this.auth,"network-request-failed")),yb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $l(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=vn(t,e,r);return s.customData._tokenResponse=n,s}function s0(t){return t!==void 0&&t.enterprise!==void 0}class wb{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return vb(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function xb(t,e){return hr(t,"GET","/v2/recaptchaConfig",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eb(t,e){return hr(t,"POST","/v1/accounts:delete",e)}async function ZE(t,e){return hr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function na(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Tb(t,e=!1){const n=Ge(t),r=await n.getIdToken(e),s=ym(r);J(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:na(ad(s.auth_time)),issuedAtTime:na(ad(s.iat)),expirationTime:na(ad(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function ad(t){return Number(t)*1e3}function ym(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return hu("JWT malformed, contained fewer than 3 sections"),null;try{const s=ME(n);return s?JSON.parse(s):(hu("Failed to decode base64 JWT payload"),null)}catch(s){return hu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function i0(t){const e=ym(t);return J(e,"internal-error"),J(typeof e.exp<"u","internal-error"),J(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ui(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof On&&Sb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Sb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=na(this.lastLoginAt),this.creationTime=na(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ui(t,ZE(n,{idToken:r}));J(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?eT(i.providerUserInfo):[],a=Cb(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=u?c:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Vf(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,d)}async function Pb(t){const e=Ge(t);await Xu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Cb(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function eT(t){return t.map(e=>{var{providerId:n}=e,r=fm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ab(t,e){const n=await XE(t,{},async()=>{const r=Ka({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=JE(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",YE.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function kb(t,e){return hr(t,"POST","/v2/accounts:revokeToken",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){J(e.idToken,"internal-error"),J(typeof e.idToken<"u","internal-error"),J(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):i0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){J(e.length!==0,"internal-error");const n=i0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(J(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Ab(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ai;return r&&(J(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(J(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(J(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ai,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){J(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class qn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=fm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ib(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Vf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ui(this,this.stsTokenManager.getToken(this.auth,e));return J(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Tb(this,e)}reload(){return Pb(this)}_assign(e){this!==e&&(J(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new qn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){J(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Xu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(Yn(this.auth));const e=await this.getIdToken();return await Ui(this,Eb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,c,h;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,S=(o=n.photoURL)!==null&&o!==void 0?o:void 0,w=(a=n.tenantId)!==null&&a!==void 0?a:void 0,P=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,E=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:_,emailVerified:R,isAnonymous:V,providerData:M,stsTokenManager:C}=n;J(_&&C,e,"internal-error");const x=Ai.fromJSON(this.name,C);J(typeof _=="string",e,"internal-error"),gr(d,e.name),gr(m,e.name),J(typeof R=="boolean",e,"internal-error"),J(typeof V=="boolean",e,"internal-error"),gr(y,e.name),gr(S,e.name),gr(w,e.name),gr(P,e.name),gr(E,e.name),gr(v,e.name);const I=new qn({uid:_,auth:e,email:m,emailVerified:R,displayName:d,isAnonymous:V,photoURL:S,phoneNumber:y,tenantId:w,stsTokenManager:x,createdAt:E,lastLoginAt:v});return M&&Array.isArray(M)&&(I.providerData=M.map(A=>Object.assign({},A))),P&&(I._redirectEventId=P),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ai;s.updateFromServerResponse(n);const i=new qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Xu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];J(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?eT(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Ai;a.updateFromIdToken(r);const u=new qn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Vf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0=new Map;function Kn(t){sr(t instanceof Function,"Expected a class definition");let e=o0.get(t);return e?(sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,o0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}tT.type="NONE";const a0=tT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(t,e,n){return`firebase:${t}:${e}:${n}`}class ki{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=du(this.userKey,s.apiKey,i),this.fullPersistenceKey=du("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?qn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ki(Kn(a0),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Kn(a0);const o=du(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const d=qn._fromJSON(e,h);c!==i&&(a=d),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ki(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new ki(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(nT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(aT(e))return"Blackberry";if(lT(e))return"Webos";if(rT(e))return"Safari";if((e.includes("chrome/")||sT(e))&&!e.includes("edge/"))return"Chrome";if(oT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function nT(t=xt()){return/firefox\//i.test(t)}function rT(t=xt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function sT(t=xt()){return/crios\//i.test(t)}function iT(t=xt()){return/iemobile/i.test(t)}function oT(t=xt()){return/android/i.test(t)}function aT(t=xt()){return/blackberry/i.test(t)}function lT(t=xt()){return/webos/i.test(t)}function vm(t=xt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Rb(t=xt()){var e;return vm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function bb(){return Hk()&&document.documentMode===10}function uT(t=xt()){return vm(t)||oT(t)||lT(t)||aT(t)||/windows phone/i.test(t)||iT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cT(t,e=[]){let n;switch(t){case"Browser":n=l0(xt());break;case"Worker":n=`${l0(xt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${qs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nb{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Db(t,e={}){return hr(t,"GET","/v2/passwordPolicy",is(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=6;class Ob{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Vb,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new u0(this),this.idTokenSubscription=new u0(this),this.beforeStateQueue=new Nb(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=QE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Kn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ki.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await ZE(this,{idToken:e}),r=await qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return J(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Xu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=mb()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(Yn(this));const n=e?Ge(e):null;return n&&J(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&J(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(Yn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(Yn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Db(this),n=new Ob(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new qa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await kb(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Kn(e)||this._popupRedirectResolver;J(n,this,"argument-error"),this.redirectPersistenceManager=await ki.create(this,[Kn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(J(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return J(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=cT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&hb(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function os(t){return Ge(t)}class u0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Jk(n=>this.observer=n)}get next(){return J(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Mb(t){jc=t}function hT(t){return jc.loadJS(t)}function jb(){return jc.recaptchaEnterpriseScript}function Fb(){return jc.gapiScript}function Ub(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Bb="recaptcha-enterprise",zb="NO_RECAPTCHA";class $b{constructor(e){this.type=Bb,this.auth=os(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{xb(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new wb(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;s0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(zb)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&s0(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=jb();u.length!==0&&(u+=a),hT(u).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function c0(t,e,n,r=!1){const s=new $b(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Of(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await c0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await c0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hb(t,e){const n=Mc(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Fi(i,e??{}))return s;on(s,"already-initialized")}return n.initialize({options:e})}function Wb(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Kn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function qb(t,e,n){const r=os(t);J(r._canInitEmulator,r,"emulator-config-failed"),J(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=dT(e),{host:o,port:a}=Kb(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),Gb()}function dT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Kb(t){const e=dT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:h0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:h0(o)}}}function h0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Gb(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}async function Qb(t,e){return hr(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yb(t,e){return Qa(t,"POST","/v1/accounts:signInWithPassword",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xb(t,e){return Qa(t,"POST","/v1/accounts:signInWithEmailLink",is(t,e))}async function Jb(t,e){return Qa(t,"POST","/v1/accounts:signInWithEmailLink",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends _m{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Na(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Na(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Of(e,n,"signInWithPassword",Yb);case"emailLink":return Xb(e,{email:this._email,oobCode:this._password});default:on(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Of(e,r,"signUpPassword",Qb);case"emailLink":return Jb(e,{idToken:n,email:this._email,oobCode:this._password});default:on(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(t,e){return Qa(t,"POST","/v1/accounts:signInWithIdp",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb="http://localhost";class Ms extends _m{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):on("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=fm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ms(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ri(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ri(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ri(e,n)}buildRequest(){const e={requestUri:Zb,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ka(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function t2(t){const e=Bo(zo(t)).link,n=e?Bo(zo(e)).deep_link_id:null,r=Bo(zo(t)).deep_link_id;return(r?Bo(zo(r)).link:null)||r||n||e||t}class wm{constructor(e){var n,r,s,i,o,a;const u=Bo(zo(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,d=e2((s=u.mode)!==null&&s!==void 0?s:null);J(c&&h&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=t2(e);try{return new wm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(){this.providerId=so.PROVIDER_ID}static credential(e,n){return Na._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=wm.parseLink(n);return J(r,"argument-error"),Na._fromEmailAndCode(e,r.code,r.tenantId)}}so.PROVIDER_ID="password";so.EMAIL_PASSWORD_SIGN_IN_METHOD="password";so.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends xm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Ya{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sr.credential(e.oauthAccessToken)}catch{return null}}}Sr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Sr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Ya{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ms._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.GOOGLE_SIGN_IN_METHOD="google.com";zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Ya{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.GITHUB_SIGN_IN_METHOD="github.com";Ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Ya{constructor(){super("twitter.com")}static credential(e,n){return Ms._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Pr.credential(n,r)}catch{return null}}}Pr.TWITTER_SIGN_IN_METHOD="twitter.com";Pr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n2(t,e){return Qa(t,"POST","/v1/accounts:signUp",is(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await qn._fromIdTokenResponse(e,r,s),o=d0(r);return new js({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=d0(r);return new js({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function d0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju extends On{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Ju.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Ju(e,n,r,s)}}function fT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Ju._fromErrorAndOperation(t,i,e,r):i})}async function r2(t,e,n=!1){const r=await Ui(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return js._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s2(t,e,n=!1){const{auth:r}=t;if(pn(r.app))return Promise.reject(Yn(r));const s="reauthenticate";try{const i=await Ui(t,fT(r,s,e,t),n);J(i.idToken,r,"internal-error");const o=ym(i.idToken);J(o,r,"internal-error");const{sub:a}=o;return J(t.uid===a,r,"user-mismatch"),js._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&on(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pT(t,e,n=!1){if(pn(t.app))return Promise.reject(Yn(t));const r="signIn",s=await fT(t,r,e),i=await js._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function i2(t,e){return pT(os(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mT(t){const e=os(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function o2(t,e,n){if(pn(t.app))return Promise.reject(Yn(t));const r=os(t),o=await Of(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",n2).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&mT(t),u}),a=await js._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function a2(t,e,n){return pn(t.app)?Promise.reject(Yn(t)):i2(Ge(t),so.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&mT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(t,e){return hr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gT(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ge(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ui(r,l2(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function u2(t,e,n,r){return Ge(t).onIdTokenChanged(e,n,r)}function c2(t,e,n){return Ge(t).beforeAuthStateChanged(e,n)}function h2(t,e,n,r){return Ge(t).onAuthStateChanged(e,n,r)}function d2(t){return Ge(t).signOut()}const Zu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Zu,"1"),this.storage.removeItem(Zu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=1e3,p2=10;class vT extends yT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=uT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);bb()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,p2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},f2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}vT.type="LOCAL";const m2=vT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T extends yT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}_T.type="SESSION";const wT=_T;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Fc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await g2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Fc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Em(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=Em("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(d){const m=d;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cn(){return window}function v2(t){Cn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xT(){return typeof Cn().WorkerGlobalScope<"u"&&typeof Cn().importScripts=="function"}async function _2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function w2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function x2(){return xT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="firebaseLocalStorageDb",E2=1,ec="firebaseLocalStorage",TT="fbase_key";class Xa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Uc(t,e){return t.transaction([ec],e?"readwrite":"readonly").objectStore(ec)}function T2(){const t=indexedDB.deleteDatabase(ET);return new Xa(t).toPromise()}function Lf(){const t=indexedDB.open(ET,E2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(ec,{keyPath:TT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(ec)?e(r):(r.close(),await T2(),e(await Lf()))})})}async function f0(t,e,n){const r=Uc(t,!0).put({[TT]:e,value:n});return new Xa(r).toPromise()}async function S2(t,e){const n=Uc(t,!1).get(e),r=await new Xa(n).toPromise();return r===void 0?null:r.value}function p0(t,e){const n=Uc(t,!0).delete(e);return new Xa(n).toPromise()}const I2=800,P2=3;class ST{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Lf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>P2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Fc._getInstance(x2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await _2(),!this.activeServiceWorker)return;this.sender=new y2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||w2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Lf();return await f0(e,Zu,"1"),await p0(e,Zu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>f0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>S2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>p0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Uc(s,!1).getAll();return new Xa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),I2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ST.type="LOCAL";const C2=ST;new Ga(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(t,e){return e?Kn(e):(J(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tm extends _m{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ri(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ri(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ri(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function A2(t){return pT(t.auth,new Tm(t),t.bypassAuthState)}function k2(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),s2(n,new Tm(t),t.bypassAuthState)}async function R2(t){const{auth:e,user:n}=t;return J(n,e,"internal-error"),r2(n,new Tm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return A2;case"linkViaPopup":case"linkViaRedirect":return R2;case"reauthViaPopup":case"reauthViaRedirect":return k2;default:on(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2=new Ga(2e3,1e4);async function N2(t,e,n){if(pn(t.app))return Promise.reject(vn(t,"operation-not-supported-in-this-environment"));const r=os(t);db(t,e,xm);const s=IT(r,n);return new Ss(r,"signInViaPopup",e,s).executeNotNull()}class Ss extends PT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ss.currentPopupAction&&Ss.currentPopupAction.cancel(),Ss.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return J(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=Em();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(vn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(vn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ss.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(vn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,b2.get())};e()}}Ss.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="pendingRedirect",fu=new Map;class V2 extends PT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=fu.get(this.auth._key());if(!e){try{const r=await O2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}fu.set(this.auth._key(),e)}return this.bypassAuthState||fu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function O2(t,e){const n=j2(e),r=M2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function L2(t,e){fu.set(t._key(),e)}function M2(t){return Kn(t._redirectPersistence)}function j2(t){return du(D2,t.config.apiKey,t.name)}async function F2(t,e,n=!1){if(pn(t.app))return Promise.reject(Yn(t));const r=os(t),s=IT(r,e),o=await new V2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=10*60*1e3;class B2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!z2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!CT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(vn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=U2&&this.cachedEventUids.clear(),this.cachedEventUids.has(m0(e))}saveEventToCache(e){this.cachedEventUids.add(m0(e)),this.lastProcessedEventTime=Date.now()}}function m0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function CT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function z2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return CT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $2(t,e={}){return hr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,W2=/^https?/;async function q2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $2(t);for(const n of e)try{if(K2(n))return}catch{}on(t,"unauthorized-domain")}function K2(t){const e=Df(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!W2.test(n))return!1;if(H2.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G2=new Ga(3e4,6e4);function g0(){const t=Cn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Q2(t){return new Promise((e,n)=>{var r,s,i;function o(){g0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{g0(),n(vn(t,"network-request-failed"))},timeout:G2.get()})}if(!((s=(r=Cn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Cn().gapi)===null||i===void 0)&&i.load)o();else{const a=Ub("iframefcb");return Cn()[a]=()=>{gapi.load?o():n(vn(t,"network-request-failed"))},hT(`${Fb()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw pu=null,e})}let pu=null;function Y2(t){return pu=pu||Q2(t),pu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=new Ga(5e3,15e3),J2="__/auth/iframe",Z2="emulator/auth/iframe",eN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},tN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function nN(t){const e=t.config;J(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?gm(e,Z2):`https://${t.config.authDomain}/${J2}`,r={apiKey:e.apiKey,appName:t.name,v:qs},s=tN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ka(r).slice(1)}`}async function rN(t){const e=await Y2(t),n=Cn().gapi;return J(n,t,"internal-error"),e.open({where:document.body,url:nN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=vn(t,"network-request-failed"),a=Cn().setTimeout(()=>{i(o)},X2.get());function u(){Cn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iN=500,oN=600,aN="_blank",lN="http://localhost";class y0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uN(t,e,n,r=iN,s=oN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},sN),{width:r.toString(),height:s.toString(),top:i,left:o}),c=xt().toLowerCase();n&&(a=sT(c)?aN:n),nT(c)&&(e=e||lN,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[y,S])=>`${m}${y}=${S},`,"");if(Rb(c)&&a!=="_self")return cN(e||"",a),new y0(null);const d=window.open(e||"",a,h);J(d,t,"popup-blocked");try{d.focus()}catch{}return new y0(d)}function cN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="__/auth/handler",dN="emulator/auth/handler",fN=encodeURIComponent("fac");async function v0(t,e,n,r,s,i){J(t.config.authDomain,t,"auth-domain-config-required"),J(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:qs,eventId:s};if(e instanceof xm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Xk(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,d]of Object.entries({}))o[h]=d}if(e instanceof Ya){const h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${fN}=${encodeURIComponent(u)}`:"";return`${pN(t)}?${Ka(a).slice(1)}${c}`}function pN({config:t}){return t.emulator?gm(t,dN):`https://${t.authDomain}/${hN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ld="webStorageSupport";class mN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=wT,this._completeRedirectFn=F2,this._overrideRedirectResult=L2}async _openPopup(e,n,r,s){var i;sr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await v0(e,n,r,Df(),s);return uN(e,o,Em())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await v0(e,n,r,Df(),s);return v2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(sr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await rN(e),r=new B2(e);return n.register("authEvent",s=>(J(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ld,{type:ld},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[ld];o!==void 0&&n(!!o),on(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=q2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return uT()||rT()||vm()}}const gN=mN;var _0="@firebase/auth",w0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){J(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _N(t){Ls(new Gr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;J(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:cT(t)},c=new Lb(r,s,i,u);return Wb(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ls(new Gr("auth-internal",e=>{const n=os(e.getProvider("auth").getImmediate());return(r=>new yN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Pn(_0,w0,vN(t)),Pn(_0,w0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN=5*60,xN=BE("authIdTokenMaxAge")||wN;let x0=null;const EN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>xN)return;const s=n==null?void 0:n.token;x0!==s&&(x0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function TN(t=dm()){const e=Mc(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Hb(t,{popupRedirectResolver:gN,persistence:[C2,m2,wT]}),r=BE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=EN(i.toString());c2(n,o,()=>o(n.currentUser)),u2(n,a=>o(a))}}const s=jE("auth");return s&&qb(n,`http://${s}`),n}function SN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Mb({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=vn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",SN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_N("Browser");var E0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ks,AT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,x){function I(){}I.prototype=x.prototype,C.D=x.prototype,C.prototype=new I,C.prototype.constructor=C,C.C=function(A,N,D){for(var k=Array(arguments.length-2),he=2;he<arguments.length;he++)k[he-2]=arguments[he];return x.prototype[N].apply(A,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,x,I){I||(I=0);var A=Array(16);if(typeof x=="string")for(var N=0;16>N;++N)A[N]=x.charCodeAt(I++)|x.charCodeAt(I++)<<8|x.charCodeAt(I++)<<16|x.charCodeAt(I++)<<24;else for(N=0;16>N;++N)A[N]=x[I++]|x[I++]<<8|x[I++]<<16|x[I++]<<24;x=C.g[0],I=C.g[1],N=C.g[2];var D=C.g[3],k=x+(D^I&(N^D))+A[0]+3614090360&4294967295;x=I+(k<<7&4294967295|k>>>25),k=D+(N^x&(I^N))+A[1]+3905402710&4294967295,D=x+(k<<12&4294967295|k>>>20),k=N+(I^D&(x^I))+A[2]+606105819&4294967295,N=D+(k<<17&4294967295|k>>>15),k=I+(x^N&(D^x))+A[3]+3250441966&4294967295,I=N+(k<<22&4294967295|k>>>10),k=x+(D^I&(N^D))+A[4]+4118548399&4294967295,x=I+(k<<7&4294967295|k>>>25),k=D+(N^x&(I^N))+A[5]+1200080426&4294967295,D=x+(k<<12&4294967295|k>>>20),k=N+(I^D&(x^I))+A[6]+2821735955&4294967295,N=D+(k<<17&4294967295|k>>>15),k=I+(x^N&(D^x))+A[7]+4249261313&4294967295,I=N+(k<<22&4294967295|k>>>10),k=x+(D^I&(N^D))+A[8]+1770035416&4294967295,x=I+(k<<7&4294967295|k>>>25),k=D+(N^x&(I^N))+A[9]+2336552879&4294967295,D=x+(k<<12&4294967295|k>>>20),k=N+(I^D&(x^I))+A[10]+4294925233&4294967295,N=D+(k<<17&4294967295|k>>>15),k=I+(x^N&(D^x))+A[11]+2304563134&4294967295,I=N+(k<<22&4294967295|k>>>10),k=x+(D^I&(N^D))+A[12]+1804603682&4294967295,x=I+(k<<7&4294967295|k>>>25),k=D+(N^x&(I^N))+A[13]+4254626195&4294967295,D=x+(k<<12&4294967295|k>>>20),k=N+(I^D&(x^I))+A[14]+2792965006&4294967295,N=D+(k<<17&4294967295|k>>>15),k=I+(x^N&(D^x))+A[15]+1236535329&4294967295,I=N+(k<<22&4294967295|k>>>10),k=x+(N^D&(I^N))+A[1]+4129170786&4294967295,x=I+(k<<5&4294967295|k>>>27),k=D+(I^N&(x^I))+A[6]+3225465664&4294967295,D=x+(k<<9&4294967295|k>>>23),k=N+(x^I&(D^x))+A[11]+643717713&4294967295,N=D+(k<<14&4294967295|k>>>18),k=I+(D^x&(N^D))+A[0]+3921069994&4294967295,I=N+(k<<20&4294967295|k>>>12),k=x+(N^D&(I^N))+A[5]+3593408605&4294967295,x=I+(k<<5&4294967295|k>>>27),k=D+(I^N&(x^I))+A[10]+38016083&4294967295,D=x+(k<<9&4294967295|k>>>23),k=N+(x^I&(D^x))+A[15]+3634488961&4294967295,N=D+(k<<14&4294967295|k>>>18),k=I+(D^x&(N^D))+A[4]+3889429448&4294967295,I=N+(k<<20&4294967295|k>>>12),k=x+(N^D&(I^N))+A[9]+568446438&4294967295,x=I+(k<<5&4294967295|k>>>27),k=D+(I^N&(x^I))+A[14]+3275163606&4294967295,D=x+(k<<9&4294967295|k>>>23),k=N+(x^I&(D^x))+A[3]+4107603335&4294967295,N=D+(k<<14&4294967295|k>>>18),k=I+(D^x&(N^D))+A[8]+1163531501&4294967295,I=N+(k<<20&4294967295|k>>>12),k=x+(N^D&(I^N))+A[13]+2850285829&4294967295,x=I+(k<<5&4294967295|k>>>27),k=D+(I^N&(x^I))+A[2]+4243563512&4294967295,D=x+(k<<9&4294967295|k>>>23),k=N+(x^I&(D^x))+A[7]+1735328473&4294967295,N=D+(k<<14&4294967295|k>>>18),k=I+(D^x&(N^D))+A[12]+2368359562&4294967295,I=N+(k<<20&4294967295|k>>>12),k=x+(I^N^D)+A[5]+4294588738&4294967295,x=I+(k<<4&4294967295|k>>>28),k=D+(x^I^N)+A[8]+2272392833&4294967295,D=x+(k<<11&4294967295|k>>>21),k=N+(D^x^I)+A[11]+1839030562&4294967295,N=D+(k<<16&4294967295|k>>>16),k=I+(N^D^x)+A[14]+4259657740&4294967295,I=N+(k<<23&4294967295|k>>>9),k=x+(I^N^D)+A[1]+2763975236&4294967295,x=I+(k<<4&4294967295|k>>>28),k=D+(x^I^N)+A[4]+1272893353&4294967295,D=x+(k<<11&4294967295|k>>>21),k=N+(D^x^I)+A[7]+4139469664&4294967295,N=D+(k<<16&4294967295|k>>>16),k=I+(N^D^x)+A[10]+3200236656&4294967295,I=N+(k<<23&4294967295|k>>>9),k=x+(I^N^D)+A[13]+681279174&4294967295,x=I+(k<<4&4294967295|k>>>28),k=D+(x^I^N)+A[0]+3936430074&4294967295,D=x+(k<<11&4294967295|k>>>21),k=N+(D^x^I)+A[3]+3572445317&4294967295,N=D+(k<<16&4294967295|k>>>16),k=I+(N^D^x)+A[6]+76029189&4294967295,I=N+(k<<23&4294967295|k>>>9),k=x+(I^N^D)+A[9]+3654602809&4294967295,x=I+(k<<4&4294967295|k>>>28),k=D+(x^I^N)+A[12]+3873151461&4294967295,D=x+(k<<11&4294967295|k>>>21),k=N+(D^x^I)+A[15]+530742520&4294967295,N=D+(k<<16&4294967295|k>>>16),k=I+(N^D^x)+A[2]+3299628645&4294967295,I=N+(k<<23&4294967295|k>>>9),k=x+(N^(I|~D))+A[0]+4096336452&4294967295,x=I+(k<<6&4294967295|k>>>26),k=D+(I^(x|~N))+A[7]+1126891415&4294967295,D=x+(k<<10&4294967295|k>>>22),k=N+(x^(D|~I))+A[14]+2878612391&4294967295,N=D+(k<<15&4294967295|k>>>17),k=I+(D^(N|~x))+A[5]+4237533241&4294967295,I=N+(k<<21&4294967295|k>>>11),k=x+(N^(I|~D))+A[12]+1700485571&4294967295,x=I+(k<<6&4294967295|k>>>26),k=D+(I^(x|~N))+A[3]+2399980690&4294967295,D=x+(k<<10&4294967295|k>>>22),k=N+(x^(D|~I))+A[10]+4293915773&4294967295,N=D+(k<<15&4294967295|k>>>17),k=I+(D^(N|~x))+A[1]+2240044497&4294967295,I=N+(k<<21&4294967295|k>>>11),k=x+(N^(I|~D))+A[8]+1873313359&4294967295,x=I+(k<<6&4294967295|k>>>26),k=D+(I^(x|~N))+A[15]+4264355552&4294967295,D=x+(k<<10&4294967295|k>>>22),k=N+(x^(D|~I))+A[6]+2734768916&4294967295,N=D+(k<<15&4294967295|k>>>17),k=I+(D^(N|~x))+A[13]+1309151649&4294967295,I=N+(k<<21&4294967295|k>>>11),k=x+(N^(I|~D))+A[4]+4149444226&4294967295,x=I+(k<<6&4294967295|k>>>26),k=D+(I^(x|~N))+A[11]+3174756917&4294967295,D=x+(k<<10&4294967295|k>>>22),k=N+(x^(D|~I))+A[2]+718787259&4294967295,N=D+(k<<15&4294967295|k>>>17),k=I+(D^(N|~x))+A[9]+3951481745&4294967295,C.g[0]=C.g[0]+x&4294967295,C.g[1]=C.g[1]+(N+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+N&4294967295,C.g[3]=C.g[3]+D&4294967295}r.prototype.u=function(C,x){x===void 0&&(x=C.length);for(var I=x-this.blockSize,A=this.B,N=this.h,D=0;D<x;){if(N==0)for(;D<=I;)s(this,C,D),D+=this.blockSize;if(typeof C=="string"){for(;D<x;)if(A[N++]=C.charCodeAt(D++),N==this.blockSize){s(this,A),N=0;break}}else for(;D<x;)if(A[N++]=C[D++],N==this.blockSize){s(this,A),N=0;break}}this.h=N,this.o+=x},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var x=1;x<C.length-8;++x)C[x]=0;var I=8*this.o;for(x=C.length-8;x<C.length;++x)C[x]=I&255,I/=256;for(this.u(C),C=Array(16),x=I=0;4>x;++x)for(var A=0;32>A;A+=8)C[I++]=this.g[x]>>>A&255;return C};function i(C,x){var I=a;return Object.prototype.hasOwnProperty.call(I,C)?I[C]:I[C]=x(C)}function o(C,x){this.h=x;for(var I=[],A=!0,N=C.length-1;0<=N;N--){var D=C[N]|0;A&&D==x||(I[N]=D,A=!1)}this.g=I}var a={};function u(C){return-128<=C&&128>C?i(C,function(x){return new o([x|0],0>x?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return d;if(0>C)return P(c(-C));for(var x=[],I=1,A=0;C>=I;A++)x[A]=C/I|0,I*=4294967296;return new o(x,0)}function h(C,x){if(C.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(C.charAt(0)=="-")return P(h(C.substring(1),x));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(x,8)),A=d,N=0;N<C.length;N+=8){var D=Math.min(8,C.length-N),k=parseInt(C.substring(N,N+D),x);8>D?(D=c(Math.pow(x,D)),A=A.j(D).add(c(k))):(A=A.j(I),A=A.add(c(k)))}return A}var d=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(w(this))return-P(this).m();for(var C=0,x=1,I=0;I<this.g.length;I++){var A=this.i(I);C+=(0<=A?A:4294967296+A)*x,x*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(S(this))return"0";if(w(this))return"-"+P(this).toString(C);for(var x=c(Math.pow(C,6)),I=this,A="";;){var N=R(I,x).g;I=E(I,N.j(x));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(C);if(I=N,S(I))return D+A;for(;6>D.length;)D="0"+D;A=D+A}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function S(C){if(C.h!=0)return!1;for(var x=0;x<C.g.length;x++)if(C.g[x]!=0)return!1;return!0}function w(C){return C.h==-1}t.l=function(C){return C=E(this,C),w(C)?-1:S(C)?0:1};function P(C){for(var x=C.g.length,I=[],A=0;A<x;A++)I[A]=~C.g[A];return new o(I,~C.h).add(m)}t.abs=function(){return w(this)?P(this):this},t.add=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],A=0,N=0;N<=x;N++){var D=A+(this.i(N)&65535)+(C.i(N)&65535),k=(D>>>16)+(this.i(N)>>>16)+(C.i(N)>>>16);A=k>>>16,D&=65535,k&=65535,I[N]=k<<16|D}return new o(I,I[I.length-1]&-2147483648?-1:0)};function E(C,x){return C.add(P(x))}t.j=function(C){if(S(this)||S(C))return d;if(w(this))return w(C)?P(this).j(P(C)):P(P(this).j(C));if(w(C))return P(this.j(P(C)));if(0>this.l(y)&&0>C.l(y))return c(this.m()*C.m());for(var x=this.g.length+C.g.length,I=[],A=0;A<2*x;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var N=0;N<C.g.length;N++){var D=this.i(A)>>>16,k=this.i(A)&65535,he=C.i(N)>>>16,Qe=C.i(N)&65535;I[2*A+2*N]+=k*Qe,v(I,2*A+2*N),I[2*A+2*N+1]+=D*Qe,v(I,2*A+2*N+1),I[2*A+2*N+1]+=k*he,v(I,2*A+2*N+1),I[2*A+2*N+2]+=D*he,v(I,2*A+2*N+2)}for(A=0;A<x;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=x;A<2*x;A++)I[A]=0;return new o(I,0)};function v(C,x){for(;(C[x]&65535)!=C[x];)C[x+1]+=C[x]>>>16,C[x]&=65535,x++}function _(C,x){this.g=C,this.h=x}function R(C,x){if(S(x))throw Error("division by zero");if(S(C))return new _(d,d);if(w(C))return x=R(P(C),x),new _(P(x.g),P(x.h));if(w(x))return x=R(C,P(x)),new _(P(x.g),x.h);if(30<C.g.length){if(w(C)||w(x))throw Error("slowDivide_ only works with positive integers.");for(var I=m,A=x;0>=A.l(C);)I=V(I),A=V(A);var N=M(I,1),D=M(A,1);for(A=M(A,2),I=M(I,2);!S(A);){var k=D.add(A);0>=k.l(C)&&(N=N.add(I),D=k),A=M(A,1),I=M(I,1)}return x=E(C,N.j(x)),new _(N,x)}for(N=d;0<=C.l(x);){for(I=Math.max(1,Math.floor(C.m()/x.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),D=c(I),k=D.j(x);w(k)||0<k.l(C);)I-=A,D=c(I),k=D.j(x);S(D)&&(D=m),N=N.add(D),C=E(C,k)}return new _(N,C)}t.A=function(C){return R(this,C).h},t.and=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],A=0;A<x;A++)I[A]=this.i(A)&C.i(A);return new o(I,this.h&C.h)},t.or=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],A=0;A<x;A++)I[A]=this.i(A)|C.i(A);return new o(I,this.h|C.h)},t.xor=function(C){for(var x=Math.max(this.g.length,C.g.length),I=[],A=0;A<x;A++)I[A]=this.i(A)^C.i(A);return new o(I,this.h^C.h)};function V(C){for(var x=C.g.length+1,I=[],A=0;A<x;A++)I[A]=C.i(A)<<1|C.i(A-1)>>>31;return new o(I,C.h)}function M(C,x){var I=x>>5;x%=32;for(var A=C.g.length-I,N=[],D=0;D<A;D++)N[D]=0<x?C.i(D+I)>>>x|C.i(D+I+1)<<32-x:C.i(D+I);return new o(N,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,AT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,ks=o}).apply(typeof E0<"u"?E0:typeof self<"u"?self:typeof window<"u"?window:{});var Hl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var kT,$o,RT,mu,Mf,bT,NT,DT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,f,g){return l==Array.prototype||l==Object.prototype||(l[f]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Hl=="object"&&Hl];for(var f=0;f<l.length;++f){var g=l[f];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,f){if(f)e:{var g=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var O=l[T];if(!(O in g))break e;g=g[O]}l=l[l.length-1],T=g[l],f=f(T),f!=T&&f!=null&&e(g,l,{configurable:!0,writable:!0,value:f})}}function i(l,f){l instanceof String&&(l+="");var g=0,T=!1,O={next:function(){if(!T&&g<l.length){var L=g++;return{value:f(L,l[L]),done:!1}}return T=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(l){return l||function(){return i(this,function(f,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var f=typeof l;return f=f!="object"?f:l?Array.isArray(l)?"array":f:"null",f=="array"||f=="object"&&typeof l.length=="number"}function c(l){var f=typeof l;return f=="object"&&l!=null||f=="function"}function h(l,f,g){return l.call.apply(l.bind,arguments)}function d(l,f,g){if(!l)throw Error();if(2<arguments.length){var T=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,T),l.apply(f,O)}}return function(){return l.apply(f,arguments)}}function m(l,f,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,m.apply(null,arguments)}function y(l,f){var g=Array.prototype.slice.call(arguments,1);return function(){var T=g.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function S(l,f){function g(){}g.prototype=f.prototype,l.aa=f.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(T,O,L){for(var B=Array(arguments.length-2),ye=2;ye<arguments.length;ye++)B[ye-2]=arguments[ye];return f.prototype[O].apply(T,B)}}function w(l){const f=l.length;if(0<f){const g=Array(f);for(let T=0;T<f;T++)g[T]=l[T];return g}return[]}function P(l,f){for(let g=1;g<arguments.length;g++){const T=arguments[g];if(u(T)){const O=l.length||0,L=T.length||0;l.length=O+L;for(let B=0;B<L;B++)l[O+B]=T[B]}else l.push(T)}}class E{constructor(f,g){this.i=f,this.j=g,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function v(l){return/^[\s\xa0]*$/.test(l)}function _(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function R(l){return R[" "](l),l}R[" "]=function(){};var V=_().indexOf("Gecko")!=-1&&!(_().toLowerCase().indexOf("webkit")!=-1&&_().indexOf("Edge")==-1)&&!(_().indexOf("Trident")!=-1||_().indexOf("MSIE")!=-1)&&_().indexOf("Edge")==-1;function M(l,f,g){for(const T in l)f.call(g,l[T],T,l)}function C(l,f){for(const g in l)f.call(void 0,l[g],g,l)}function x(l){const f={};for(const g in l)f[g]=l[g];return f}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(l,f){let g,T;for(let O=1;O<arguments.length;O++){T=arguments[O];for(g in T)l[g]=T[g];for(let L=0;L<I.length;L++)g=I[L],Object.prototype.hasOwnProperty.call(T,g)&&(l[g]=T[g])}}function N(l){var f=1;l=l.split(":");const g=[];for(;0<f&&l.length;)g.push(l.shift()),f--;return l.length&&g.push(l.join(":")),g}function D(l){a.setTimeout(()=>{throw l},0)}function k(){var l=q;let f=null;return l.g&&(f=l.g,l.g=l.g.next,l.g||(l.h=null),f.next=null),f}class he{constructor(){this.h=this.g=null}add(f,g){const T=Qe.get();T.set(f,g),this.h?this.h.next=T:this.g=T,this.h=T}}var Qe=new E(()=>new ge,l=>l.reset());class ge{constructor(){this.next=this.g=this.h=null}set(f,g){this.h=f,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,z=!1,q=new he,X=()=>{const l=a.Promise.resolve(void 0);ve=()=>{l.then(Q)}};var Q=()=>{for(var l;l=k();){try{l.h.call(l.g)}catch(g){D(g)}var f=Qe;f.j(l),100>f.h&&(f.h++,l.next=f.g,f.g=l)}z=!1};function re(){this.s=this.s,this.C=this.C}re.prototype.s=!1,re.prototype.ma=function(){this.s||(this.s=!0,this.N())},re.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function pe(l,f){this.type=l,this.g=this.target=f,this.defaultPrevented=!1}pe.prototype.h=function(){this.defaultPrevented=!0};var Et=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,f=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,f),a.removeEventListener("test",g,f)}catch{}return l}();function ut(l,f){if(pe.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=f,f=l.relatedTarget){if(V){e:{try{R(f.nodeName);var O=!0;break e}catch{}O=!1}O||(f=null)}}else g=="mouseover"?f=l.fromElement:g=="mouseout"&&(f=l.toElement);this.relatedTarget=f,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:et[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&ut.aa.h.call(this)}}S(ut,pe);var et={2:"touch",3:"pen",4:"mouse"};ut.prototype.h=function(){ut.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Rt="closure_listenable_"+(1e6*Math.random()|0),co=0;function us(l,f,g,T,O){this.listener=l,this.proxy=null,this.src=f,this.type=g,this.capture=!!T,this.ha=O,this.key=++co,this.da=this.fa=!1}function an(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function bt(l){this.src=l,this.g={},this.h=0}bt.prototype.add=function(l,f,g,T,O){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var B=be(l,f,T,O);return-1<B?(f=l[B],g||(f.fa=!1)):(f=new us(f,this.src,L,!!T,O),f.fa=g,l.push(f)),f};function $(l,f){var g=f.type;if(g in l.g){var T=l.g[g],O=Array.prototype.indexOf.call(T,f,void 0),L;(L=0<=O)&&Array.prototype.splice.call(T,O,1),L&&(an(f),l.g[g].length==0&&(delete l.g[g],l.h--))}}function be(l,f,g,T){for(var O=0;O<l.length;++O){var L=l[O];if(!L.da&&L.listener==f&&L.capture==!!g&&L.ha==T)return O}return-1}var Ye="closure_lm_"+(1e6*Math.random()|0),$e={};function me(l,f,g,T,O){if(Array.isArray(f)){for(var L=0;L<f.length;L++)me(l,f[L],g,T,O);return null}return g=Dg(g),l&&l[Rt]?l.K(f,g,c(T)?!!T.capture:!1,O):ln(l,f,g,!1,T,O)}function ln(l,f,g,T,O,L){if(!f)throw Error("Invalid event type");var B=c(O)?!!O.capture:!!O,ye=hh(l);if(ye||(l[Ye]=ye=new bt(l)),g=ye.add(f,g,T,B,L),g.proxy)return g;if(T=SI(),g.proxy=T,T.src=l,T.listener=g,l.addEventListener)Et||(O=B),O===void 0&&(O=!1),l.addEventListener(f.toString(),T,O);else if(l.attachEvent)l.attachEvent(Ng(f.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return g}function SI(){function l(g){return f.call(l.src,l.listener,g)}const f=II;return l}function bg(l,f,g,T,O){if(Array.isArray(f))for(var L=0;L<f.length;L++)bg(l,f[L],g,T,O);else T=c(T)?!!T.capture:!!T,g=Dg(g),l&&l[Rt]?(l=l.i,f=String(f).toString(),f in l.g&&(L=l.g[f],g=be(L,g,T,O),-1<g&&(an(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete l.g[f],l.h--)))):l&&(l=hh(l))&&(f=l.g[f.toString()],l=-1,f&&(l=be(f,g,T,O)),(g=-1<l?f[l]:null)&&ch(g))}function ch(l){if(typeof l!="number"&&l&&!l.da){var f=l.src;if(f&&f[Rt])$(f.i,l);else{var g=l.type,T=l.proxy;f.removeEventListener?f.removeEventListener(g,T,l.capture):f.detachEvent?f.detachEvent(Ng(g),T):f.addListener&&f.removeListener&&f.removeListener(T),(g=hh(f))?($(g,l),g.h==0&&(g.src=null,f[Ye]=null)):an(l)}}}function Ng(l){return l in $e?$e[l]:$e[l]="on"+l}function II(l,f){if(l.da)l=!0;else{f=new ut(f,this);var g=l.listener,T=l.ha||l.src;l.fa&&ch(l),l=g.call(T,f)}return l}function hh(l){return l=l[Ye],l instanceof bt?l:null}var dh="__closure_events_fn_"+(1e9*Math.random()>>>0);function Dg(l){return typeof l=="function"?l:(l[dh]||(l[dh]=function(f){return l.handleEvent(f)}),l[dh])}function ct(){re.call(this),this.i=new bt(this),this.M=this,this.F=null}S(ct,re),ct.prototype[Rt]=!0,ct.prototype.removeEventListener=function(l,f,g,T){bg(this,l,f,g,T)};function Tt(l,f){var g,T=l.F;if(T)for(g=[];T;T=T.F)g.push(T);if(l=l.M,T=f.type||f,typeof f=="string")f=new pe(f,l);else if(f instanceof pe)f.target=f.target||l;else{var O=f;f=new pe(T,l),A(f,O)}if(O=!0,g)for(var L=g.length-1;0<=L;L--){var B=f.g=g[L];O=cl(B,T,!0,f)&&O}if(B=f.g=l,O=cl(B,T,!0,f)&&O,O=cl(B,T,!1,f)&&O,g)for(L=0;L<g.length;L++)B=f.g=g[L],O=cl(B,T,!1,f)&&O}ct.prototype.N=function(){if(ct.aa.N.call(this),this.i){var l=this.i,f;for(f in l.g){for(var g=l.g[f],T=0;T<g.length;T++)an(g[T]);delete l.g[f],l.h--}}this.F=null},ct.prototype.K=function(l,f,g,T){return this.i.add(String(l),f,!1,g,T)},ct.prototype.L=function(l,f,g,T){return this.i.add(String(l),f,!0,g,T)};function cl(l,f,g,T){if(f=l.i.g[String(f)],!f)return!0;f=f.concat();for(var O=!0,L=0;L<f.length;++L){var B=f[L];if(B&&!B.da&&B.capture==g){var ye=B.listener,tt=B.ha||B.src;B.fa&&$(l.i,B),O=ye.call(tt,T)!==!1&&O}}return O&&!T.defaultPrevented}function Vg(l,f,g){if(typeof l=="function")g&&(l=m(l,g));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(l,f||0)}function Og(l){l.g=Vg(()=>{l.g=null,l.i&&(l.i=!1,Og(l))},l.l);const f=l.h;l.h=null,l.m.apply(null,f)}class PI extends re{constructor(f,g){super(),this.m=f,this.l=g,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Og(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ho(l){re.call(this),this.h=l,this.g={}}S(ho,re);var Lg=[];function Mg(l){M(l.g,function(f,g){this.g.hasOwnProperty(g)&&ch(f)},l),l.g={}}ho.prototype.N=function(){ho.aa.N.call(this),Mg(this)},ho.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fh=a.JSON.stringify,CI=a.JSON.parse,AI=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function ph(){}ph.prototype.h=null;function jg(l){return l.h||(l.h=l.i())}function Fg(){}var fo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function mh(){pe.call(this,"d")}S(mh,pe);function gh(){pe.call(this,"c")}S(gh,pe);var cs={},Ug=null;function hl(){return Ug=Ug||new ct}cs.La="serverreachability";function Bg(l){pe.call(this,cs.La,l)}S(Bg,pe);function po(l){const f=hl();Tt(f,new Bg(f))}cs.STAT_EVENT="statevent";function zg(l,f){pe.call(this,cs.STAT_EVENT,l),this.stat=f}S(zg,pe);function St(l){const f=hl();Tt(f,new zg(f,l))}cs.Ma="timingevent";function $g(l,f){pe.call(this,cs.Ma,l),this.size=f}S($g,pe);function mo(l,f){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},f)}function go(){this.g=!0}go.prototype.xa=function(){this.g=!1};function kI(l,f,g,T,O,L){l.info(function(){if(l.g)if(L)for(var B="",ye=L.split("&"),tt=0;tt<ye.length;tt++){var ue=ye[tt].split("=");if(1<ue.length){var ht=ue[0];ue=ue[1];var dt=ht.split("_");B=2<=dt.length&&dt[1]=="type"?B+(ht+"="+ue+"&"):B+(ht+"=redacted&")}}else B=null;else B=L;return"XMLHTTP REQ ("+T+") [attempt "+O+"]: "+f+`
`+g+`
`+B})}function RI(l,f,g,T,O,L,B){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+O+"]: "+f+`
`+g+`
`+L+" "+B})}function Xs(l,f,g,T){l.info(function(){return"XMLHTTP TEXT ("+f+"): "+NI(l,g)+(T?" "+T:"")})}function bI(l,f){l.info(function(){return"TIMEOUT: "+f})}go.prototype.info=function(){};function NI(l,f){if(!l.g)return f;if(!f)return null;try{var g=JSON.parse(f);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var T=g[l];if(!(2>T.length)){var O=T[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var B=1;B<O.length;B++)O[B]=""}}}}return fh(g)}catch{return f}}var dl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Hg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},yh;function fl(){}S(fl,ph),fl.prototype.g=function(){return new XMLHttpRequest},fl.prototype.i=function(){return{}},yh=new fl;function dr(l,f,g,T){this.j=l,this.i=f,this.l=g,this.R=T||1,this.U=new ho(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Wg}function Wg(){this.i=null,this.g="",this.h=!1}var qg={},vh={};function _h(l,f,g){l.L=1,l.v=yl(jn(f)),l.m=g,l.P=!0,Kg(l,null)}function Kg(l,f){l.F=Date.now(),pl(l),l.A=jn(l.v);var g=l.A,T=l.R;Array.isArray(T)||(T=[String(T)]),ay(g.i,"t",T),l.C=0,g=l.j.J,l.h=new Wg,l.g=Iy(l.j,g?f:null,!l.m),0<l.O&&(l.M=new PI(m(l.Y,l,l.g),l.O)),f=l.U,g=l.g,T=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(Lg[0]=O.toString()),O=Lg);for(var L=0;L<O.length;L++){var B=me(g,O[L],T||f.handleEvent,!1,f.h||f);if(!B)break;f.g[B.key]=B}f=l.H?x(l.H):{},l.m?(l.u||(l.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,f)):(l.u="GET",l.g.ea(l.A,l.u,null,f)),po(),kI(l.i,l.u,l.A,l.l,l.R,l.m)}dr.prototype.ca=function(l){l=l.target;const f=this.M;f&&Fn(l)==3?f.j():this.Y(l)},dr.prototype.Y=function(l){try{if(l==this.g)e:{const dt=Fn(this.g);var f=this.g.Ba();const ei=this.g.Z();if(!(3>dt)&&(dt!=3||this.g&&(this.h.h||this.g.oa()||py(this.g)))){this.J||dt!=4||f==7||(f==8||0>=ei?po(3):po(2)),wh(this);var g=this.g.Z();this.X=g;t:if(Gg(this)){var T=py(this.g);l="";var O=T.length,L=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){hs(this),yo(this);var B="";break t}this.h.i=new a.TextDecoder}for(f=0;f<O;f++)this.h.h=!0,l+=this.h.i.decode(T[f],{stream:!(L&&f==O-1)});T.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=g==200,RI(this.i,this.u,this.A,this.l,this.R,dt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var ye,tt=this.g;if((ye=tt.g?tt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(ye)){var ue=ye;break t}}ue=null}if(g=ue)Xs(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,xh(this,g);else{this.o=!1,this.s=3,St(12),hs(this),yo(this);break e}}if(this.P){g=!0;let un;for(;!this.J&&this.C<B.length;)if(un=DI(this,B),un==vh){dt==4&&(this.s=4,St(14),g=!1),Xs(this.i,this.l,null,"[Incomplete Response]");break}else if(un==qg){this.s=4,St(15),Xs(this.i,this.l,B,"[Invalid Chunk]"),g=!1;break}else Xs(this.i,this.l,un,null),xh(this,un);if(Gg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),dt!=4||B.length!=0||this.h.h||(this.s=1,St(16),g=!1),this.o=this.o&&g,!g)Xs(this.i,this.l,B,"[Invalid Chunked Response]"),hs(this),yo(this);else if(0<B.length&&!this.W){this.W=!0;var ht=this.j;ht.g==this&&ht.ba&&!ht.M&&(ht.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Ch(ht),ht.M=!0,St(11))}}else Xs(this.i,this.l,B,null),xh(this,B);dt==4&&hs(this),this.o&&!this.J&&(dt==4?xy(this.j,this):(this.o=!1,pl(this)))}else YI(this.g),g==400&&0<B.indexOf("Unknown SID")?(this.s=3,St(12)):(this.s=0,St(13)),hs(this),yo(this)}}}catch{}finally{}};function Gg(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function DI(l,f){var g=l.C,T=f.indexOf(`
`,g);return T==-1?vh:(g=Number(f.substring(g,T)),isNaN(g)?qg:(T+=1,T+g>f.length?vh:(f=f.slice(T,T+g),l.C=T+g,f)))}dr.prototype.cancel=function(){this.J=!0,hs(this)};function pl(l){l.S=Date.now()+l.I,Qg(l,l.I)}function Qg(l,f){if(l.B!=null)throw Error("WatchDog timer not null");l.B=mo(m(l.ba,l),f)}function wh(l){l.B&&(a.clearTimeout(l.B),l.B=null)}dr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(bI(this.i,this.A),this.L!=2&&(po(),St(17)),hs(this),this.s=2,yo(this)):Qg(this,this.S-l)};function yo(l){l.j.G==0||l.J||xy(l.j,l)}function hs(l){wh(l);var f=l.M;f&&typeof f.ma=="function"&&f.ma(),l.M=null,Mg(l.U),l.g&&(f=l.g,l.g=null,f.abort(),f.ma())}function xh(l,f){try{var g=l.j;if(g.G!=0&&(g.g==l||Eh(g.h,l))){if(!l.K&&Eh(g.h,l)&&g.G==3){try{var T=g.Da.g.parse(f)}catch{T=null}if(Array.isArray(T)&&T.length==3){var O=T;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Tl(g),xl(g);else break e;Ph(g),St(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=mo(m(g.Za,g),6e3));if(1>=Jg(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else fs(g,11)}else if((l.K||g.g==l)&&Tl(g),!v(f))for(O=g.Da.g.parse(f),f=0;f<O.length;f++){let ue=O[f];if(g.T=ue[0],ue=ue[1],g.G==2)if(ue[0]=="c"){g.K=ue[1],g.ia=ue[2];const ht=ue[3];ht!=null&&(g.la=ht,g.j.info("VER="+g.la));const dt=ue[4];dt!=null&&(g.Aa=dt,g.j.info("SVER="+g.Aa));const ei=ue[5];ei!=null&&typeof ei=="number"&&0<ei&&(T=1.5*ei,g.L=T,g.j.info("backChannelRequestTimeoutMs_="+T)),T=g;const un=l.g;if(un){const Il=un.g?un.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Il){var L=T.h;L.g||Il.indexOf("spdy")==-1&&Il.indexOf("quic")==-1&&Il.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Th(L,L.h),L.h=null))}if(T.D){const Ah=un.g?un.g.getResponseHeader("X-HTTP-Session-Id"):null;Ah&&(T.ya=Ah,xe(T.I,T.D,Ah))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),T=g;var B=l;if(T.qa=Sy(T,T.J?T.ia:null,T.W),B.K){Zg(T.h,B);var ye=B,tt=T.L;tt&&(ye.I=tt),ye.B&&(wh(ye),pl(ye)),T.g=B}else _y(T);0<g.i.length&&El(g)}else ue[0]!="stop"&&ue[0]!="close"||fs(g,7);else g.G==3&&(ue[0]=="stop"||ue[0]=="close"?ue[0]=="stop"?fs(g,7):Ih(g):ue[0]!="noop"&&g.l&&g.l.ta(ue),g.v=0)}}po(4)}catch{}}var VI=class{constructor(l,f){this.g=l,this.map=f}};function Yg(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Xg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Jg(l){return l.h?1:l.g?l.g.size:0}function Eh(l,f){return l.h?l.h==f:l.g?l.g.has(f):!1}function Th(l,f){l.g?l.g.add(f):l.h=f}function Zg(l,f){l.h&&l.h==f?l.h=null:l.g&&l.g.has(f)&&l.g.delete(f)}Yg.prototype.cancel=function(){if(this.i=ey(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function ey(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let f=l.i;for(const g of l.g.values())f=f.concat(g.D);return f}return w(l.i)}function OI(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var f=[],g=l.length,T=0;T<g;T++)f.push(l[T]);return f}f=[],g=0;for(T in l)f[g++]=l[T];return f}function LI(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var f=[];l=l.length;for(var g=0;g<l;g++)f.push(g);return f}f=[],g=0;for(const T in l)f[g++]=T;return f}}}function ty(l,f){if(l.forEach&&typeof l.forEach=="function")l.forEach(f,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,f,void 0);else for(var g=LI(l),T=OI(l),O=T.length,L=0;L<O;L++)f.call(void 0,T[L],g&&g[L],l)}var ny=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MI(l,f){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var T=l[g].indexOf("="),O=null;if(0<=T){var L=l[g].substring(0,T);O=l[g].substring(T+1)}else L=l[g];f(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ds(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ds){this.h=l.h,ml(this,l.j),this.o=l.o,this.g=l.g,gl(this,l.s),this.l=l.l;var f=l.i,g=new wo;g.i=f.i,f.g&&(g.g=new Map(f.g),g.h=f.h),ry(this,g),this.m=l.m}else l&&(f=String(l).match(ny))?(this.h=!1,ml(this,f[1]||"",!0),this.o=vo(f[2]||""),this.g=vo(f[3]||"",!0),gl(this,f[4]),this.l=vo(f[5]||"",!0),ry(this,f[6]||"",!0),this.m=vo(f[7]||"")):(this.h=!1,this.i=new wo(null,this.h))}ds.prototype.toString=function(){var l=[],f=this.j;f&&l.push(_o(f,sy,!0),":");var g=this.g;return(g||f=="file")&&(l.push("//"),(f=this.o)&&l.push(_o(f,sy,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(_o(g,g.charAt(0)=="/"?UI:FI,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",_o(g,zI)),l.join("")};function jn(l){return new ds(l)}function ml(l,f,g){l.j=g?vo(f,!0):f,l.j&&(l.j=l.j.replace(/:$/,""))}function gl(l,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);l.s=f}else l.s=null}function ry(l,f,g){f instanceof wo?(l.i=f,$I(l.i,l.h)):(g||(f=_o(f,BI)),l.i=new wo(f,l.h))}function xe(l,f,g){l.i.set(f,g)}function yl(l){return xe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function vo(l,f){return l?f?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function _o(l,f,g){return typeof l=="string"?(l=encodeURI(l).replace(f,jI),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function jI(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var sy=/[#\/\?@]/g,FI=/[#\?:]/g,UI=/[#\?]/g,BI=/[#\?@]/g,zI=/#/g;function wo(l,f){this.h=this.g=null,this.i=l||null,this.j=!!f}function fr(l){l.g||(l.g=new Map,l.h=0,l.i&&MI(l.i,function(f,g){l.add(decodeURIComponent(f.replace(/\+/g," ")),g)}))}t=wo.prototype,t.add=function(l,f){fr(this),this.i=null,l=Js(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(f),this.h+=1,this};function iy(l,f){fr(l),f=Js(l,f),l.g.has(f)&&(l.i=null,l.h-=l.g.get(f).length,l.g.delete(f))}function oy(l,f){return fr(l),f=Js(l,f),l.g.has(f)}t.forEach=function(l,f){fr(this),this.g.forEach(function(g,T){g.forEach(function(O){l.call(f,O,T,this)},this)},this)},t.na=function(){fr(this);const l=Array.from(this.g.values()),f=Array.from(this.g.keys()),g=[];for(let T=0;T<f.length;T++){const O=l[T];for(let L=0;L<O.length;L++)g.push(f[T])}return g},t.V=function(l){fr(this);let f=[];if(typeof l=="string")oy(this,l)&&(f=f.concat(this.g.get(Js(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)f=f.concat(l[g])}return f},t.set=function(l,f){return fr(this),this.i=null,l=Js(this,l),oy(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[f]),this.h+=1,this},t.get=function(l,f){return l?(l=this.V(l),0<l.length?String(l[0]):f):f};function ay(l,f,g){iy(l,f),0<g.length&&(l.i=null,l.g.set(Js(l,f),w(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],f=Array.from(this.g.keys());for(var g=0;g<f.length;g++){var T=f[g];const L=encodeURIComponent(String(T)),B=this.V(T);for(T=0;T<B.length;T++){var O=L;B[T]!==""&&(O+="="+encodeURIComponent(String(B[T]))),l.push(O)}}return this.i=l.join("&")};function Js(l,f){return f=String(f),l.j&&(f=f.toLowerCase()),f}function $I(l,f){f&&!l.j&&(fr(l),l.i=null,l.g.forEach(function(g,T){var O=T.toLowerCase();T!=O&&(iy(this,T),ay(this,O,g))},l)),l.j=f}function HI(l,f){const g=new go;if(a.Image){const T=new Image;T.onload=y(pr,g,"TestLoadImage: loaded",!0,f,T),T.onerror=y(pr,g,"TestLoadImage: error",!1,f,T),T.onabort=y(pr,g,"TestLoadImage: abort",!1,f,T),T.ontimeout=y(pr,g,"TestLoadImage: timeout",!1,f,T),a.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else f(!1)}function WI(l,f){const g=new go,T=new AbortController,O=setTimeout(()=>{T.abort(),pr(g,"TestPingServer: timeout",!1,f)},1e4);fetch(l,{signal:T.signal}).then(L=>{clearTimeout(O),L.ok?pr(g,"TestPingServer: ok",!0,f):pr(g,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(O),pr(g,"TestPingServer: error",!1,f)})}function pr(l,f,g,T,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),T(g)}catch{}}function qI(){this.g=new AI}function KI(l,f,g){const T=g||"";try{ty(l,function(O,L){let B=O;c(O)&&(B=fh(O)),f.push(T+L+"="+encodeURIComponent(B))})}catch(O){throw f.push(T+"type="+encodeURIComponent("_badmap")),O}}function vl(l){this.l=l.Ub||null,this.j=l.eb||!1}S(vl,ph),vl.prototype.g=function(){return new _l(this.l,this.j)},vl.prototype.i=function(l){return function(){return l}}({});function _l(l,f){ct.call(this),this.D=l,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}S(_l,ct),t=_l.prototype,t.open=function(l,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=f,this.readyState=1,Eo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(f.body=l),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xo(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Eo(this)),this.g&&(this.readyState=3,Eo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ly(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function ly(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var f=l.value?l.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!l.done}))&&(this.response=this.responseText+=f)}l.done?xo(this):Eo(this),this.readyState==3&&ly(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,xo(this))},t.Qa=function(l){this.g&&(this.response=l,xo(this))},t.ga=function(){this.g&&xo(this)};function xo(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Eo(l)}t.setRequestHeader=function(l,f){this.u.append(l,f)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],f=this.h.entries();for(var g=f.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=f.next();return l.join(`\r
`)};function Eo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(_l.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function uy(l){let f="";return M(l,function(g,T){f+=T,f+=":",f+=g,f+=`\r
`}),f}function Sh(l,f,g){e:{for(T in g){var T=!1;break e}T=!0}T||(g=uy(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):xe(l,f,g))}function Ne(l){ct.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}S(Ne,ct);var GI=/^https?$/i,QI=["POST","PUT"];t=Ne.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,f,g,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);f=f?f.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():yh.g(),this.v=this.o?jg(this.o):jg(yh),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(l),!0),this.B=!1}catch(L){cy(this,L);return}if(l=g||"",g=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var O in T)g.set(O,T[O]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const L of T.keys())g.set(L,T.get(L));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),O=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(QI,f,void 0))||T||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,B]of g)this.g.setRequestHeader(L,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{fy(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){cy(this,L)}};function cy(l,f){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=f,l.m=5,hy(l),wl(l)}function hy(l){l.A||(l.A=!0,Tt(l,"complete"),Tt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Tt(this,"complete"),Tt(this,"abort"),wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wl(this,!0)),Ne.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?dy(this):this.bb())},t.bb=function(){dy(this)};function dy(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Fn(l)!=4||l.Z()!=2)){if(l.u&&Fn(l)==4)Vg(l.Ea,0,l);else if(Tt(l,"readystatechange"),Fn(l)==4){l.h=!1;try{const B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var g;if(!(g=f)){var T;if(T=B===0){var O=String(l.D).match(ny)[1]||null;!O&&a.self&&a.self.location&&(O=a.self.location.protocol.slice(0,-1)),T=!GI.test(O?O.toLowerCase():"")}g=T}if(g)Tt(l,"complete"),Tt(l,"success");else{l.m=6;try{var L=2<Fn(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",hy(l)}}finally{wl(l)}}}}function wl(l,f){if(l.g){fy(l);const g=l.g,T=l.v[0]?()=>{}:null;l.g=null,l.v=null,f||Tt(l,"ready");try{g.onreadystatechange=T}catch{}}}function fy(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Fn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var f=this.g.responseText;return l&&f.indexOf(l)==0&&(f=f.substring(l.length)),CI(f)}};function py(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function YI(l){const f={};l=(l.g&&2<=Fn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(v(l[T]))continue;var g=N(l[T]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=f[O]||[];f[O]=L,L.push(g)}C(f,function(T){return T.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function To(l,f,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||f}function my(l){this.Aa=0,this.i=[],this.j=new go,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=To("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=To("baseRetryDelayMs",5e3,l),this.cb=To("retryDelaySeedMs",1e4,l),this.Wa=To("forwardChannelMaxRetries",2,l),this.wa=To("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Yg(l&&l.concurrentRequestLimit),this.Da=new qI,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=my.prototype,t.la=8,t.G=1,t.connect=function(l,f,g,T){St(0),this.W=l,this.H=f||{},g&&T!==void 0&&(this.H.OSID=g,this.H.OAID=T),this.F=this.X,this.I=Sy(this,null,this.W),El(this)};function Ih(l){if(gy(l),l.G==3){var f=l.U++,g=jn(l.I);if(xe(g,"SID",l.K),xe(g,"RID",f),xe(g,"TYPE","terminate"),So(l,g),f=new dr(l,l.j,f),f.L=2,f.v=yl(jn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=f.v,g=!0),g||(f.g=Iy(f.j,null),f.g.ea(f.v)),f.F=Date.now(),pl(f)}Ty(l)}function xl(l){l.g&&(Ch(l),l.g.cancel(),l.g=null)}function gy(l){xl(l),l.u&&(a.clearTimeout(l.u),l.u=null),Tl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function El(l){if(!Xg(l.h)&&!l.s){l.s=!0;var f=l.Ga;ve||X(),z||(ve(),z=!0),q.add(f,l),l.B=0}}function XI(l,f){return Jg(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=f.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=mo(m(l.Ga,l,f),Ey(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new dr(this,this.j,l);let L=this.o;if(this.S&&(L?(L=x(L),A(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var f=0,g=0;g<this.i.length;g++){t:{var T=this.i[g];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(f+=T,4096<f){f=g;break e}if(f===4096||g===this.i.length-1){f=g+1;break e}}f=1e3}else f=1e3;f=vy(this,O,f),g=jn(this.I),xe(g,"RID",l),xe(g,"CVER",22),this.D&&xe(g,"X-HTTP-Session-Id",this.D),So(this,g),L&&(this.O?f="headers="+encodeURIComponent(String(uy(L)))+"&"+f:this.m&&Sh(g,this.m,L)),Th(this.h,O),this.Ua&&xe(g,"TYPE","init"),this.P?(xe(g,"$req",f),xe(g,"SID","null"),O.T=!0,_h(O,g,null)):_h(O,g,f),this.G=2}}else this.G==3&&(l?yy(this,l):this.i.length==0||Xg(this.h)||yy(this))};function yy(l,f){var g;f?g=f.l:g=l.U++;const T=jn(l.I);xe(T,"SID",l.K),xe(T,"RID",g),xe(T,"AID",l.T),So(l,T),l.m&&l.o&&Sh(T,l.m,l.o),g=new dr(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),f&&(l.i=f.D.concat(l.i)),f=vy(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Th(l.h,g),_h(g,T,f)}function So(l,f){l.H&&M(l.H,function(g,T){xe(f,T,g)}),l.l&&ty({},function(g,T){xe(f,T,g)})}function vy(l,f,g){g=Math.min(l.i.length,g);var T=l.l?m(l.l.Na,l.l,l):null;e:{var O=l.i;let L=-1;for(;;){const B=["count="+g];L==-1?0<g?(L=O[0].g,B.push("ofs="+L)):L=0:B.push("ofs="+L);let ye=!0;for(let tt=0;tt<g;tt++){let ue=O[tt].g;const ht=O[tt].map;if(ue-=L,0>ue)L=Math.max(0,O[tt].g-100),ye=!1;else try{KI(ht,B,"req"+ue+"_")}catch{T&&T(ht)}}if(ye){T=B.join("&");break e}}}return l=l.i.splice(0,g),f.D=l,T}function _y(l){if(!l.g&&!l.u){l.Y=1;var f=l.Fa;ve||X(),z||(ve(),z=!0),q.add(f,l),l.v=0}}function Ph(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=mo(m(l.Fa,l),Ey(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,wy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=mo(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,St(10),xl(this),wy(this))};function Ch(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function wy(l){l.g=new dr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var f=jn(l.qa);xe(f,"RID","rpc"),xe(f,"SID",l.K),xe(f,"AID",l.T),xe(f,"CI",l.F?"0":"1"),!l.F&&l.ja&&xe(f,"TO",l.ja),xe(f,"TYPE","xmlhttp"),So(l,f),l.m&&l.o&&Sh(f,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=yl(jn(f)),g.m=null,g.P=!0,Kg(g,l)}t.Za=function(){this.C!=null&&(this.C=null,xl(this),Ph(this),St(19))};function Tl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function xy(l,f){var g=null;if(l.g==f){Tl(l),Ch(l),l.g=null;var T=2}else if(Eh(l.h,f))g=f.D,Zg(l.h,f),T=1;else return;if(l.G!=0){if(f.o)if(T==1){g=f.m?f.m.length:0,f=Date.now()-f.F;var O=l.B;T=hl(),Tt(T,new $g(T,g)),El(l)}else _y(l);else if(O=f.s,O==3||O==0&&0<f.X||!(T==1&&XI(l,f)||T==2&&Ph(l)))switch(g&&0<g.length&&(f=l.h,f.i=f.i.concat(g)),O){case 1:fs(l,5);break;case 4:fs(l,10);break;case 3:fs(l,6);break;default:fs(l,2)}}}function Ey(l,f){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*f}function fs(l,f){if(l.j.info("Error code "+f),f==2){var g=m(l.fb,l),T=l.Xa;const O=!T;T=new ds(T||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ml(T,"https"),yl(T),O?HI(T.toString(),g):WI(T.toString(),g)}else St(2);l.G=0,l.l&&l.l.sa(f),Ty(l),gy(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),St(2)):(this.j.info("Failed to ping google.com"),St(1))};function Ty(l){if(l.G=0,l.ka=[],l.l){const f=ey(l.h);(f.length!=0||l.i.length!=0)&&(P(l.ka,f),P(l.ka,l.i),l.h.i.length=0,w(l.i),l.i.length=0),l.l.ra()}}function Sy(l,f,g){var T=g instanceof ds?jn(g):new ds(g);if(T.g!="")f&&(T.g=f+"."+T.g),gl(T,T.s);else{var O=a.location;T=O.protocol,f=f?f+"."+O.hostname:O.hostname,O=+O.port;var L=new ds(null);T&&ml(L,T),f&&(L.g=f),O&&gl(L,O),g&&(L.l=g),T=L}return g=l.D,f=l.ya,g&&f&&xe(T,g,f),xe(T,"VER",l.la),So(l,T),T}function Iy(l,f,g){if(f&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=l.Ca&&!l.pa?new Ne(new vl({eb:g})):new Ne(l.pa),f.Ha(l.J),f}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Py(){}t=Py.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Sl(){}Sl.prototype.g=function(l,f){return new Ut(l,f)};function Ut(l,f){ct.call(this),this.g=new my(f),this.l=l,this.h=f&&f.messageUrlParams||null,l=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(l?l["X-WebChannel-Content-Type"]=f.messageContentType:l={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(l?l["X-WebChannel-Client-Profile"]=f.va:l={"X-WebChannel-Client-Profile":f.va}),this.g.S=l,(l=f&&f.Sb)&&!v(l)&&(this.g.m=l),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!v(f)&&(this.g.D=f,l=this.h,l!==null&&f in l&&(l=this.h,f in l&&delete l[f])),this.j=new Zs(this)}S(Ut,ct),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){Ih(this.g)},Ut.prototype.o=function(l){var f=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=fh(l),l=g);f.i.push(new VI(f.Ya++,l)),f.G==3&&El(f)},Ut.prototype.N=function(){this.g.l=null,delete this.j,Ih(this.g),delete this.g,Ut.aa.N.call(this)};function Cy(l){mh.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var f=l.__sm__;if(f){e:{for(const g in f){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,f=f!==null&&l in f?f[l]:void 0),this.data=f}else this.data=l}S(Cy,mh);function Ay(){gh.call(this),this.status=1}S(Ay,gh);function Zs(l){this.g=l}S(Zs,Py),Zs.prototype.ua=function(){Tt(this.g,"a")},Zs.prototype.ta=function(l){Tt(this.g,new Cy(l))},Zs.prototype.sa=function(l){Tt(this.g,new Ay)},Zs.prototype.ra=function(){Tt(this.g,"b")},Sl.prototype.createWebChannel=Sl.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,DT=function(){return new Sl},NT=function(){return hl()},bT=cs,Mf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},dl.NO_ERROR=0,dl.TIMEOUT=8,dl.HTTP_ERROR=6,mu=dl,Hg.COMPLETE="complete",RT=Hg,Fg.EventType=fo,fo.OPEN="a",fo.CLOSE="b",fo.ERROR="c",fo.MESSAGE="d",ct.prototype.listen=ct.prototype.K,$o=Fg,Ne.prototype.listenOnce=Ne.prototype.L,Ne.prototype.getLastError=Ne.prototype.Ka,Ne.prototype.getLastErrorCode=Ne.prototype.Ba,Ne.prototype.getStatus=Ne.prototype.Z,Ne.prototype.getResponseJson=Ne.prototype.Oa,Ne.prototype.getResponseText=Ne.prototype.oa,Ne.prototype.send=Ne.prototype.ea,Ne.prototype.setWithCredentials=Ne.prototype.Ha,kT=Ne}).apply(typeof Hl<"u"?Hl:typeof self<"u"?self:typeof window<"u"?window:{});const T0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};yt.UNAUTHENTICATED=new yt(null),yt.GOOGLE_CREDENTIALS=new yt("google-credentials-uid"),yt.FIRST_PARTY=new yt("first-party-uid"),yt.MOCK_USER=new yt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let io="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new cm("@firebase/firestore");function Do(){return Fs.logLevel}function W(t,...e){if(Fs.logLevel<=ie.DEBUG){const n=e.map(Sm);Fs.debug(`Firestore (${io}): ${t}`,...n)}}function ir(t,...e){if(Fs.logLevel<=ie.ERROR){const n=e.map(Sm);Fs.error(`Firestore (${io}): ${t}`,...n)}}function Bi(t,...e){if(Fs.logLevel<=ie.WARN){const n=e.map(Sm);Fs.warn(`Firestore (${io}): ${t}`,...n)}}function Sm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${io}) INTERNAL ASSERTION FAILED: `+t;throw ir(e),new Error(e)}function fe(t,e){t||Z()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class K extends On{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class IN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(yt.UNAUTHENTICATED))}shutdown(){}}class PN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class CN{constructor(e){this.t=e,this.currentUser=yt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){fe(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new zr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new zr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(fe(typeof r.accessToken=="string"),new VT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new yt(e)}}class AN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=yt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class kN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new AN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(yt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class RN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class bN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){fe(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(fe(typeof n.token=="string"),this.R=n.token,new RN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=NN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function zi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new K(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new K(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ke.fromMillis(Date.now())}static fromDate(e){return Ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ke(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Ke(0,0))}static max(){return new ee(new Ke(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Da.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Da?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ie extends Da{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new K(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const DN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class st extends Da{construct(e,n,r){return new st(e,n,r)}static isValidIdentifier(e){return DN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),st.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new st(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new K(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new K(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new K(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new K(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new st(n)}static emptyPath(){return new st([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.path=e}static fromPath(e){return new G(Ie.fromString(e))}static fromName(e){return new G(Ie.fromString(e).popFirst(5))}static empty(){return new G(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new G(new Ie(e.slice()))}}function VN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new Ke(n+1,0):new Ke(n,r));return new Qr(s,G.empty(),e)}function ON(t){return new Qr(t.readTime,t.key,-1)}class Qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qr(ee.min(),G.empty(),-1)}static max(){return new Qr(ee.max(),G.empty(),-1)}}function LN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class jN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ja(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==MN)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new j((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof j?n:j.resolve(n)}catch(n){return j.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):j.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):j.reject(n)}static resolve(e){return new j((n,r)=>{n(e)})}static reject(e){return new j((n,r)=>{r(e)})}static waitFor(e){return new j((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=j.resolve(!1);for(const r of e)n=n.next(s=>s?j.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new j((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new j((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function FN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Za(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Im.oe=-1;function Bc(t){return t==null}function tc(t){return t===0&&1/t==-1/0}function UN(t){return typeof t=="number"&&Number.isInteger(t)&&!tc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function LT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{constructor(e,n){this.comparator=e,this.root=n||rt.EMPTY}insert(e,n){return new Re(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,rt.BLACK,null,null))}remove(e){return new Re(this.comparator,this.root.remove(e,this.comparator).copy(null,null,rt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wl(this.root,e,this.comparator,!0)}}class Wl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class rt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??rt.RED,this.left=s??rt.EMPTY,this.right=i??rt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new rt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return rt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return rt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,rt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,rt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}rt.EMPTY=null,rt.RED=!0,rt.BLACK=!1;rt.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,s,i){return this}insert(e,n,r){return new rt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.comparator=e,this.data=new Re(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new I0(this.data.getIterator())}getIteratorFrom(e){return new I0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ot)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ot(this.comparator);return n.data=e,n}}class I0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.fields=e,e.sort(st.comparator)}static empty(){return new Wt([])}unionWith(e){let n=new ot(st.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Wt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new MT("Invalid base64 string: "+i):i}}(e);return new lt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new lt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}lt.EMPTY_BYTE_STRING=new lt("");const BN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(fe(!!t),typeof t=="string"){let e=0;const n=BN.exec(t);if(fe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ve(t.seconds),nanos:Ve(t.nanos)}}function Ve(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Us(t){return typeof t=="string"?lt.fromBase64String(t):lt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pm(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Cm(t){const e=t.mapValue.fields.__previous_value__;return Pm(e)?Cm(e):e}function Va(t){const e=Yr(t.mapValue.fields.__local_write_time__.timestampValue);return new Ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n,r,s,i,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Oa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Oa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Oa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ql={mapValue:{}};function Bs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Pm(t)?4:HN(t)?9007199254740991:$N(t)?10:11:Z()}function Nn(t,e){if(t===e)return!0;const n=Bs(t);if(n!==Bs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Va(t).isEqual(Va(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Yr(s.timestampValue),a=Yr(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Us(s.bytesValue).isEqual(Us(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ve(s.geoPointValue.latitude)===Ve(i.geoPointValue.latitude)&&Ve(s.geoPointValue.longitude)===Ve(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ve(s.integerValue)===Ve(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ve(s.doubleValue),a=Ve(i.doubleValue);return o===a?tc(o)===tc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return zi(t.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(S0(o)!==S0(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Nn(o[u],a[u])))return!1;return!0}(t,e);default:return Z()}}function La(t,e){return(t.values||[]).find(n=>Nn(n,e))!==void 0}function $i(t,e){if(t===e)return 0;const n=Bs(t),r=Bs(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ve(i.integerValue||i.doubleValue),u=Ve(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return P0(t.timestampValue,e.timestampValue);case 4:return P0(Va(t),Va(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(i,o){const a=Us(i),u=Us(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=ce(a[c],u[c]);if(h!==0)return h}return ce(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=ce(Ve(i.latitude),Ve(o.latitude));return a!==0?a:ce(Ve(i.longitude),Ve(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return C0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,c,h;const d=i.fields||{},m=o.fields||{},y=(a=d.value)===null||a===void 0?void 0:a.arrayValue,S=(u=m.value)===null||u===void 0?void 0:u.arrayValue,w=ce(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=S==null?void 0:S.values)===null||h===void 0?void 0:h.length)||0);return w!==0?w:C0(y,S)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ql.mapValue&&o===ql.mapValue)return 0;if(i===ql.mapValue)return 1;if(o===ql.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let d=0;d<u.length&&d<h.length;++d){const m=ce(u[d],h[d]);if(m!==0)return m;const y=$i(a[u[d]],c[h[d]]);if(y!==0)return y}return ce(u.length,h.length)}(t.mapValue,e.mapValue);default:throw Z()}}function P0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Yr(t),r=Yr(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function C0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=$i(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function Hi(t){return jf(t)}function jf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Us(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return G.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=jf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${jf(n.fields[o])}`;return s+"}"}(t.mapValue):Z()}function Ff(t){return!!t&&"integerValue"in t}function Am(t){return!!t&&"arrayValue"in t}function A0(t){return!!t&&"nullValue"in t}function k0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gu(t){return!!t&&"mapValue"in t}function $N(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function ra(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ks(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ra(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ra(t.arrayValue.values[n]);return e}return Object.assign({},t)}function HN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.value=e}static empty(){return new Dt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!gu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ra(n)}setAll(e){let n=st.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=ra(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());gu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];gu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ks(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Dt(ra(this.value))}}function jT(t){const e=[];return Ks(t.fields,(n,r)=>{const s=new st([n]);if(gu(r)){const i=jT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Wt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new _t(e,0,ee.min(),ee.min(),ee.min(),Dt.empty(),0)}static newFoundDocument(e,n,r,s){return new _t(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new _t(e,2,n,ee.min(),ee.min(),Dt.empty(),0)}static newUnknownDocument(e,n){return new _t(e,3,n,ee.min(),ee.min(),Dt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e,n){this.position=e,this.inclusive=n}}function R0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=G.comparator(G.fromName(o.referenceValue),n.key):r=$i(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function b0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n="asc"){this.field=e,this.dir=n}}function WN(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FT=class{};class We extends FT{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new KN(e,n,r):n==="array-contains"?new YN(e,r):n==="in"?new XN(e,r):n==="not-in"?new JN(e,r):n==="array-contains-any"?new ZN(e,r):new We(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new GN(e,r):new QN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($i(n,this.value)):n!==null&&Bs(this.value)===Bs(n)&&this.matchesComparison($i(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Dn extends FT{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Dn(e,n)}matches(e){return UT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function UT(t){return t.op==="and"}function BT(t){return qN(t)&&UT(t)}function qN(t){for(const e of t.filters)if(e instanceof Dn)return!1;return!0}function Uf(t){if(t instanceof We)return t.field.canonicalString()+t.op.toString()+Hi(t.value);if(BT(t))return t.filters.map(e=>Uf(e)).join(",");{const e=t.filters.map(n=>Uf(n)).join(",");return`${t.op}(${e})`}}function zT(t,e){return t instanceof We?function(r,s){return s instanceof We&&r.op===s.op&&r.field.isEqual(s.field)&&Nn(r.value,s.value)}(t,e):t instanceof Dn?function(r,s){return s instanceof Dn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&zT(o,s.filters[a]),!0):!1}(t,e):void Z()}function $T(t){return t instanceof We?function(n){return`${n.field.canonicalString()} ${n.op} ${Hi(n.value)}`}(t):t instanceof Dn?function(n){return n.op.toString()+" {"+n.getFilters().map($T).join(" ,")+"}"}(t):"Filter"}class KN extends We{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){const n=G.comparator(e.key,this.key);return this.matchesComparison(n)}}class GN extends We{constructor(e,n){super(e,"in",n),this.keys=HT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class QN extends We{constructor(e,n){super(e,"not-in",n),this.keys=HT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function HT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>G.fromName(r.referenceValue))}class YN extends We{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Am(n)&&La(n.arrayValue,this.value)}}class XN extends We{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&La(this.value.arrayValue,n)}}class JN extends We{constructor(e,n){super(e,"not-in",n)}matches(e){if(La(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!La(this.value.arrayValue,n)}}class ZN extends We{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Am(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>La(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function N0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new eD(t,e,n,r,s,i,o)}function km(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Uf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Bc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Hi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Hi(r)).join(",")),e.ue=n}return e.ue}function Rm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!WN(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!zT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!b0(t.startAt,e.startAt)&&b0(t.endAt,e.endAt)}function Bf(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function tD(t,e,n,r,s,i,o,a){return new zc(t,e,n,r,s,i,o,a)}function bm(t){return new zc(t)}function D0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function nD(t){return t.collectionGroup!==null}function sa(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ot(st.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new rc(i,r))}),n.has(st.keyField().canonicalString())||e.ce.push(new rc(st.keyField(),r))}return e.ce}function An(t){const e=te(t);return e.le||(e.le=rD(e,sa(t))),e.le}function rD(t,e){if(t.limitType==="F")return N0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new rc(s.field,i)});const n=t.endAt?new nc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new nc(t.startAt.position,t.startAt.inclusive):null;return N0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function zf(t,e,n){return new zc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $c(t,e){return Rm(An(t),An(e))&&t.limitType===e.limitType}function WT(t){return`${km(An(t))}|lt:${t.limitType}`}function ni(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>$T(s)).join(", ")}]`),Bc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Hi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Hi(s)).join(",")),`Target(${r})`}(An(t))}; limitType=${t.limitType})`}function Hc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):G.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of sa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=R0(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,sa(r),s)||r.endAt&&!function(o,a,u){const c=R0(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,sa(r),s))}(t,e)}function sD(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function qT(t){return(e,n)=>{let r=!1;for(const s of sa(t)){const i=iD(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function iD(t,e,n){const r=t.field.isKeyField()?G.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?$i(u,c):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ks(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return LT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oD=new Re(G.comparator);function or(){return oD}const KT=new Re(G.comparator);function Ho(...t){let e=KT;for(const n of t)e=e.insert(n.key,n);return e}function GT(t){let e=KT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Is(){return ia()}function QT(){return ia()}function ia(){return new oo(t=>t.toString(),(t,e)=>t.isEqual(e))}const aD=new Re(G.comparator),lD=new ot(G.comparator);function se(...t){let e=lD;for(const n of t)e=e.add(n);return e}const uD=new ot(ce);function cD(){return uD}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tc(e)?"-0":e}}function YT(t){return{integerValue:""+t}}function hD(t,e){return UN(e)?YT(e):Nm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this._=void 0}}function dD(t,e,n){return t instanceof Ma?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Pm(i)&&(i=Cm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Wi?JT(t,e):t instanceof qi?ZT(t,e):function(s,i){const o=XT(s,i),a=V0(o)+V0(s.Pe);return Ff(o)&&Ff(s.Pe)?YT(a):Nm(s.serializer,a)}(t,e)}function fD(t,e,n){return t instanceof Wi?JT(t,e):t instanceof qi?ZT(t,e):n}function XT(t,e){return t instanceof sc?function(r){return Ff(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ma extends Wc{}class Wi extends Wc{constructor(e){super(),this.elements=e}}function JT(t,e){const n=eS(e);for(const r of t.elements)n.some(s=>Nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class qi extends Wc{constructor(e){super(),this.elements=e}}function ZT(t,e){let n=eS(e);for(const r of t.elements)n=n.filter(s=>!Nn(s,r));return{arrayValue:{values:n}}}class sc extends Wc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function V0(t){return Ve(t.integerValue||t.doubleValue)}function eS(t){return Am(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n){this.field=e,this.transform=n}}function pD(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Wi&&s instanceof Wi||r instanceof qi&&s instanceof qi?zi(r.elements,s.elements,Nn):r instanceof sc&&s instanceof sc?Nn(r.Pe,s.Pe):r instanceof Ma&&s instanceof Ma}(t.transform,e.transform)}class mD{constructor(e,n){this.version=e,this.transformResults=n}}class _n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new _n}static exists(e){return new _n(void 0,e)}static updateTime(e){return new _n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function yu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class qc{}function tS(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new rS(t.key,_n.none()):new el(t.key,t.data,_n.none());{const n=t.data,r=Dt.empty();let s=new ot(st.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new as(t.key,r,new Wt(s.toArray()),_n.none())}}function gD(t,e,n){t instanceof el?function(s,i,o){const a=s.value.clone(),u=L0(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof as?function(s,i,o){if(!yu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=L0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(nS(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function oa(t,e,n,r){return t instanceof el?function(i,o,a,u){if(!yu(i.precondition,o))return a;const c=i.value.clone(),h=M0(i.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof as?function(i,o,a,u){if(!yu(i.precondition,o))return a;const c=M0(i.fieldTransforms,u,o),h=o.data;return h.setAll(nS(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(i,o,a){return yu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function yD(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=XT(r.transform,s||null);i!=null&&(n===null&&(n=Dt.empty()),n.set(r.field,i))}return n||null}function O0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zi(r,s,(i,o)=>pD(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class el extends qc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class as extends qc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function nS(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function L0(t,e,n){const r=new Map;fe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,fD(o,a,n[s]))}return r}function M0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,dD(i,o,e))}return r}class rS extends qc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vD extends qc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&gD(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=oa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=oa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=QT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=tS(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&zi(this.mutations,e.mutations,(n,r)=>O0(n,r))&&zi(this.baseMutations,e.baseMutations,(n,r)=>O0(n,r))}}class Vm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){fe(e.mutations.length===r.length);let s=function(){return aD}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Vm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe,oe;function ED(t){switch(t){default:return Z();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function sS(t){if(t===void 0)return ir("GRPC error has no .code"),F.UNKNOWN;switch(t){case Fe.OK:return F.OK;case Fe.CANCELLED:return F.CANCELLED;case Fe.UNKNOWN:return F.UNKNOWN;case Fe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Fe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Fe.INTERNAL:return F.INTERNAL;case Fe.UNAVAILABLE:return F.UNAVAILABLE;case Fe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Fe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Fe.NOT_FOUND:return F.NOT_FOUND;case Fe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Fe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Fe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Fe.ABORTED:return F.ABORTED;case Fe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Fe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Fe.DATA_LOSS:return F.DATA_LOSS;default:return Z()}}(oe=Fe||(Fe={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SD=new ks([4294967295,4294967295],0);function j0(t){const e=TD().encode(t),n=new AT;return n.update(e),new Uint8Array(n.digest())}function F0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ks([n,r],0),new ks([s,i],0)]}class Om{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Wo(`Invalid padding: ${n}`);if(r<0)throw new Wo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Wo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Wo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ks.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ks.fromNumber(r)));return s.compare(SD)===1&&(s=new ks([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=j0(e),[r,s]=F0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Om(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=j0(e),[r,s]=F0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Wo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,tl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Kc(ee.min(),s,new Re(ce),or(),se())}}class tl{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new tl(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class iS{constructor(e,n){this.targetId=e,this.me=n}}class oS{constructor(e,n,r=lt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class U0{constructor(){this.fe=0,this.ge=z0(),this.pe=lt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Z()}}),new tl(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=z0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ID{constructor(e){this.Le=e,this.Be=new Map,this.ke=or(),this.qe=B0(),this.Qe=new Re(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Bf(i))if(r===0){const o=new G(i.path);this.Ue(n,o,_t.newNoDocument(o,ee.min()))}else fe(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=Us(r).toUint8Array()}catch(u){if(u instanceof MT)return Bi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Om(o,s,i)}catch(u){return Bi(u instanceof Wo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Bf(a.target)){const u=new G(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,_t.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=se();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Kc(e,n,this.Qe,this.ke,r);return this.ke=or(),this.qe=B0(),this.Qe=new Re(ce),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new U0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ot(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new U0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function B0(){return new Re(G.comparator)}function z0(){return new Re(G.comparator)}const PD={asc:"ASCENDING",desc:"DESCENDING"},CD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AD={and:"AND",or:"OR"};class kD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function $f(t,e){return t.useProto3Json||Bc(e)?e:{value:e}}function ic(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function aS(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function RD(t,e){return ic(t,e.toTimestamp())}function kn(t){return fe(!!t),ee.fromTimestamp(function(n){const r=Yr(n);return new Ke(r.seconds,r.nanos)}(t))}function Lm(t,e){return Hf(t,e).canonicalString()}function Hf(t,e){const n=function(s){return new Ie(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function lS(t){const e=Ie.fromString(t);return fe(fS(e)),e}function Wf(t,e){return Lm(t.databaseId,e.path)}function ud(t,e){const n=lS(e);if(n.get(1)!==t.databaseId.projectId)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new K(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(cS(n))}function uS(t,e){return Lm(t.databaseId,e)}function bD(t){const e=lS(t);return e.length===4?Ie.emptyPath():cS(e)}function qf(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function cS(t){return fe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function $0(t,e,n){return{name:Wf(t,e),fields:n.value.mapValue.fields}}function ND(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(fe(h===void 0||typeof h=="string"),lt.fromBase64String(h||"")):(fe(h===void 0||h instanceof Buffer||h instanceof Uint8Array),lt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:sS(c.code);return new K(h,c.message||"")}(o);n=new oS(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ud(t,r.document.name),i=kn(r.document.updateTime),o=r.document.createTime?kn(r.document.createTime):ee.min(),a=new Dt({mapValue:{fields:r.document.fields}}),u=_t.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new vu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ud(t,r.document),i=r.readTime?kn(r.readTime):ee.min(),o=_t.newNoDocument(s,i),a=r.removedTargetIds||[];n=new vu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ud(t,r.document),i=r.removedTargetIds||[];n=new vu([],i,s,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new xD(s,i),a=r.targetId;n=new iS(a,o)}}return n}function DD(t,e){let n;if(e instanceof el)n={update:$0(t,e.key,e.value)};else if(e instanceof rS)n={delete:Wf(t,e.key)};else if(e instanceof as)n={update:$0(t,e.key,e.data),updateMask:zD(e.fieldMask)};else{if(!(e instanceof vD))return Z();n={verify:Wf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ma)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Wi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof sc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:RD(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Z()}(t,e.precondition)),n}function VD(t,e){return t&&t.length>0?(fe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?kn(s.updateTime):kn(i);return o.isEqual(ee.min())&&(o=kn(i)),new mD(o,s.transformResults||[])}(n,e))):[]}function OD(t,e){return{documents:[uS(t,e.path)]}}function LD(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=uS(t,s);const i=function(c){if(c.length!==0)return dS(Dn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:ri(m.field),direction:FD(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=$f(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function MD(t){let e=bD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){fe(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(d){const m=hS(d);return m instanceof Dn&&BT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(m=>function(S){return new rc(si(S.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(d){let m;return m=typeof d=="object"?d.value:d,Bc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(d){const m=!!d.before,y=d.values||[];return new nc(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const m=!d.before,y=d.values||[];return new nc(y,m)}(n.endAt)),tD(e,s,o,i,a,"F",u,c)}function jD(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function hS(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=si(n.unaryFilter.field);return We.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=si(n.unaryFilter.field);return We.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=si(n.unaryFilter.field);return We.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=si(n.unaryFilter.field);return We.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return We.create(si(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Dn.create(n.compositeFilter.filters.map(r=>hS(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function FD(t){return PD[t]}function UD(t){return CD[t]}function BD(t){return AD[t]}function ri(t){return{fieldPath:t.canonicalString()}}function si(t){return st.fromServerFormat(t.fieldPath)}function dS(t){return t instanceof We?function(n){if(n.op==="=="){if(k0(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NAN"}};if(A0(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(k0(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NOT_NAN"}};if(A0(n.value))return{unaryFilter:{field:ri(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ri(n.field),op:UD(n.op),value:n.value}}}(t):t instanceof Dn?function(n){const r=n.getFilters().map(s=>dS(s));return r.length===1?r[0]:{compositeFilter:{op:BD(n.op),filters:r}}}(t):Z()}function zD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function fS(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,n,r,s,i=ee.min(),o=ee.min(),a=lt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Rr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Rr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $D{constructor(e){this.ct=e}}function HD(t){const e=MD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?zf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(){this.un=new qD}addToCollectionParentIndex(e,n){return this.un.add(n),j.resolve()}getCollectionParents(e,n){return j.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return j.resolve()}deleteFieldIndex(e,n){return j.resolve()}deleteAllFieldIndexes(e){return j.resolve()}createTargetIndexes(e,n){return j.resolve()}getDocumentsMatchingTarget(e,n){return j.resolve(null)}getIndexType(e,n){return j.resolve(0)}getFieldIndexes(e,n){return j.resolve([])}getNextCollectionGroupToUpdate(e){return j.resolve(null)}getMinOffset(e,n){return j.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return j.resolve(Qr.min())}updateCollectionGroup(e,n,r){return j.resolve()}updateIndexEntries(e,n){return j.resolve()}}class qD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ot(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ot(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ki(0)}static kn(){return new Ki(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.changes=new oo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_t.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?j.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&oa(r.mutation,s,Wt.empty(),Ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=Is();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ho();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Is();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=or();const o=ia(),a=function(){return ia()}();return n.forEach((u,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof as)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),oa(h.mutation,c,h.mutation.getFieldMask(),Ke.now())):o.set(c.key,Wt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var d;return a.set(c,new GD(h,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ia();let s=new Re((o,a)=>o-a),i=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Wt.empty();h=a.applyToLocalView(c,h),r.set(u,h);const d=(s.get(a.batchId)||se()).add(u);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,d=QT();h.forEach(m=>{if(!i.has(m)){const y=tS(n.get(m),r.get(m));y!==null&&d.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return j.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return G.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):nD(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):j.resolve(Is());let a=-1,u=i;return o.next(c=>j.forEach(c,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(h)?j.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,se())).next(h=>({batchId:a,changes:GT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let s=Ho();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ho();return this.indexManager.getCollectionParents(e,i).next(a=>j.forEach(a,u=>{const c=function(d,m){return new zc(m,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((d,m)=>{o=o.insert(d,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,_t.newInvalidDocument(h)))});let a=Ho();return o.forEach((u,c)=>{const h=i.get(u);h!==void 0&&oa(h.mutation,c,Wt.empty(),Ke.now()),Hc(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return j.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:kn(s.createTime)}}(n)),j.resolve()}getNamedQuery(e,n){return j.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:HD(s.bundledQuery),readTime:kn(s.readTime)}}(n)),j.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(){this.overlays=new Re(G.comparator),this.Ir=new Map}getOverlay(e,n){return j.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Is();return j.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),j.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),j.resolve()}getOverlaysForCollection(e,n,r){const s=Is(),i=n.length+1,o=new G(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return j.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Re((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Is(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Is(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return j.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new wD(n,r));let i=this.Ir.get(n);i===void 0&&(i=se(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(){this.sessionToken=lt.EMPTY_BYTE_STRING}getSessionToken(e){return j.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,j.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(){this.Tr=new ot(Xe.Er),this.dr=new ot(Xe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Xe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Xe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new G(new Ie([])),r=new Xe(n,e),s=new Xe(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new G(new Ie([])),r=new Xe(n,e),s=new Xe(n,e+1);let i=se();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Xe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Xe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return G.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||G.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ot(Xe.Er)}checkEmpty(e){return j.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _D(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Xe(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return j.resolve(o)}lookupMutationBatch(e,n){return j.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return j.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return j.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return j.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Xe(n,0),s=new Xe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),j.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ot(ce);return n.forEach(s=>{const i=new Xe(s,0),o=new Xe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),j.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;G.isDocumentKey(i)||(i=i.child(""));const o=new Xe(new G(i),0);let a=new ot(ce);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.wr)),!0)},o),j.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){fe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return j.forEach(n.mutations,s=>{const i=new Xe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Xe(n,0),s=this.br.firstAfterOrEqual(r);return j.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,j.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eV{constructor(e){this.Mr=e,this.docs=function(){return new Re(G.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return j.resolve(r?r.document.mutableCopy():_t.newInvalidDocument(n))}getEntries(e,n){let r=or();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():_t.newInvalidDocument(s))}),j.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=or();const o=n.path,a=new G(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||LN(ON(h),r)<=0||(s.has(h.key)||Hc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return j.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Z()}Or(e,n){return j.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tV(this)}getSize(e){return j.resolve(this.size)}}class tV extends KD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),j.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nV{constructor(e){this.persistence=e,this.Nr=new oo(n=>km(n),Rm),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Mm,this.targetCount=0,this.kr=Ki.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),j.resolve()}getLastRemoteSnapshotVersion(e){return j.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return j.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),j.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),j.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ki(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,j.resolve()}updateTargetData(e,n){return this.Kn(n),j.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,j.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),j.waitFor(i).next(()=>s)}getTargetCount(e){return j.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return j.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),j.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),j.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),j.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return j.resolve(r)}containsKey(e,n){return j.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rV{constructor(e,n){this.qr={},this.overlays={},this.Qr=new Im(0),this.Kr=!1,this.Kr=!0,this.$r=new JD,this.referenceDelegate=e(this),this.Ur=new nV(this),this.indexManager=new WD,this.remoteDocumentCache=function(s){return new eV(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new $D(n),this.Gr=new YD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ZD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new sV(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return j.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class sV extends jN{constructor(e){super(),this.currentSequenceNumber=e}}class jm{constructor(e){this.persistence=e,this.Jr=new Mm,this.Yr=null}static Zr(e){return new jm(e)}get Xr(){if(this.Yr)return this.Yr;throw Z()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),j.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),j.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),j.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return j.forEach(this.Xr,r=>{const s=G.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return j.or([()=>j.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=se(),s=se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Fm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iV{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oV{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Wk()?8:FN(xt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new iV;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Do()<=ie.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",ni(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),j.resolve()):(Do()<=ie.DEBUG&&W("QueryEngine","Query:",ni(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Do()<=ie.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",ni(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,An(n))):j.resolve())}Yi(e,n){if(D0(n))return j.resolve(null);let r=An(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=zf(n,null,"F"),r=An(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=se(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,zf(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,s){return D0(n)||s.isEqual(ee.min())?j.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?j.resolve(null):(Do()<=ie.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ni(n)),this.rs(e,o,n,VN(s,-1)).next(a=>a))})}ts(e,n){let r=new ot(qT(e));return n.forEach((s,i)=>{Hc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Do()<=ie.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",ni(n)),this.Ji.getDocumentsMatchingQuery(e,n,Qr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aV{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Re(ce),this._s=new oo(i=>km(i),Rm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function lV(t,e,n,r){return new aV(t,e,n,r)}async function pS(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=se();for(const c of s){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function uV(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const d=c.batch,m=d.keys();let y=j.resolve();return m.forEach(S=>{y=y.next(()=>h.getEntry(u,S)).next(w=>{const P=c.docVersions.get(S);fe(P!==null),w.version.compareTo(P)<0&&(d.applyToRemoteDocument(w,c),w.isValidDocument()&&(w.setReadTime(c.commitVersion),h.addEntry(w)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=se();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function mS(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function cV(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,d)=>{const m=s.get(d);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,d).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,d)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?y=y.withResumeToken(lt.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(d,y),function(w,P,E){return w.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(i,y))});let u=or(),c=se();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(hV(i,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(ee.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(d=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return j.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.os=s,i))}function hV(t,e,n){let r=se(),s=se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=or();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function dV(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fV(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,j.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Rr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Kf(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Za(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function H0(t,e,n){const r=te(t);let s=ee.min(),i=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const d=te(u),m=d._s.get(h);return m!==void 0?j.resolve(d.os.get(m)):d.Ur.getTargetData(c,h)}(r,o,An(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:se())).next(a=>(pV(r,sD(e),a),{documents:a,Ts:i})))}function pV(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class W0{constructor(){this.activeTargetIds=cD()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mV{constructor(){this.so=new W0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new W0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl=null;function cd(){return Kl===null?Kl=function(){return 268435456+Math.round(2147483648*Math.random())}():Kl++,"0x"+Kl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yV={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mt="WebChannelConnection";class _V extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=cd(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${a}:`,u,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,u,c,s).then(h=>(W("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Bi("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+io}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=yV[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=cd();return new Promise((o,a)=>{const u=new kT;u.setWithCredentials(!0),u.listenOnce(RT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case mu.NO_ERROR:const h=u.getResponseJson();W(mt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case mu.TIMEOUT:W(mt,`RPC '${e}' ${i} timed out`),a(new K(F.DEADLINE_EXCEEDED,"Request time out"));break;case mu.HTTP_ERROR:const d=u.getStatus();if(W(mt,`RPC '${e}' ${i} failed with status:`,d,"response text:",u.getResponseText()),d>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const S=function(P){const E=P.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(E)>=0?E:F.UNKNOWN}(y.status);a(new K(S,y.message))}else a(new K(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new K(F.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{W(mt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);W(mt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=cd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=DT(),a=NT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");W(mt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const d=o.createWebChannel(h,u);let m=!1,y=!1;const S=new vV({Io:P=>{y?W(mt,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(m||(W(mt,`Opening RPC '${e}' stream ${s} transport.`),d.open(),m=!0),W(mt,`RPC '${e}' stream ${s} sending:`,P),d.send(P))},To:()=>d.close()}),w=(P,E,v)=>{P.listen(E,_=>{try{v(_)}catch(R){setTimeout(()=>{throw R},0)}})};return w(d,$o.EventType.OPEN,()=>{y||(W(mt,`RPC '${e}' stream ${s} transport opened.`),S.yo())}),w(d,$o.EventType.CLOSE,()=>{y||(y=!0,W(mt,`RPC '${e}' stream ${s} transport closed`),S.So())}),w(d,$o.EventType.ERROR,P=>{y||(y=!0,Bi(mt,`RPC '${e}' stream ${s} transport errored:`,P),S.So(new K(F.UNAVAILABLE,"The operation could not be completed")))}),w(d,$o.EventType.MESSAGE,P=>{var E;if(!y){const v=P.data[0];fe(!!v);const _=v,R=_.error||((E=_[0])===null||E===void 0?void 0:E.error);if(R){W(mt,`RPC '${e}' stream ${s} received error:`,R);const V=R.status;let M=function(I){const A=Fe[I];if(A!==void 0)return sS(A)}(V),C=R.message;M===void 0&&(M=F.INTERNAL,C="Unknown error status: "+V+" with message "+R.message),y=!0,S.So(new K(M,C)),d.close()}else W(mt,`RPC '${e}' stream ${s} received:`,v),S.bo(v)}}),w(a,bT.STAT_EVENT,P=>{P.stat===Mf.PROXY?W(mt,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Mf.NOPROXY&&W(mt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{S.wo()},0),S}}function hd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gc(t){return new kD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gS{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e,n,r,s,i,o,a,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new gS(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new K(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wV extends yS{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=ND(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?kn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=qf(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=Bf(u)?{documents:OD(i,u)}:{query:LD(i,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=aS(i,o.resumeToken);const c=$f(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(ee.min())>0){a.readTime=ic(i,o.snapshotVersion.toTimestamp());const c=$f(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=jD(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=qf(this.serializer),n.removeTarget=e,this.a_(n)}}class xV extends yS{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=VD(e.writeResults,e.commitTime),r=kn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=qf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>DD(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EV extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Hf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new K(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Hf(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new K(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class TV{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ir(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Gs(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=te(u);c.L_.add(4),await nl(c),c.q_.set("Unknown"),c.L_.delete(4),await Qc(c)}(this))})}),this.q_=new TV(r,s)}}async function Qc(t){if(Gs(t))for(const e of t.B_)await e(!0)}async function nl(t){for(const e of t.B_)await e(!1)}function vS(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),$m(n)?zm(n):ao(n).r_()&&Bm(n,e))}function Um(t,e){const n=te(t),r=ao(n);n.N_.delete(e),r.r_()&&_S(n,e),n.N_.size===0&&(r.r_()?r.o_():Gs(n)&&n.q_.set("Unknown"))}function Bm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ao(t).A_(e)}function _S(t,e){t.Q_.xe(e),ao(t).R_(e)}function zm(t){t.Q_=new ID({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),ao(t).start(),t.q_.v_()}function $m(t){return Gs(t)&&!ao(t).n_()&&t.N_.size>0}function Gs(t){return te(t).L_.size===0}function wS(t){t.Q_=void 0}async function IV(t){t.q_.set("Online")}async function PV(t){t.N_.forEach((e,n)=>{Bm(t,e)})}async function CV(t,e){wS(t),$m(t)?(t.q_.M_(e),zm(t)):t.q_.set("Unknown")}async function AV(t,e,n){if(t.q_.set("Online"),e instanceof oS&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await oc(t,r)}else if(e instanceof vu?t.Q_.Ke(e):e instanceof iS?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await mS(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=i.N_.get(u);if(!h)return;i.N_.set(u,h.withResumeToken(lt.EMPTY_BYTE_STRING,h.snapshotVersion)),_S(i,u);const d=new Rr(h.target,u,c,h.sequenceNumber);Bm(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await oc(t,r)}}async function oc(t,e,n){if(!Za(e))throw e;t.L_.add(1),await nl(t),t.q_.set("Offline"),n||(n=()=>mS(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Qc(t)})}function xS(t,e){return e().catch(n=>oc(t,n,e))}async function Yc(t){const e=te(t),n=Xr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;kV(e);)try{const s=await dV(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,RV(e,s)}catch(s){await oc(e,s)}ES(e)&&TS(e)}function kV(t){return Gs(t)&&t.O_.length<10}function RV(t,e){t.O_.push(e);const n=Xr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function ES(t){return Gs(t)&&!Xr(t).n_()&&t.O_.length>0}function TS(t){Xr(t).start()}async function bV(t){Xr(t).p_()}async function NV(t){const e=Xr(t);for(const n of t.O_)e.m_(n.mutations)}async function DV(t,e,n){const r=t.O_.shift(),s=Vm.from(r,e,n);await xS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Yc(t)}async function VV(t,e){e&&Xr(t).V_&&await async function(r,s){if(function(o){return ED(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();Xr(r).s_(),await xS(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Yc(r)}}(t,e),ES(t)&&TS(t)}async function K0(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Gs(n);n.L_.add(3),await nl(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Qc(n)}async function OV(t,e){const n=te(t);e?(n.L_.delete(2),await Qc(n)):e||(n.L_.add(2),await nl(n),n.q_.set("Unknown"))}function ao(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new wV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:IV.bind(null,t),Ro:PV.bind(null,t),mo:CV.bind(null,t),d_:AV.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),$m(t)?zm(t):t.q_.set("Unknown")):(await t.K_.stop(),wS(t))})),t.K_}function Xr(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new xV(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:bV.bind(null,t),mo:VV.bind(null,t),f_:NV.bind(null,t),g_:DV.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Yc(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Hm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new K(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Wm(t,e){if(ir("AsyncQueue",`${e}: ${t}`),Za(t))return new K(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=Ho(),this.sortedSet=new Re(this.comparator)}static emptySet(e){return new bi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof bi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new bi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G0{constructor(){this.W_=new Re(G.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Z():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Gi{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new Gi(e,n,bi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$c(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LV{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class MV{constructor(){this.queries=Q0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=Q0(),i.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new K(F.ABORTED,"Firestore shutting down"))}}function Q0(){return new oo(t=>WT(t),$c)}async function jV(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new LV,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Wm(o,`Initialization of query '${ni(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&qm(n)}async function FV(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function UV(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&qm(n)}function BV(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function qm(t){t.Y_.forEach(e=>{e.next()})}var Gf,Y0;(Y0=Gf||(Gf={})).ea="default",Y0.Cache="cache";class zV{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Gi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Gi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Gf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(e){this.key=e}}class IS{constructor(e){this.key=e}}class $V{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=qT(e),this.Ra=new bi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new G0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const m=s.get(h),y=Hc(this.query,d)?d:null,S=!!m&&this.mutatedKeys.has(m.key),w=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let P=!1;m&&y?m.data.isEqual(y.data)?S!==w&&(r.track({type:3,doc:y}),P=!0):this.ga(m,y)||(r.track({type:2,doc:y}),P=!0,(u&&this.Aa(y,u)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),P=!0):m&&!y&&(r.track({type:1,doc:m}),P=!0,(u||c)&&(a=!0)),P&&(y?(o=o.add(y),i=w?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,d)=>function(y,S){const w=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return w(y)-w(S)}(h.type,d.type)||this.Aa(h.doc,d.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new Gi(this.query,e.Ra,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new G0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new IS(r))}),this.da.forEach(r=>{e.has(r)||n.push(new SS(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Gi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class HV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class WV{constructor(e){this.key=e,this.va=!1}}class qV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new oo(a=>WT(a),$c),this.Ma=new Map,this.xa=new Set,this.Oa=new Re(G.comparator),this.Na=new Map,this.La=new Mm,this.Ba={},this.ka=new Map,this.qa=Ki.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function KV(t,e,n=!0){const r=bS(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await PS(r,e,n,!0),s}async function GV(t,e){const n=bS(t);await PS(n,e,!0,!1)}async function PS(t,e,n,r){const s=await fV(t.localStore,An(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await QV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&vS(t.remoteStore,s),a}async function QV(t,e,n,r,s){t.Ka=(d,m,y)=>async function(w,P,E,v){let _=P.view.ma(E);_.ns&&(_=await H0(w.localStore,P.query,!1).then(({documents:C})=>P.view.ma(C,_)));const R=v&&v.targetChanges.get(P.targetId),V=v&&v.targetMismatches.get(P.targetId)!=null,M=P.view.applyChanges(_,w.isPrimaryClient,R,V);return J0(w,P.targetId,M.wa),M.snapshot}(t,d,m,y);const i=await H0(t.localStore,e,!0),o=new $V(e,i.Ts),a=o.ma(i.documents),u=tl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);J0(t,n,c.wa);const h=new HV(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function YV(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!$c(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Kf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Um(r.remoteStore,s.targetId),Qf(r,s.targetId)}).catch(Ja)):(Qf(r,s.targetId),await Kf(r.localStore,s.targetId,!0))}async function XV(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Um(n.remoteStore,r.targetId))}async function JV(t,e,n){const r=iO(t);try{const s=await function(o,a){const u=te(o),c=Ke.now(),h=a.reduce((y,S)=>y.add(S.key),se());let d,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let S=or(),w=se();return u.cs.getEntries(y,h).next(P=>{S=P,S.forEach((E,v)=>{v.isValidDocument()||(w=w.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,S)).next(P=>{d=P;const E=[];for(const v of a){const _=yD(v,d.get(v.key).overlayedDocument);_!=null&&E.push(new as(v.key,_,jT(_.value.mapValue),_n.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,E,a)}).next(P=>{m=P;const E=P.applyToLocalDocumentSet(d,w);return u.documentOverlayCache.saveOverlays(y,P.batchId,E)})}).then(()=>({batchId:m.batchId,changes:GT(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new Re(ce)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await rl(r,s.changes),await Yc(r.remoteStore)}catch(s){const i=Wm(s,"Failed to persist write");n.reject(i)}}async function CS(t,e){const n=te(t);try{const r=await cV(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(fe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?fe(o.va):s.removedDocuments.size>0&&(fe(o.va),o.va=!1))}),await rl(n,r,e)}catch(r){await Ja(r)}}function X0(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=te(o);u.onlineState=a;let c=!1;u.queries.forEach((h,d)=>{for(const m of d.j_)m.Z_(a)&&(c=!0)}),c&&qm(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function ZV(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Re(G.comparator);o=o.insert(i,_t.newNoDocument(i,ee.min()));const a=se().add(i),u=new Kc(ee.min(),new Map,new Re(ce),o,a);await CS(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Km(r)}else await Kf(r.localStore,e,!1).then(()=>Qf(r,e,n)).catch(Ja)}async function eO(t,e){const n=te(t),r=e.batch.batchId;try{const s=await uV(n.localStore,e);kS(n,r,null),AS(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await rl(n,s)}catch(s){await Ja(s)}}async function tO(t,e,n){const r=te(t);try{const s=await function(o,a){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(d=>(fe(d!==null),h=d.keys(),u.mutationQueue.removeMutationBatch(c,d))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);kS(r,e,n),AS(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await rl(r,s)}catch(s){await Ja(s)}}function AS(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function kS(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Qf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||RS(t,r)})}function RS(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Um(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Km(t))}function J0(t,e,n){for(const r of n)r instanceof SS?(t.La.addReference(r.key,e),nO(t,r)):r instanceof IS?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||RS(t,r.key)):Z()}function nO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),Km(t))}function Km(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new G(Ie.fromString(e)),r=t.qa.next();t.Na.set(r,new WV(n)),t.Oa=t.Oa.insert(n,r),vS(t.remoteStore,new Rr(An(bm(n.path)),r,"TargetPurposeLimboResolution",Im.oe))}}async function rl(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const d=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,d?"current":"not-current")}if(c){s.push(c);const d=Fm.Wi(u.targetId,c);i.push(d)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,c){const h=te(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>j.forEach(c,m=>j.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(d,m.targetId,y)).next(()=>j.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(d,m.targetId,y)))))}catch(d){if(!Za(d))throw d;W("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const m=d.targetId;if(!d.fromCache){const y=h.os.get(m),S=y.snapshotVersion,w=y.withLastLimboFreeSnapshotVersion(S);h.os=h.os.insert(m,w)}}}(r.localStore,i))}async function rO(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await pS(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(u=>{u.reject(new K(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await rl(n,r.hs)}}function sO(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let s=se();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function bS(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=CS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=sO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ZV.bind(null,e),e.Ca.d_=UV.bind(null,e.eventManager),e.Ca.$a=BV.bind(null,e.eventManager),e}function iO(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=eO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tO.bind(null,e),e}class ac{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Gc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return lV(this.persistence,new oV,e.initialUser,this.serializer)}Ga(e){return new rV(jm.Zr,this.serializer)}Wa(e){return new mV}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}ac.provider={build:()=>new ac};class Yf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>X0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=rO.bind(null,this.syncEngine),await OV(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new MV}()}createDatastore(e){const n=Gc(e.databaseInfo.databaseId),r=function(i){return new _V(i)}(e.databaseInfo);return function(i,o,a,u){return new EV(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new SV(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>X0(this.syncEngine,n,0),function(){return q0.D()?new q0:new gV}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,h){const d=new qV(s,i,o,a,u,c);return h&&(d.Qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await nl(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Yf.provider={build:()=>new Yf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oO{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=yt.UNAUTHENTICATED,this.clientId=OT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Wm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function dd(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await pS(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Z0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await lO(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>K0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>K0(e.remoteStore,s)),t._onlineComponents=e}async function lO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await dd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Bi("Error using user provided cache. Falling back to memory cache: "+n),await dd(t,new ac)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await dd(t,new ac);return t._offlineComponents}async function NS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await Z0(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await Z0(t,new Yf))),t._onlineComponents}function uO(t){return NS(t).then(e=>e.syncEngine)}async function cO(t){const e=await NS(t),n=e.eventManager;return n.onListen=KV.bind(null,e.syncEngine),n.onUnlisten=YV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=GV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=XV.bind(null,e.syncEngine),n}function hO(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const h=new oO({next:m=>{h.Za(),o.enqueueAndForget(()=>FV(i,d));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new K(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?c.reject(new K(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),d=new zV(bm(a.path),h,{includeMetadataChanges:!0,_a:!0});return jV(i,d)}(await cO(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t,e,n){if(!n)throw new K(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function dO(t,e,n,r){if(e===!0&&r===!0)throw new K(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function t_(t){if(!G.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function n_(t){if(G.isDocumentKey(t))throw new K(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Gm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Jr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new K(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Gm(t);throw new K(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new K(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new K(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}dO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=DS((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new K(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new r_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new K(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new K(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new r_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new IN;switch(r.type){case"firstParty":return new kN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new K(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=e_.get(n);r&&(W("ComponentProvider","Removing Datastore"),e_.delete(n),r.terminate())}(this),Promise.resolve()}}function fO(t,e,n,r={}){var s;const i=(t=Jr(t,Xc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Bi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=yt.MOCK_USER;else{a=zE(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new K(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new yt(c)}t._authCredentials=new PN(new VT(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Qm(this.firestore,e,this._query)}}class jt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new jt(this.firestore,e,this._key)}}class $r extends Qm{constructor(e,n,r){super(e,n,bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new jt(this.firestore,null,new G(e))}withConverter(e){return new $r(this.firestore,e,this._path)}}function pO(t,e,...n){if(t=Ge(t),VS("collection","path",e),t instanceof Xc){const r=Ie.fromString(e,...n);return n_(r),new $r(t,null,r)}{if(!(t instanceof jt||t instanceof $r))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return n_(r),new $r(t.firestore,null,r)}}function zs(t,e,...n){if(t=Ge(t),arguments.length===1&&(e=OT.newId()),VS("doc","path",e),t instanceof Xc){const r=Ie.fromString(e,...n);return t_(r),new jt(t,null,new G(r))}{if(!(t instanceof jt||t instanceof $r))throw new K(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return t_(r),new jt(t.firestore,t instanceof $r?t.converter:null,new G(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new gS(this,"async_queue_retry"),this.Vu=()=>{const r=hd();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=hd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=hd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new zr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Za(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw ir("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Hm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Z()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class sl extends Xc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new s_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new s_(e),this._firestoreClient=void 0,await e}}}function mO(t,e){const n=typeof t=="object"?t:dm(),r=typeof t=="string"?t:"(default)",s=Mc(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=FE("firestore");i&&fO(s,...i)}return s}function OS(t){if(t._terminated)throw new K(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||gO(t),t._firestoreClient}function gO(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,c,h){return new zN(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,DS(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new aO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qi(lt.fromBase64String(e))}catch(n){throw new K(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Qi(lt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new K(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new st(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new K(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new K(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yO=/^__.*__$/;class vO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new as(e,this.data,this.fieldMask,n,this.fieldTransforms):new el(e,this.data,n,this.fieldTransforms)}}class LS{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new as(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function MS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class Zc{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Zc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return lc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(MS(this.Cu)&&yO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class _O{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gc(e)}Qu(e,n,r,s=!1){return new Zc({Cu:e,methodName:n,qu:r,path:st.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Jm(t){const e=t._freezeSettings(),n=Gc(t._databaseId);return new _O(t._databaseId,!!e.ignoreUndefinedProperties,n)}function jS(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);ng("Data must be an object, but it was:",o,r);const a=US(r,o);let u,c;if(i.merge)u=new Wt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const d of i.mergeFields){const m=Xf(e,d,n);if(!o.contains(m))throw new K(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);zS(h,m)||h.push(m)}u=new Wt(h),c=o.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,c=o.fieldTransforms;return new vO(new Dt(a),u,c)}class eh extends lo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof eh}}function FS(t,e,n){return new Zc({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Zm extends lo{_toFieldTransform(e){return new Dm(e.path,new Ma)}isEqual(e){return e instanceof Zm}}class eg extends lo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=FS(this,e,!0),r=this.Ku.map(i=>uo(i,n)),s=new Wi(r);return new Dm(e.path,s)}isEqual(e){return e instanceof eg&&Fi(this.Ku,e.Ku)}}class tg extends lo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=FS(this,e,!0),r=this.Ku.map(i=>uo(i,n)),s=new qi(r);return new Dm(e.path,s)}isEqual(e){return e instanceof tg&&Fi(this.Ku,e.Ku)}}function wO(t,e,n,r){const s=t.Qu(1,e,n);ng("Data must be an object, but it was:",s,r);const i=[],o=Dt.empty();Ks(r,(u,c)=>{const h=rg(e,u,n);c=Ge(c);const d=s.Nu(h);if(c instanceof eh)i.push(h);else{const m=uo(c,d);m!=null&&(i.push(h),o.set(h,m))}});const a=new Wt(i);return new LS(o,a,s.fieldTransforms)}function xO(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[Xf(e,r,n)],u=[s];if(i.length%2!=0)throw new K(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(Xf(e,i[m])),u.push(i[m+1]);const c=[],h=Dt.empty();for(let m=a.length-1;m>=0;--m)if(!zS(c,a[m])){const y=a[m];let S=u[m];S=Ge(S);const w=o.Nu(y);if(S instanceof eh)c.push(y);else{const P=uo(S,w);P!=null&&(c.push(y),h.set(y,P))}}const d=new Wt(c);return new LS(h,d,o.fieldTransforms)}function uo(t,e){if(BS(t=Ge(t)))return ng("Unsupported field value:",e,t),US(t,e);if(t instanceof lo)return function(r,s){if(!MS(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=uo(a,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ge(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return hD(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ke.fromDate(r);return{timestampValue:ic(s.serializer,i)}}if(r instanceof Ke){const i=new Ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ic(s.serializer,i)}}if(r instanceof Ym)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Qi)return{bytesValue:aS(s.serializer,r._byteString)};if(r instanceof jt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Lm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Xm)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Nm(a.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Gm(r)}`)}(t,e)}function US(t,e){const n={};return LT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ks(t,(r,s)=>{const i=uo(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function BS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ke||t instanceof Ym||t instanceof Qi||t instanceof jt||t instanceof lo||t instanceof Xm)}function ng(t,e,n){if(!BS(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Gm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Xf(t,e,n){if((e=Ge(e))instanceof Jc)return e._internalPath;if(typeof e=="string")return rg(t,e);throw lc("Field path arguments must be of type string or ",t,!1,void 0,n)}const EO=new RegExp("[~\\*/\\[\\]]");function rg(t,e,n){if(e.search(EO)>=0)throw lc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Jc(...e.split("."))._internalPath}catch{throw lc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function lc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new K(F.INVALID_ARGUMENT,a+t+u)}function zS(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new jt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(HS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class TO extends $S{data(){return super.data()}}function HS(t,e){return typeof e=="string"?rg(t,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}class SO{convertValue(e,n="none"){switch(Bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ve(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Us(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ks(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ve(o.doubleValue));return new Xm(i)}convertGeoPoint(e){return new Ym(Ve(e.latitude),Ve(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Va(e));default:return null}}convertTimestamp(e){const n=Yr(e);return new Ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);fe(fS(r));const s=new Oa(r.get(1),r.get(3)),i=new G(r.popFirst(5));return s.isEqual(n)||ir(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WS(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IO{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class qS extends $S{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new PO(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(HS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class PO extends qS{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(t){t=Jr(t,jt);const e=Jr(t.firestore,sl);return hO(OS(e),t._key).then(n=>kO(e,t,n))}class CO extends SO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new jt(this.firestore,null,n)}}function KS(t,e,n){t=Jr(t,jt);const r=Jr(t.firestore,sl),s=WS(t.converter,e,n);return sg(r,[jS(Jm(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,_n.none())])}function GS(t,e,n,...r){t=Jr(t,jt);const s=Jr(t.firestore,sl),i=Jm(s);let o;return o=typeof(e=Ge(e))=="string"||e instanceof Jc?xO(i,"updateDoc",t._key,e,n,r):wO(i,"updateDoc",t._key,e),sg(s,[o.toMutation(t._key,_n.exists(!0))])}function AO(t,e){const n=Jr(t.firestore,sl),r=zs(t),s=WS(t.converter,e);return sg(n,[jS(Jm(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,_n.exists(!1))]).then(()=>r)}function sg(t,e){return function(r,s){const i=new zr;return r.asyncQueue.enqueueAndForget(async()=>JV(await uO(r),s,i)),i.promise}(OS(t),e)}function kO(t,e,n){const r=n.docs.get(e._key),s=new CO(t);return new qS(t,s,e._key,r,new IO(n.hasPendingWrites,n.fromCache),e.converter)}function _u(){return new Zm("serverTimestamp")}function RO(...t){return new eg("arrayUnion",t)}function bO(...t){return new tg("arrayRemove",t)}(function(e,n=!0){(function(s){io=s})(qs),Ls(new Gr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new sl(new CN(r.getProvider("auth-internal")),new bN(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new K(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oa(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Pn(T0,"4.7.3",e),Pn(T0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QS="firebasestorage.googleapis.com",NO="storageBucket",DO=2*60*1e3,VO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln extends On{constructor(e,n,r=0){super(fd(e),`Firebase Storage: ${n} (${fd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ln.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return fd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Vn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Vn||(Vn={}));function fd(t){return"storage/"+t}function OO(){const t="An unknown error occurred, please check the error payload for server response.";return new Ln(Vn.UNKNOWN,t)}function LO(){return new Ln(Vn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function MO(){return new Ln(Vn.CANCELED,"User canceled the upload/download.")}function jO(t){return new Ln(Vn.INVALID_URL,"Invalid URL '"+t+"'.")}function FO(t){return new Ln(Vn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function i_(t){return new Ln(Vn.INVALID_ARGUMENT,t)}function YS(){return new Ln(Vn.APP_DELETED,"The Firebase app was deleted.")}function UO(t){return new Ln(Vn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=mn.makeFromUrl(e,n)}catch{return new mn(e,"")}if(r.path==="")return r;throw FO(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(R){R.path.charAt(R.path.length-1)==="/"&&(R.path_=R.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(R){R.path_=decodeURIComponent(R.path)}const h="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${d}/${h}/b/${s}/o${m}`,"i"),S={bucket:1,path:3},w=n===QS?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",E=new RegExp(`^https?://${w}/${s}/${P}`,"i"),_=[{regex:a,indices:u,postModify:i},{regex:y,indices:S,postModify:c},{regex:E,indices:{bucket:1,path:2},postModify:c}];for(let R=0;R<_.length;R++){const V=_[R],M=V.regex.exec(e);if(M){const C=M[V.indices.bucket];let x=M[V.indices.path];x||(x=""),r=new mn(C,x),V.postModify(r);break}}if(r==null)throw jO(e);return r}}class BO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...P){c||(c=!0,e.apply(null,P))}function d(P){s=setTimeout(()=>{s=null,t(y,u())},P)}function m(){i&&clearTimeout(i)}function y(P,...E){if(c){m();return}if(P){m(),h.call(null,P,...E);return}if(u()||o){m(),h.call(null,P,...E);return}r<64&&(r*=2);let _;a===1?(a=2,_=0):_=(r+Math.random())*1e3,d(_)}let S=!1;function w(P){S||(S=!0,m(),!c&&(s!==null?(P||(a=2),clearTimeout(s),d(0)):P||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,w(!0)},n),w}function $O(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HO(t){return t!==void 0}function o_(t,e,n,r){if(r<e)throw i_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw i_(`Invalid value for '${t}'. Expected ${n} or less.`)}function WO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var uc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(uc||(uc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KO{constructor(e,n,r,s,i,o,a,u,c,h,d,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=d,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,S)=>{this.resolve_=y,this.reject_=S,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Gl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===uc.NO_ERROR,u=i.getStatus();if(!a||qO(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===uc.ABORT;r(!1,new Gl(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new Gl(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());HO(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=OO();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(s.canceled){const u=this.appDelete_?YS():MO();o(u)}else{const u=LO();o(u)}};this.canceled_?n(!1,new Gl(!1,null,!0)):this.backoffId_=zO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&$O(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function GO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function QO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function YO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function XO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function JO(t,e,n,r,s,i,o=!0){const a=WO(t.urlParams),u=t.url+a,c=Object.assign({},t.headers);return YO(c,e),GO(c,n),QO(c,i),XO(c,r),new KO(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function eL(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc{constructor(e,n){this._service=e,n instanceof mn?this._location=n:this._location=mn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new cc(e,n)}get root(){const e=new mn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return eL(this._location.path)}get storage(){return this._service}get parent(){const e=ZO(this._location.path);if(e===null)return null;const n=new mn(this._location.bucket,e);return new cc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw UO(e)}}function a_(t,e){const n=e==null?void 0:e[NO];return n==null?null:mn.makeFromBucketSpec(n,t)}function tL(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:zE(s,t.app.options.projectId))}class nL{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=QS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DO,this._maxUploadRetryTime=VO,this._requests=new Set,s!=null?this._bucket=mn.makeFromBucketSpec(s,this._host):this._bucket=a_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=mn.makeFromBucketSpec(this._url,e):this._bucket=a_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){o_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){o_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new cc(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new BO(YS());{const o=JO(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const l_="@firebase/storage",u_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS="storage";function rL(t=dm(),e){t=Ge(t);const r=Mc(t,XS).getImmediate({identifier:e}),s=FE("storage");return s&&sL(r,...s),r}function sL(t,e,n,r={}){tL(t,e,n,r)}function iL(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new nL(n,r,s,e,qs)}function oL(){Ls(new Gr(XS,iL,"PUBLIC").setMultipleInstances(!0)),Pn(l_,u_,""),Pn(l_,u_,"esm2017")}oL();const aL={apiKey:"AIzaSyC2kTYKi-JwDxh7MH2Kdzp1blvWdvMb-4w",authDomain:"valentine-6ccc1.firebaseapp.com",projectId:"valentine-6ccc1",storageBucket:"valentine-6ccc1.appspot.com",messagingSenderId:"160547094369",appId:"1:160547094369:web:4171314829d38c8b5c4f20"},ig=WE(aL),Vo=TN(ig),lL=new zn,$s=mO(ig);rL(ig);const JS=b.createContext();function Mn(){return b.useContext(JS)}function uL({children:t}){const[e,n]=b.useState(null),[r,s]=b.useState(!0);async function i(d,m={}){if(!d)return;const y=zs($s,"users",d.uid);(await th(y)).exists()?await GS(y,{email:d.email||null,displayName:d.displayName||null,photoURL:d.photoURL||null,lastLoginAt:_u(),...m}):await KS(y,{uid:d.uid,email:d.email||null,displayName:d.displayName||null,photoURL:d.photoURL||null,createdAt:_u(),lastLoginAt:_u(),...m})}function o(d,m,y){return o2(Vo,d,m).then(async S=>{if(y!=null&&y.displayName)try{await gT(S.user,{displayName:y.displayName})}catch{}return await i(S.user,y),S})}function a(d,m){return a2(Vo,d,m).then(async y=>(await i(y.user),y))}function u(){return N2(Vo,lL).then(async d=>(await i(d.user),d))}function c(){return d2(Vo)}b.useEffect(()=>h2(Vo,m=>{n(m),s(!1)}),[]);const h={currentUser:e,login:a,signup:o,loginWithGoogle:u,logout:c};return p.jsx(JS.Provider,{value:h,children:!r&&t})}const ZS=b.createContext();function il(){return b.useContext(ZS)}function cL({children:t}){const{currentUser:e}=Mn(),n=cr(),r=b.useRef(!1),[s,i]=b.useState(()=>{try{const w=e?`cart_${e.uid}`:"cart_guest",P=localStorage.getItem(w);return P?JSON.parse(P):[]}catch{return[]}}),o=w=>w?`cart_${w.uid}`:"cart_guest",a=w=>{try{const P=localStorage.getItem(o(w));i(P?JSON.parse(P):[])}catch(P){console.error("Failed to load cart from local storage",P),i([])}};b.useEffect(()=>{a(e),r.current=!!e},[e]),b.useEffect(()=>{try{localStorage.setItem(o(e),JSON.stringify(s))}catch(w){console.error("Failed to save cart to local storage",w)}},[s,e]);function u(w,P=1,E=""){if(!e){window.confirm("Please log in to add items to your cart. Go to login now?")&&n("/login");return}i(v=>{const _=v.findIndex(R=>R.id===w.id&&R.customText===E);if(_>-1){const R=[...v];return R[_].quantity+=P,R}else return[...v,{...w,quantity:P,customText:E}]})}function c(w,P=""){i(E=>E.filter(v=>!(v.id===w&&v.customText===P)))}function h(w,P,E){E<1||i(v=>v.map(_=>_.id===w&&_.customText===P?{..._,quantity:E}:_))}function d(){i([])}const m=s.reduce((w,P)=>w+P.quantity,0),y=s.reduce((w,P)=>w+P.price*P.quantity,0),S={cartItems:s,addToCart:u,removeFromCart:c,updateQuantity:h,clearCart:d,cartCount:m,cartTotal:y};return p.jsx(ZS.Provider,{value:S,children:t})}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var hL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),je=(t,e)=>{const n=b.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:u,...c},h)=>b.createElement("svg",{ref:h,...hL,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${dL(t)}`,a].join(" "),...c},[...e.map(([d,m])=>b.createElement(d,m)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fL=je("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e1=je("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pL=je("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=je("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mL=je("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gL=je("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yL=je("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vL=je("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=je("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _L=je("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=je("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xL=je("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=je("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=je("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=je("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=je("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t1=je("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=je("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=je("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=je("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=je("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),n1=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),nh=b.createContext({}),rh=b.createContext(null),sh=typeof document<"u",ag=sh?b.useLayoutEffect:b.useEffect,r1=b.createContext({strict:!1}),lg=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),kL="framerAppearId",s1="data-"+lg(kL);function RL(t,e,n,r){const{visualElement:s}=b.useContext(nh),i=b.useContext(r1),o=b.useContext(rh),a=b.useContext(n1).reducedMotion,u=b.useRef();r=r||i.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=u.current;b.useInsertionEffect(()=>{c&&c.update(n,o)});const h=b.useRef(!!(n[s1]&&!window.HandoffComplete));return ag(()=>{c&&(c.render(),h.current&&c.animationState&&c.animationState.animateChanges())}),b.useEffect(()=>{c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),c}function yi(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function bL(t,e,n){return b.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):yi(n)&&(n.current=r))},[e])}function ja(t){return typeof t=="string"||Array.isArray(t)}function ih(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const ug=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],cg=["initial",...ug];function oh(t){return ih(t.animate)||cg.some(e=>ja(t[e]))}function i1(t){return!!(oh(t)||t.variants)}function NL(t,e){if(oh(t)){const{initial:n,animate:r}=t;return{initial:n===!1||ja(n)?n:void 0,animate:ja(r)?r:void 0}}return t.inherit!==!1?e:{}}function DL(t){const{initial:e,animate:n}=NL(t,b.useContext(nh));return b.useMemo(()=>({initial:e,animate:n}),[c_(e),c_(n)])}function c_(t){return Array.isArray(t)?t.join(" "):t}const h_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Fa={};for(const t in h_)Fa[t]={isEnabled:e=>h_[t].some(n=>!!e[n])};function VL(t){for(const e in t)Fa[e]={...Fa[e],...t[e]}}const hg=b.createContext({}),o1=b.createContext({}),OL=Symbol.for("motionComponentSymbol");function LL({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&VL(t);function i(a,u){let c;const h={...b.useContext(n1),...a,layoutId:ML(a)},{isStatic:d}=h,m=DL(a),y=r(a,d);if(!d&&sh){m.visualElement=RL(s,y,h,e);const S=b.useContext(o1),w=b.useContext(r1).strict;m.visualElement&&(c=m.visualElement.loadFeatures(h,w,t,S))}return b.createElement(nh.Provider,{value:m},c&&m.visualElement?b.createElement(c,{visualElement:m.visualElement,...h}):null,n(s,a,bL(y,m.visualElement,u),y,d,m.visualElement))}const o=b.forwardRef(i);return o[OL]=s,o}function ML({layoutId:t}){const e=b.useContext(hg).id;return e&&t!==void 0?e+"-"+t:t}function jL(t){function e(r,s={}){return LL(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const FL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dg(t){return typeof t!="string"||t.includes("-")?!1:!!(FL.indexOf(t)>-1||/[A-Z]/.test(t))}const hc={};function UL(t){Object.assign(hc,t)}const ol=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qs=new Set(ol);function a1(t,{layout:e,layoutId:n}){return Qs.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!hc[t]||t==="opacity")}const Ft=t=>!!(t&&t.getVelocity),BL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},zL=ol.length;function $L(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<zL;o++){const a=ol[o];if(t[a]!==void 0){const u=BL[a]||a;i+=`${u}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const l1=t=>e=>typeof e=="string"&&e.startsWith(t),u1=l1("--"),Jf=l1("var(--"),HL=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,WL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Zr=(t,e,n)=>Math.min(Math.max(n,t),e),Ys={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},aa={...Ys,transform:t=>Zr(0,1,t)},Ql={...Ys,default:1},la=t=>Math.round(t*1e5)/1e5,ah=/(-)?([\d]*\.?[\d])+/g,c1=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,qL=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function al(t){return typeof t=="string"}const ll=t=>({test:e=>al(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),yr=ll("deg"),bn=ll("%"),Y=ll("px"),KL=ll("vh"),GL=ll("vw"),d_={...bn,parse:t=>bn.parse(t)/100,transform:t=>bn.transform(t*100)},f_={...Ys,transform:Math.round},h1={borderWidth:Y,borderTopWidth:Y,borderRightWidth:Y,borderBottomWidth:Y,borderLeftWidth:Y,borderRadius:Y,radius:Y,borderTopLeftRadius:Y,borderTopRightRadius:Y,borderBottomRightRadius:Y,borderBottomLeftRadius:Y,width:Y,maxWidth:Y,height:Y,maxHeight:Y,size:Y,top:Y,right:Y,bottom:Y,left:Y,padding:Y,paddingTop:Y,paddingRight:Y,paddingBottom:Y,paddingLeft:Y,margin:Y,marginTop:Y,marginRight:Y,marginBottom:Y,marginLeft:Y,rotate:yr,rotateX:yr,rotateY:yr,rotateZ:yr,scale:Ql,scaleX:Ql,scaleY:Ql,scaleZ:Ql,skew:yr,skewX:yr,skewY:yr,distance:Y,translateX:Y,translateY:Y,translateZ:Y,x:Y,y:Y,z:Y,perspective:Y,transformPerspective:Y,opacity:aa,originX:d_,originY:d_,originZ:Y,zIndex:f_,fillOpacity:aa,strokeOpacity:aa,numOctaves:f_};function fg(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let u=!1,c=!1,h=!0;for(const d in e){const m=e[d];if(u1(d)){i[d]=m;continue}const y=h1[d],S=WL(m,y);if(Qs.has(d)){if(u=!0,o[d]=S,!h)continue;m!==(y.default||0)&&(h=!1)}else d.startsWith("origin")?(c=!0,a[d]=S):s[d]=S}if(e.transform||(u||r?s.transform=$L(t.transform,n,h,r):s.transform&&(s.transform="none")),c){const{originX:d="50%",originY:m="50%",originZ:y=0}=a;s.transformOrigin=`${d} ${m} ${y}`}}const pg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function d1(t,e,n){for(const r in e)!Ft(e[r])&&!a1(r,n)&&(t[r]=e[r])}function QL({transformTemplate:t},e,n){return b.useMemo(()=>{const r=pg();return fg(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function YL(t,e,n){const r=t.style||{},s={};return d1(s,r,t),Object.assign(s,QL(t,e,n)),t.transformValues?t.transformValues(s):s}function XL(t,e,n){const r={},s=YL(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const JL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function dc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||JL.has(t)}let f1=t=>!dc(t);function ZL(t){t&&(f1=e=>e.startsWith("on")?!dc(e):t(e))}try{ZL(require("@emotion/is-prop-valid").default)}catch{}function eM(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(f1(s)||n===!0&&dc(s)||!e&&!dc(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function p_(t,e,n){return typeof t=="string"?t:Y.transform(e+n*t)}function tM(t,e,n){const r=p_(e,t.x,t.width),s=p_(n,t.y,t.height);return`${r} ${s}`}const nM={offset:"stroke-dashoffset",array:"stroke-dasharray"},rM={offset:"strokeDashoffset",array:"strokeDasharray"};function sM(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?nM:rM;t[i.offset]=Y.transform(-r);const o=Y.transform(e),a=Y.transform(n);t[i.array]=`${o} ${a}`}function mg(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:u=0,...c},h,d,m){if(fg(t,c,h,m),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:S,dimensions:w}=t;y.transform&&(w&&(S.transform=y.transform),delete y.transform),w&&(s!==void 0||i!==void 0||S.transform)&&(S.transformOrigin=tM(w,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),o!==void 0&&sM(y,o,a,u,!1)}const p1=()=>({...pg(),attrs:{}}),gg=t=>typeof t=="string"&&t.toLowerCase()==="svg";function iM(t,e,n,r){const s=b.useMemo(()=>{const i=p1();return mg(i,e,{enableHardwareAcceleration:!1},gg(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};d1(i,t.style,t),s.style={...i,...s.style}}return s}function oM(t=!1){return(n,r,s,{latestValues:i},o)=>{const u=(dg(n)?iM:XL)(r,i,o,n),h={...eM(r,typeof n=="string",t),...u,ref:s},{children:d}=r,m=b.useMemo(()=>Ft(d)?d.get():d,[d]);return b.createElement(n,{...h,children:m})}}function m1(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const g1=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function y1(t,e,n,r){m1(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(g1.has(s)?s:lg(s),e.attrs[s])}function yg(t,e){const{style:n}=t,r={};for(const s in n)(Ft(n[s])||e.style&&Ft(e.style[s])||a1(s,t))&&(r[s]=n[s]);return r}function v1(t,e){const n=yg(t,e);for(const r in t)if(Ft(t[r])||Ft(e[r])){const s=ol.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function vg(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function _1(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const fc=t=>Array.isArray(t),aM=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),lM=t=>fc(t)?t[t.length-1]||0:t;function wu(t){const e=Ft(t)?t.get():t;return aM(e)?e.toValue():e}function uM({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:cM(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const w1=t=>(e,n)=>{const r=b.useContext(nh),s=b.useContext(rh),i=()=>uM(t,e,r,s);return n?i():_1(i)};function cM(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=wu(i[m]);let{initial:o,animate:a}=t;const u=oh(t),c=i1(t);e&&c&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?a:o;return d&&typeof d!="boolean"&&!ih(d)&&(Array.isArray(d)?d:[d]).forEach(y=>{const S=vg(t,y);if(!S)return;const{transitionEnd:w,transition:P,...E}=S;for(const v in E){let _=E[v];if(Array.isArray(_)){const R=h?_.length-1:0;_=_[R]}_!==null&&(s[v]=_)}for(const v in w)s[v]=w[v]}),s}const Le=t=>t;class m_{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function hM(t){let e=new m_,n=new m_,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(u,c=!1,h=!1)=>{const d=h&&s,m=d?e:n;return c&&o.add(u),m.add(u)&&d&&s&&(r=e.order.length),u},cancel:u=>{n.remove(u),o.delete(u)},process:u=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const h=e.order[c];h(u),o.has(h)&&(a.schedule(h),t())}s=!1,i&&(i=!1,a.process(u))}};return a}const Yl=["prepare","read","update","preRender","render","postRender"],dM=40;function fM(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=Yl.reduce((d,m)=>(d[m]=hM(()=>n=!0),d),{}),o=d=>i[d].process(s),a=()=>{const d=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(d-s.timestamp,dM),1),s.timestamp=d,s.isProcessing=!0,Yl.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},u=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:Yl.reduce((d,m)=>{const y=i[m];return d[m]=(S,w=!1,P=!1)=>(n||u(),y.schedule(S,w,P)),d},{}),cancel:d=>Yl.forEach(m=>i[m].cancel(d)),state:s,steps:i}}const{schedule:we,cancel:ar,state:gt,steps:md}=fM(typeof requestAnimationFrame<"u"?requestAnimationFrame:Le,!0),pM={useVisualState:w1({scrapeMotionValuesFromProps:v1,createRenderState:p1,onMount:(t,e,{renderState:n,latestValues:r})=>{we.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),we.render(()=>{mg(n,r,{enableHardwareAcceleration:!1},gg(e.tagName),t.transformTemplate),y1(e,n)})}})},mM={useVisualState:w1({scrapeMotionValuesFromProps:yg,createRenderState:pg})};function gM(t,{forwardMotionProps:e=!1},n,r){return{...dg(t)?pM:mM,preloadedFeatures:n,useRender:oM(e),createVisualElement:r,Component:t}}function Gn(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const x1=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function lh(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const yM=t=>e=>x1(e)&&t(e,lh(e));function Xn(t,e,n,r){return Gn(t,e,yM(n),r)}const vM=(t,e)=>n=>e(t(n)),Hr=(...t)=>t.reduce(vM);function E1(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const g_=E1("dragHorizontal"),y_=E1("dragVertical");function T1(t){let e=!1;if(t==="y")e=y_();else if(t==="x")e=g_();else{const n=g_(),r=y_();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function S1(){const t=T1(!0);return t?(t(),!1):!0}class ls{constructor(e){this.isMounted=!1,this.node=e}update(){}}function v_(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||S1())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&we.update(()=>a[r](i,o))};return Xn(t.current,n,s,{passive:!t.getProps()[r]})}class _M extends ls{mount(){this.unmount=Hr(v_(this.node,!0),v_(this.node,!1))}unmount(){}}class wM extends ls{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Hr(Gn(this.node.current,"focus",()=>this.onFocus()),Gn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const I1=(t,e)=>e?t===e?!0:I1(t,e.parentElement):!1;function gd(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,lh(n))}class xM extends ls{constructor(){super(...arguments),this.removeStartListeners=Le,this.removeEndListeners=Le,this.removeAccessibleListeners=Le,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=Xn(window,"pointerup",(a,u)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h,globalTapTarget:d}=this.node.getProps();we.update(()=>{!d&&!I1(this.node.current,a.target)?h&&h(a,u):c&&c(a,u)})},{passive:!(r.onTap||r.onPointerUp)}),o=Xn(window,"pointercancel",(a,u)=>this.cancelPress(a,u),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Hr(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||gd("up",(u,c)=>{const{onTap:h}=this.node.getProps();h&&we.update(()=>h(u,c))})};this.removeEndListeners(),this.removeEndListeners=Gn(this.node.current,"keyup",o),gd("down",(a,u)=>{this.startPress(a,u)})},n=Gn(this.node.current,"keydown",e),r=()=>{this.isPressing&&gd("cancel",(i,o)=>this.cancelPress(i,o))},s=Gn(this.node.current,"blur",r);this.removeAccessibleListeners=Hr(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&we.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!S1()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&we.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=Xn(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Gn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Hr(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Zf=new WeakMap,yd=new WeakMap,EM=t=>{const e=Zf.get(t.target);e&&e(t)},TM=t=>{t.forEach(EM)};function SM({root:t,...e}){const n=t||document;yd.has(n)||yd.set(n,{});const r=yd.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(TM,{root:t,...e})),r[s]}function IM(t,e,n){const r=SM(e);return Zf.set(t,n),r.observe(t),()=>{Zf.delete(t),r.unobserve(t)}}const PM={some:0,all:1};class CM extends ls{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:PM[s]},a=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),m=c?h:d;m&&m(u)};return IM(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(AM(e,n))&&this.startObserver()}unmount(){}}function AM({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const kM={inView:{Feature:CM},tap:{Feature:xM},focus:{Feature:wM},hover:{Feature:_M}};function P1(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function RM(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function bM(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function uh(t,e,n){const r=t.getProps();return vg(r,e,n!==void 0?n:r.custom,RM(t),bM(t))}let _g=Le;const Rs=t=>t*1e3,Jn=t=>t/1e3,NM={current:!1},C1=t=>Array.isArray(t)&&typeof t[0]=="number";function A1(t){return!!(!t||typeof t=="string"&&k1[t]||C1(t)||Array.isArray(t)&&t.every(A1))}const qo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,k1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qo([0,.65,.55,1]),circOut:qo([.55,0,1,.45]),backIn:qo([.31,.01,.66,-.59]),backOut:qo([.33,1.53,.69,.99])};function R1(t){if(t)return C1(t)?qo(t):Array.isArray(t)?t.map(R1):k1[t]}function DM(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:u}={}){const c={[e]:n};u&&(c.offset=u);const h=R1(a);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function VM(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const b1=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,OM=1e-7,LM=12;function MM(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=b1(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>OM&&++a<LM);return o}function ul(t,e,n,r){if(t===e&&n===r)return Le;const s=i=>MM(i,0,1,t,n);return i=>i===0||i===1?i:b1(s(i),e,r)}const jM=ul(.42,0,1,1),FM=ul(0,0,.58,1),N1=ul(.42,0,.58,1),UM=t=>Array.isArray(t)&&typeof t[0]!="number",D1=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,V1=t=>e=>1-t(1-e),wg=t=>1-Math.sin(Math.acos(t)),O1=V1(wg),BM=D1(wg),L1=ul(.33,1.53,.69,.99),xg=V1(L1),zM=D1(xg),$M=t=>(t*=2)<1?.5*xg(t):.5*(2-Math.pow(2,-10*(t-1))),HM={linear:Le,easeIn:jM,easeInOut:N1,easeOut:FM,circIn:wg,circInOut:BM,circOut:O1,backIn:xg,backInOut:zM,backOut:L1,anticipate:$M},__=t=>{if(Array.isArray(t)){_g(t.length===4);const[e,n,r,s]=t;return ul(e,n,r,s)}else if(typeof t=="string")return HM[t];return t},Eg=(t,e)=>n=>!!(al(n)&&qL.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),M1=(t,e,n)=>r=>{if(!al(r))return r;const[s,i,o,a]=r.match(ah);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},WM=t=>Zr(0,255,t),vd={...Ys,transform:t=>Math.round(WM(t))},Ps={test:Eg("rgb","red"),parse:M1("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+vd.transform(t)+", "+vd.transform(e)+", "+vd.transform(n)+", "+la(aa.transform(r))+")"};function qM(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const ep={test:Eg("#"),parse:qM,transform:Ps.transform},vi={test:Eg("hsl","hue"),parse:M1("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+bn.transform(la(e))+", "+bn.transform(la(n))+", "+la(aa.transform(r))+")"},It={test:t=>Ps.test(t)||ep.test(t)||vi.test(t),parse:t=>Ps.test(t)?Ps.parse(t):vi.test(t)?vi.parse(t):ep.parse(t),transform:t=>al(t)?t:t.hasOwnProperty("red")?Ps.transform(t):vi.transform(t)},Ce=(t,e,n)=>-n*t+n*e+t;function _d(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function KM({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;s=_d(u,a,t+1/3),i=_d(u,a,t),o=_d(u,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const wd=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},GM=[ep,Ps,vi],QM=t=>GM.find(e=>e.test(t));function w_(t){const e=QM(t);let n=e.parse(t);return e===vi&&(n=KM(n)),n}const j1=(t,e)=>{const n=w_(t),r=w_(e),s={...n};return i=>(s.red=wd(n.red,r.red,i),s.green=wd(n.green,r.green,i),s.blue=wd(n.blue,r.blue,i),s.alpha=Ce(n.alpha,r.alpha,i),Ps.transform(s))};function YM(t){var e,n;return isNaN(t)&&al(t)&&(((e=t.match(ah))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(c1))===null||n===void 0?void 0:n.length)||0)>0}const F1={regex:HL,countKey:"Vars",token:"${v}",parse:Le},U1={regex:c1,countKey:"Colors",token:"${c}",parse:It.parse},B1={regex:ah,countKey:"Numbers",token:"${n}",parse:Ys.parse};function xd(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function pc(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&xd(n,F1),xd(n,U1),xd(n,B1),n}function z1(t){return pc(t).values}function $1(t){const{values:e,numColors:n,numVars:r,tokenised:s}=pc(t),i=e.length;return o=>{let a=s;for(let u=0;u<i;u++)u<r?a=a.replace(F1.token,o[u]):u<r+n?a=a.replace(U1.token,It.transform(o[u])):a=a.replace(B1.token,la(o[u]));return a}}const XM=t=>typeof t=="number"?0:t;function JM(t){const e=z1(t);return $1(t)(e.map(XM))}const es={test:YM,parse:z1,createTransformer:$1,getAnimatableNone:JM},H1=(t,e)=>n=>`${n>0?e:t}`;function W1(t,e){return typeof t=="number"?n=>Ce(t,e,n):It.test(t)?j1(t,e):t.startsWith("var(")?H1(t,e):K1(t,e)}const q1=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>W1(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},ZM=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=W1(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},K1=(t,e)=>{const n=es.createTransformer(e),r=pc(t),s=pc(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Hr(q1(r.values,s.values),n):H1(t,e)},Ua=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},x_=(t,e)=>n=>Ce(t,e,n);function ej(t){return typeof t=="number"?x_:typeof t=="string"?It.test(t)?j1:K1:Array.isArray(t)?q1:typeof t=="object"?ZM:x_}function tj(t,e,n){const r=[],s=n||ej(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||Le:e;a=Hr(u,a)}r.push(a)}return r}function G1(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(_g(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=tj(e,r,s),a=o.length,u=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const d=Ua(t[h],t[h+1],c);return o[h](d)};return n?c=>u(Zr(t[0],t[i-1],c)):u}function nj(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Ua(0,e,r);t.push(Ce(n,1,s))}}function rj(t){const e=[0];return nj(e,t.length-1),e}function sj(t,e){return t.map(n=>n*e)}function ij(t,e){return t.map(()=>e||N1).splice(0,t.length-1)}function mc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=UM(r)?r.map(__):__(r),i={done:!1,value:e[0]},o=sj(n&&n.length===e.length?n:rj(e),t),a=G1(o,e,{ease:Array.isArray(s)?s:ij(e,s)});return{calculatedDuration:t,next:u=>(i.value=a(u),i.done=u>=t,i)}}function Q1(t,e){return e?t*(1e3/e):0}const oj=5;function Y1(t,e,n){const r=Math.max(e-oj,0);return Q1(n-t(r),e-r)}const Ed=.001,aj=.01,lj=10,uj=.05,cj=1;function hj({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=Zr(uj,cj,o),t=Zr(aj,lj,Jn(t)),o<1?(s=c=>{const h=c*o,d=h*t,m=h-n,y=tp(c,o),S=Math.exp(-d);return Ed-m/y*S},i=c=>{const d=c*o*t,m=d*n+n,y=Math.pow(o,2)*Math.pow(c,2)*t,S=Math.exp(-d),w=tp(Math.pow(c,2),o);return(-s(c)+Ed>0?-1:1)*((m-y)*S)/w}):(s=c=>{const h=Math.exp(-c*t),d=(c-n)*t+1;return-Ed+h*d},i=c=>{const h=Math.exp(-c*t),d=(n-c)*(t*t);return h*d});const a=5/t,u=fj(s,i,a);if(t=Rs(t),isNaN(u))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const dj=12;function fj(t,e,n){let r=n;for(let s=1;s<dj;s++)r=r-t(r)/e(r);return r}function tp(t,e){return t*Math.sqrt(1-e*e)}const pj=["duration","bounce"],mj=["stiffness","damping","mass"];function E_(t,e){return e.some(n=>t[n]!==void 0)}function gj(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!E_(t,mj)&&E_(t,pj)){const n=hj(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function X1({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:u,mass:c,duration:h,velocity:d,isResolvedFromDuration:m}=gj({...r,velocity:-Jn(r.velocity||0)}),y=d||0,S=u/(2*Math.sqrt(a*c)),w=i-s,P=Jn(Math.sqrt(a/c)),E=Math.abs(w)<5;n||(n=E?.01:2),e||(e=E?.005:.5);let v;if(S<1){const _=tp(P,S);v=R=>{const V=Math.exp(-S*P*R);return i-V*((y+S*P*w)/_*Math.sin(_*R)+w*Math.cos(_*R))}}else if(S===1)v=_=>i-Math.exp(-P*_)*(w+(y+P*w)*_);else{const _=P*Math.sqrt(S*S-1);v=R=>{const V=Math.exp(-S*P*R),M=Math.min(_*R,300);return i-V*((y+S*P*w)*Math.sinh(M)+_*w*Math.cosh(M))/_}}return{calculatedDuration:m&&h||null,next:_=>{const R=v(_);if(m)o.done=_>=h;else{let V=y;_!==0&&(S<1?V=Y1(v,_,R):V=0);const M=Math.abs(V)<=n,C=Math.abs(i-R)<=e;o.done=M&&C}return o.value=o.done?i:R,o}}}function T_({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:u,restDelta:c=.5,restSpeed:h}){const d=t[0],m={done:!1,value:d},y=x=>a!==void 0&&x<a||u!==void 0&&x>u,S=x=>a===void 0?u:u===void 0||Math.abs(a-x)<Math.abs(u-x)?a:u;let w=n*e;const P=d+w,E=o===void 0?P:o(P);E!==P&&(w=E-d);const v=x=>-w*Math.exp(-x/r),_=x=>E+v(x),R=x=>{const I=v(x),A=_(x);m.done=Math.abs(I)<=c,m.value=m.done?E:A};let V,M;const C=x=>{y(m.value)&&(V=x,M=X1({keyframes:[m.value,S(m.value)],velocity:Y1(_,x,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:h}))};return C(0),{calculatedDuration:null,next:x=>{let I=!1;return!M&&V===void 0&&(I=!0,R(x),C(x)),V!==void 0&&x>V?M.next(x-V):(!I&&R(x),m)}}}const yj=t=>{const e=({timestamp:n})=>t(n);return{start:()=>we.update(e,!0),stop:()=>ar(e),now:()=>gt.isProcessing?gt.timestamp:performance.now()}},S_=2e4;function I_(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<S_;)e+=n,r=t.next(e);return e>=S_?1/0:e}const vj={decay:T_,inertia:T_,tween:mc,keyframes:mc,spring:X1};function gc({autoplay:t=!0,delay:e=0,driver:n=yj,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:u,onStop:c,onComplete:h,onUpdate:d,...m}){let y=1,S=!1,w,P;const E=()=>{P=new Promise(Q=>{w=Q})};E();let v;const _=vj[s]||mc;let R;_!==mc&&typeof r[0]!="number"&&(R=G1([0,100],r,{clamp:!1}),r=[0,100]);const V=_({...m,keyframes:r});let M;a==="mirror"&&(M=_({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let C="idle",x=null,I=null,A=null;V.calculatedDuration===null&&i&&(V.calculatedDuration=I_(V));const{calculatedDuration:N}=V;let D=1/0,k=1/0;N!==null&&(D=N+o,k=D*(i+1)-o);let he=0;const Qe=Q=>{if(I===null)return;y>0&&(I=Math.min(I,Q)),y<0&&(I=Math.min(Q-k/y,I)),x!==null?he=x:he=Math.round(Q-I)*y;const re=he-e*(y>=0?1:-1),pe=y>=0?re<0:re>k;he=Math.max(re,0),C==="finished"&&x===null&&(he=k);let Et=he,ut=V;if(i){const us=Math.min(he,k)/D;let an=Math.floor(us),bt=us%1;!bt&&us>=1&&(bt=1),bt===1&&an--,an=Math.min(an,i+1),!!(an%2)&&(a==="reverse"?(bt=1-bt,o&&(bt-=o/D)):a==="mirror"&&(ut=M)),Et=Zr(0,1,bt)*D}const et=pe?{done:!1,value:r[0]}:ut.next(Et);R&&(et.value=R(et.value));let{done:Rt}=et;!pe&&N!==null&&(Rt=y>=0?he>=k:he<=0);const co=x===null&&(C==="finished"||C==="running"&&Rt);return d&&d(et.value),co&&z(),et},ge=()=>{v&&v.stop(),v=void 0},ve=()=>{C="idle",ge(),w(),E(),I=A=null},z=()=>{C="finished",h&&h(),ge(),w()},q=()=>{if(S)return;v||(v=n(Qe));const Q=v.now();u&&u(),x!==null?I=Q-x:(!I||C==="finished")&&(I=Q),C==="finished"&&E(),A=I,x=null,C="running",v.start()};t&&q();const X={then(Q,re){return P.then(Q,re)},get time(){return Jn(he)},set time(Q){Q=Rs(Q),he=Q,x!==null||!v||y===0?x=Q:I=v.now()-Q/y},get duration(){const Q=V.calculatedDuration===null?I_(V):V.calculatedDuration;return Jn(Q)},get speed(){return y},set speed(Q){Q===y||!v||(y=Q,X.time=Jn(he))},get state(){return C},play:q,pause:()=>{C="paused",x=he},stop:()=>{S=!0,C!=="idle"&&(C="idle",c&&c(),ve())},cancel:()=>{A!==null&&Qe(A),ve()},complete:()=>{C="finished"},sample:Q=>(I=0,Qe(Q))};return X}function _j(t){let e;return()=>(e===void 0&&(e=t()),e)}const wj=_j(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),xj=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),Xl=10,Ej=2e4,Tj=(t,e)=>e.type==="spring"||t==="backgroundColor"||!A1(e.ease);function Sj(t,e,{onUpdate:n,onComplete:r,...s}){if(!(wj()&&xj.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,u,c=!1;const h=()=>{u=new Promise(_=>{a=_})};h();let{keyframes:d,duration:m=300,ease:y,times:S}=s;if(Tj(e,s)){const _=gc({...s,repeat:0,delay:0});let R={done:!1,value:d[0]};const V=[];let M=0;for(;!R.done&&M<Ej;)R=_.sample(M),V.push(R.value),M+=Xl;S=void 0,d=V,m=M-Xl,y="linear"}const w=DM(t.owner.current,e,d,{...s,duration:m,ease:y,times:S}),P=()=>{c=!1,w.cancel()},E=()=>{c=!0,we.update(P),a(),h()};return w.onfinish=()=>{c||(t.set(VM(d,s)),r&&r(),E())},{then(_,R){return u.then(_,R)},attachTimeline(_){return w.timeline=_,w.onfinish=null,Le},get time(){return Jn(w.currentTime||0)},set time(_){w.currentTime=Rs(_)},get speed(){return w.playbackRate},set speed(_){w.playbackRate=_},get duration(){return Jn(m)},play:()=>{o||(w.play(),ar(P))},pause:()=>w.pause(),stop:()=>{if(o=!0,w.playState==="idle")return;const{currentTime:_}=w;if(_){const R=gc({...s,autoplay:!1});t.setWithVelocity(R.sample(_-Xl).value,R.sample(_).value,Xl)}E()},complete:()=>{c||w.finish()},cancel:E}}function Ij({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:Le,pause:Le,stop:Le,then:i=>(i(),Promise.resolve()),cancel:Le,complete:Le});return e?gc({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const Pj={type:"spring",stiffness:500,damping:25,restSpeed:10},Cj=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Aj={type:"keyframes",duration:.8},kj={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Rj=(t,{keyframes:e})=>e.length>2?Aj:Qs.has(t)?t.startsWith("scale")?Cj(e[1]):Pj:kj,np=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(es.test(e)||e==="0")&&!e.startsWith("url(")),bj=new Set(["brightness","contrast","saturate","opacity"]);function Nj(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(ah)||[];if(!r)return t;const s=n.replace(r,"");let i=bj.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const Dj=/([a-z-]*)\(.*?\)/g,rp={...es,getAnimatableNone:t=>{const e=t.match(Dj);return e?e.map(Nj).join(" "):t}},Vj={...h1,color:It,backgroundColor:It,outlineColor:It,fill:It,stroke:It,borderColor:It,borderTopColor:It,borderRightColor:It,borderBottomColor:It,borderLeftColor:It,filter:rp,WebkitFilter:rp},Tg=t=>Vj[t];function J1(t,e){let n=Tg(t);return n!==rp&&(n=es),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Z1=t=>/^0[^.\s]+$/.test(t);function Oj(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Z1(t)}function Lj(t,e,n,r){const s=np(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const u=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),Oj(i[c])&&u.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&u.length&&a)for(let c=0;c<u.length;c++){const h=u[c];i[h]=J1(e,a)}return i}function Mj({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:u,elapsed:c,...h}){return!!Object.keys(h).length}function Sg(t,e){return t[e]||t.default||t}const jj={skipAnimations:!1},Ig=(t,e,n,r={})=>s=>{const i=Sg(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Rs(o);const u=Lj(e,t,n,i),c=u[0],h=u[u.length-1],d=np(t,c),m=np(t,h);let y={keyframes:u,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:S=>{e.set(S),i.onUpdate&&i.onUpdate(S)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(Mj(i)||(y={...y,...Rj(t,y)}),y.duration&&(y.duration=Rs(y.duration)),y.repeatDelay&&(y.repeatDelay=Rs(y.repeatDelay)),!d||!m||NM.current||i.type===!1||jj.skipAnimations)return Ij(y);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const S=Sj(e,t,y);if(S)return S}return gc(y)};function yc(t){return!!(Ft(t)&&t.add)}const eI=t=>/^\-?\d*\.?\d+$/.test(t);function Pg(t,e){t.indexOf(e)===-1&&t.push(e)}function Cg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ag{constructor(){this.subscriptions=[]}add(e){return Pg(this.subscriptions,e),()=>Cg(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Fj=t=>!isNaN(parseFloat(t));class Uj{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=gt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,we.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>we.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=Fj(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ag);const r=this.events[e].add(n);return e==="change"?()=>{r(),we.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Q1(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yi(t,e){return new Uj(t,e)}const tI=t=>e=>e.test(t),Bj={test:t=>t==="auto",parse:t=>t},nI=[Ys,Y,bn,yr,GL,KL,Bj],Oo=t=>nI.find(tI(t)),zj=[...nI,It,es],$j=t=>zj.find(tI(t));function Hj(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Yi(n))}function Wj(t,e){const n=uh(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=lM(i[o]);Hj(t,o,a)}}function qj(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const u=i[a],c=e[u];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(s=(r=n[u])!==null&&r!==void 0?r:t.readValue(u))!==null&&s!==void 0?s:e[u]),h!=null&&(typeof h=="string"&&(eI(h)||Z1(h))?h=parseFloat(h):!$j(h)&&es.test(c)&&(h=J1(u,c)),t.addValue(u,Yi(h,{owner:t})),n[u]===void 0&&(n[u]=h),h!==null&&t.setBaseTarget(u,h))}}function Kj(t,e){return e?(e[t]||e.default||e).from:void 0}function Gj(t,e,n){const r={};for(const s in t){const i=Kj(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function Qj({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function Yj(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function rI(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const u=t.getValue("willChange");r&&(i=r);const c=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const d in a){const m=t.getValue(d),y=a[d];if(!m||y===void 0||h&&Qj(h,d))continue;const S={delay:n,elapsed:0,...Sg(i||{},d)};if(window.HandoffAppearAnimations){const E=t.getProps()[s1];if(E){const v=window.HandoffAppearAnimations(E,d,m,we);v!==null&&(S.elapsed=v,S.isHandoff=!0)}}let w=!S.isHandoff&&!Yj(m,y);if(S.type==="spring"&&(m.getVelocity()||S.velocity)&&(w=!1),m.animation&&(w=!1),w)continue;m.start(Ig(d,m,y,t.shouldReduceMotion&&Qs.has(d)?{type:!1}:S));const P=m.animation;yc(u)&&(u.add(d),P.then(()=>u.remove(d))),c.push(P)}return o&&Promise.all(c).then(()=>{o&&Wj(t,o)}),c}function sp(t,e,n={}){const r=uh(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(rI(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:d}=s;return Xj(t,e,c+u,h,d,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,c]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function Xj(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,u=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(Jj).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(sp(c,e,{...i,delay:n+u(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Jj(t,e){return t.sortNodePosition(e)}function Zj(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>sp(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=sp(t,e,n);else{const s=typeof e=="function"?uh(t,e,n.custom):e;r=Promise.all(rI(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const e4=[...ug].reverse(),t4=ug.length;function n4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>Zj(t,n,r)))}function r4(t){let e=n4(t);const n=i4();let r=!0;const s=(u,c)=>{const h=uh(t,c);if(h){const{transition:d,transitionEnd:m,...y}=h;u={...u,...y,...m}}return u};function i(u){e=u(t)}function o(u,c){const h=t.getProps(),d=t.getVariantContext(!0)||{},m=[],y=new Set;let S={},w=1/0;for(let E=0;E<t4;E++){const v=e4[E],_=n[v],R=h[v]!==void 0?h[v]:d[v],V=ja(R),M=v===c?_.isActive:null;M===!1&&(w=E);let C=R===d[v]&&R!==h[v]&&V;if(C&&r&&t.manuallyAnimateOnMount&&(C=!1),_.protectedKeys={...S},!_.isActive&&M===null||!R&&!_.prevProp||ih(R)||typeof R=="boolean")continue;let I=s4(_.prevProp,R)||v===c&&_.isActive&&!C&&V||E>w&&V,A=!1;const N=Array.isArray(R)?R:[R];let D=N.reduce(s,{});M===!1&&(D={});const{prevResolvedValues:k={}}=_,he={...k,...D},Qe=ge=>{I=!0,y.has(ge)&&(A=!0,y.delete(ge)),_.needsAnimating[ge]=!0};for(const ge in he){const ve=D[ge],z=k[ge];if(S.hasOwnProperty(ge))continue;let q=!1;fc(ve)&&fc(z)?q=!P1(ve,z):q=ve!==z,q?ve!==void 0?Qe(ge):y.add(ge):ve!==void 0&&y.has(ge)?Qe(ge):_.protectedKeys[ge]=!0}_.prevProp=R,_.prevResolvedValues=D,_.isActive&&(S={...S,...D}),r&&t.blockInitialAnimation&&(I=!1),I&&(!C||A)&&m.push(...N.map(ge=>({animation:ge,options:{type:v,...u}})))}if(y.size){const E={};y.forEach(v=>{const _=t.getBaseTarget(v);_!==void 0&&(E[v]=_)}),m.push({animation:E})}let P=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(P=!1),r=!1,P?e(m):Promise.resolve()}function a(u,c,h){var d;if(n[u].isActive===c)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(y=>{var S;return(S=y.animationState)===null||S===void 0?void 0:S.setActive(u,c)}),n[u].isActive=c;const m=o(h,u);for(const y in n)n[y].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function s4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!P1(e,t):!1}function ps(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function i4(){return{animate:ps(!0),whileInView:ps(),whileHover:ps(),whileTap:ps(),whileDrag:ps(),whileFocus:ps(),exit:ps()}}class o4 extends ls{constructor(e){super(e),e.animationState||(e.animationState=r4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),ih(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let a4=0;class l4 extends ls{constructor(){super(...arguments),this.id=a4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const u4={animation:{Feature:o4},exit:{Feature:l4}},P_=(t,e)=>Math.abs(t-e);function c4(t,e){const n=P_(t.x,e.x),r=P_(t.y,e.y);return Math.sqrt(n**2+r**2)}class sI{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Sd(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=c4(d.offset,{x:0,y:0})>=3;if(!m&&!y)return;const{point:S}=d,{timestamp:w}=gt;this.history.push({...S,timestamp:w});const{onStart:P,onMove:E}=this.handlers;m||(P&&P(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),E&&E(this.lastMoveEvent,d)},this.handlePointerMove=(d,m)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Td(m,this.transformPagePoint),we.update(this.updatePoint,!0)},this.handlePointerUp=(d,m)=>{this.end();const{onEnd:y,onSessionEnd:S,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const P=Sd(d.type==="pointercancel"?this.lastMoveEventInfo:Td(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(d,P),S&&S(d,P)},!x1(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=lh(e),a=Td(o,this.transformPagePoint),{point:u}=a,{timestamp:c}=gt;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,Sd(a,this.history)),this.removeListeners=Hr(Xn(this.contextWindow,"pointermove",this.handlePointerMove),Xn(this.contextWindow,"pointerup",this.handlePointerUp),Xn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ar(this.updatePoint)}}function Td(t,e){return e?{point:e(t.point)}:t}function C_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Sd({point:t},e){return{point:t,delta:C_(t,iI(e)),offset:C_(t,h4(e)),velocity:d4(e,.1)}}function h4(t){return t[0]}function iI(t){return t[t.length-1]}function d4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=iI(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Rs(e)));)n--;if(!r)return{x:0,y:0};const i=Jn(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Gt(t){return t.max-t.min}function ip(t,e=0,n=.01){return Math.abs(t-e)<=n}function A_(t,e,n,r=.5){t.origin=r,t.originPoint=Ce(e.min,e.max,t.origin),t.scale=Gt(n)/Gt(e),(ip(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ce(n.min,n.max,t.origin)-t.originPoint,(ip(t.translate)||isNaN(t.translate))&&(t.translate=0)}function ua(t,e,n,r){A_(t.x,e.x,n.x,r?r.originX:void 0),A_(t.y,e.y,n.y,r?r.originY:void 0)}function k_(t,e,n){t.min=n.min+e.min,t.max=t.min+Gt(e)}function f4(t,e,n){k_(t.x,e.x,n.x),k_(t.y,e.y,n.y)}function R_(t,e,n){t.min=e.min-n.min,t.max=t.min+Gt(e)}function ca(t,e,n){R_(t.x,e.x,n.x),R_(t.y,e.y,n.y)}function p4(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ce(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ce(n,t,r.max):Math.min(t,n)),t}function b_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function m4(t,{top:e,left:n,bottom:r,right:s}){return{x:b_(t.x,n,s),y:b_(t.y,e,r)}}function N_(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function g4(t,e){return{x:N_(t.x,e.x),y:N_(t.y,e.y)}}function y4(t,e){let n=.5;const r=Gt(t),s=Gt(e);return s>r?n=Ua(e.min,e.max-r,t.min):r>s&&(n=Ua(t.min,t.max-s,e.min)),Zr(0,1,n)}function v4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const op=.35;function _4(t=op){return t===!1?t=0:t===!0&&(t=op),{x:D_(t,"left","right"),y:D_(t,"top","bottom")}}function D_(t,e,n){return{min:V_(t,e),max:V_(t,n)}}function V_(t,e){return typeof t=="number"?t:t[e]||0}const O_=()=>({translate:0,scale:1,origin:0,originPoint:0}),_i=()=>({x:O_(),y:O_()}),L_=()=>({min:0,max:0}),Ue=()=>({x:L_(),y:L_()});function Jt(t){return[t("x"),t("y")]}function oI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function w4({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function x4(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Id(t){return t===void 0||t===1}function ap({scale:t,scaleX:e,scaleY:n}){return!Id(t)||!Id(e)||!Id(n)}function vs(t){return ap(t)||aI(t)||t.z||t.rotate||t.rotateX||t.rotateY}function aI(t){return M_(t.x)||M_(t.y)}function M_(t){return t&&t!=="0%"}function vc(t,e,n){const r=t-n,s=e*r;return n+s}function j_(t,e,n,r,s){return s!==void 0&&(t=vc(t,s,r)),vc(t,n,r)+e}function lp(t,e=0,n=1,r,s){t.min=j_(t.min,e,n,r,s),t.max=j_(t.max,e,n,r,s)}function lI(t,{x:e,y:n}){lp(t.x,e.translate,e.scale,e.originPoint),lp(t.y,n.translate,n.scale,n.originPoint)}function E4(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const u=i.instance;u&&u.style&&u.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&wi(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,lI(t,o)),r&&vs(i.latestValues)&&wi(t,i.latestValues))}e.x=F_(e.x),e.y=F_(e.y)}function F_(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function wr(t,e){t.min=t.min+e,t.max=t.max+e}function U_(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=Ce(t.min,t.max,i);lp(t,e[n],e[r],o,e.scale)}const T4=["x","scaleX","originX"],S4=["y","scaleY","originY"];function wi(t,e){U_(t.x,e,T4),U_(t.y,e,S4)}function uI(t,e){return oI(x4(t.getBoundingClientRect(),e))}function I4(t,e,n){const r=uI(t,n),{scroll:s}=e;return s&&(wr(r.x,s.offset.x),wr(r.y,s.offset.y)),r}const cI=({current:t})=>t?t.ownerDocument.defaultView:null,P4=new WeakMap;class C4{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ue(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(lh(h,"page").point)},i=(h,d)=>{const{drag:m,dragPropagation:y,onDragStart:S}=this.getProps();if(m&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=T1(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Jt(P=>{let E=this.getAxisMotionValue(P).get()||0;if(bn.test(E)){const{projection:v}=this.visualElement;if(v&&v.layout){const _=v.layout.layoutBox[P];_&&(E=Gt(_)*(parseFloat(E)/100))}}this.originPoint[P]=E}),S&&we.update(()=>S(h,d),!1,!0);const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:S,onDrag:w}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:P}=d;if(y&&this.currentDirection===null){this.currentDirection=A4(P),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",d.point,P),this.updateAxis("y",d.point,P),this.visualElement.render(),w&&w(h,d)},a=(h,d)=>this.stop(h,d),u=()=>Jt(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new sI(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:cI(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&we.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!Jl(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=p4(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&yi(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=m4(s.layoutBox,n):this.constraints=!1,this.elastic=_4(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Jt(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=v4(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!yi(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=I4(r,s.root,this.visualElement.getTransformPagePoint());let o=g4(s.layout.layoutBox,i);if(n){const a=n(w4(o));this.hasMutatedConstraints=!!a,a&&(o=oI(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},c=Jt(h=>{if(!Jl(h,n,this.currentDirection))return;let d=u&&u[h]||{};o&&(d={min:0,max:0});const m=s?200:1e6,y=s?40:1e7,S={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,S)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(Ig(e,r,0,n))}stopAnimation(){Jt(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Jt(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Jt(n=>{const{drag:r}=this.getProps();if(!Jl(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Ce(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!yi(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Jt(o=>{const a=this.getAxisMotionValue(o);if(a){const u=a.get();s[o]=y4({min:u,max:u},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Jt(o=>{if(!Jl(o,e,null))return;const a=this.getAxisMotionValue(o),{min:u,max:c}=this.constraints[o];a.set(Ce(u,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;P4.set(this.visualElement,this);const e=this.visualElement.current,n=Xn(e,"pointerdown",u=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();yi(u)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=Gn(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(Jt(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=u[h].translate,d.set(d.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=op,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Jl(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function A4(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class k4 extends ls{constructor(e){super(e),this.removeGroupControls=Le,this.removeListeners=Le,this.controls=new C4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Le}unmount(){this.removeGroupControls(),this.removeListeners()}}const B_=t=>(e,n)=>{t&&we.update(()=>t(e,n))};class R4 extends ls{constructor(){super(...arguments),this.removePointerDownListener=Le}onPointerDown(e){this.session=new sI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:cI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:B_(e),onStart:B_(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&we.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=Xn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function b4(){const t=b.useContext(rh);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=b.useId();return b.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const xu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function z_(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Lo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Y.test(t))t=parseFloat(t);else return t;const n=z_(t,e.target.x),r=z_(t,e.target.y);return`${n}% ${r}%`}},N4={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=es.parse(t);if(s.length>5)return r;const i=es.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,u=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=u;const c=Ce(a,u,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class D4 extends Wr.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;UL(V4),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),xu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||we.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function hI(t){const[e,n]=b4(),r=b.useContext(hg);return Wr.createElement(D4,{...t,layoutGroup:r,switchLayoutGroup:b.useContext(o1),isPresent:e,safeToRemove:n})}const V4={borderRadius:{...Lo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Lo,borderTopRightRadius:Lo,borderBottomLeftRadius:Lo,borderBottomRightRadius:Lo,boxShadow:N4},dI=["TopLeft","TopRight","BottomLeft","BottomRight"],O4=dI.length,$_=t=>typeof t=="string"?parseFloat(t):t,H_=t=>typeof t=="number"||Y.test(t);function L4(t,e,n,r,s,i){s?(t.opacity=Ce(0,n.opacity!==void 0?n.opacity:1,M4(r)),t.opacityExit=Ce(e.opacity!==void 0?e.opacity:1,0,j4(r))):i&&(t.opacity=Ce(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<O4;o++){const a=`border${dI[o]}Radius`;let u=W_(e,a),c=W_(n,a);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||H_(u)===H_(c)?(t[a]=Math.max(Ce($_(u),$_(c),r),0),(bn.test(c)||bn.test(u))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ce(e.rotate||0,n.rotate||0,r))}function W_(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const M4=fI(0,.5,O1),j4=fI(.5,.95,Le);function fI(t,e,n){return r=>r<t?0:r>e?1:n(Ua(t,e,r))}function q_(t,e){t.min=e.min,t.max=e.max}function Xt(t,e){q_(t.x,e.x),q_(t.y,e.y)}function K_(t,e,n,r,s){return t-=e,t=vc(t,1/n,r),s!==void 0&&(t=vc(t,1/s,r)),t}function F4(t,e=0,n=1,r=.5,s,i=t,o=t){if(bn.test(e)&&(e=parseFloat(e),e=Ce(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ce(i.min,i.max,r);t===i&&(a-=e),t.min=K_(t.min,e,n,a,s),t.max=K_(t.max,e,n,a,s)}function G_(t,e,[n,r,s],i,o){F4(t,e[n],e[r],e[s],e.scale,i,o)}const U4=["x","scaleX","originX"],B4=["y","scaleY","originY"];function Q_(t,e,n,r){G_(t.x,e,U4,n?n.x:void 0,r?r.x:void 0),G_(t.y,e,B4,n?n.y:void 0,r?r.y:void 0)}function Y_(t){return t.translate===0&&t.scale===1}function pI(t){return Y_(t.x)&&Y_(t.y)}function z4(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function mI(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function X_(t){return Gt(t.x)/Gt(t.y)}class $4{constructor(){this.members=[]}add(e){Pg(this.members,e),e.scheduleRender()}remove(e){if(Cg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function J_(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:u,rotateX:c,rotateY:h}=n;u&&(r+=`rotate(${u}deg) `),c&&(r+=`rotateX(${c}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const H4=(t,e)=>t.depth-e.depth;class W4{constructor(){this.children=[],this.isDirty=!1}add(e){Pg(this.children,e),this.isDirty=!0}remove(e){Cg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(H4),this.isDirty=!1,this.children.forEach(e)}}function q4(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(ar(r),t(i-e))};return we.read(r,!0),()=>ar(r)}function K4(t){window.MotionDebug&&window.MotionDebug.record(t)}function G4(t){return t instanceof SVGElement&&t.tagName!=="svg"}function Q4(t,e,n){const r=Ft(t)?t:Yi(t);return r.start(Ig("",r,e,n)),r.animation}const Z_=["","X","Y","Z"],Y4={visibility:"hidden"},ew=1e3;let X4=0;const _s={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function gI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=X4++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,_s.totalNodes=_s.resolvedTargetDeltas=_s.recalculatedProjection=0,this.nodes.forEach(eF),this.nodes.forEach(iF),this.nodes.forEach(oF),this.nodes.forEach(tF),K4(_s)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new W4)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ag),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=G4(o),this.instance=o;const{layoutId:u,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||u)&&(this.isLayoutDirty=!0),t){let d;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=q4(m,250),xu.hasAnimatedSinceResize&&(xu.hasAnimatedSinceResize=!1,this.nodes.forEach(nw))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:m,hasRelativeTargetChanged:y,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||hF,{onLayoutAnimationStart:P,onLayoutAnimationComplete:E}=h.getProps(),v=!this.targetLayout||!mI(this.targetLayout,S)||y,_=!m&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||_||m&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,_);const R={...Sg(w,"layout"),onPlay:P,onComplete:E};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R)}else m||nw(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ar(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(tw);return}this.isUpdating||this.nodes.forEach(rF),this.isUpdating=!1,this.nodes.forEach(sF),this.nodes.forEach(J4),this.nodes.forEach(Z4),this.clearAllSnapshots();const a=performance.now();gt.delta=Zr(0,1e3/60,a-gt.timestamp),gt.timestamp=a,gt.isProcessing=!0,md.update.process(gt),md.preRender.process(gt),md.render.process(gt),gt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(nF),this.sharedNodes.forEach(lF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,we.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){we.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ue(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!pI(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||vs(this.latestValues)||h)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),dF(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ue();const a=o.measureViewportBox(),{scroll:u}=this.root;return u&&(wr(a.x,u.offset.x),wr(a.y,u.offset.y)),a}removeElementScroll(o){const a=Ue();Xt(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:d}=c;if(c!==this.root&&h&&d.layoutScroll){if(h.isRoot){Xt(a,o);const{scroll:m}=this.root;m&&(wr(a.x,-m.offset.x),wr(a.y,-m.offset.y))}wr(a.x,h.offset.x),wr(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const u=Ue();Xt(u,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&wi(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),vs(h.latestValues)&&wi(u,h.latestValues)}return vs(this.latestValues)&&wi(u,this.latestValues),u}removeTransform(o){const a=Ue();Xt(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!vs(c.latestValues))continue;ap(c.latestValues)&&c.updateSnapshot();const h=Ue(),d=c.measurePageBox();Xt(h,d),Q_(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return vs(this.latestValues)&&Q_(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:m}=this.options;if(!(!this.layout||!(d||m))){if(this.resolvedRelativeTargetAt=gt.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ue(),this.relativeTargetOrigin=Ue(),ca(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),Xt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ue(),this.targetWithTransforms=Ue()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),f4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xt(this.target,this.layout.layoutBox),lI(this.target,this.targetDelta)):Xt(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ue(),this.relativeTargetOrigin=Ue(),ca(this.relativeTargetOrigin,this.target,y.target),Xt(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}_s.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||ap(this.parent.latestValues)||aI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===gt.timestamp&&(c=!1),c)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;Xt(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;E4(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:S}=a;if(!S){this.projectionTransform&&(this.projectionDelta=_i(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=_i(),this.projectionDeltaWithTransform=_i());const w=this.projectionTransform;ua(this.projectionDelta,this.layoutCorrected,S,this.latestValues),this.projectionTransform=J_(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==m||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S)),_s.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const u=this.snapshot,c=u?u.latestValues:{},h={...this.latestValues},d=_i();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Ue(),y=u?u.source:void 0,S=this.layout?this.layout.source:void 0,w=y!==S,P=this.getStack(),E=!P||P.members.length<=1,v=!!(w&&!E&&this.options.crossfade===!0&&!this.path.some(cF));this.animationProgress=0;let _;this.mixTargetDelta=R=>{const V=R/1e3;rw(d.x,o.x,V),rw(d.y,o.y,V),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(ca(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),uF(this.relativeTarget,this.relativeTargetOrigin,m,V),_&&z4(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Ue()),Xt(_,this.relativeTarget)),w&&(this.animationValues=h,L4(h,c,this.latestValues,V,v,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ar(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=we.update(()=>{xu.hasAnimatedSinceResize=!0,this.currentAnimation=Q4(0,ew,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ew),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:c,latestValues:h}=o;if(!(!a||!u||!c)){if(this!==o&&this.layout&&c&&yI(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||Ue();const d=Gt(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+d;const m=Gt(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}Xt(a,u),wi(a,h),ua(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new $4),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(a=!0),!a)return;const c={};for(let h=0;h<Z_.length;h++){const d="rotate"+Z_[h];u[d]&&(c[d]=u[d],o.setStaticValue(d,0))}o.render();for(const h in c)o.setStaticValue(h,c[h]);o.scheduleRender()}getProjectionStyles(o){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Y4;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=wu(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=wu(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!vs(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const m=d.animationValues||d.latestValues;this.applyTransformsToTarget(),c.transform=J_(this.projectionDeltaWithTransform,this.treeScale,m),h&&(c.transform=h(m,c.transform));const{x:y,y:S}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${S.origin*100}% 0`,d.animationValues?c.opacity=d===this?(u=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=d===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const w in hc){if(m[w]===void 0)continue;const{correct:P,applyTo:E}=hc[w],v=c.transform==="none"?m[w]:P(m[w],d);if(E){const _=E.length;for(let R=0;R<_;R++)c[E[R]]=v}else c[w]=v}return this.options.layoutId&&(c.pointerEvents=d===this?wu(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(tw),this.root.sharedNodes.clear()}}}function J4(t){t.updateLayout()}function Z4(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?Jt(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],y=Gt(m);m.min=r[d].min,m.max=m.min+y}):yI(i,n.layoutBox,r)&&Jt(d=>{const m=o?n.measuredBox[d]:n.layoutBox[d],y=Gt(r[d]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+y)});const a=_i();ua(a,r,n.layoutBox);const u=_i();o?ua(u,t.applyTransform(s,!0),n.measuredBox):ua(u,r,n.layoutBox);const c=!pI(a);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:m,layout:y}=d;if(m&&y){const S=Ue();ca(S,n.layoutBox,m.layoutBox);const w=Ue();ca(w,r,y.layoutBox),mI(S,w)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=S,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function eF(t){_s.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function tF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function nF(t){t.clearSnapshot()}function tw(t){t.clearMeasurements()}function rF(t){t.isLayoutDirty=!1}function sF(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function nw(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function iF(t){t.resolveTargetDelta()}function oF(t){t.calcProjection()}function aF(t){t.resetRotation()}function lF(t){t.removeLeadSnapshot()}function rw(t,e,n){t.translate=Ce(e.translate,0,n),t.scale=Ce(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function sw(t,e,n,r){t.min=Ce(e.min,n.min,r),t.max=Ce(e.max,n.max,r)}function uF(t,e,n,r){sw(t.x,e.x,n.x,r),sw(t.y,e.y,n.y,r)}function cF(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const hF={duration:.45,ease:[.4,0,.1,1]},iw=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),ow=iw("applewebkit/")&&!iw("chrome/")?Math.round:Le;function aw(t){t.min=ow(t.min),t.max=ow(t.max)}function dF(t){aw(t.x),aw(t.y)}function yI(t,e,n){return t==="position"||t==="preserve-aspect"&&!ip(X_(e),X_(n),.2)}const fF=gI({attachResizeListener:(t,e)=>Gn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Pd={current:void 0},vI=gI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Pd.current){const t=new fF({});t.mount(window),t.setOptions({layoutScroll:!0}),Pd.current=t}return Pd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),pF={pan:{Feature:R4},drag:{Feature:k4,ProjectionNode:vI,MeasureLayout:hI}},mF=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function gF(t){const e=mF.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function up(t,e,n=1){const[r,s]=gF(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return eI(o)?parseFloat(o):o}else return Jf(s)?up(s,e,n+1):s}function yF(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!Jf(i))return;const o=up(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!Jf(i))continue;const o=up(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const vF=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),_I=t=>vF.has(t),_F=t=>Object.keys(t).some(_I),lw=t=>t===Ys||t===Y,uw=(t,e)=>parseFloat(t.split(", ")[e]),cw=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return uw(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?uw(i[1],t):0}},wF=new Set(["x","y","z"]),xF=ol.filter(t=>!wF.has(t));function EF(t){const e=[];return xF.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Xi={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:cw(4,13),y:cw(5,14)};Xi.translateX=Xi.x;Xi.translateY=Xi.y;const TF=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=Xi[c](r,i)}),e.render();const u=e.measureViewportBox();return n.forEach(c=>{const h=e.getValue(c);h&&h.jump(a[c]),t[c]=Xi[c](u,i)}),t},SF=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(_I);let i=[],o=!1;const a=[];if(s.forEach(u=>{const c=t.getValue(u);if(!t.hasValue(u))return;let h=n[u],d=Oo(h);const m=e[u];let y;if(fc(m)){const S=m.length,w=m[0]===null?1:0;h=m[w],d=Oo(h);for(let P=w;P<S&&m[P]!==null;P++)y?_g(Oo(m[P])===y):y=Oo(m[P])}else y=Oo(m);if(d!==y)if(lw(d)&&lw(y)){const S=c.get();typeof S=="string"&&c.set(parseFloat(S)),typeof m=="string"?e[u]=parseFloat(m):Array.isArray(m)&&y===Y&&(e[u]=m.map(parseFloat))}else d!=null&&d.transform&&(y!=null&&y.transform)&&(h===0||m===0)?h===0?c.set(y.transform(h)):e[u]=d.transform(m):(o||(i=EF(t),o=!0),a.push(u),r[u]=r[u]!==void 0?r[u]:e[u],c.jump(m))}),a.length){const u=a.indexOf("height")>=0?window.pageYOffset:null,c=TF(e,t,a);return i.length&&i.forEach(([h,d])=>{t.getValue(h).set(d)}),t.render(),sh&&u!==null&&window.scrollTo({top:u}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function IF(t,e,n,r){return _F(e)?SF(t,e,n,r):{target:e,transitionEnd:r}}const PF=(t,e,n,r)=>{const s=yF(t,e,r);return e=s.target,r=s.transitionEnd,IF(t,e,n,r)},cp={current:null},wI={current:!1};function CF(){if(wI.current=!0,!!sh)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>cp.current=t.matches;t.addListener(e),e()}else cp.current=!1}function AF(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(Ft(i))t.addValue(s,i),yc(r)&&r.add(s);else if(Ft(o))t.addValue(s,Yi(i,{owner:t})),yc(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,Yi(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const hw=new WeakMap,xI=Object.keys(Fa),kF=xI.length,dw=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],RF=cg.length;class bF{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>we.render(this.render,!1,!0);const{latestValues:a,renderState:u}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=oh(n),this.isVariantNode=i1(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const m=h[d];a[d]!==void 0&&Ft(m)&&(m.set(a[d],!1),yc(c)&&c.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,hw.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),wI.current||CF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:cp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){hw.delete(this.current),this.projection&&this.projection.unmount(),ar(this.notifyUpdate),ar(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=Qs.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&we.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let u=0;u<kF;u++){const c=xI[u],{isEnabled:h,Feature:d,ProjectionNode:m,MeasureLayout:y}=Fa[c];m&&(o=m),h(n)&&(!this.features[c]&&d&&(this.features[c]=new d(this)),y&&(a=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:c,drag:h,dragConstraints:d,layoutScroll:m,layoutRoot:y}=n;this.projection.setOptions({layoutId:u,layout:c,alwaysMeasureLayout:!!h||d&&yi(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:y})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ue()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dw.length;r++){const s=dw[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=AF(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<RF;r++){const s=cg[r],i=this.props[s];(ja(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=Yi(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=vg(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ft(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ag),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class EI extends bF{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=Gj(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){qj(this,r,o);const a=PF(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function NF(t){return window.getComputedStyle(t)}class DF extends EI{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Qs.has(n)){const r=Tg(n);return r&&r.default||0}else{const r=NF(e),s=(u1(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return uI(e,n)}build(e,n,r,s){fg(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return yg(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ft(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){m1(e,n,r,s)}}class VF extends EI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Qs.has(n)){const r=Tg(n);return r&&r.default||0}return n=g1.has(n)?n:lg(n),e.getAttribute(n)}measureInstanceViewportBox(){return Ue()}scrapeMotionValuesFromProps(e,n){return v1(e,n)}build(e,n,r,s){mg(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){y1(e,n,r,s)}mount(e){this.isSVGTag=gg(e.tagName),super.mount(e)}}const OF=(t,e)=>dg(t)?new VF(e,{enableHardwareAcceleration:!1}):new DF(e,{enableHardwareAcceleration:!0}),LF={layout:{ProjectionNode:vI,MeasureLayout:hI}},MF={...u4,...kM,...pF,...LF},ze=jL((t,e)=>gM(t,e,MF,OF));function TI(){const t=b.useRef(!1);return ag(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function jF(){const t=TI(),[e,n]=b.useState(0),r=b.useCallback(()=>{t.current&&n(e+1)},[e]);return[b.useCallback(()=>we.postRender(r),[r]),e]}class FF extends b.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function UF({children:t,isPresent:e}){const n=b.useId(),r=b.useRef(null),s=b.useRef({width:0,height:0,top:0,left:0});return b.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:u}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),b.createElement(FF,{isPresent:e,childRef:r,sizeRef:s},b.cloneElement(t,{ref:r}))}const Cd=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=_1(BF),u=b.useId(),c=b.useMemo(()=>({id:u,initial:e,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const d of a.values())if(!d)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return b.useMemo(()=>{a.forEach((h,d)=>a.set(d,!1))},[n]),b.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=b.createElement(UF,{isPresent:n},t)),b.createElement(rh.Provider,{value:c},t)};function BF(){return new Map}function zF(t){return b.useEffect(()=>()=>t(),[])}const ws=t=>t.key||"";function $F(t,e){t.forEach(n=>{const r=ws(n);e.set(r,n)})}function HF(t){const e=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&e.push(n)}),e}const WF=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=b.useContext(hg).forceRender||jF()[0],u=TI(),c=HF(t);let h=c;const d=b.useRef(new Map).current,m=b.useRef(h),y=b.useRef(new Map).current,S=b.useRef(!0);if(ag(()=>{S.current=!1,$F(c,y),m.current=h}),zF(()=>{S.current=!0,y.clear(),d.clear()}),S.current)return b.createElement(b.Fragment,null,h.map(v=>b.createElement(Cd,{key:ws(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},v)));h=[...h];const w=m.current.map(ws),P=c.map(ws),E=w.length;for(let v=0;v<E;v++){const _=w[v];P.indexOf(_)===-1&&!d.has(_)&&d.set(_,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((v,_)=>{if(P.indexOf(_)!==-1)return;const R=y.get(_);if(!R)return;const V=w.indexOf(_);let M=v;if(!M){const C=()=>{d.delete(_);const x=Array.from(y.keys()).filter(I=>!P.includes(I));if(x.forEach(I=>y.delete(I)),m.current=c.filter(I=>{const A=ws(I);return A===_||x.includes(A)}),!d.size){if(u.current===!1)return;a(),r&&r()}};M=b.createElement(Cd,{key:ws(R),isPresent:!1,onExitComplete:C,custom:e,presenceAffectsLayout:i,mode:o},R),d.set(_,M)}h.splice(V,0,M)}),h=h.map(v=>{const _=v.key;return d.has(_)?v:b.createElement(Cd,{key:ws(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),b.createElement(b.Fragment,null,d.size?h:h.map(v=>b.cloneElement(v)))};function qF(){const{currentUser:t,logout:e}=Mn(),{cartCount:n}=il(),[r,s]=b.useState(!1),[i,o]=b.useState(""),[a,u]=b.useState(""),c=cr(),h=ro(),[d,m]=b.useState(!1),y=async()=>{try{await e(),c("/login")}catch(P){console.error("Failed to log out",P)}};b.useEffect(()=>{let P=!0;async function E(){if(!t){P&&(o(""),u(""));return}try{const v=zs($s,"users",t.uid),_=await th(v);if(!P)return;if(_.exists()){const R=_.data();o(R.name||""),u(R.photoURL||"")}else o(""),u("")}catch{o(""),u("")}}return E(),()=>{P=!1}},[t]),b.useEffect(()=>{function P(){m(window.scrollY>8)}return P(),window.addEventListener("scroll",P,{passive:!0}),()=>window.removeEventListener("scroll",P)},[]);const S="relative group text-love-dark font-medium";function w({to:P,children:E}){const v=h.pathname===P;return p.jsxs(ae,{to:P,className:`${S} hover:text-love-red transition-colors`,children:[p.jsx("span",{children:E}),p.jsx("span",{className:`absolute left-0 -bottom-1 h-0.5 bg-gradient-to-r from-love-red to-love-pink transition-all duration-300 ${v?"w-full":"w-0 group-hover:w-full"}`})]})}return p.jsxs("nav",{className:`sticky top-0 z-50 border-b border-love-pink/30 transition-all ${d?"bg-white/85 backdrop-blur-xl shadow-lg":"bg-love-light/80 backdrop-blur-md"}`,children:[p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:`flex justify-between ${d?"h-14":"h-16"} transition-all`,children:[p.jsx("div",{className:"flex items-center",children:p.jsxs(ae,{to:"/",className:"flex items-center space-x-2 group",children:[p.jsx(ze.div,{whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400,damping:10},children:p.jsx(Rn,{className:"h-8 w-8 text-love-red fill-current group-hover:animate-pulse"})}),p.jsx(ze.span,{initial:!1,animate:{color:d?"#0f172a":"#1f2937"},className:"font-cursive text-3xl font-bold",children:"LoveCraft"})]})}),p.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[p.jsx(w,{to:"/",children:"Home"}),p.jsx(w,{to:"/products",children:"Gifts"}),p.jsx(w,{to:"/contact",children:"Contact"}),p.jsx(w,{to:"/wish",children:"Wish"}),p.jsxs(ae,{to:"/cart",className:"relative group text-love-dark hover:text-love-red transition-colors",children:[p.jsx(ze.div,{whileHover:{scale:1.1},className:"relative",children:p.jsx(og,{className:"h-6 w-6"})}),n>0&&p.jsx("span",{className:"absolute -top-2 -right-2 bg-love-red text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-bounce",children:n})]}),t?p.jsxs("div",{className:"relative group",children:[p.jsxs("button",{className:"flex items-center space-x-2 text-love-dark hover:text-love-red",children:[a||t.photoURL?p.jsx("img",{src:a||t.photoURL,alt:"Avatar",className:"h-8 w-8 rounded-full object-cover border border-love-pink/30"}):p.jsx(CL,{className:"h-6 w-6"}),p.jsx("span",{className:"max-w-[160px] truncate",children:i||t.displayName||t.email})]}),p.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-right",children:[p.jsx(ae,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-love-light",children:"Profile"}),p.jsx("button",{onClick:y,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-love-light",children:"Sign out"})]})]}):p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsx(w,{to:"/login",children:"Login"}),p.jsx(ae,{to:"/signup",className:"bg-love-red text-white px-4 py-2 rounded-full hover:bg-red-700 transition-colors shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"Sign Up"})]})]}),p.jsx("div",{className:"md:hidden flex items-center",children:p.jsx("button",{onClick:()=>s(!r),className:"text-love-dark hover:text-love-red focus:outline-none",children:r?p.jsx(AL,{className:"h-6 w-6"}):p.jsx(wL,{className:"h-6 w-6"})})})]})}),p.jsx(WF,{children:r&&p.jsx(ze.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white border-t border-love-pink/30 overflow-hidden",children:p.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[p.jsx(ae,{to:"/",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Home"}),p.jsx(ae,{to:"/products",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Gifts"}),p.jsx(ae,{to:"/contact",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Contact"}),p.jsx(ae,{to:"/wish",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Wish"}),p.jsx(ae,{to:"/cart",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Cart"}),t?p.jsxs(p.Fragment,{children:[p.jsx(ae,{to:"/profile",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Profile"}),p.jsx("button",{onClick:()=>{y(),s(!1)},className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Sign Out"})]}):p.jsxs(p.Fragment,{children:[p.jsx(ae,{to:"/login",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Login"}),p.jsx(ae,{to:"/signup",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Sign Up"})]})]})})})]})}function KF(){return p.jsx("footer",{className:"bg-white border-t border-love-pink/30 pt-12 pb-8",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[p.jsxs("div",{className:"col-span-1 md:col-span-1",children:[p.jsxs(ae,{to:"/",className:"flex items-center space-x-2 mb-4",children:[p.jsx(Rn,{className:"h-6 w-6 text-love-red fill-current"}),p.jsx("span",{className:"font-cursive text-2xl text-love-dark font-bold",children:"LoveCraft"})]}),p.jsx("p",{className:"text-gray-600 text-sm",children:"Handcrafted gifts for your special moments. Celebrating love, one gift at a time."})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-love-dark mb-4",children:"Shop"}),p.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[p.jsx("li",{children:p.jsx(ae,{to:"/products",className:"hover:text-love-red transition-colors",children:"All Gifts"})}),p.jsx("li",{children:p.jsx(ae,{to:"/products?category=handmade",className:"hover:text-love-red transition-colors",children:"Handmade Crafts"})}),p.jsx("li",{children:p.jsx(ae,{to:"/products?category=personalized",className:"hover:text-love-red transition-colors",children:"Personalized Items"})}),p.jsx("li",{children:p.jsx(ae,{to:"/products?category=cards",className:"hover:text-love-red transition-colors",children:"Gift Cards"})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-love-dark mb-4",children:"Support"}),p.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[p.jsx("li",{children:p.jsx(ae,{to:"/contact",className:"hover:text-love-red transition-colors",children:"Contact Us"})}),p.jsx("li",{children:p.jsx(ae,{to:"/faq",className:"hover:text-love-red transition-colors",children:"FAQs"})}),p.jsx("li",{children:p.jsx(ae,{to:"/shipping",className:"hover:text-love-red transition-colors",children:"Shipping Info"})}),p.jsx("li",{children:p.jsx(ae,{to:"/returns",className:"hover:text-love-red transition-colors",children:"Returns"})})]})]}),p.jsxs("div",{children:[p.jsx("h3",{className:"font-semibold text-love-dark mb-4",children:"Stay in Love"}),p.jsxs("div",{className:"flex space-x-4 mb-4",children:[p.jsx("a",{href:"#",className:"text-gray-400 hover:text-love-red transition-colors",children:p.jsx(_L,{className:"h-5 w-5"})}),p.jsx("a",{href:"#",className:"text-gray-400 hover:text-love-red transition-colors",children:p.jsx(gL,{className:"h-5 w-5"})}),p.jsx("a",{href:"#",className:"text-gray-400 hover:text-love-red transition-colors",children:p.jsx(PL,{className:"h-5 w-5"})})]}),p.jsxs("p",{className:"text-xs text-gray-500",children:[" ",new Date().getFullYear()," LoveCraft. All rights reserved."]})]})]})})})}function GF(){const t={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.8}}};return p.jsxs(ze.div,{initial:"hidden",animate:"visible",variants:t,className:"space-y-16 pb-16",children:[p.jsxs("section",{className:"relative h-[80vh] flex items-center justify-center overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-love-light via-white to-love-light opacity-90 z-10"}),p.jsx("div",{className:"absolute inset-0 bg-hearts-pattern opacity-10 z-0"}),p.jsx("div",{className:"relative z-20 text-center px-4 max-w-4xl mx-auto",children:p.jsxs(ze.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.8},children:[p.jsx("h1",{className:"text-5xl md:text-7xl font-cursive text-love-red mb-6 drop-shadow-sm",children:"Make This Valentine's Unforgettable"}),p.jsx("p",{className:"text-lg md:text-xl text-gray-700 mb-8 max-w-2xl mx-auto font-light",children:"Discover handcrafted gifts, personalized treasures, and romantic surprises designed to celebrate your unique love story."}),p.jsxs(ae,{to:"/products",className:"inline-flex items-center bg-love-red text-white px-8 py-4 rounded-full text-lg font-medium hover:bg-red-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:["Shop Now ",p.jsx(e1,{className:"ml-2 h-5 w-5"})]})]})}),p.jsx("div",{className:"absolute inset-0 pointer-events-none overflow-hidden z-0"})]}),p.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[p.jsxs("div",{className:"text-center mb-12",children:[p.jsx("h2",{className:"text-4xl font-cursive text-love-dark mb-4",children:"Featured Collections"}),p.jsx("p",{className:"text-gray-600",children:"Handpicked favorites for your special someone"})]}),p.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[{title:"Personalized Jewelry",img:"https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?auto=format&fit=crop&q=80&w=800",link:"/products?cat=jewelry"},{title:"Handmade Crafts",img:"https://images.unsplash.com/photo-1513201099705-a9746e1e201f?auto=format&fit=crop&q=80&w=800",link:"/products?cat=crafts"},{title:"Romantic Gift Sets",img:"https://images.unsplash.com/photo-1549465220-1a8b9238cd48?auto=format&fit=crop&q=80&w=800",link:"/products?cat=sets"}].map((e,n)=>p.jsxs(ze.div,{whileHover:{y:-10},className:"relative group overflow-hidden rounded-2xl shadow-md aspect-[4/5]",children:[p.jsx("img",{src:e.img,alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),p.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-6",children:p.jsxs("div",{children:[p.jsx("h3",{className:"text-white text-2xl font-cursive mb-2",children:e.title}),p.jsx(ae,{to:e.link,className:"text-white/90 text-sm hover:text-white underline",children:"Explore Collection"})]})})]},n))})]}),p.jsx("section",{className:"bg-white py-16",children:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[p.jsxs("div",{className:"p-6",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-love-light text-love-red mb-4",children:p.jsx(vL,{className:"h-8 w-8"})}),p.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Unique Handmade Gifts"}),p.jsx("p",{className:"text-gray-600",children:"Each item is crafted with love and care, ensuring a unique gift for your partner."})]}),p.jsxs("div",{className:"p-6",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-love-light text-love-red mb-4",children:p.jsx(IL,{className:"h-8 w-8"})}),p.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Fast & Secure Delivery"}),p.jsx("p",{className:"text-gray-600",children:"We ensure your gifts arrive on time and in perfect condition for the big day."})]}),p.jsxs("div",{className:"p-6",children:[p.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-love-light text-love-red mb-4",children:p.jsx(TL,{className:"h-8 w-8"})}),p.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Secure Payments"}),p.jsx("p",{className:"text-gray-600",children:"Shop with confidence using our secure payment gateways."})]})]})})})]})}function QF({product:t,isFavorite:e,onToggleFavorite:n}){const{addToCart:r}=il(),{currentUser:s}=Mn(),i=cr();return p.jsxs(ze.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{y:-5},className:"bg-white rounded-xl shadow-sm hover:shadow-md overflow-hidden border border-love-pink/20 transition-all",children:[p.jsxs("div",{className:"relative aspect-square overflow-hidden",children:[p.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-110"}),p.jsx("button",{onClick:n,"aria-pressed":!!e,className:"absolute top-3 right-3 p-2 bg-white/80 rounded-full transition-colors",children:p.jsx(Rn,{className:`h-5 w-5 ${e?"text-love-red":"text-gray-400"}`})})]}),p.jsxs("div",{className:"p-4",children:[p.jsx("div",{className:"text-xs text-love-red font-medium mb-1 uppercase tracking-wider",children:t.category}),p.jsx(ae,{to:`/products/${t.id}`,children:p.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2 hover:text-love-red transition-colors truncate",children:t.name})}),p.jsxs("div",{className:"flex items-center justify-between mt-4",children:[p.jsxs("span",{className:"text-xl font-bold text-love-dark",children:["$",t.price.toFixed(2)]}),p.jsxs("button",{onClick:()=>{if(!s){window.confirm(`Please log in to add items to your cart.
Press OK to log in, or Cancel to browse more.`)&&i("/login");return}window.confirm("Add this item to your cart?")&&r(t)},className:"flex items-center space-x-1 bg-love-light text-love-red px-3 py-2 rounded-lg hover:bg-love-red hover:text-white transition-colors text-sm font-medium",children:[p.jsx(og,{className:"h-4 w-4"}),p.jsx("span",{children:"Add"})]})]})]})]})}const YF=["Jewelry","Handmade","Gifts","Apparel","Personalized","Food","Home","Romance","Tech","Books","Experiences","Accessories","Beauty","Stationery","Games","Plants","Art","Luxury Gifts","DIY Kits","Couple Sets","Memory Keepsakes","Spa & Relaxation","Pet Valentine","Eco-Friendly","Subscription Boxes","Custom Art","Wine & Chocolate"],XF={Jewelry:"Elegant pieces crafted to celebrate love and connection.",Handmade:"Artisan creations made with care and attention.",Gifts:"Thoughtful surprises perfect for special moments.",Apparel:"Cozy styles to match and share together.",Personalized:"Customize to make memories uniquely yours.",Food:"Sweet treats to delight and indulge.",Home:"Warm accents to set a romantic mood.",Romance:"Romantic picks to spark connection and sweet moments.",Tech:"Gadgets and accessories for modern love.",Books:"Stories and journals to share and cherish.",Experiences:"Memorable activities to enjoy together.",Accessories:"Stylish extras to complete the look.",Beauty:"Self-care and grooming for date-ready vibes.",Stationery:"Cards and paper goods for heartfelt notes.",Games:"Fun challenges and play for couples.",Plants:"Green gifts to grow together.",Art:"Creative pieces to decorate with love.","Luxury Gifts":"High-end treasures for unforgettable gestures.","DIY Kits":"Create together with step-by-step craft kits.","Couple Sets":"Perfectly paired items made for two.","Memory Keepsakes":"Stylish ways to preserve special moments.","Spa & Relaxation":"Relaxing essentials for a calm retreat.","Pet Valentine":"Adorable gifts to spoil your furry love.","Eco-Friendly":"Sustainable choices that show you care.","Subscription Boxes":"Monthly surprises curated with love.","Custom Art":"Unique artwork tailored to your story.","Wine & Chocolate":"Romantic pairings of fine wine and chocolate."},Ad={Jewelry:["Heart Pendant Necklace","Infinity Love Necklace","Rose Gold Locket","Engraved Bar Necklace","Crystal Teardrop Earrings","Pearl Stud Earrings","Couples Ring Set","Birthstone Bracelet","Dainty Chain Bracelet","Charm Bracelet","Solitaire Pendant","Knot Ring","Cuff Bracelet","Stackable Rings","Nameplate Necklace","Moon & Star Necklace","Beaded Anklet","Tennis Bracelet","Hoop Earrings","Initial Pendant"],Handmade:["Rose Bear","Crochet Heart Keychain","Hand-painted Mug","Pressed Flower Frame","Knitted Scarf","Macrame Wall Hanging","Handmade Soap Set","Leather Journal","Resin Coaster Set","Clay Trinket Dish","Dried Flower Bouquet","Embroidered Tote","Beaded Phone Charm","Hand-poured Candle","Origami Love Box","Wood Photo Stand","Woven Basket","Felt Rose Corsage","Rope Plant Hanger","Hand-sewn Plush Heart"],Gifts:["Love Letters Box","Photo Memory Album","Couple Quiz Game","Surprise Gift Box","Message in a Bottle","Date Night Cards","Scratch-off Adventure Poster","Polaroid Film Set","Stainless Travel Mug","Bluetooth Mini Speaker","Personalized Calendar","Story of Us Book","Wine Accessories Kit","Hot Cocoa Gift Set","Spa Gift Basket","Bath Bomb Kit","Aromatherapy Diffuser","Keepsake Trinket Box","Greeting Card Pack","Mini Succulent Set"],Apparel:["Matching Hoodies","Couple T-Shirts","Satin Pajama Set","Cozy Knit Sweater","Embroidered Hat","Silk Robe","Flannel Lounge Pants","Fleece Blanket Poncho","Graphic Tee","Varsity Jacket","Denim Couple Jacket","Cotton Socks Pack","Scarf & Beanie Set","Summer Dress","Button-up Shirt","Lightweight Cardigan","Yoga Set","Baseball Cap","Windbreaker","Pullover Hoodie"],Personalized:["Custom Star Map","Engraved Keychain","Photo Crystal","Monogram Throw Pillow","Custom Photo Mug","Personalized Notebook","Custom Phone Case","Engraved Wallet","Name Necklace","Coordinates Bracelet","Photo Puzzle","Personalized Apron","Custom Night Light","Nameplate Door Sign","Custom Doormat","Pet Portrait Print","Custom Calendar","Engraved Pen","Custom Flask","Personalized Cutting Board"],Food:["Luxury Chocolate Box","Macaron Assortment","Gourmet Truffle Set","Heart-shaped Cookies","Artisanal Honey Jar","Strawberry Jam Duo","Specialty Tea Sampler","Coffee Lover Kit","Red Velvet Cupcakes","Chocolate-dipped Strawberries","Caramel Popcorn Tin","Cheese and Crackers Set","Mini Cheesecake Bites","Brownie Gift Box","Marshmallow Treats","Hot Sauce Pair","Olive Oil Tasting Set","Fruit Basket","Nuts Mix Jar","Candy Heart Tin"],Home:["Scented Candle Set","String Lights","Velvet Throw Pillow","Cozy Knit Blanket","Ceramic Vase","Picture Frame Set","Table Runner","Rose Diffuser","Wall Art Print","Decorative Tray","Ceramic Planter","Crystal Decor Bowl","Reed Diffuser Set","Lantern Candle Holder","Gold Mirror","Desk Organizer","Bookends Pair","Floor Lamp","Curtain Fairy Lights","Room Mist Spray"],Romance:Array.from({length:20},(t,e)=>`Romance Gift ${e+1}`),Tech:Array.from({length:20},(t,e)=>`Tech Love Gadget ${e+1}`),Books:Array.from({length:20},(t,e)=>`Couple Book ${e+1}`),Experiences:Array.from({length:20},(t,e)=>`Date Experience ${e+1}`),Accessories:Array.from({length:20},(t,e)=>`Love Accessory ${e+1}`),Beauty:Array.from({length:20},(t,e)=>`Beauty Care Set ${e+1}`),Stationery:Array.from({length:20},(t,e)=>`Love Stationery ${e+1}`),Games:Array.from({length:20},(t,e)=>`Couple Game ${e+1}`),Plants:Array.from({length:20},(t,e)=>`Love Plant ${e+1}`),Art:Array.from({length:20},(t,e)=>`Love Art Print ${e+1}`),"Luxury Gifts":Array.from({length:20},(t,e)=>`Luxury Gift ${e+1}`),"DIY Kits":Array.from({length:20},(t,e)=>`DIY Kit ${e+1}`),"Couple Sets":Array.from({length:20},(t,e)=>`Couple Set ${e+1}`),"Memory Keepsakes":Array.from({length:20},(t,e)=>`Keepsake ${e+1}`),"Spa & Relaxation":Array.from({length:20},(t,e)=>`Spa Relax ${e+1}`),"Pet Valentine":Array.from({length:20},(t,e)=>`Pet Valentine ${e+1}`),"Eco-Friendly":Array.from({length:20},(t,e)=>`Eco Gift ${e+1}`),"Subscription Boxes":Array.from({length:20},(t,e)=>`Subscription Box ${e+1}`),"Custom Art":Array.from({length:20},(t,e)=>`Custom Art ${e+1}`),"Wine & Chocolate":Array.from({length:20},(t,e)=>`Wine & Chocolate ${e+1}`)},JF={Jewelry:50,Handmade:25,Gifts:30,Apparel:40,Personalized:35,Food:20,Home:28,Romance:38,Tech:60,Books:22,Experiences:75,Accessories:27,Beauty:32,Stationery:18,Games:29,Plants:24,Art:33,"Luxury Gifts":80,"DIY Kits":22,"Couple Sets":38,"Memory Keepsakes":32,"Spa & Relaxation":30,"Pet Valentine":24,"Eco-Friendly":28,"Subscription Boxes":45,"Custom Art":50,"Wine & Chocolate":40},ZF=(t,e)=>{const n=e.toLowerCase(),r=[t.toLowerCase(),"valentine"];return t==="Jewelry"?n.includes("necklace")?r.push("necklace"):n.includes("earring")?r.push("earrings"):n.includes("ring")?r.push("ring"):n.includes("bracelet")?r.push("bracelet"):r.push("accessory"):t==="Handmade"?n.includes("candle")?r.push("candle"):n.includes("soap")?r.push("soap"):n.includes("knit")||n.includes("scarf")?r.push("knitting"):n.includes("macrame")?r.push("macrame"):n.includes("leather")?r.push("leather"):n.includes("resin")?r.push("resin"):r.push("craft"):t==="Gifts"?n.includes("album")||n.includes("photo")?r.push("photo"):n.includes("box")?r.push("giftbox"):n.includes("mug")?r.push("mug"):n.includes("speaker")?r.push("speaker"):r.push("gift"):t==="Apparel"?n.includes("hoodie")?r.push("hoodie"):n.includes("t-shirt")||n.includes("tee")?r.push("tshirt"):n.includes("pajama")?r.push("pajama"):n.includes("sweater")?r.push("sweater"):n.includes("jacket")?r.push("jacket"):n.includes("dress")?r.push("dress"):n.includes("cardigan")?r.push("cardigan"):r.push("clothing"):t==="Personalized"?n.includes("engraved")?r.push("engraved"):n.includes("custom")?r.push("custom"):n.includes("photo")?r.push("photo"):n.includes("name")?r.push("name"):r.push("personalized"):t==="Food"?n.includes("chocolate")?r.push("chocolate"):n.includes("macaron")?r.push("macaron"):n.includes("truffle")?r.push("truffle"):n.includes("cookie")?r.push("cookies"):n.includes("honey")?r.push("honey"):n.includes("jam")?r.push("jam"):n.includes("tea")?r.push("tea"):n.includes("coffee")?r.push("coffee"):n.includes("cupcake")?r.push("cupcakes"):n.includes("strawberry")?r.push("strawberries"):n.includes("popcorn")?r.push("popcorn"):n.includes("cheese")?r.push("cheese"):n.includes("brownie")?r.push("brownie"):n.includes("marshmallow")?r.push("marshmallow"):n.includes("sauce")?r.push("sauce"):n.includes("oil")?r.push("oil"):n.includes("fruit")?r.push("fruit"):n.includes("nut")?r.push("nuts"):n.includes("candy")?r.push("candy"):r.push("dessert"):t==="Home"?n.includes("candle")?r.push("candle"):n.includes("light")?r.push("lights"):n.includes("pillow")?r.push("pillow"):n.includes("blanket")?r.push("blanket"):n.includes("vase")?r.push("vase"):n.includes("frame")?r.push("frame"):n.includes("diffuser")?r.push("diffuser"):n.includes("art")?r.push("art"):n.includes("tray")?r.push("tray"):n.includes("planter")?r.push("planter"):n.includes("mirror")?r.push("mirror"):n.includes("organizer")?r.push("organizer"):n.includes("lamp")?r.push("lamp"):n.includes("curtain")?r.push("curtain"):n.includes("spray")?r.push("spray"):r.push("decor"):n.includes("gift")?r.push("gift"):n.includes("set")?r.push("set"):n.includes("print")?r.push("print"):n.includes("experience")&&r.push("experience"),r.join(",")},xi=YF.flatMap((t,e)=>Array.from({length:20},(n,r)=>({id:e*100+r+1,name:Ad[t][r],price:Number((JF[t]+r%10*2+e*3).toFixed(2)),category:t,image:`https://placehold.co/800x800/ffffff/cc1d4f/png?text=${encodeURIComponent(Ad[t][r])}`,description:XF[t],tags:ZF(t,Ad[t][r]).split(",")})));function eU(){const[t,e]=b.useState("All"),[n,r]=b.useState(""),[s,i]=b.useState("none"),[o,a]=b.useState(""),[u,c]=b.useState(""),[h,d]=b.useState(!1),[m,y]=b.useState(""),[S,w]=b.useState("none"),[P,E]=b.useState(""),[v,_]=b.useState(""),[R,V]=b.useState(1),[M,C]=b.useState([]),{currentUser:x}=Mn(),[I,A]=b.useState([]),[N,D]=b.useState([]),[k,he]=b.useState(!1),[Qe,ge]=b.useState(!1),[ve,z]=b.useState("none"),[q,X]=b.useState("none"),Q=b.useMemo(()=>{const $=new Set(xi.map(be=>be.category));return["All",...Array.from($)]},[]),re=b.useMemo(()=>{let $=t==="All"?xi:xi.filter(me=>me.category===t);const be=n.trim().toLowerCase();be&&($=$.filter(me=>me.name.toLowerCase().includes(be)));let Ye=o!==""?parseFloat(o):null,$e=u!==""?parseFloat(u):null;return ve!=="none"&&(ve==="under30"?(Ye=null,$e=30):ve==="30to50"?(Ye=30,$e=50):ve==="50plus"&&(Ye=50,$e=null)),Ye!==null&&($=$.filter(me=>me.price>=Ye)),$e!==null&&($=$.filter(me=>me.price<=$e)),I.length>0&&($=$.filter(me=>me.tags&&me.tags.some(ln=>I.includes(ln)))),k&&x&&($=$.filter(me=>M.includes(me.id))),s==="price_asc"?$=[...$].sort((me,ln)=>me.price-ln.price):s==="price_desc"?$=[...$].sort((me,ln)=>ln.price-me.price):s==="name_asc"?$=[...$].sort((me,ln)=>me.name.localeCompare(ln.name)):s==="name_desc"&&($=[...$].sort((me,ln)=>ln.name.localeCompare(me.name))),$},[t,n,o,u,s,I,k,ve,M,x]),pe=10,Et=Math.max(1,Math.ceil(re.length/pe)),ut=Math.min(R,Et),et=re.slice((ut-1)*pe,ut*pe),Rt=b.useMemo(()=>{const $=new Set;return xi.forEach(be=>(be.tags||[]).forEach(Ye=>$.add(Ye))),Array.from($).sort()},[]);b.useEffect(()=>{let $=!0;async function be(){if(!x){$&&C([]);return}try{const Ye=zs($s,"users",x.uid),$e=await th(Ye);if(!$)return;const me=$e.exists()?$e.data():{};C(Array.isArray(me.favorites)?me.favorites:[])}catch{$&&C([])}}return be(),()=>{$=!1}},[x]);async function co($){if(!x){alert("Please log in to save favorites");return}const be=M.includes($),Ye=zs($s,"users",x.uid);try{await GS(Ye,{favorites:be?bO($):RO($)}),C($e=>be?$e.filter(me=>me!==$):[...$e,$])}catch($e){console.error("Failed to update favorites",$e)}}function us(){y(n),w(s),E(o),_(u),D(I),ge(k),X(ve),d(!0)}function an(){r(m),i(S),a(P),c(v),A(N),he(Qe),z(q),d(!1),V(1)}function bt(){d(!1),y(n),w(s),E(o),_(u),D(I),ge(k),X(ve)}return p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8",children:p.jsxs("div",{children:[p.jsx("h1",{className:"text-4xl font-cursive text-love-dark",children:"Shop Gifts"}),p.jsx("p",{className:"text-gray-600 mt-2",children:"Find the perfect token of your affection"})]})}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[p.jsx("aside",{className:"md:col-span-1",children:p.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-love-pink/20",children:[p.jsx("h2",{className:"text-lg font-semibold text-love-dark mb-4",children:"Categories"}),p.jsx("div",{className:"space-y-2",children:Q.map($=>p.jsx("button",{onClick:()=>{e($),V(1)},className:`w-full text-left px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===$?"bg-love-red text-white shadow-md":"bg-white border border-gray-200 text-gray-700 hover:bg-love-light"}`,children:$},$))})]})}),p.jsxs("section",{className:"md:col-span-3",children:[p.jsx("div",{className:"flex items-center justify-between mb-4",children:p.jsx("button",{onClick:us,className:"p-2 rounded-lg bg-white border border-love-pink/30 text-gray-600 hover:text-love-red hover:border-love-red transition-colors","aria-label":"Open Filters",title:"Filters",children:p.jsx(yL,{className:"h-5 w-5"})})}),h&&p.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-love-pink/20 mb-6",children:[p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[p.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:m,onChange:$=>y($.target.value)}),p.jsxs("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:S,onChange:$=>w($.target.value),children:[p.jsx("option",{value:"none",children:"Sort by"}),p.jsx("option",{value:"price_asc",children:"Price: Low to High"}),p.jsx("option",{value:"price_desc",children:"Price: High to Low"}),p.jsx("option",{value:"name_asc",children:"Name: A to Z"}),p.jsx("option",{value:"name_desc",children:"Name: Z to A"})]}),p.jsx("input",{type:"number",min:"0",step:"0.01",placeholder:"Min price",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:P,onChange:$=>E($.target.value)}),p.jsx("input",{type:"number",min:"0",step:"0.01",placeholder:"Max price",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:v,onChange:$=>_($.target.value)})]}),p.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4",children:[p.jsxs("div",{className:"md:col-span-2",children:[p.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tags"}),p.jsx("div",{className:"flex flex-wrap gap-2",children:Rt.map($=>{const be=N.includes($);return p.jsx("button",{onClick:()=>{D(Ye=>be?Ye.filter($e=>$e!==$):[...Ye,$])},className:`px-3 py-1 rounded-full text-sm border ${be?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:$},$)})})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Price"}),p.jsx("div",{className:"space-y-2",children:[{id:"none",label:"None"},{id:"under30",label:"Under $30"},{id:"30to50",label:"$30  $50"},{id:"50plus",label:"$50+"}].map($=>p.jsx("button",{onClick:()=>X($.id),className:`w-full text-left px-3 py-2 rounded-lg border text-sm ${q===$.id?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:$.label},$.id))})]}),p.jsxs("div",{children:[p.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Only Favorites"}),p.jsx("button",{onClick:()=>ge($=>!$),disabled:!x,className:`w-full px-3 py-2 rounded-lg border text-sm ${Qe?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"} ${x?"":"opacity-50 cursor-not-allowed"}`,children:Qe?"Enabled":"Disabled"})]})]}),p.jsxs("div",{className:"mt-4 flex items-center justify-end space-x-3",children:[p.jsx("button",{onClick:bt,className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),p.jsx("button",{onClick:an,className:"px-4 py-2 rounded-lg bg-love-red text-white hover:bg-red-700 transition-colors",children:"Show Results"})]})]}),p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:et.map($=>{const be=M.includes($.id);return p.jsx(QF,{product:$,isFavorite:be,onToggleFavorite:()=>co($.id)},$.id)})}),p.jsx("div",{className:"mt-8 flex items-center justify-center space-x-2",children:Array.from({length:Et},($,be)=>be+1).map($=>p.jsx("button",{onClick:()=>V($),className:`px-3 py-2 rounded-md border text-sm ${$===ut?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:$},$))})]})]})]})}function tU(){const{id:t}=rk(),e=xi.find(y=>y.id===parseInt(t)),[n,r]=b.useState(""),[s,i]=b.useState(1),{addToCart:o}=il(),[a,u]=b.useState(!1),{currentUser:c}=Mn(),h=cr(),d=()=>{if(!c){window.confirm(`Please log in to add items to your cart.
Press OK to log in, or Cancel to browse more.`)&&h("/login");return}window.confirm("Add this item to your cart?")&&(o(e,s,n),u(!0),setTimeout(()=>u(!1),2e3))};function m(){const S=document.createElement("canvas");S.width=1080,S.height=1080;const w=S.getContext("2d"),P=w.createLinearGradient(0,0,1080,1080);P.addColorStop(0,"#ffe4e6"),P.addColorStop(1,"#fb7185"),w.fillStyle=P,w.fillRect(0,0,1080,1080);function E(x,I,A,N){w.save(),w.translate(x,I),w.scale(A,A),w.beginPath(),w.moveTo(0,-10),w.bezierCurveTo(12,-28,40,-18,40,6),w.bezierCurveTo(40,26,18,40,0,52),w.bezierCurveTo(-18,40,-40,26,-40,6),w.bezierCurveTo(-40,-18,-12,-28,0,-10),w.closePath(),w.fillStyle=N,w.fill(),w.restore()}for(let x=0;x<24;x++){const I=Math.random()*1080,A=Math.random()*1080,N=.3+Math.random()*.8,D=Math.random()<.5?"rgba(225,29,72,0.15)":"rgba(251,113,133,0.15)";E(I,A,N,D)}w.fillStyle="rgba(255,255,255,0.85)";const v=80;w.beginPath(),w.moveTo(140+v,180),w.arcTo(940,180,940,900,v),w.arcTo(940,900,140,900,v),w.arcTo(140,900,140,180,v),w.arcTo(140,180,940,180,v),w.closePath(),w.fill(),w.fillStyle="#e11d48",w.textAlign="center",w.font="bold 72px Georgia",w.fillText("With Love",1080/2,300),w.fillStyle="#0f172a",w.font="600 56px Georgia",w.fillText(e.name,1080/2,390),w.fillStyle="#334155",w.font="italic 36px Georgia";const _=n!=null&&n.trim()?n.trim():"You make my world brighter",R=[];let V="";_.split(/\s+/).forEach(x=>{const I=V?V+" "+x:x;w.measureText(I).width>720?(R.push(V),V=x):V=I}),V&&R.push(V),R.slice(0,4).forEach((x,I)=>{w.fillText(x,1080/2,480+I*48)}),w.fillStyle="#e11d48",E(1080/2,620,1.2,"#e11d48"),w.fillStyle="#64748b",w.font="500 28px Georgia",w.fillText("LoveCraft",1080/2,860);const C=document.createElement("a");C.download="wish-card.png",C.href=S.toDataURL("image/png"),C.click()}return e?p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsxs(ae,{to:"/products",className:"inline-flex items-center text-gray-500 hover:text-love-red mb-8 transition-colors",children:[p.jsx(fL,{className:"h-4 w-4 mr-2"})," Back to Gifts"]}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[p.jsx(ze.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"rounded-2xl overflow-hidden shadow-lg border border-love-pink/20",children:p.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"})}),p.jsxs(ze.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("div",{className:"text-sm text-love-red font-medium uppercase tracking-wider mb-2",children:e.category}),p.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-2",children:e.name}),p.jsxs("div",{className:"flex items-center space-x-2 text-yellow-500 text-sm mb-4",children:[p.jsx("div",{className:"flex",children:[...Array(5)].map((y,S)=>p.jsx(SL,{className:"h-4 w-4 fill-current"},S))}),p.jsx("span",{className:"text-gray-400",children:"(24 reviews)"})]}),p.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",e.price.toFixed(2)]})]}),p.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description||"Celebrate your love with this handcrafted treasure. Perfect for anniversaries, Valentine's Day, or just because."}),p.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[p.jsxs("div",{children:[p.jsx("label",{htmlFor:"custom-text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Message (Optional)"}),p.jsx("textarea",{id:"custom-text",rows:3,className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-love-pink focus:ring-love-pink text-sm p-3 border",placeholder:"Enter names, dates, or a short love note...",value:n,onChange:y=>r(y.target.value)})]}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[p.jsx("button",{onClick:()=>i(Math.max(1,s-1)),className:"px-3 py-2 text-gray-600 hover:bg-gray-50",children:"-"}),p.jsx("span",{className:"px-3 py-2 font-medium w-12 text-center",children:s}),p.jsx("button",{onClick:()=>i(s+1),className:"px-3 py-2 text-gray-600 hover:bg-gray-50",children:"+"})]}),p.jsxs("button",{onClick:d,disabled:a,className:`flex-1 px-6 py-3 rounded-lg font-medium transition-colors shadow-md flex items-center justify-center space-x-2 ${a?"bg-green-600 text-white":"bg-love-red text-white hover:bg-red-700"}`,children:[a?p.jsx(pd,{className:"h-5 w-5"}):p.jsx(og,{className:"h-5 w-5"}),p.jsx("span",{children:a?"Added to Cart":"Add to Cart"})]}),p.jsxs("button",{onClick:m,className:"px-6 py-3 rounded-lg font-medium transition-colors shadow-md flex items-center justify-center space-x-2 bg-white text-love-red border border-love-pink/30 hover:bg-love-light",children:[p.jsx(mL,{className:"h-5 w-5"}),p.jsx("span",{children:"Download Wish Image"})]}),p.jsx("button",{className:"p-3 border border-gray-300 rounded-lg hover:border-love-red hover:text-love-red transition-colors",children:p.jsx(Rn,{className:"h-5 w-5"})})]})]}),p.jsxs("div",{className:"flex items-center space-x-6 text-sm text-gray-500 pt-4",children:[p.jsxs("div",{className:"flex items-center",children:[p.jsx(pd,{className:"h-4 w-4 mr-1 text-green-500"})," In Stock"]}),p.jsxs("div",{className:"flex items-center",children:[p.jsx(pd,{className:"h-4 w-4 mr-1 text-green-500"})," Free Shipping"]})]})]})]})]}):p.jsxs("div",{className:"min-h-[50vh] flex flex-col items-center justify-center",children:[p.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Product not found"}),p.jsx(ae,{to:"/products",className:"mt-4 text-love-red hover:underline",children:"Return to Shop"})]})}function nU(){const{cartItems:t,removeFromCart:e,updateQuantity:n,cartTotal:r}=il();return t.length===0?p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center",children:[p.jsx("h2",{className:"text-3xl font-cursive text-gray-800 mb-4",children:"Your cart is empty"}),p.jsx("p",{className:"text-gray-600 mb-8",children:"Looks like you haven't found the perfect gift yet."}),p.jsxs(ae,{to:"/products",className:"inline-flex items-center bg-love-red text-white px-6 py-3 rounded-full hover:bg-red-700 transition-colors",children:["Start Shopping ",p.jsx(e1,{className:"ml-2 h-4 w-4"})]})]}):p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-8",children:"Shopping Cart"}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[p.jsx("div",{className:"lg:col-span-2 space-y-6",children:t.map(s=>p.jsxs("div",{className:"flex items-center bg-white p-4 rounded-xl shadow-sm border border-love-pink/20",children:[p.jsx("img",{src:s.image,alt:s.name,className:"w-24 h-24 object-cover rounded-lg"}),p.jsxs("div",{className:"ml-6 flex-1",children:[p.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s.name}),p.jsxs("p",{className:"text-love-red font-medium",children:["$",s.price.toFixed(2)]}),s.customText&&p.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Note: ",s.customText]})]}),p.jsxs("div",{className:"flex items-center space-x-4",children:[p.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[p.jsx("button",{onClick:()=>n(s.id,s.customText,s.quantity-1),className:"px-3 py-1 text-gray-600 hover:bg-gray-50",children:"-"}),p.jsx("span",{className:"px-2 font-medium",children:s.quantity}),p.jsx("button",{onClick:()=>n(s.id,s.customText,s.quantity+1),className:"px-3 py-1 text-gray-600 hover:bg-gray-50",children:"+"})]}),p.jsx("button",{onClick:()=>e(s.id,s.customText),className:"text-gray-400 hover:text-red-500 transition-colors",children:p.jsx(t1,{className:"h-5 w-5"})})]})]},`${s.id}-${s.customText}`))}),p.jsx("div",{className:"lg:col-span-1",children:p.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-love-pink/20 sticky top-24",children:[p.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Order Summary"}),p.jsxs("div",{className:"space-y-4 text-sm",children:[p.jsxs("div",{className:"flex justify-between text-gray-600",children:[p.jsx("span",{children:"Subtotal"}),p.jsxs("span",{children:["$",r.toFixed(2)]})]}),p.jsxs("div",{className:"flex justify-between text-gray-600",children:[p.jsx("span",{children:"Shipping"}),p.jsx("span",{children:"Free"})]}),p.jsxs("div",{className:"border-t border-gray-100 pt-4 flex justify-between font-bold text-lg text-gray-900",children:[p.jsx("span",{children:"Total"}),p.jsxs("span",{children:["$",r.toFixed(2)]})]})]}),p.jsx(ae,{to:"/checkout",className:"block text-center w-full mt-8 bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Proceed to Checkout"})]})})]})]})}const rU=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},OU={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:rU()};function sU(){const{cartItems:t,cartTotal:e,clearCart:n}=il(),{currentUser:r}=Mn(),s=cr(),[i,o]=b.useState(!1),[a,u]=b.useState(""),[c,h]=b.useState({firstName:"",lastName:"",email:(r==null?void 0:r.email)||"",address:"",city:"",zipCode:"",country:"",cardNumber:"",expiryDate:"",cvv:""}),d=y=>{h({...c,[y.target.name]:y.target.value})},m=async y=>{y.preventDefault(),o(!0),u("");try{const S={userId:r?r.uid:"guest",userEmail:c.email,items:t,total:e,shippingDetails:{firstName:c.firstName,lastName:c.lastName,address:c.address,city:c.city,zipCode:c.zipCode,country:c.country},status:"pending",createdAt:_u()},w=await AO(pO($s,"orders"),S);try{const P={order_id:w.id,to_name:`${c.firstName} ${c.lastName}`,to_email:c.email,message:`Thank you for your order! Your total is $${e.toFixed(2)}. We will ship your romantic gifts to ${c.address}, ${c.city}.`,reply_to:"support@lovecraft.com"},E=void 0,v=void 0,_="GNdiN4DMl_vTXQ7iE";E&&v||console.warn("EmailJS service/template IDs are not set"),console.log("Email sent successfully!")}catch(P){console.error("Failed to send email:",P)}n(),s("/order-success")}catch(S){console.error("Error placing order:",S),u("Failed to place order. Please try again.")}finally{o(!1)}};return b.useEffect(()=>{t.length===0&&s("/cart")},[t,s]),t.length===0?null:p.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:p.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[p.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-8 text-center",children:"Checkout"}),p.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[p.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md border border-love-pink/20",children:[p.jsx("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:"Shipping Details"}),a&&p.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:a}),p.jsxs("form",{onSubmit:m,className:"space-y-6",children:[p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),p.jsx("input",{type:"text",name:"firstName",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.firstName,onChange:d})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),p.jsx("input",{type:"text",name:"lastName",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.lastName,onChange:d})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),p.jsx("input",{type:"email",name:"email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.email,onChange:d})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),p.jsx("input",{type:"text",name:"address",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.address,onChange:d})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),p.jsx("input",{type:"text",name:"city",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.city,onChange:d})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zip Code"}),p.jsx("input",{type:"text",name:"zipCode",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.zipCode,onChange:d})]})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),p.jsx("input",{type:"text",name:"country",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.country,onChange:d})]}),p.jsxs("div",{className:"pt-6 border-t border-gray-100",children:[p.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Payment Information"}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),p.jsx("input",{type:"text",name:"cardNumber",required:!0,placeholder:"0000 0000 0000 0000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.cardNumber,onChange:d})]}),p.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),p.jsx("input",{type:"text",name:"expiryDate",required:!0,placeholder:"MM/YY",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.expiryDate,onChange:d})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV"}),p.jsx("input",{type:"text",name:"cvv",required:!0,placeholder:"123",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.cvv,onChange:d})]})]})]})]}),p.jsx("button",{type:"submit",disabled:i,className:"w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Processing...":`Pay $${e.toFixed(2)}`})]})]}),p.jsx("div",{children:p.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-200 sticky top-24",children:[p.jsx("h2",{className:"text-xl font-semibold mb-6 text-gray-800",children:"Order Summary"}),p.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:t.map(y=>p.jsxs("div",{className:"flex gap-4 border-b border-gray-200 pb-4",children:[p.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded-md"}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h4",{className:"font-medium text-gray-800",children:y.name}),p.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",y.quantity]}),p.jsxs("p",{className:"text-love-red font-medium",children:["$",y.price.toFixed(2)]}),y.customText&&p.jsxs("p",{className:"text-xs text-gray-500 italic mt-1",children:['"',y.customText,'"']})]})]},`${y.id}-${y.customText}`))}),p.jsxs("div",{className:"mt-6 space-y-2 pt-4 border-t border-gray-200",children:[p.jsxs("div",{className:"flex justify-between text-gray-600",children:[p.jsx("span",{children:"Subtotal"}),p.jsxs("span",{children:["$",e.toFixed(2)]})]}),p.jsxs("div",{className:"flex justify-between text-gray-600",children:[p.jsx("span",{children:"Shipping"}),p.jsx("span",{children:"Free"})]}),p.jsxs("div",{className:"flex justify-between font-bold text-xl text-love-dark pt-2",children:[p.jsx("span",{children:"Total"}),p.jsxs("span",{children:["$",e.toFixed(2)]})]})]})]})})]})]})})}var Eu={linear:function(t,e,n,r){var s=n-e;return s*t/r+e},easeInQuad:function(t,e,n,r){var s=n-e;return s*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var s=n-e;return-s*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var s=n-e;return-s*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var s=n-e;return-s*Math.cos(t/r*(Math.PI/2))+s+e},easeOutSine:function(t,e,n,r){var s=n-e;return s*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var s=n-e;return-s/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var s=n-e;return t==0?e:s*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var s=n-e;return t==r?e+s:s*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var s=n-e;return t===0?e:t===r?e+s:(t/=r/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var s=n-e;return-s*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var s=n-e;return s*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var s=n-e,i,o,a;return a=1.70158,o=0,i=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var s=n-e,i,o,a;return a=1.70158,o=0,i=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+s+e)},easeInOutElastic:function(t,e,n,r){var s=n-e,i,o,a;return a=1.70158,o=0,i=s,t===0?e:(t/=r/2)===2?e+s:(o||(o=r*(.3*1.5)),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+s+e)},easeInBack:function(t,e,n,r,s){var i=n-e;return s===void 0&&(s=1.70158),i*(t/=r)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,n,r,s){var i=n-e;return s===void 0&&(s=1.70158),i*((t=t/r-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,n,r,s){var i=n-e;return s===void 0&&(s=1.70158),(t/=r/2)<1?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,n,r){var s=n-e,i;return i=Eu.easeOutBounce(r-t,0,s,r),s-i+e},easeOutBounce:function(t,e,n,r){var s=n-e;return(t/=r)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var s=n-e,i;return t<r/2?(i=Eu.easeInBounce(t*2,0,s,r),i*.5+e):(i=Eu.easeOutBounce(t*2-r,0,s,r),i*.5+s*.5+e)}},iU=Eu;function oU(t){return t*Math.PI/180}function zt(t,e){return t+Math.random()*(e-t)}function aU(t,e){return Math.floor(t+Math.random()*(e-t+1))}var ha;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(ha||(ha={}));var xr;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(xr||(xr={}));const lU=1e3/60;class uU{constructor(e,n,r,s){this.getOptions=n;const{colors:i,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=s,this.w=zt(5,20),this.h=zt(5,20),this.radius=zt(5,10),this.vx=typeof o=="number"?zt(-o,o):zt(o.min,o.max),this.vy=typeof a=="number"?zt(-a,0):zt(a.min,a.max),this.shape=aU(0,2),this.angle=oU(zt(0,360)),this.angularSpin=zt(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=zt(0,1),this.rotationDirection=zt(0,1)?xr.Positive:xr.Negative}update(e){const{gravity:n,wind:r,friction:s,opacity:i,drawShape:o}=this.getOptions(),a=e/lU;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=s**a,this.vy*=s**a,this.rotateY>=1&&this.rotationDirection===xr.Positive?this.rotationDirection=xr.Negative:this.rotateY<=-1&&this.rotationDirection===xr.Negative&&(this.rotationDirection=xr.Positive);const u=.1*this.rotationDirection*a;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case ha.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case ha.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case ha.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class cU{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=zt(this.x,this.w+this.x),i=zt(this.y,this.h+this.y);return new uU(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:o,particlesGenerated:a,lastNumberOfPieces:u}=this,{run:c,recycle:h,numberOfPieces:d,debug:m,tweenFunction:y,tweenDuration:S}=this.getOptions();if(!c)return!1;const w=this.particles.length,P=h?w:a;if(P<d){u!==d&&(this.tweenProgress=0,this.tweenFrom=P,this.lastNumberOfPieces=d),this.tweenProgress=Math.min(S,Math.max(0,this.tweenProgress+s));const E=y(this.tweenProgress,this.tweenFrom,d,S),v=Math.round(E-P);for(let _=0;_<v;_++)this.particles.push(this.getParticle());this.particlesGenerated+=v}m&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${w}`,i.width-10,i.height-20));for(let E=this.particles.length-1;E>=0;E--){const v=this.particles[E];v.update(s),(v.y>i.height||v.y<-100||v.x>i.width+100||v.x<-100)&&(h&&P<=d?this.particles[E]=this.getParticle():this.removeParticleAt(E))}return w>0||P<d},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const kg={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:iU.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class hU{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...kg,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:a},canvas:u,context:c}=this,h=Math.min(s-this.lastFrameTime,50);if(a&&h<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(a?h%a:0),i&&(c.fillStyle="white",c.clearRect(0,0,u.width,u.height)),this.generator.animate(h)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new cU(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var s,i;const n=(s=this._options)==null?void 0:s.run,r=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const dU=Wr.createRef();class Rg extends Wr.Component{constructor(e){super(e),this.canvas=Wr.createRef(),this.canvas=e.canvasRef||dU}componentDidMount(){if(this.canvas.current){const e=kd(this.props)[0];this.confetti=new hU(this.canvas.current,e)}}componentDidUpdate(){const e=kd(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=kd(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return p.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}Rg.defaultProps={...kg};Rg.displayName="ReactConfetti";function kd(t){const e={},n={},r={},s=[...Object.keys(kg),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in t){const a=t[o];s.includes(o)?e[o]=a:i.includes(o)?i[o]=a:r[o]=a}return[e,r,n]}const fU=Wr.forwardRef((t,e)=>p.jsx(Rg,{canvasRef:e,...t}));function pU(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function mU(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var Rd=typeof window<"u",gU=function(t){b.useEffect(t,[])},yU=function(t){var e=b.useRef(t);e.current=t,gU(function(){return function(){return e.current()}})},vU=function(t){var e=b.useRef(0),n=b.useState(t),r=n[0],s=n[1],i=b.useCallback(function(o){cancelAnimationFrame(e.current),e.current=requestAnimationFrame(function(){s(o)})},[]);return yU(function(){cancelAnimationFrame(e.current)}),[r,i]},_U=function(t){var e={},n=e.initialWidth,r=n===void 0?1/0:n,s=e.initialHeight,i=s===void 0?1/0:s,o=e.onChange,a=vU({width:Rd?window.innerWidth:r,height:Rd?window.innerHeight:i}),u=a[0],c=a[1];return b.useEffect(function(){if(Rd){var h=function(){var d=window.innerWidth,m=window.innerHeight;c({width:d,height:m}),o&&o(d,m)};return pU(window,"resize",h),function(){mU(window,"resize",h)}}},[]),u};function wU(){const{width:t,height:e}=_U();return p.jsxs("div",{className:"min-h-[80vh] flex items-center justify-center bg-love-light/30 px-4",children:[p.jsx(fU,{width:t,height:e,recycle:!1,numberOfPieces:200,colors:["#e11d48","#fb7185","#ffe4e6","#ffffff"]}),p.jsxs(ze.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.8},className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-xl border border-love-pink/20 text-center relative overflow-hidden",children:[p.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-love-red to-love-pink"}),p.jsx(ze.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:p.jsx(pL,{className:"h-10 w-10 text-green-600"})}),p.jsx("h1",{className:"text-3xl font-cursive text-love-dark mb-4",children:"Order Placed!"}),p.jsx("p",{className:"text-gray-600 mb-8",children:"Thank you for your order. We're preparing your romantic gifts with love! You'll receive a confirmation email shortly."}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(ae,{to:"/products",className:"block w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Continue Shopping"}),p.jsx(ae,{to:"/",className:"block w-full bg-white text-love-dark border border-gray-200 py-3 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Back to Home"})]}),p.jsxs("div",{className:"mt-8 flex justify-center space-x-2 text-love-pink/60",children:[p.jsx(Rn,{className:"h-4 w-4 fill-current animate-pulse"}),p.jsx(Rn,{className:"h-4 w-4 fill-current animate-pulse delay-75"}),p.jsx(Rn,{className:"h-4 w-4 fill-current animate-pulse delay-150"})]})]})]})}function xU(){const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(!1),{login:u,loginWithGoogle:c}=Mn(),h=cr();async function d(y){y.preventDefault();try{i(""),a(!0),await u(t,n),h("/")}catch(S){console.error("Login error:",S);let w="Failed to log in";S.code==="auth/wrong-password"&&(w="Incorrect password"),S.code==="auth/user-not-found"&&(w="No account found with this email"),S.code==="auth/invalid-email"&&(w="Invalid email address"),S.code==="auth/invalid-credential"&&(w="Invalid credentials"),i(w)}a(!1)}async function m(){try{i(""),a(!0),await c(),h("/")}catch(y){console.error("Google login error:",y),i("Failed to log in with Google")}a(!1)}return p.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-love-light/30 px-4",children:p.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx(Rn,{className:"h-10 w-10 text-love-red mx-auto mb-2 fill-current"}),p.jsx("h2",{className:"text-3xl font-cursive text-love-dark font-bold",children:"Welcome Back"}),p.jsx("p",{className:"text-gray-600",children:"Sign in to continue your love story"})]}),s&&p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:s}),p.jsxs("form",{onSubmit:d,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),p.jsx("input",{type:"email",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:t,onChange:y=>e(y.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),p.jsx("input",{type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:n,onChange:y=>r(y.target.value)})]}),p.jsx("button",{type:"submit",disabled:o,className:"w-full bg-love-red text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-red transition-colors font-medium",children:"Log In"})]}),p.jsx("div",{className:"mt-6",children:p.jsxs("button",{onClick:m,disabled:o,className:"w-full flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-red",children:[p.jsxs("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[p.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),p.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),p.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),p.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]})}),p.jsxs("div",{className:"mt-6 text-center text-sm",children:[p.jsx("span",{className:"text-gray-600",children:"Don't have an account? "}),p.jsx(ae,{to:"/signup",className:"text-love-red hover:underline font-medium",children:"Sign up"})]})]})})}function EU(){const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(""),[u,c]=b.useState(""),[h,d]=b.useState(!1),{signup:m,loginWithGoogle:y}=Mn(),S=cr();async function w(E){if(E.preventDefault(),s!==o)return c("Passwords do not match");try{c(""),d(!0),await m(n,s,{displayName:t}),S("/profile")}catch(v){console.error("Signup error:",v);let _="Failed to create an account";v.code==="auth/email-already-in-use"&&(_="Email is already in use"),v.code==="auth/weak-password"&&(_="Password should be at least 6 characters"),v.code==="auth/invalid-email"&&(_="Invalid email address"),v.code==="auth/operation-not-allowed"&&(_="Email/Password accounts are not enabled in Firebase Console."),_==="Failed to create an account"&&(_+=`: ${v.message} (${v.code})`),c(_)}d(!1)}async function P(){try{c(""),d(!0),await y(),S("/profile")}catch(E){console.error("Google login error:",E),c("Failed to sign up with Google")}d(!1)}return p.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-love-light/30 px-4",children:p.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20",children:[p.jsxs("div",{className:"text-center mb-8",children:[p.jsx(Rn,{className:"h-10 w-10 text-love-red mx-auto mb-2 fill-current"}),p.jsx("h2",{className:"text-3xl font-cursive text-love-dark font-bold",children:"Create Account"}),p.jsx("p",{className:"text-gray-600",children:"Join our community of love"})]}),u&&p.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:u}),p.jsxs("form",{onSubmit:w,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),p.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:t,onChange:E=>e(E.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),p.jsx("input",{type:"email",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:n,onChange:E=>r(E.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),p.jsx("input",{type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:s,onChange:E=>i(E.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),p.jsx("input",{type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:o,onChange:E=>a(E.target.value)})]}),p.jsx("button",{type:"submit",disabled:h,className:"w-full bg-love-red text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-red transition-colors font-medium",children:"Sign Up"})]}),p.jsx("div",{className:"mt-6",children:p.jsxs("button",{onClick:P,disabled:h,className:"w-full flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-red",children:[p.jsxs("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[p.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),p.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),p.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),p.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]})}),p.jsxs("div",{className:"mt-6 text-center text-sm",children:[p.jsx("span",{className:"text-gray-600",children:"Already have an account? "}),p.jsx(ae,{to:"/login",className:"text-love-red hover:underline font-medium",children:"Log in"})]})]})})}function TU(){const[t,e]=b.useState([{id:1,name:"Personalized Heart Necklace",price:45,category:"Jewelry"},{id:2,name:"Handmade Rose Bear",price:35.5,category:"Handmade"}]);return p.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("h1",{className:"text-4xl font-cursive text-love-dark",children:"Admin Dashboard"}),p.jsxs("button",{className:"flex items-center space-x-2 bg-love-red text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[p.jsx(EL,{className:"h-5 w-5"}),p.jsx("span",{children:"Add Product"})]})]}),p.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-love-pink/20 overflow-hidden",children:p.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[p.jsx("thead",{className:"bg-love-light",children:p.jsxs("tr",{children:[p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),p.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),p.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),p.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(n=>p.jsxs("tr",{children:[p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:n.name}),p.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.category}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",n.price.toFixed(2)]}),p.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[p.jsx("button",{className:"text-indigo-600 hover:text-indigo-900 mr-4",children:p.jsx(xL,{className:"h-4 w-4"})}),p.jsx("button",{className:"text-red-600 hover:text-red-900",children:p.jsx(t1,{className:"h-4 w-4"})})]})]},n.id))})]})})]})}function SU(){const{currentUser:t}=Mn(),[e,n]=b.useState(!0),[r,s]=b.useState(""),[i,o]=b.useState(!1),[a,u]=b.useState({name:"",address:"",country:"",gender:""}),[c,h]=b.useState(null),[d,m]=b.useState(""),[y,S]=b.useState([]);b.useEffect(()=>{async function v(){if(t){o(!1),s(""),n(!0);try{const _=zs($s,"users",t.uid),R=await th(_),V=R.exists()?R.data():{};u({name:V.name||t.displayName||"",address:V.address||"",country:V.country||"",gender:V.gender||""}),m(V.photoURL||t.photoURL||""),S(Array.isArray(V.favorites)?V.favorites:[])}catch{s("Failed to load profile")}finally{n(!1)}}}v()},[t]);function w(v){const{name:_,value:R}=v.target;u(V=>({...V,[_]:R}))}function P(v){return new Promise((_,R)=>{const V=new FileReader;V.onload=()=>_(V.result),V.onerror=R,V.readAsDataURL(v)})}async function E(v){v.preventDefault(),s(""),o(!1);try{let _=d;if(c){if(!c.type.startsWith("image/")){s("Please upload a valid image file");return}if(c.size>256*1024){s("Image too large (max 256KB)");return}_=await P(c)}const R=zs($s,"users",t.uid);await KS(R,{name:a.name,address:a.address,country:a.country,gender:a.gender,photoURL:_||null},{merge:!0});const V={};if(a.name&&a.name!==t.displayName&&(V.displayName=a.name),Object.keys(V).length)try{await gT(t,V)}catch{}m(_),o(!0)}catch{s("Failed to save profile")}}return t?p.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[p.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[p.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-8",children:"Your Profile"}),p.jsx("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20",children:e?p.jsx("div",{className:"text-gray-600",children:"Loading..."}):p.jsxs("form",{onSubmit:E,className:"space-y-6",children:[r&&p.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded",children:r}),i&&p.jsx("div",{className:"bg-green-100 text-green-700 p-3 rounded",children:"Saved"}),p.jsxs("div",{className:"flex items-center space-x-6",children:[p.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-love-light border border-love-pink/30",children:d?p.jsx("img",{src:d,alt:"Avatar",className:"w-full h-full object-cover"}):p.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Image"})}),p.jsx("input",{type:"file",accept:"image/*",onChange:v=>{var _;return h(((_=v.target.files)==null?void 0:_[0])||null)},className:"text-sm"})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),p.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:a.name,onChange:w})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),p.jsx("input",{type:"text",name:"address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:a.address,onChange:w})]}),p.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),p.jsx("input",{type:"text",name:"country",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:a.country,onChange:w})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),p.jsxs("select",{name:"gender",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:a.gender,onChange:w,children:[p.jsx("option",{value:"",children:"Select"}),p.jsx("option",{value:"male",children:"Male"}),p.jsx("option",{value:"female",children:"Female"}),p.jsx("option",{value:"other",children:"Other"})]})]})]}),p.jsx("button",{type:"submit",className:"w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg",children:"Save"})]})})]}),p.jsx(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:p.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20 mt-8",children:[p.jsx("h2",{className:"text-2xl font-semibold text-love-dark mb-4",children:"Your Favorites"}),y.length===0?p.jsx("div",{className:"text-gray-600",children:"No favorites yet. Tap the heart on items to save them here."}):p.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:xi.filter(v=>y.includes(v.id)).map(v=>p.jsxs("div",{className:"border border-love-pink/20 rounded-xl overflow-hidden bg-white shadow-sm",children:[p.jsx("img",{src:v.image,alt:v.name,className:"w-full h-40 object-cover"}),p.jsxs("div",{className:"p-4",children:[p.jsx("div",{className:"text-xs text-love-red font-medium mb-1 uppercase tracking-wider",children:v.category}),p.jsx("div",{className:"font-semibold text-gray-800",children:v.name}),p.jsxs("div",{className:"text-love-dark font-bold mt-2",children:["$",v.price.toFixed(2)]})]})]},v.id))})]})})]}):null}function IU(){const[t,e]=b.useState({name:"",email:"",message:""}),[n,r]=b.useState(!1),[s,i]=b.useState(!1);function o(u){const{name:c,value:h}=u.target;e(d=>({...d,[c]:h}))}async function a(u){u.preventDefault(),i(!0),r(!1),await new Promise(c=>setTimeout(c,600)),i(!1),r(!0)}return p.jsx("div",{className:"max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:p.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[p.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-6",children:"Contact Us"}),p.jsx("p",{className:"text-gray-600 mb-8",children:"Wed love to hear from you. Send us a note and well get back soon."}),p.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20",children:[n&&p.jsx("div",{className:"mb-4 bg-green-100 text-green-700 px-4 py-2 rounded",children:"Message sent. Thank you!"}),p.jsxs("form",{onSubmit:a,className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),p.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:t.name,onChange:o})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),p.jsx("input",{type:"email",name:"email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:t.email,onChange:o})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),p.jsx("textarea",{name:"message",required:!0,rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:t.message,onChange:o})]}),p.jsx("button",{type:"submit",disabled:s,className:"w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg",children:s?"Sending...":"Send Message"})]})]})]})})}function PU(){const[t,e]=b.useState(""),[n,r]=b.useState(""),[s,i]=b.useState(""),[o,a]=b.useState(!1),[u,c]=b.useState(!1),h=b.useMemo(()=>`${t||"You"}  ${n||"Your Love"}
${s||"Wishing us endless love, laughter, and sweet moments."}
Happy Valentines Day!`,[t,n,s]);async function d(){a(!1);try{await navigator.clipboard.writeText(h),a(!0),setTimeout(()=>a(!1),1500)}catch{}}function m(w,P,E,v){w.font=v;const _=P.split(" "),R=[];let V="";for(let M=0;M<_.length;M++){const C=V?V+" "+_[M]:_[M];w.measureText(C).width>E&&V?(R.push(V),V=_[M]):V=C}return V&&R.push(V),R}function y(){const w=(t||"You").trim(),P=(n||"Your Love").trim(),E=(s||"Wishing us endless love, laughter, and sweet moments.").trim(),v=document.createElement("canvas");v.width=1080,v.height=1080;const _=v.getContext("2d"),R=_.createLinearGradient(0,0,0,v.height);R.addColorStop(0,"#fff1f5"),R.addColorStop(1,"#fde0e6"),_.fillStyle=R,_.fillRect(0,0,v.width,v.height),_.fillStyle="#cc1d4f",_.font="bold 72px Georgia";const V="Happy Valentines Day",M=_.measureText(V).width;_.fillText(V,(v.width-M)/2,180),_.font="bold 64px Georgia";const C=`${w}  ${P}`,x=_.measureText(C).width;_.fillText(C,(v.width-x)/2,300);const I="48px Arial",A=m(_,E,820,I);_.font=I,_.fillStyle="#6b7280";let N=420;return A.forEach(D=>{const k=_.measureText(D).width;_.fillText(D,(v.width-k)/2,N),N+=68}),_.fillStyle="#cc1d4f",_.globalAlpha=.15,_.font="bold 240px Georgia",_.fillText("",160,860),_.fillText("",760,940),_.globalAlpha=1,v.toDataURL("image/png")}async function S(){c(!0);try{const w=y(),P=document.createElement("a"),E=(t||"You").replace(/\s+/g,"_"),v=(n||"Your_Love").replace(/\s+/g,"_");P.href=w,P.download=`valentine_${E}_${v}.png`,document.body.appendChild(P),P.click(),document.body.removeChild(P)}finally{c(!1)}}return p.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:p.jsxs(ze.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[p.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-6",children:"Create a Valentine Wish"}),p.jsx("p",{className:"text-gray-600 mb-8",children:"Craft a heartfelt message and share it with your partner."}),p.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[p.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-love-pink/20",children:p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Your Name"}),p.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:t,onChange:w=>e(w.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Partner's Name"}),p.jsx("input",{type:"text",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:n,onChange:w=>r(w.target.value)})]}),p.jsxs("div",{children:[p.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Wish Message"}),p.jsx("textarea",{rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",placeholder:"Write your sweet message...",value:s,onChange:w=>i(w.target.value)})]}),p.jsx("button",{onClick:d,className:"w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg",children:"Copy Wish"}),o&&p.jsx("div",{className:"text-green-600 text-sm",children:"Copied to clipboard"}),p.jsx("button",{onClick:S,disabled:u,className:"w-full bg-love-dark text-white py-3 rounded-lg font-medium hover:bg-gray-900 transition-colors shadow-lg",children:u?"Preparing...":"Download Image"})]})}),p.jsxs(ze.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white p-6 rounded-2xl shadow-lg border border-love-pink/20 flex items-center justify-center relative overflow-hidden",children:[p.jsx("div",{className:"absolute inset-0 pointer-events-none",children:p.jsx(ze.div,{initial:{y:0,opacity:.2},animate:{y:-20,opacity:.3},transition:{repeat:1/0,duration:4,repeatType:"reverse"},className:"text-love-pink/30 text-7xl select-none",children:"  "})}),p.jsxs("div",{className:"relative z-10 max-w-md text-center",children:[p.jsx("h2",{className:"text-3xl font-cursive text-love-dark mb-4",children:"Your Wish"}),p.jsx("pre",{className:"whitespace-pre-wrap text-gray-700 bg-love-light/30 rounded-xl p-4 border border-love-pink/20",children:h})]})]})]})]})})}function CU(){const t=[...Array(15)].map((e,n)=>({id:n,left:`${Math.random()*100}%`,animationDuration:`${Math.random()*10+10}s`,delay:`${Math.random()*5}s`,scale:Math.random()*.5+.5}));return p.jsx("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:t.map(e=>p.jsx(ze.div,{initial:{y:"110vh",opacity:0},animate:{y:"-10vh",opacity:[0,.8,0],x:[0,Math.random()*100-50,0]},transition:{duration:parseFloat(e.animationDuration),repeat:1/0,delay:parseFloat(e.delay),ease:"linear"},style:{left:e.left,position:"absolute"},children:p.jsx(Rn,{className:"text-love-pink/30 fill-current",style:{width:`${e.scale*40}px`,height:`${e.scale*40}px`}})},e.id))})}function fw({children:t}){const{currentUser:e}=Mn();return e?t:p.jsx(vk,{to:"/login"})}function AU(){return p.jsx(uL,{children:p.jsx(cL,{children:p.jsxs("div",{className:"min-h-screen bg-love-light/10 flex flex-col relative",children:[p.jsx(CU,{}),p.jsx(qF,{}),p.jsx("main",{className:"flex-grow",children:p.jsxs(wk,{children:[p.jsx(Bt,{path:"/",element:p.jsx(GF,{})}),p.jsx(Bt,{path:"/products",element:p.jsx(eU,{})}),p.jsx(Bt,{path:"/products/:id",element:p.jsx(tU,{})}),p.jsx(Bt,{path:"/cart",element:p.jsx(nU,{})}),p.jsx(Bt,{path:"/checkout",element:p.jsx(sU,{})}),p.jsx(Bt,{path:"/order-success",element:p.jsx(wU,{})}),p.jsx(Bt,{path:"/login",element:p.jsx(xU,{})}),p.jsx(Bt,{path:"/signup",element:p.jsx(EU,{})}),p.jsx(Bt,{path:"/contact",element:p.jsx(IU,{})}),p.jsx(Bt,{path:"/wish",element:p.jsx(PU,{})}),p.jsx(Bt,{path:"/admin",element:p.jsx(fw,{children:p.jsx(TU,{})})}),p.jsx(Bt,{path:"/profile",element:p.jsx(fw,{children:p.jsx(SU,{})})})]})}),p.jsx(KF,{})]})})})}bd.createRoot(document.getElementById("root")).render(p.jsx(Wr.StrictMode,{children:p.jsx(Ck,{children:p.jsx(AU,{})})}));
