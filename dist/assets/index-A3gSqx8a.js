function oP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function aP(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var yx={exports:{}},Ic={},vx={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wa=Symbol.for("react.element"),lP=Symbol.for("react.portal"),uP=Symbol.for("react.fragment"),cP=Symbol.for("react.strict_mode"),dP=Symbol.for("react.profiler"),hP=Symbol.for("react.provider"),fP=Symbol.for("react.context"),pP=Symbol.for("react.forward_ref"),mP=Symbol.for("react.suspense"),gP=Symbol.for("react.memo"),yP=Symbol.for("react.lazy"),Ry=Symbol.iterator;function vP(t){return t===null||typeof t!="object"?null:(t=Ry&&t[Ry]||t["@@iterator"],typeof t=="function"?t:null)}var _x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xx=Object.assign,wx={};function so(t,e,n){this.props=t,this.context=e,this.refs=wx,this.updater=n||_x}so.prototype.isReactComponent={};so.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};so.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ex(){}Ex.prototype=so.prototype;function pp(t,e,n){this.props=t,this.context=e,this.refs=wx,this.updater=n||_x}var mp=pp.prototype=new Ex;mp.constructor=pp;xx(mp,so.prototype);mp.isPureReactComponent=!0;var Ny=Array.isArray,Tx=Object.prototype.hasOwnProperty,gp={current:null},Sx={key:!0,ref:!0,__self:!0,__source:!0};function Ix(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Tx.call(e,r)&&!Sx.hasOwnProperty(r)&&(s[r]=e[r]);var a=arguments.length-2;if(a===1)s.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)s[r]===void 0&&(s[r]=a[r]);return{$$typeof:Wa,type:t,key:i,ref:o,props:s,_owner:gp.current}}function _P(t,e){return{$$typeof:Wa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function yp(t){return typeof t=="object"&&t!==null&&t.$$typeof===Wa}function xP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var jy=/\/+/g;function Dd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?xP(""+t.key):e.toString(36)}function ru(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Wa:case lP:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Dd(o,0):r,Ny(s)?(n="",t!=null&&(n=t.replace(jy,"$&/")+"/"),ru(s,e,n,"",function(c){return c})):s!=null&&(yp(s)&&(s=_P(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(jy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ny(t))for(var a=0;a<t.length;a++){i=t[a];var u=r+Dd(i,a);o+=ru(i,e,n,u,s)}else if(u=vP(t),typeof u=="function")for(t=u.call(t),a=0;!(i=t.next()).done;)i=i.value,u=r+Dd(i,a++),o+=ru(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Al(t,e,n){if(t==null)return t;var r=[],s=0;return ru(t,r,"","",function(i){return e.call(n,i,s++)}),r}function wP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var jt={current:null},su={transition:null},EP={ReactCurrentDispatcher:jt,ReactCurrentBatchConfig:su,ReactCurrentOwner:gp};function Px(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Al,forEach:function(t,e,n){Al(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Al(t,function(){e++}),e},toArray:function(t){return Al(t,function(e){return e})||[]},only:function(t){if(!yp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=so;re.Fragment=uP;re.Profiler=dP;re.PureComponent=pp;re.StrictMode=cP;re.Suspense=mP;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=EP;re.act=Px;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=xx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=gp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)Tx.call(e,u)&&!Sx.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:Wa,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:fP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:hP,_context:t},t.Consumer=t};re.createElement=Ix;re.createFactory=function(t){var e=Ix.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:pP,render:t}};re.isValidElement=yp;re.lazy=function(t){return{$$typeof:yP,_payload:{_status:-1,_result:t},_init:wP}};re.memo=function(t,e){return{$$typeof:gP,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=su.transition;su.transition={};try{t()}finally{su.transition=e}};re.unstable_act=Px;re.useCallback=function(t,e){return jt.current.useCallback(t,e)};re.useContext=function(t){return jt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return jt.current.useDeferredValue(t)};re.useEffect=function(t,e){return jt.current.useEffect(t,e)};re.useId=function(){return jt.current.useId()};re.useImperativeHandle=function(t,e,n){return jt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return jt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return jt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return jt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return jt.current.useReducer(t,e,n)};re.useRef=function(t){return jt.current.useRef(t)};re.useState=function(t){return jt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return jt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return jt.current.useTransition()};re.version="18.3.1";vx.exports=re;var R=vx.exports;const Jr=aP(R),TP=oP({__proto__:null,default:Jr},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SP=R,IP=Symbol.for("react.element"),PP=Symbol.for("react.fragment"),CP=Object.prototype.hasOwnProperty,bP=SP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kP={key:!0,ref:!0,__self:!0,__source:!0};function Cx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)CP.call(e,r)&&!kP.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:IP,type:t,key:i,ref:o,props:s,_owner:bP.current}}Ic.Fragment=PP;Ic.jsx=Cx;Ic.jsxs=Cx;yx.exports=Ic;var d=yx.exports,Mh={},bx={exports:{}},Xt={},kx={exports:{}},Ax={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,H){var G=z.length;z.push(H);e:for(;0<G;){var K=G-1>>>1,Y=z[K];if(0<s(Y,H))z[K]=H,z[G]=Y,G=K;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var H=z[0],G=z.pop();if(G!==H){z[0]=G;e:for(var K=0,Y=z.length,de=Y>>>1;K<de;){var ge=2*(K+1)-1,we=z[ge],Fe=ge+1,He=z[Fe];if(0>s(we,G))Fe<Y&&0>s(He,we)?(z[K]=He,z[Fe]=G,K=Fe):(z[K]=we,z[ge]=G,K=ge);else if(Fe<Y&&0>s(He,G))z[K]=He,z[Fe]=G,K=Fe;else break e}}return H}function s(z,H){var G=z.sortIndex-H.sortIndex;return G!==0?G:z.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],h=1,f=null,m=3,y=!1,E=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(z){for(var H=n(c);H!==null;){if(H.callback===null)r(c);else if(H.startTime<=z)r(c),H.sortIndex=H.expirationTime,e(u,H);else break;H=n(c)}}function b(z){if(T=!1,x(z),!E)if(n(u)!==null)E=!0,ye(D);else{var H=n(c);H!==null&&me(b,H.startTime-z)}}function D(z,H){E=!1,T&&(T=!1,w(_),_=-1),y=!0;var G=m;try{for(x(H),f=n(u);f!==null&&(!(f.expirationTime>H)||z&&!N());){var K=f.callback;if(typeof K=="function"){f.callback=null,m=f.priorityLevel;var Y=K(f.expirationTime<=H);H=t.unstable_now(),typeof Y=="function"?f.callback=Y:f===n(u)&&r(u),x(H)}else r(u);f=n(u)}if(f!==null)var de=!0;else{var ge=n(c);ge!==null&&me(b,ge.startTime-H),de=!1}return de}finally{f=null,m=G,y=!1}}var M=!1,I=null,_=-1,P=5,k=-1;function N(){return!(t.unstable_now()-k<P)}function j(){if(I!==null){var z=t.unstable_now();k=z;var H=!0;try{H=I(!0,z)}finally{H?A():(M=!1,I=null)}}else M=!1}var A;if(typeof v=="function")A=function(){v(j)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,Ye=oe.port2;oe.port1.onmessage=j,A=function(){Ye.postMessage(null)}}else A=function(){C(j,0)};function ye(z){I=z,M||(M=!0,A())}function me(z,H){_=C(function(){z(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){E||y||(E=!0,ye(D))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var G=m;m=H;try{return z()}finally{m=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,H){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var G=m;m=z;try{return H()}finally{m=G}},t.unstable_scheduleCallback=function(z,H,G){var K=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?K+G:K):G=K,z){case 1:var Y=-1;break;case 2:Y=250;break;case 5:Y=1073741823;break;case 4:Y=1e4;break;default:Y=5e3}return Y=G+Y,z={id:h++,callback:H,priorityLevel:z,startTime:G,expirationTime:Y,sortIndex:-1},G>K?(z.sortIndex=G,e(c,z),n(u)===null&&z===n(c)&&(T?(w(_),_=-1):T=!0,me(b,G-K))):(z.sortIndex=Y,e(u,z),E||y||(E=!0,ye(D))),z},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(z){var H=m;return function(){var G=m;m=H;try{return z.apply(this,arguments)}finally{m=G}}}})(Ax);kx.exports=Ax;var AP=kx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RP=R,Qt=AP;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rx=new Set,ga={};function Ys(t,e){Li(t,e),Li(t+"Capture",e)}function Li(t,e){for(ga[t]=e,t=0;t<e.length;t++)Rx.add(e[t])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oh=Object.prototype.hasOwnProperty,NP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dy={},Vy={};function jP(t){return Oh.call(Vy,t)?!0:Oh.call(Dy,t)?!1:NP.test(t)?Vy[t]=!0:(Dy[t]=!0,!1)}function DP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function VP(t,e,n,r){if(e===null||typeof e>"u"||DP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Dt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ft={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ft[t]=new Dt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ft[e]=new Dt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ft[t]=new Dt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ft[t]=new Dt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ft[t]=new Dt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ft[t]=new Dt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ft[t]=new Dt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ft[t]=new Dt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ft[t]=new Dt(t,5,!1,t.toLowerCase(),null,!1,!1)});var vp=/[\-:]([a-z])/g;function _p(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(vp,_p);ft[e]=new Dt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(vp,_p);ft[e]=new Dt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(vp,_p);ft[e]=new Dt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ft[t]=new Dt(t,1,!1,t.toLowerCase(),null,!1,!1)});ft.xlinkHref=new Dt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ft[t]=new Dt(t,1,!1,t.toLowerCase(),null,!0,!0)});function xp(t,e,n,r){var s=ft.hasOwnProperty(e)?ft[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(VP(e,n,s,r)&&(n=null),r||s===null?jP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var pr=RP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rl=Symbol.for("react.element"),di=Symbol.for("react.portal"),hi=Symbol.for("react.fragment"),wp=Symbol.for("react.strict_mode"),Lh=Symbol.for("react.profiler"),Nx=Symbol.for("react.provider"),jx=Symbol.for("react.context"),Ep=Symbol.for("react.forward_ref"),Fh=Symbol.for("react.suspense"),Uh=Symbol.for("react.suspense_list"),Tp=Symbol.for("react.memo"),Ir=Symbol.for("react.lazy"),Dx=Symbol.for("react.offscreen"),My=Symbol.iterator;function Ao(t){return t===null||typeof t!="object"?null:(t=My&&t[My]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,Vd;function Bo(t){if(Vd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vd=e&&e[1]||""}return`
`+Vd+t}var Md=!1;function Od(t,e){if(!t||Md)return"";Md=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{Md=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Bo(t):""}function MP(t){switch(t.tag){case 5:return Bo(t.type);case 16:return Bo("Lazy");case 13:return Bo("Suspense");case 19:return Bo("SuspenseList");case 0:case 2:case 15:return t=Od(t.type,!1),t;case 11:return t=Od(t.type.render,!1),t;case 1:return t=Od(t.type,!0),t;default:return""}}function Bh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hi:return"Fragment";case di:return"Portal";case Lh:return"Profiler";case wp:return"StrictMode";case Fh:return"Suspense";case Uh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jx:return(t.displayName||"Context")+".Consumer";case Nx:return(t._context.displayName||"Context")+".Provider";case Ep:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tp:return e=t.displayName||null,e!==null?e:Bh(t.type)||"Memo";case Ir:e=t._payload,t=t._init;try{return Bh(t(e))}catch{}}return null}function OP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Bh(e);case 8:return e===wp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function LP(t){var e=Vx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Nl(t){t._valueTracker||(t._valueTracker=LP(t))}function Mx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Vx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Cu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zh(t,e){var n=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Oy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Ox(t,e){e=e.checked,e!=null&&xp(t,"checked",e,!1)}function $h(t,e){Ox(t,e);var n=Zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hh(t,e.type,Zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ly(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hh(t,e,n){(e!=="number"||Cu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zo=Array.isArray;function bi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Zr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Wh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Fy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(zo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Zr(n)}}function Lx(t,e){var n=Zr(e.value),r=Zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Uy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Fx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Fx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var jl,Ux=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(jl=jl||document.createElement("div"),jl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=jl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Xo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},FP=["Webkit","ms","Moz","O"];Object.keys(Xo).forEach(function(t){FP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Xo[e]=Xo[t]})});function Bx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Xo.hasOwnProperty(t)&&Xo[t]?(""+e).trim():e+"px"}function zx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Bx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var UP=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Gh(t,e){if(e){if(UP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Kh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qh=null;function Sp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Yh=null,ki=null,Ai=null;function By(t){if(t=Ka(t)){if(typeof Yh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Ac(e),Yh(t.stateNode,t.type,e))}}function $x(t){ki?Ai?Ai.push(t):Ai=[t]:ki=t}function Hx(){if(ki){var t=ki,e=Ai;if(Ai=ki=null,By(t),e)for(t=0;t<e.length;t++)By(e[t])}}function Wx(t,e){return t(e)}function qx(){}var Ld=!1;function Gx(t,e,n){if(Ld)return t(e,n);Ld=!0;try{return Wx(t,e,n)}finally{Ld=!1,(ki!==null||Ai!==null)&&(qx(),Hx())}}function va(t,e){var n=t.stateNode;if(n===null)return null;var r=Ac(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Xh=!1;if(ir)try{var Ro={};Object.defineProperty(Ro,"passive",{get:function(){Xh=!0}}),window.addEventListener("test",Ro,Ro),window.removeEventListener("test",Ro,Ro)}catch{Xh=!1}function BP(t,e,n,r,s,i,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(h){this.onError(h)}}var Jo=!1,bu=null,ku=!1,Jh=null,zP={onError:function(t){Jo=!0,bu=t}};function $P(t,e,n,r,s,i,o,a,u){Jo=!1,bu=null,BP.apply(zP,arguments)}function HP(t,e,n,r,s,i,o,a,u){if($P.apply(this,arguments),Jo){if(Jo){var c=bu;Jo=!1,bu=null}else throw Error(U(198));ku||(ku=!0,Jh=c)}}function Xs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Kx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function zy(t){if(Xs(t)!==t)throw Error(U(188))}function WP(t){var e=t.alternate;if(!e){if(e=Xs(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return zy(s),t;if(i===r)return zy(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Qx(t){return t=WP(t),t!==null?Yx(t):null}function Yx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Yx(t);if(e!==null)return e;t=t.sibling}return null}var Xx=Qt.unstable_scheduleCallback,$y=Qt.unstable_cancelCallback,qP=Qt.unstable_shouldYield,GP=Qt.unstable_requestPaint,Be=Qt.unstable_now,KP=Qt.unstable_getCurrentPriorityLevel,Ip=Qt.unstable_ImmediatePriority,Jx=Qt.unstable_UserBlockingPriority,Au=Qt.unstable_NormalPriority,QP=Qt.unstable_LowPriority,Zx=Qt.unstable_IdlePriority,Pc=null,kn=null;function YP(t){if(kn&&typeof kn.onCommitFiberRoot=="function")try{kn.onCommitFiberRoot(Pc,t,void 0,(t.current.flags&128)===128)}catch{}}var _n=Math.clz32?Math.clz32:ZP,XP=Math.log,JP=Math.LN2;function ZP(t){return t>>>=0,t===0?32:31-(XP(t)/JP|0)|0}var Dl=64,Vl=4194304;function $o(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ru(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~s;a!==0?r=$o(a):(i&=o,i!==0&&(r=$o(i)))}else o=n&~s,o!==0?r=$o(o):i!==0&&(r=$o(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-_n(e),s=1<<n,r|=t[n],e&=~s;return r}function eC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tC(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-_n(i),a=1<<o,u=s[o];u===-1?(!(a&n)||a&r)&&(s[o]=eC(a,e)):u<=e&&(t.expiredLanes|=a),i&=~a}}function Zh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function ew(){var t=Dl;return Dl<<=1,!(Dl&4194240)&&(Dl=64),t}function Fd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function qa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-_n(e),t[e]=n}function nC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-_n(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Pp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-_n(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ve=0;function tw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var nw,Cp,rw,sw,iw,ef=!1,Ml=[],Lr=null,Fr=null,Ur=null,_a=new Map,xa=new Map,kr=[],rC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hy(t,e){switch(t){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Fr=null;break;case"mouseover":case"mouseout":Ur=null;break;case"pointerover":case"pointerout":_a.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xa.delete(e.pointerId)}}function No(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ka(e),e!==null&&Cp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function sC(t,e,n,r,s){switch(e){case"focusin":return Lr=No(Lr,t,e,n,r,s),!0;case"dragenter":return Fr=No(Fr,t,e,n,r,s),!0;case"mouseover":return Ur=No(Ur,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return _a.set(i,No(_a.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,xa.set(i,No(xa.get(i)||null,t,e,n,r,s)),!0}return!1}function ow(t){var e=Cs(t.target);if(e!==null){var n=Xs(e);if(n!==null){if(e=n.tag,e===13){if(e=Kx(n),e!==null){t.blockedOn=e,iw(t.priority,function(){rw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function iu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=tf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Qh=r,n.target.dispatchEvent(r),Qh=null}else return e=Ka(n),e!==null&&Cp(e),t.blockedOn=n,!1;e.shift()}return!0}function Wy(t,e,n){iu(t)&&n.delete(e)}function iC(){ef=!1,Lr!==null&&iu(Lr)&&(Lr=null),Fr!==null&&iu(Fr)&&(Fr=null),Ur!==null&&iu(Ur)&&(Ur=null),_a.forEach(Wy),xa.forEach(Wy)}function jo(t,e){t.blockedOn===e&&(t.blockedOn=null,ef||(ef=!0,Qt.unstable_scheduleCallback(Qt.unstable_NormalPriority,iC)))}function wa(t){function e(s){return jo(s,t)}if(0<Ml.length){jo(Ml[0],t);for(var n=1;n<Ml.length;n++){var r=Ml[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Lr!==null&&jo(Lr,t),Fr!==null&&jo(Fr,t),Ur!==null&&jo(Ur,t),_a.forEach(e),xa.forEach(e),n=0;n<kr.length;n++)r=kr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<kr.length&&(n=kr[0],n.blockedOn===null);)ow(n),n.blockedOn===null&&kr.shift()}var Ri=pr.ReactCurrentBatchConfig,Nu=!0;function oC(t,e,n,r){var s=ve,i=Ri.transition;Ri.transition=null;try{ve=1,bp(t,e,n,r)}finally{ve=s,Ri.transition=i}}function aC(t,e,n,r){var s=ve,i=Ri.transition;Ri.transition=null;try{ve=4,bp(t,e,n,r)}finally{ve=s,Ri.transition=i}}function bp(t,e,n,r){if(Nu){var s=tf(t,e,n,r);if(s===null)Qd(t,e,r,ju,n),Hy(t,r);else if(sC(s,t,e,n,r))r.stopPropagation();else if(Hy(t,r),e&4&&-1<rC.indexOf(t)){for(;s!==null;){var i=Ka(s);if(i!==null&&nw(i),i=tf(t,e,n,r),i===null&&Qd(t,e,r,ju,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Qd(t,e,r,null,n)}}var ju=null;function tf(t,e,n,r){if(ju=null,t=Sp(r),t=Cs(t),t!==null)if(e=Xs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Kx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ju=t,null}function aw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(KP()){case Ip:return 1;case Jx:return 4;case Au:case QP:return 16;case Zx:return 536870912;default:return 16}default:return 16}}var Dr=null,kp=null,ou=null;function lw(){if(ou)return ou;var t,e=kp,n=e.length,r,s="value"in Dr?Dr.value:Dr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return ou=s.slice(t,1<r?1-r:void 0)}function au(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ol(){return!0}function qy(){return!1}function Jt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ol:qy,this.isPropagationStopped=qy,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ol)},persist:function(){},isPersistent:Ol}),e}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ap=Jt(io),Ga=De({},io,{view:0,detail:0}),lC=Jt(Ga),Ud,Bd,Do,Cc=De({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Rp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Do&&(Do&&t.type==="mousemove"?(Ud=t.screenX-Do.screenX,Bd=t.screenY-Do.screenY):Bd=Ud=0,Do=t),Ud)},movementY:function(t){return"movementY"in t?t.movementY:Bd}}),Gy=Jt(Cc),uC=De({},Cc,{dataTransfer:0}),cC=Jt(uC),dC=De({},Ga,{relatedTarget:0}),zd=Jt(dC),hC=De({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),fC=Jt(hC),pC=De({},io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),mC=Jt(pC),gC=De({},io,{data:0}),Ky=Jt(gC),yC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_C={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=_C[t])?!!e[t]:!1}function Rp(){return xC}var wC=De({},Ga,{key:function(t){if(t.key){var e=yC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=au(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?vC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Rp,charCode:function(t){return t.type==="keypress"?au(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?au(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),EC=Jt(wC),TC=De({},Cc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qy=Jt(TC),SC=De({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Rp}),IC=Jt(SC),PC=De({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),CC=Jt(PC),bC=De({},Cc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),kC=Jt(bC),AC=[9,13,27,32],Np=ir&&"CompositionEvent"in window,Zo=null;ir&&"documentMode"in document&&(Zo=document.documentMode);var RC=ir&&"TextEvent"in window&&!Zo,uw=ir&&(!Np||Zo&&8<Zo&&11>=Zo),Yy=" ",Xy=!1;function cw(t,e){switch(t){case"keyup":return AC.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var fi=!1;function NC(t,e){switch(t){case"compositionend":return dw(e);case"keypress":return e.which!==32?null:(Xy=!0,Yy);case"textInput":return t=e.data,t===Yy&&Xy?null:t;default:return null}}function jC(t,e){if(fi)return t==="compositionend"||!Np&&cw(t,e)?(t=lw(),ou=kp=Dr=null,fi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return uw&&e.locale!=="ko"?null:e.data;default:return null}}var DC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!DC[t.type]:e==="textarea"}function hw(t,e,n,r){$x(r),e=Du(e,"onChange"),0<e.length&&(n=new Ap("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ea=null,Ea=null;function VC(t){Tw(t,0)}function bc(t){var e=gi(t);if(Mx(e))return t}function MC(t,e){if(t==="change")return e}var fw=!1;if(ir){var $d;if(ir){var Hd="oninput"in document;if(!Hd){var Zy=document.createElement("div");Zy.setAttribute("oninput","return;"),Hd=typeof Zy.oninput=="function"}$d=Hd}else $d=!1;fw=$d&&(!document.documentMode||9<document.documentMode)}function ev(){ea&&(ea.detachEvent("onpropertychange",pw),Ea=ea=null)}function pw(t){if(t.propertyName==="value"&&bc(Ea)){var e=[];hw(e,Ea,t,Sp(t)),Gx(VC,e)}}function OC(t,e,n){t==="focusin"?(ev(),ea=e,Ea=n,ea.attachEvent("onpropertychange",pw)):t==="focusout"&&ev()}function LC(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bc(Ea)}function FC(t,e){if(t==="click")return bc(e)}function UC(t,e){if(t==="input"||t==="change")return bc(e)}function BC(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Sn=typeof Object.is=="function"?Object.is:BC;function Ta(t,e){if(Sn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Oh.call(e,s)||!Sn(t[s],e[s]))return!1}return!0}function tv(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nv(t,e){var n=tv(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tv(n)}}function mw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function gw(){for(var t=window,e=Cu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Cu(t.document)}return e}function jp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function zC(t){var e=gw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mw(n.ownerDocument.documentElement,n)){if(r!==null&&jp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=nv(n,i);var o=nv(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var $C=ir&&"documentMode"in document&&11>=document.documentMode,pi=null,nf=null,ta=null,rf=!1;function rv(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;rf||pi==null||pi!==Cu(r)||(r=pi,"selectionStart"in r&&jp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ta&&Ta(ta,r)||(ta=r,r=Du(nf,"onSelect"),0<r.length&&(e=new Ap("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pi)))}function Ll(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var mi={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionend:Ll("Transition","TransitionEnd")},Wd={},yw={};ir&&(yw=document.createElement("div").style,"AnimationEvent"in window||(delete mi.animationend.animation,delete mi.animationiteration.animation,delete mi.animationstart.animation),"TransitionEvent"in window||delete mi.transitionend.transition);function kc(t){if(Wd[t])return Wd[t];if(!mi[t])return t;var e=mi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in yw)return Wd[t]=e[n];return t}var vw=kc("animationend"),_w=kc("animationiteration"),xw=kc("animationstart"),ww=kc("transitionend"),Ew=new Map,sv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ls(t,e){Ew.set(t,e),Ys(e,[t])}for(var qd=0;qd<sv.length;qd++){var Gd=sv[qd],HC=Gd.toLowerCase(),WC=Gd[0].toUpperCase()+Gd.slice(1);ls(HC,"on"+WC)}ls(vw,"onAnimationEnd");ls(_w,"onAnimationIteration");ls(xw,"onAnimationStart");ls("dblclick","onDoubleClick");ls("focusin","onFocus");ls("focusout","onBlur");ls(ww,"onTransitionEnd");Li("onMouseEnter",["mouseout","mouseover"]);Li("onMouseLeave",["mouseout","mouseover"]);Li("onPointerEnter",["pointerout","pointerover"]);Li("onPointerLeave",["pointerout","pointerover"]);Ys("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ys("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ys("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ys("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ys("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),qC=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ho));function iv(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,HP(r,e,void 0,t),t.currentTarget=null}function Tw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==i&&s.isPropagationStopped())break e;iv(s,a,c),i=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==i&&s.isPropagationStopped())break e;iv(s,a,c),i=u}}}if(ku)throw t=Jh,ku=!1,Jh=null,t}function Ce(t,e){var n=e[uf];n===void 0&&(n=e[uf]=new Set);var r=t+"__bubble";n.has(r)||(Sw(e,t,2,!1),n.add(r))}function Kd(t,e,n){var r=0;e&&(r|=4),Sw(n,t,r,e)}var Fl="_reactListening"+Math.random().toString(36).slice(2);function Sa(t){if(!t[Fl]){t[Fl]=!0,Rx.forEach(function(n){n!=="selectionchange"&&(qC.has(n)||Kd(n,!1,t),Kd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Fl]||(e[Fl]=!0,Kd("selectionchange",!1,e))}}function Sw(t,e,n,r){switch(aw(e)){case 1:var s=oC;break;case 4:s=aC;break;default:s=bp}n=s.bind(null,e,n,t),s=void 0,!Xh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Qd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;a!==null;){if(o=Cs(a),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}a=a.parentNode}}r=r.return}Gx(function(){var c=i,h=Sp(n),f=[];e:{var m=Ew.get(t);if(m!==void 0){var y=Ap,E=t;switch(t){case"keypress":if(au(n)===0)break e;case"keydown":case"keyup":y=EC;break;case"focusin":E="focus",y=zd;break;case"focusout":E="blur",y=zd;break;case"beforeblur":case"afterblur":y=zd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Gy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=cC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=IC;break;case vw:case _w:case xw:y=fC;break;case ww:y=CC;break;case"scroll":y=lC;break;case"wheel":y=kC;break;case"copy":case"cut":case"paste":y=mC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Qy}var T=(e&4)!==0,C=!T&&t==="scroll",w=T?m!==null?m+"Capture":null:m;T=[];for(var v=c,x;v!==null;){x=v;var b=x.stateNode;if(x.tag===5&&b!==null&&(x=b,w!==null&&(b=va(v,w),b!=null&&T.push(Ia(v,b,x)))),C)break;v=v.return}0<T.length&&(m=new y(m,E,null,n,h),f.push({event:m,listeners:T}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Qh&&(E=n.relatedTarget||n.fromElement)&&(Cs(E)||E[or]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(E=n.relatedTarget||n.toElement,y=c,E=E?Cs(E):null,E!==null&&(C=Xs(E),E!==C||E.tag!==5&&E.tag!==6)&&(E=null)):(y=null,E=c),y!==E)){if(T=Gy,b="onMouseLeave",w="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(T=Qy,b="onPointerLeave",w="onPointerEnter",v="pointer"),C=y==null?m:gi(y),x=E==null?m:gi(E),m=new T(b,v+"leave",y,n,h),m.target=C,m.relatedTarget=x,b=null,Cs(h)===c&&(T=new T(w,v+"enter",E,n,h),T.target=x,T.relatedTarget=C,b=T),C=b,y&&E)t:{for(T=y,w=E,v=0,x=T;x;x=ai(x))v++;for(x=0,b=w;b;b=ai(b))x++;for(;0<v-x;)T=ai(T),v--;for(;0<x-v;)w=ai(w),x--;for(;v--;){if(T===w||w!==null&&T===w.alternate)break t;T=ai(T),w=ai(w)}T=null}else T=null;y!==null&&ov(f,m,y,T,!1),E!==null&&C!==null&&ov(f,C,E,T,!0)}}e:{if(m=c?gi(c):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var D=MC;else if(Jy(m))if(fw)D=UC;else{D=LC;var M=OC}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=FC);if(D&&(D=D(t,c))){hw(f,D,n,h);break e}M&&M(t,m,c),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Hh(m,"number",m.value)}switch(M=c?gi(c):window,t){case"focusin":(Jy(M)||M.contentEditable==="true")&&(pi=M,nf=c,ta=null);break;case"focusout":ta=nf=pi=null;break;case"mousedown":rf=!0;break;case"contextmenu":case"mouseup":case"dragend":rf=!1,rv(f,n,h);break;case"selectionchange":if($C)break;case"keydown":case"keyup":rv(f,n,h)}var I;if(Np)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else fi?cw(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(uw&&n.locale!=="ko"&&(fi||_!=="onCompositionStart"?_==="onCompositionEnd"&&fi&&(I=lw()):(Dr=h,kp="value"in Dr?Dr.value:Dr.textContent,fi=!0)),M=Du(c,_),0<M.length&&(_=new Ky(_,t,null,n,h),f.push({event:_,listeners:M}),I?_.data=I:(I=dw(n),I!==null&&(_.data=I)))),(I=RC?NC(t,n):jC(t,n))&&(c=Du(c,"onBeforeInput"),0<c.length&&(h=new Ky("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:c}),h.data=I))}Tw(f,e)})}function Ia(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Du(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=va(t,n),i!=null&&r.unshift(Ia(t,i,s)),i=va(t,e),i!=null&&r.push(Ia(t,i,s))),t=t.return}return r}function ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ov(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,s?(u=va(n,i),u!=null&&o.unshift(Ia(n,u,a))):s||(u=va(n,i),u!=null&&o.push(Ia(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var GC=/\r\n?/g,KC=/\u0000|\uFFFD/g;function av(t){return(typeof t=="string"?t:""+t).replace(GC,`
`).replace(KC,"")}function Ul(t,e,n){if(e=av(e),av(t)!==e&&n)throw Error(U(425))}function Vu(){}var sf=null,of=null;function af(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lf=typeof setTimeout=="function"?setTimeout:void 0,QC=typeof clearTimeout=="function"?clearTimeout:void 0,lv=typeof Promise=="function"?Promise:void 0,YC=typeof queueMicrotask=="function"?queueMicrotask:typeof lv<"u"?function(t){return lv.resolve(null).then(t).catch(XC)}:lf;function XC(t){setTimeout(function(){throw t})}function Yd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),wa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);wa(e)}function Br(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function uv(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oo=Math.random().toString(36).slice(2),bn="__reactFiber$"+oo,Pa="__reactProps$"+oo,or="__reactContainer$"+oo,uf="__reactEvents$"+oo,JC="__reactListeners$"+oo,ZC="__reactHandles$"+oo;function Cs(t){var e=t[bn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[or]||n[bn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=uv(t);t!==null;){if(n=t[bn])return n;t=uv(t)}return e}t=n,n=t.parentNode}return null}function Ka(t){return t=t[bn]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function gi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Ac(t){return t[Pa]||null}var cf=[],yi=-1;function us(t){return{current:t}}function be(t){0>yi||(t.current=cf[yi],cf[yi]=null,yi--)}function Te(t,e){yi++,cf[yi]=t.current,t.current=e}var es={},It=us(es),Lt=us(!1),Os=es;function Fi(t,e){var n=t.type.contextTypes;if(!n)return es;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ft(t){return t=t.childContextTypes,t!=null}function Mu(){be(Lt),be(It)}function cv(t,e,n){if(It.current!==es)throw Error(U(168));Te(It,e),Te(Lt,n)}function Iw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,OP(t)||"Unknown",s));return De({},n,r)}function Ou(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||es,Os=It.current,Te(It,t),Te(Lt,Lt.current),!0}function dv(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=Iw(t,e,Os),r.__reactInternalMemoizedMergedChildContext=t,be(Lt),be(It),Te(It,t)):be(Lt),Te(Lt,n)}var Gn=null,Rc=!1,Xd=!1;function Pw(t){Gn===null?Gn=[t]:Gn.push(t)}function eb(t){Rc=!0,Pw(t)}function cs(){if(!Xd&&Gn!==null){Xd=!0;var t=0,e=ve;try{var n=Gn;for(ve=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Gn=null,Rc=!1}catch(s){throw Gn!==null&&(Gn=Gn.slice(t+1)),Xx(Ip,cs),s}finally{ve=e,Xd=!1}}return null}var vi=[],_i=0,Lu=null,Fu=0,rn=[],sn=0,Ls=null,Qn=1,Yn="";function ws(t,e){vi[_i++]=Fu,vi[_i++]=Lu,Lu=t,Fu=e}function Cw(t,e,n){rn[sn++]=Qn,rn[sn++]=Yn,rn[sn++]=Ls,Ls=t;var r=Qn;t=Yn;var s=32-_n(r)-1;r&=~(1<<s),n+=1;var i=32-_n(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Qn=1<<32-_n(e)+s|n<<s|r,Yn=i+t}else Qn=1<<i|n<<s|r,Yn=t}function Dp(t){t.return!==null&&(ws(t,1),Cw(t,1,0))}function Vp(t){for(;t===Lu;)Lu=vi[--_i],vi[_i]=null,Fu=vi[--_i],vi[_i]=null;for(;t===Ls;)Ls=rn[--sn],rn[sn]=null,Yn=rn[--sn],rn[sn]=null,Qn=rn[--sn],rn[sn]=null}var Kt=null,qt=null,ke=!1,gn=null;function bw(t,e){var n=on(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function hv(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Kt=t,qt=Br(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Kt=t,qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ls!==null?{id:Qn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=on(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Kt=t,qt=null,!0):!1;default:return!1}}function df(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hf(t){if(ke){var e=qt;if(e){var n=e;if(!hv(t,e)){if(df(t))throw Error(U(418));e=Br(n.nextSibling);var r=Kt;e&&hv(t,e)?bw(r,n):(t.flags=t.flags&-4097|2,ke=!1,Kt=t)}}else{if(df(t))throw Error(U(418));t.flags=t.flags&-4097|2,ke=!1,Kt=t}}}function fv(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Kt=t}function Bl(t){if(t!==Kt)return!1;if(!ke)return fv(t),ke=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!af(t.type,t.memoizedProps)),e&&(e=qt)){if(df(t))throw kw(),Error(U(418));for(;e;)bw(t,e),e=Br(e.nextSibling)}if(fv(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qt=Br(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qt=null}}else qt=Kt?Br(t.stateNode.nextSibling):null;return!0}function kw(){for(var t=qt;t;)t=Br(t.nextSibling)}function Ui(){qt=Kt=null,ke=!1}function Mp(t){gn===null?gn=[t]:gn.push(t)}var tb=pr.ReactCurrentBatchConfig;function Vo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function zl(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function pv(t){var e=t._init;return e(t._payload)}function Aw(t){function e(w,v){if(t){var x=w.deletions;x===null?(w.deletions=[v],w.flags|=16):x.push(v)}}function n(w,v){if(!t)return null;for(;v!==null;)e(w,v),v=v.sibling;return null}function r(w,v){for(w=new Map;v!==null;)v.key!==null?w.set(v.key,v):w.set(v.index,v),v=v.sibling;return w}function s(w,v){return w=Wr(w,v),w.index=0,w.sibling=null,w}function i(w,v,x){return w.index=x,t?(x=w.alternate,x!==null?(x=x.index,x<v?(w.flags|=2,v):x):(w.flags|=2,v)):(w.flags|=1048576,v)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function a(w,v,x,b){return v===null||v.tag!==6?(v=sh(x,w.mode,b),v.return=w,v):(v=s(v,x),v.return=w,v)}function u(w,v,x,b){var D=x.type;return D===hi?h(w,v,x.props.children,b,x.key):v!==null&&(v.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ir&&pv(D)===v.type)?(b=s(v,x.props),b.ref=Vo(w,v,x),b.return=w,b):(b=pu(x.type,x.key,x.props,null,w.mode,b),b.ref=Vo(w,v,x),b.return=w,b)}function c(w,v,x,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==x.containerInfo||v.stateNode.implementation!==x.implementation?(v=ih(x,w.mode,b),v.return=w,v):(v=s(v,x.children||[]),v.return=w,v)}function h(w,v,x,b,D){return v===null||v.tag!==7?(v=Ds(x,w.mode,b,D),v.return=w,v):(v=s(v,x),v.return=w,v)}function f(w,v,x){if(typeof v=="string"&&v!==""||typeof v=="number")return v=sh(""+v,w.mode,x),v.return=w,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Rl:return x=pu(v.type,v.key,v.props,null,w.mode,x),x.ref=Vo(w,null,v),x.return=w,x;case di:return v=ih(v,w.mode,x),v.return=w,v;case Ir:var b=v._init;return f(w,b(v._payload),x)}if(zo(v)||Ao(v))return v=Ds(v,w.mode,x,null),v.return=w,v;zl(w,v)}return null}function m(w,v,x,b){var D=v!==null?v.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return D!==null?null:a(w,v,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Rl:return x.key===D?u(w,v,x,b):null;case di:return x.key===D?c(w,v,x,b):null;case Ir:return D=x._init,m(w,v,D(x._payload),b)}if(zo(x)||Ao(x))return D!==null?null:h(w,v,x,b,null);zl(w,x)}return null}function y(w,v,x,b,D){if(typeof b=="string"&&b!==""||typeof b=="number")return w=w.get(x)||null,a(v,w,""+b,D);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Rl:return w=w.get(b.key===null?x:b.key)||null,u(v,w,b,D);case di:return w=w.get(b.key===null?x:b.key)||null,c(v,w,b,D);case Ir:var M=b._init;return y(w,v,x,M(b._payload),D)}if(zo(b)||Ao(b))return w=w.get(x)||null,h(v,w,b,D,null);zl(v,b)}return null}function E(w,v,x,b){for(var D=null,M=null,I=v,_=v=0,P=null;I!==null&&_<x.length;_++){I.index>_?(P=I,I=null):P=I.sibling;var k=m(w,I,x[_],b);if(k===null){I===null&&(I=P);break}t&&I&&k.alternate===null&&e(w,I),v=i(k,v,_),M===null?D=k:M.sibling=k,M=k,I=P}if(_===x.length)return n(w,I),ke&&ws(w,_),D;if(I===null){for(;_<x.length;_++)I=f(w,x[_],b),I!==null&&(v=i(I,v,_),M===null?D=I:M.sibling=I,M=I);return ke&&ws(w,_),D}for(I=r(w,I);_<x.length;_++)P=y(I,w,_,x[_],b),P!==null&&(t&&P.alternate!==null&&I.delete(P.key===null?_:P.key),v=i(P,v,_),M===null?D=P:M.sibling=P,M=P);return t&&I.forEach(function(N){return e(w,N)}),ke&&ws(w,_),D}function T(w,v,x,b){var D=Ao(x);if(typeof D!="function")throw Error(U(150));if(x=D.call(x),x==null)throw Error(U(151));for(var M=D=null,I=v,_=v=0,P=null,k=x.next();I!==null&&!k.done;_++,k=x.next()){I.index>_?(P=I,I=null):P=I.sibling;var N=m(w,I,k.value,b);if(N===null){I===null&&(I=P);break}t&&I&&N.alternate===null&&e(w,I),v=i(N,v,_),M===null?D=N:M.sibling=N,M=N,I=P}if(k.done)return n(w,I),ke&&ws(w,_),D;if(I===null){for(;!k.done;_++,k=x.next())k=f(w,k.value,b),k!==null&&(v=i(k,v,_),M===null?D=k:M.sibling=k,M=k);return ke&&ws(w,_),D}for(I=r(w,I);!k.done;_++,k=x.next())k=y(I,w,_,k.value,b),k!==null&&(t&&k.alternate!==null&&I.delete(k.key===null?_:k.key),v=i(k,v,_),M===null?D=k:M.sibling=k,M=k);return t&&I.forEach(function(j){return e(w,j)}),ke&&ws(w,_),D}function C(w,v,x,b){if(typeof x=="object"&&x!==null&&x.type===hi&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case Rl:e:{for(var D=x.key,M=v;M!==null;){if(M.key===D){if(D=x.type,D===hi){if(M.tag===7){n(w,M.sibling),v=s(M,x.props.children),v.return=w,w=v;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ir&&pv(D)===M.type){n(w,M.sibling),v=s(M,x.props),v.ref=Vo(w,M,x),v.return=w,w=v;break e}n(w,M);break}else e(w,M);M=M.sibling}x.type===hi?(v=Ds(x.props.children,w.mode,b,x.key),v.return=w,w=v):(b=pu(x.type,x.key,x.props,null,w.mode,b),b.ref=Vo(w,v,x),b.return=w,w=b)}return o(w);case di:e:{for(M=x.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===x.containerInfo&&v.stateNode.implementation===x.implementation){n(w,v.sibling),v=s(v,x.children||[]),v.return=w,w=v;break e}else{n(w,v);break}else e(w,v);v=v.sibling}v=ih(x,w.mode,b),v.return=w,w=v}return o(w);case Ir:return M=x._init,C(w,v,M(x._payload),b)}if(zo(x))return E(w,v,x,b);if(Ao(x))return T(w,v,x,b);zl(w,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,v!==null&&v.tag===6?(n(w,v.sibling),v=s(v,x),v.return=w,w=v):(n(w,v),v=sh(x,w.mode,b),v.return=w,w=v),o(w)):n(w,v)}return C}var Bi=Aw(!0),Rw=Aw(!1),Uu=us(null),Bu=null,xi=null,Op=null;function Lp(){Op=xi=Bu=null}function Fp(t){var e=Uu.current;be(Uu),t._currentValue=e}function ff(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ni(t,e){Bu=t,Op=xi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(Op!==t)if(t={context:t,memoizedValue:e,next:null},xi===null){if(Bu===null)throw Error(U(308));xi=t,Bu.dependencies={lanes:0,firstContext:t}}else xi=xi.next=t;return e}var bs=null;function Up(t){bs===null?bs=[t]:bs.push(t)}function Nw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Up(e)):(n.next=s.next,s.next=n),e.interleaved=n,ar(t,r)}function ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Pr=!1;function Bp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function tr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function zr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ce&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ar(t,n)}return s=r.interleaved,s===null?(e.next=e,Up(r)):(e.next=s.next,s.next=e),r.interleaved=e,ar(t,n)}function lu(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pp(t,n)}}function mv(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function zu(t,e,n,r){var s=t.updateQueue;Pr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=c:a.next=c,h.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;o=0,h=c=u=null,a=i;do{var m=a.lane,y=a.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,T=a;switch(m=e,y=n,T.tag){case 1:if(E=T.payload,typeof E=="function"){f=E.call(y,f,m);break e}f=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=T.payload,m=typeof E=="function"?E.call(y,f,m):E,m==null)break e;f=De({},f,m);break e;case 2:Pr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[a]:m.push(a))}else y={eventTime:y,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(c=h=y,u=f):h=h.next=y,o|=m;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;m=a,a=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Us|=o,t.lanes=o,t.memoizedState=f}}function gv(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var Qa={},An=us(Qa),Ca=us(Qa),ba=us(Qa);function ks(t){if(t===Qa)throw Error(U(174));return t}function zp(t,e){switch(Te(ba,e),Te(Ca,t),Te(An,Qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:qh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=qh(e,t)}be(An),Te(An,e)}function zi(){be(An),be(Ca),be(ba)}function Dw(t){ks(ba.current);var e=ks(An.current),n=qh(e,t.type);e!==n&&(Te(Ca,t),Te(An,n))}function $p(t){Ca.current===t&&(be(An),be(Ca))}var Re=us(0);function $u(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Jd=[];function Hp(){for(var t=0;t<Jd.length;t++)Jd[t]._workInProgressVersionPrimary=null;Jd.length=0}var uu=pr.ReactCurrentDispatcher,Zd=pr.ReactCurrentBatchConfig,Fs=0,je=null,Xe=null,st=null,Hu=!1,na=!1,ka=0,nb=0;function vt(){throw Error(U(321))}function Wp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Sn(t[n],e[n]))return!1;return!0}function qp(t,e,n,r,s,i){if(Fs=i,je=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,uu.current=t===null||t.memoizedState===null?ob:ab,t=n(r,s),na){i=0;do{if(na=!1,ka=0,25<=i)throw Error(U(301));i+=1,st=Xe=null,e.updateQueue=null,uu.current=lb,t=n(r,s)}while(na)}if(uu.current=Wu,e=Xe!==null&&Xe.next!==null,Fs=0,st=Xe=je=null,Hu=!1,e)throw Error(U(300));return t}function Gp(){var t=ka!==0;return ka=0,t}function Cn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return st===null?je.memoizedState=st=t:st=st.next=t,st}function un(){if(Xe===null){var t=je.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var e=st===null?je.memoizedState:st.next;if(e!==null)st=e,Xe=t;else{if(t===null)throw Error(U(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},st===null?je.memoizedState=st=t:st=st.next=t}return st}function Aa(t,e){return typeof e=="function"?e(t):e}function eh(t){var e=un(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Xe,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var a=o=null,u=null,c=i;do{var h=c.lane;if((Fs&h)===h)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:h,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,je.lanes|=h,Us|=h}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=a,Sn(r,e.memoizedState)||(Ot=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,je.lanes|=i,Us|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function th(t){var e=un(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Sn(i,e.memoizedState)||(Ot=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Vw(){}function Mw(t,e){var n=je,r=un(),s=e(),i=!Sn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ot=!0),r=r.queue,Kp(Fw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||st!==null&&st.memoizedState.tag&1){if(n.flags|=2048,Ra(9,Lw.bind(null,n,r,s,e),void 0,null),it===null)throw Error(U(349));Fs&30||Ow(n,e,s)}return s}function Ow(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Lw(t,e,n,r){e.value=n,e.getSnapshot=r,Uw(e)&&Bw(t)}function Fw(t,e,n){return n(function(){Uw(e)&&Bw(t)})}function Uw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Sn(t,n)}catch{return!0}}function Bw(t){var e=ar(t,1);e!==null&&xn(e,t,1,-1)}function yv(t){var e=Cn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:t},e.queue=t,t=t.dispatch=ib.bind(null,je,t),[e.memoizedState,t]}function Ra(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=je.updateQueue,e===null?(e={lastEffect:null,stores:null},je.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function zw(){return un().memoizedState}function cu(t,e,n,r){var s=Cn();je.flags|=t,s.memoizedState=Ra(1|e,n,void 0,r===void 0?null:r)}function Nc(t,e,n,r){var s=un();r=r===void 0?null:r;var i=void 0;if(Xe!==null){var o=Xe.memoizedState;if(i=o.destroy,r!==null&&Wp(r,o.deps)){s.memoizedState=Ra(e,n,i,r);return}}je.flags|=t,s.memoizedState=Ra(1|e,n,i,r)}function vv(t,e){return cu(8390656,8,t,e)}function Kp(t,e){return Nc(2048,8,t,e)}function $w(t,e){return Nc(4,2,t,e)}function Hw(t,e){return Nc(4,4,t,e)}function Ww(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function qw(t,e,n){return n=n!=null?n.concat([t]):null,Nc(4,4,Ww.bind(null,e,t),n)}function Qp(){}function Gw(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Kw(t,e){var n=un();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Wp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Qw(t,e,n){return Fs&21?(Sn(n,e)||(n=ew(),je.lanes|=n,Us|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=n)}function rb(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var r=Zd.transition;Zd.transition={};try{t(!1),e()}finally{ve=n,Zd.transition=r}}function Yw(){return un().memoizedState}function sb(t,e,n){var r=Hr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xw(t))Jw(e,n);else if(n=Nw(t,e,n,r),n!==null){var s=Nt();xn(n,t,r,s),Zw(n,e,r)}}function ib(t,e,n){var r=Hr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xw(t))Jw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,Sn(a,o)){var u=e.interleaved;u===null?(s.next=s,Up(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=Nw(t,e,s,r),n!==null&&(s=Nt(),xn(n,t,r,s),Zw(n,e,r))}}function Xw(t){var e=t.alternate;return t===je||e!==null&&e===je}function Jw(t,e){na=Hu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Zw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pp(t,n)}}var Wu={readContext:ln,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},ob={readContext:ln,useCallback:function(t,e){return Cn().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:vv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,cu(4194308,4,Ww.bind(null,e,t),n)},useLayoutEffect:function(t,e){return cu(4194308,4,t,e)},useInsertionEffect:function(t,e){return cu(4,2,t,e)},useMemo:function(t,e){var n=Cn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Cn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=sb.bind(null,je,t),[r.memoizedState,t]},useRef:function(t){var e=Cn();return t={current:t},e.memoizedState=t},useState:yv,useDebugValue:Qp,useDeferredValue:function(t){return Cn().memoizedState=t},useTransition:function(){var t=yv(!1),e=t[0];return t=rb.bind(null,t[1]),Cn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=je,s=Cn();if(ke){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),it===null)throw Error(U(349));Fs&30||Ow(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,vv(Fw.bind(null,r,i,t),[t]),r.flags|=2048,Ra(9,Lw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Cn(),e=it.identifierPrefix;if(ke){var n=Yn,r=Qn;n=(r&~(1<<32-_n(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=ka++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=nb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ab={readContext:ln,useCallback:Gw,useContext:ln,useEffect:Kp,useImperativeHandle:qw,useInsertionEffect:$w,useLayoutEffect:Hw,useMemo:Kw,useReducer:eh,useRef:zw,useState:function(){return eh(Aa)},useDebugValue:Qp,useDeferredValue:function(t){var e=un();return Qw(e,Xe.memoizedState,t)},useTransition:function(){var t=eh(Aa)[0],e=un().memoizedState;return[t,e]},useMutableSource:Vw,useSyncExternalStore:Mw,useId:Yw,unstable_isNewReconciler:!1},lb={readContext:ln,useCallback:Gw,useContext:ln,useEffect:Kp,useImperativeHandle:qw,useInsertionEffect:$w,useLayoutEffect:Hw,useMemo:Kw,useReducer:th,useRef:zw,useState:function(){return th(Aa)},useDebugValue:Qp,useDeferredValue:function(t){var e=un();return Xe===null?e.memoizedState=t:Qw(e,Xe.memoizedState,t)},useTransition:function(){var t=th(Aa)[0],e=un().memoizedState;return[t,e]},useMutableSource:Vw,useSyncExternalStore:Mw,useId:Yw,unstable_isNewReconciler:!1};function pn(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function pf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:De({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var jc={isMounted:function(t){return(t=t._reactInternals)?Xs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=Hr(t),i=tr(r,s);i.payload=e,n!=null&&(i.callback=n),e=zr(t,i,s),e!==null&&(xn(e,t,s,r),lu(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),s=Hr(t),i=tr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=zr(t,i,s),e!==null&&(xn(e,t,s,r),lu(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=Hr(t),s=tr(n,r);s.tag=2,e!=null&&(s.callback=e),e=zr(t,s,r),e!==null&&(xn(e,t,r,n),lu(e,t,r))}};function _v(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ta(n,r)||!Ta(s,i):!0}function eE(t,e,n){var r=!1,s=es,i=e.contextType;return typeof i=="object"&&i!==null?i=ln(i):(s=Ft(e)?Os:It.current,r=e.contextTypes,i=(r=r!=null)?Fi(t,s):es),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=jc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function xv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&jc.enqueueReplaceState(e,e.state,null)}function mf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Bp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=ln(i):(i=Ft(e)?Os:It.current,s.context=Fi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(pf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&jc.enqueueReplaceState(s,s.state,null),zu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function $i(t,e){try{var n="",r=e;do n+=MP(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function nh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var ub=typeof WeakMap=="function"?WeakMap:Map;function tE(t,e,n){n=tr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Gu||(Gu=!0,Pf=r),gf(t,e)},n}function nE(t,e,n){n=tr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gf(t,e),typeof r!="function"&&($r===null?$r=new Set([this]):$r.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function wv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new ub;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Tb.bind(null,t,e,n),e.then(t,t))}function Ev(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tv(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=tr(-1,1),e.tag=2,zr(n,e,1))),n.lanes|=1),t)}var cb=pr.ReactCurrentOwner,Ot=!1;function Rt(t,e,n,r){e.child=t===null?Rw(e,null,n,r):Bi(e,t.child,n,r)}function Sv(t,e,n,r,s){n=n.render;var i=e.ref;return Ni(e,s),r=qp(t,e,n,r,i,s),n=Gp(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,lr(t,e,s)):(ke&&n&&Dp(e),e.flags|=1,Rt(t,e,r,s),e.child)}function Iv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!rm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,rE(t,e,i,r,s)):(t=pu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ta,n(o,r)&&t.ref===e.ref)return lr(t,e,s)}return e.flags|=1,t=Wr(i,r),t.ref=e.ref,t.return=e,e.child=t}function rE(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ta(i,r)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,lr(t,e,s)}return yf(t,e,n,r,s)}function sE(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(Ei,Wt),Wt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Te(Ei,Wt),Wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Te(Ei,Wt),Wt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Te(Ei,Wt),Wt|=r;return Rt(t,e,s,n),e.child}function iE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yf(t,e,n,r,s){var i=Ft(n)?Os:It.current;return i=Fi(e,i),Ni(e,s),n=qp(t,e,n,r,i,s),r=Gp(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,lr(t,e,s)):(ke&&r&&Dp(e),e.flags|=1,Rt(t,e,n,s),e.child)}function Pv(t,e,n,r,s){if(Ft(n)){var i=!0;Ou(e)}else i=!1;if(Ni(e,s),e.stateNode===null)du(t,e),eE(e,n,r),mf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ln(c):(c=Ft(n)?Os:It.current,c=Fi(e,c));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&xv(e,o,r,c),Pr=!1;var m=e.memoizedState;o.state=m,zu(e,r,o,s),u=e.memoizedState,a!==r||m!==u||Lt.current||Pr?(typeof h=="function"&&(pf(e,n,h,r),u=e.memoizedState),(a=Pr||_v(e,n,a,r,m,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,jw(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:pn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=ln(u):(u=Ft(n)?Os:It.current,u=Fi(e,u));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==u)&&xv(e,o,r,u),Pr=!1,m=e.memoizedState,o.state=m,zu(e,r,o,s);var E=e.memoizedState;a!==f||m!==E||Lt.current||Pr?(typeof y=="function"&&(pf(e,n,y,r),E=e.memoizedState),(c=Pr||_v(e,n,c,r,m,E,u)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,E,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,E,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=E),o.props=r,o.state=E,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return vf(t,e,n,r,i,s)}function vf(t,e,n,r,s,i){iE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&dv(e,n,!1),lr(t,e,i);r=e.stateNode,cb.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Bi(e,t.child,null,i),e.child=Bi(e,null,a,i)):Rt(t,e,a,i),e.memoizedState=r.state,s&&dv(e,n,!0),e.child}function oE(t){var e=t.stateNode;e.pendingContext?cv(t,e.pendingContext,e.pendingContext!==e.context):e.context&&cv(t,e.context,!1),zp(t,e.containerInfo)}function Cv(t,e,n,r,s){return Ui(),Mp(s),e.flags|=256,Rt(t,e,n,r),e.child}var _f={dehydrated:null,treeContext:null,retryLane:0};function xf(t){return{baseLanes:t,cachePool:null,transitions:null}}function aE(t,e,n){var r=e.pendingProps,s=Re.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Te(Re,s&1),t===null)return hf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Mc(o,r,0,null),t=Ds(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=xf(n),e.memoizedState=_f,t):Yp(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return db(t,e,o,r,a,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,a=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Wr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Wr(a,i):(i=Ds(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?xf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=_f,r}return i=t.child,t=i.sibling,r=Wr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yp(t,e){return e=Mc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function $l(t,e,n,r){return r!==null&&Mp(r),Bi(e,t.child,null,n),t=Yp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function db(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=nh(Error(U(422))),$l(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Mc({mode:"visible",children:r.children},s,0,null),i=Ds(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Bi(e,t.child,null,o),e.child.memoizedState=xf(o),e.memoizedState=_f,i);if(!(e.mode&1))return $l(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(U(419)),r=nh(i,r,void 0),$l(t,e,o,r)}if(a=(o&t.childLanes)!==0,Ot||a){if(r=it,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ar(t,s),xn(r,t,s,-1))}return nm(),r=nh(Error(U(421))),$l(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Sb.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,qt=Br(s.nextSibling),Kt=e,ke=!0,gn=null,t!==null&&(rn[sn++]=Qn,rn[sn++]=Yn,rn[sn++]=Ls,Qn=t.id,Yn=t.overflow,Ls=e),e=Yp(e,r.children),e.flags|=4096,e)}function bv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ff(t.return,e,n)}function rh(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function lE(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Rt(t,e,r.children,n),r=Re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&bv(t,n,e);else if(t.tag===19)bv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Te(Re,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&$u(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),rh(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&$u(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}rh(e,!0,n,null,i);break;case"together":rh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function du(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Us|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Wr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Wr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function hb(t,e,n){switch(e.tag){case 3:oE(e),Ui();break;case 5:Dw(e);break;case 1:Ft(e.type)&&Ou(e);break;case 4:zp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Te(Uu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Re,Re.current&1),e.flags|=128,null):n&e.child.childLanes?aE(t,e,n):(Te(Re,Re.current&1),t=lr(t,e,n),t!==null?t.sibling:null);Te(Re,Re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return lE(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Te(Re,Re.current),r)break;return null;case 22:case 23:return e.lanes=0,sE(t,e,n)}return lr(t,e,n)}var uE,wf,cE,dE;uE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};wf=function(){};cE=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ks(An.current);var i=null;switch(n){case"input":s=zh(t,s),r=zh(t,r),i=[];break;case"select":s=De({},s,{value:void 0}),r=De({},r,{value:void 0}),i=[];break;case"textarea":s=Wh(t,s),r=Wh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Vu)}Gh(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var a=s[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ga.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(a=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ga.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ce("scroll",t),i||a===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};dE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Mo(t,e){if(!ke)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function _t(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function fb(t,e,n){var r=e.pendingProps;switch(Vp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _t(e),null;case 1:return Ft(e.type)&&Mu(),_t(e),null;case 3:return r=e.stateNode,zi(),be(Lt),be(It),Hp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Bl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,gn!==null&&(kf(gn),gn=null))),wf(t,e),_t(e),null;case 5:$p(e);var s=ks(ba.current);if(n=e.type,t!==null&&e.stateNode!=null)cE(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return _t(e),null}if(t=ks(An.current),Bl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[bn]=e,r[Pa]=i,t=(e.mode&1)!==0,n){case"dialog":Ce("cancel",r),Ce("close",r);break;case"iframe":case"object":case"embed":Ce("load",r);break;case"video":case"audio":for(s=0;s<Ho.length;s++)Ce(Ho[s],r);break;case"source":Ce("error",r);break;case"img":case"image":case"link":Ce("error",r),Ce("load",r);break;case"details":Ce("toggle",r);break;case"input":Oy(r,i),Ce("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ce("invalid",r);break;case"textarea":Fy(r,i),Ce("invalid",r)}Gh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&Ul(r.textContent,a,t),s=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&Ul(r.textContent,a,t),s=["children",""+a]):ga.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ce("scroll",r)}switch(n){case"input":Nl(r),Ly(r,i,!0);break;case"textarea":Nl(r),Uy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Vu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Fx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[bn]=e,t[Pa]=r,uE(t,e,!1,!1),e.stateNode=t;e:{switch(o=Kh(n,r),n){case"dialog":Ce("cancel",t),Ce("close",t),s=r;break;case"iframe":case"object":case"embed":Ce("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ho.length;s++)Ce(Ho[s],t);s=r;break;case"source":Ce("error",t),s=r;break;case"img":case"image":case"link":Ce("error",t),Ce("load",t),s=r;break;case"details":Ce("toggle",t),s=r;break;case"input":Oy(t,r),s=zh(t,r),Ce("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=De({},r,{value:void 0}),Ce("invalid",t);break;case"textarea":Fy(t,r),s=Wh(t,r),Ce("invalid",t);break;default:s=r}Gh(n,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var u=a[i];i==="style"?zx(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Ux(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ya(t,u):typeof u=="number"&&ya(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ga.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ce("scroll",t):u!=null&&xp(t,i,u,o))}switch(n){case"input":Nl(t),Ly(t,r,!1);break;case"textarea":Nl(t),Uy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Zr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?bi(t,!!r.multiple,i,!1):r.defaultValue!=null&&bi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Vu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _t(e),null;case 6:if(t&&e.stateNode!=null)dE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ks(ba.current),ks(An.current),Bl(e)){if(r=e.stateNode,n=e.memoizedProps,r[bn]=e,(i=r.nodeValue!==n)&&(t=Kt,t!==null))switch(t.tag){case 3:Ul(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ul(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[bn]=e,e.stateNode=r}return _t(e),null;case 13:if(be(Re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ke&&qt!==null&&e.mode&1&&!(e.flags&128))kw(),Ui(),e.flags|=98560,i=!1;else if(i=Bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[bn]=e}else Ui(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_t(e),i=!1}else gn!==null&&(kf(gn),gn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Re.current&1?Ze===0&&(Ze=3):nm())),e.updateQueue!==null&&(e.flags|=4),_t(e),null);case 4:return zi(),wf(t,e),t===null&&Sa(e.stateNode.containerInfo),_t(e),null;case 10:return Fp(e.type._context),_t(e),null;case 17:return Ft(e.type)&&Mu(),_t(e),null;case 19:if(be(Re),i=e.memoizedState,i===null)return _t(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Mo(i,!1);else{if(Ze!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=$u(t),o!==null){for(e.flags|=128,Mo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Te(Re,Re.current&1|2),e.child}t=t.sibling}i.tail!==null&&Be()>Hi&&(e.flags|=128,r=!0,Mo(i,!1),e.lanes=4194304)}else{if(!r)if(t=$u(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Mo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ke)return _t(e),null}else 2*Be()-i.renderingStartTime>Hi&&n!==1073741824&&(e.flags|=128,r=!0,Mo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Be(),e.sibling=null,n=Re.current,Te(Re,r?n&1|2:n&1),e):(_t(e),null);case 22:case 23:return tm(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Wt&1073741824&&(_t(e),e.subtreeFlags&6&&(e.flags|=8192)):_t(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function pb(t,e){switch(Vp(e),e.tag){case 1:return Ft(e.type)&&Mu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zi(),be(Lt),be(It),Hp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $p(e),null;case 13:if(be(Re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));Ui()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return be(Re),null;case 4:return zi(),null;case 10:return Fp(e.type._context),null;case 22:case 23:return tm(),null;case 24:return null;default:return null}}var Hl=!1,Tt=!1,mb=typeof WeakSet=="function"?WeakSet:Set,W=null;function wi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Le(t,e,r)}else n.current=null}function Ef(t,e,n){try{n()}catch(r){Le(t,e,r)}}var kv=!1;function gb(t,e){if(sf=Nu,t=gw(),jp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(a=o+s),f!==i||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++c===s&&(a=o),m===i&&++h===r&&(u=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(of={focusedElem:t,selectionRange:n},Nu=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var T=E.memoizedProps,C=E.memoizedState,w=e.stateNode,v=w.getSnapshotBeforeUpdate(e.elementType===e.type?T:pn(e.type,T),C);w.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(b){Le(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return E=kv,kv=!1,E}function ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ef(e,n,i)}s=s.next}while(s!==r)}}function Dc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Tf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function hE(t){var e=t.alternate;e!==null&&(t.alternate=null,hE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[bn],delete e[Pa],delete e[uf],delete e[JC],delete e[ZC])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fE(t){return t.tag===5||t.tag===3||t.tag===4}function Av(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Sf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Vu));else if(r!==4&&(t=t.child,t!==null))for(Sf(t,e,n),t=t.sibling;t!==null;)Sf(t,e,n),t=t.sibling}function If(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(If(t,e,n),t=t.sibling;t!==null;)If(t,e,n),t=t.sibling}var lt=null,mn=!1;function Er(t,e,n){for(n=n.child;n!==null;)pE(t,e,n),n=n.sibling}function pE(t,e,n){if(kn&&typeof kn.onCommitFiberUnmount=="function")try{kn.onCommitFiberUnmount(Pc,n)}catch{}switch(n.tag){case 5:Tt||wi(n,e);case 6:var r=lt,s=mn;lt=null,Er(t,e,n),lt=r,mn=s,lt!==null&&(mn?(t=lt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):lt.removeChild(n.stateNode));break;case 18:lt!==null&&(mn?(t=lt,n=n.stateNode,t.nodeType===8?Yd(t.parentNode,n):t.nodeType===1&&Yd(t,n),wa(t)):Yd(lt,n.stateNode));break;case 4:r=lt,s=mn,lt=n.stateNode.containerInfo,mn=!0,Er(t,e,n),lt=r,mn=s;break;case 0:case 11:case 14:case 15:if(!Tt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ef(n,e,o),s=s.next}while(s!==r)}Er(t,e,n);break;case 1:if(!Tt&&(wi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Le(n,e,a)}Er(t,e,n);break;case 21:Er(t,e,n);break;case 22:n.mode&1?(Tt=(r=Tt)||n.memoizedState!==null,Er(t,e,n),Tt=r):Er(t,e,n);break;default:Er(t,e,n)}}function Rv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new mb),e.forEach(function(r){var s=Ib.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function fn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:lt=a.stateNode,mn=!1;break e;case 3:lt=a.stateNode.containerInfo,mn=!0;break e;case 4:lt=a.stateNode.containerInfo,mn=!0;break e}a=a.return}if(lt===null)throw Error(U(160));pE(i,o,s),lt=null,mn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Le(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)mE(e,t),e=e.sibling}function mE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fn(e,t),Pn(t),r&4){try{ra(3,t,t.return),Dc(3,t)}catch(T){Le(t,t.return,T)}try{ra(5,t,t.return)}catch(T){Le(t,t.return,T)}}break;case 1:fn(e,t),Pn(t),r&512&&n!==null&&wi(n,n.return);break;case 5:if(fn(e,t),Pn(t),r&512&&n!==null&&wi(n,n.return),t.flags&32){var s=t.stateNode;try{ya(s,"")}catch(T){Le(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&Ox(s,i),Kh(a,o);var c=Kh(a,i);for(o=0;o<u.length;o+=2){var h=u[o],f=u[o+1];h==="style"?zx(s,f):h==="dangerouslySetInnerHTML"?Ux(s,f):h==="children"?ya(s,f):xp(s,h,f,c)}switch(a){case"input":$h(s,i);break;case"textarea":Lx(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?bi(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?bi(s,!!i.multiple,i.defaultValue,!0):bi(s,!!i.multiple,i.multiple?[]:"",!1))}s[Pa]=i}catch(T){Le(t,t.return,T)}}break;case 6:if(fn(e,t),Pn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){Le(t,t.return,T)}}break;case 3:if(fn(e,t),Pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{wa(e.containerInfo)}catch(T){Le(t,t.return,T)}break;case 4:fn(e,t),Pn(t);break;case 13:fn(e,t),Pn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Zp=Be())),r&4&&Rv(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Tt=(c=Tt)||h,fn(e,t),Tt=c):fn(e,t),Pn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!h&&t.mode&1)for(W=t,h=t.child;h!==null;){for(f=W=h;W!==null;){switch(m=W,y=m.child,m.tag){case 0:case 11:case 14:case 15:ra(4,m,m.return);break;case 1:wi(m,m.return);var E=m.stateNode;if(typeof E.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(T){Le(r,n,T)}}break;case 5:wi(m,m.return);break;case 22:if(m.memoizedState!==null){jv(f);continue}}y!==null?(y.return=m,W=y):jv(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Bx("display",o))}catch(T){Le(t,t.return,T)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(T){Le(t,t.return,T)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fn(e,t),Pn(t),r&4&&Rv(t);break;case 21:break;default:fn(e,t),Pn(t)}}function Pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(fE(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ya(s,""),r.flags&=-33);var i=Av(t);If(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Av(t);Sf(t,a,o);break;default:throw Error(U(161))}}catch(u){Le(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yb(t,e,n){W=t,gE(t)}function gE(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Hl;if(!o){var a=s.alternate,u=a!==null&&a.memoizedState!==null||Tt;a=Hl;var c=Tt;if(Hl=o,(Tt=u)&&!c)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?Dv(s):u!==null?(u.return=o,W=u):Dv(s);for(;i!==null;)W=i,gE(i),i=i.sibling;W=s,Hl=a,Tt=c}Nv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):Nv(t)}}function Nv(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Tt||Dc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Tt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:pn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&gv(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gv(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var h=c.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&wa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}Tt||e.flags&512&&Tf(e)}catch(m){Le(e,e.return,m)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function jv(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function Dv(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Dc(4,e)}catch(u){Le(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Le(e,s,u)}}var i=e.return;try{Tf(e)}catch(u){Le(e,i,u)}break;case 5:var o=e.return;try{Tf(e)}catch(u){Le(e,o,u)}}}catch(u){Le(e,e.return,u)}if(e===t){W=null;break}var a=e.sibling;if(a!==null){a.return=e.return,W=a;break}W=e.return}}var vb=Math.ceil,qu=pr.ReactCurrentDispatcher,Xp=pr.ReactCurrentOwner,an=pr.ReactCurrentBatchConfig,ce=0,it=null,Ke=null,dt=0,Wt=0,Ei=us(0),Ze=0,Na=null,Us=0,Vc=0,Jp=0,sa=null,Vt=null,Zp=0,Hi=1/0,qn=null,Gu=!1,Pf=null,$r=null,Wl=!1,Vr=null,Ku=0,ia=0,Cf=null,hu=-1,fu=0;function Nt(){return ce&6?Be():hu!==-1?hu:hu=Be()}function Hr(t){return t.mode&1?ce&2&&dt!==0?dt&-dt:tb.transition!==null?(fu===0&&(fu=ew()),fu):(t=ve,t!==0||(t=window.event,t=t===void 0?16:aw(t.type)),t):1}function xn(t,e,n,r){if(50<ia)throw ia=0,Cf=null,Error(U(185));qa(t,n,r),(!(ce&2)||t!==it)&&(t===it&&(!(ce&2)&&(Vc|=n),Ze===4&&Ar(t,dt)),Ut(t,r),n===1&&ce===0&&!(e.mode&1)&&(Hi=Be()+500,Rc&&cs()))}function Ut(t,e){var n=t.callbackNode;tC(t,e);var r=Ru(t,t===it?dt:0);if(r===0)n!==null&&$y(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&$y(n),e===1)t.tag===0?eb(Vv.bind(null,t)):Pw(Vv.bind(null,t)),YC(function(){!(ce&6)&&cs()}),n=null;else{switch(tw(r)){case 1:n=Ip;break;case 4:n=Jx;break;case 16:n=Au;break;case 536870912:n=Zx;break;default:n=Au}n=SE(n,yE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function yE(t,e){if(hu=-1,fu=0,ce&6)throw Error(U(327));var n=t.callbackNode;if(ji()&&t.callbackNode!==n)return null;var r=Ru(t,t===it?dt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Qu(t,r);else{e=r;var s=ce;ce|=2;var i=_E();(it!==t||dt!==e)&&(qn=null,Hi=Be()+500,js(t,e));do try{wb();break}catch(a){vE(t,a)}while(!0);Lp(),qu.current=i,ce=s,Ke!==null?e=0:(it=null,dt=0,e=Ze)}if(e!==0){if(e===2&&(s=Zh(t),s!==0&&(r=s,e=bf(t,s))),e===1)throw n=Na,js(t,0),Ar(t,r),Ut(t,Be()),n;if(e===6)Ar(t,r);else{if(s=t.current.alternate,!(r&30)&&!_b(s)&&(e=Qu(t,r),e===2&&(i=Zh(t),i!==0&&(r=i,e=bf(t,i))),e===1))throw n=Na,js(t,0),Ar(t,r),Ut(t,Be()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Es(t,Vt,qn);break;case 3:if(Ar(t,r),(r&130023424)===r&&(e=Zp+500-Be(),10<e)){if(Ru(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=lf(Es.bind(null,t,Vt,qn),e);break}Es(t,Vt,qn);break;case 4:if(Ar(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-_n(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*vb(r/1960))-r,10<r){t.timeoutHandle=lf(Es.bind(null,t,Vt,qn),r);break}Es(t,Vt,qn);break;case 5:Es(t,Vt,qn);break;default:throw Error(U(329))}}}return Ut(t,Be()),t.callbackNode===n?yE.bind(null,t):null}function bf(t,e){var n=sa;return t.current.memoizedState.isDehydrated&&(js(t,e).flags|=256),t=Qu(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&kf(e)),t}function kf(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function _b(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Sn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ar(t,e){for(e&=~Jp,e&=~Vc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-_n(e),r=1<<n;t[n]=-1,e&=~r}}function Vv(t){if(ce&6)throw Error(U(327));ji();var e=Ru(t,0);if(!(e&1))return Ut(t,Be()),null;var n=Qu(t,e);if(t.tag!==0&&n===2){var r=Zh(t);r!==0&&(e=r,n=bf(t,r))}if(n===1)throw n=Na,js(t,0),Ar(t,e),Ut(t,Be()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Es(t,Vt,qn),Ut(t,Be()),null}function em(t,e){var n=ce;ce|=1;try{return t(e)}finally{ce=n,ce===0&&(Hi=Be()+500,Rc&&cs())}}function Bs(t){Vr!==null&&Vr.tag===0&&!(ce&6)&&ji();var e=ce;ce|=1;var n=an.transition,r=ve;try{if(an.transition=null,ve=1,t)return t()}finally{ve=r,an.transition=n,ce=e,!(ce&6)&&cs()}}function tm(){Wt=Ei.current,be(Ei)}function js(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,QC(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(Vp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Mu();break;case 3:zi(),be(Lt),be(It),Hp();break;case 5:$p(r);break;case 4:zi();break;case 13:be(Re);break;case 19:be(Re);break;case 10:Fp(r.type._context);break;case 22:case 23:tm()}n=n.return}if(it=t,Ke=t=Wr(t.current,null),dt=Wt=e,Ze=0,Na=null,Jp=Vc=Us=0,Vt=sa=null,bs!==null){for(e=0;e<bs.length;e++)if(n=bs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}bs=null}return t}function vE(t,e){do{var n=Ke;try{if(Lp(),uu.current=Wu,Hu){for(var r=je.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Hu=!1}if(Fs=0,st=Xe=je=null,na=!1,ka=0,Xp.current=null,n===null||n.return===null){Ze=1,Na=e,Ke=null;break}e:{var i=t,o=n.return,a=n,u=e;if(e=dt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,h=a,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Ev(o);if(y!==null){y.flags&=-257,Tv(y,o,a,i,e),y.mode&1&&wv(i,c,e),e=y,u=c;var E=e.updateQueue;if(E===null){var T=new Set;T.add(u),e.updateQueue=T}else E.add(u);break e}else{if(!(e&1)){wv(i,c,e),nm();break e}u=Error(U(426))}}else if(ke&&a.mode&1){var C=Ev(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Tv(C,o,a,i,e),Mp($i(u,a));break e}}i=u=$i(u,a),Ze!==4&&(Ze=2),sa===null?sa=[i]:sa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=tE(i,u,e);mv(i,w);break e;case 1:a=u;var v=i.type,x=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&($r===null||!$r.has(x)))){i.flags|=65536,e&=-e,i.lanes|=e;var b=nE(i,a,e);mv(i,b);break e}}i=i.return}while(i!==null)}wE(n)}catch(D){e=D,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(!0)}function _E(){var t=qu.current;return qu.current=Wu,t===null?Wu:t}function nm(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),it===null||!(Us&268435455)&&!(Vc&268435455)||Ar(it,dt)}function Qu(t,e){var n=ce;ce|=2;var r=_E();(it!==t||dt!==e)&&(qn=null,js(t,e));do try{xb();break}catch(s){vE(t,s)}while(!0);if(Lp(),ce=n,qu.current=r,Ke!==null)throw Error(U(261));return it=null,dt=0,Ze}function xb(){for(;Ke!==null;)xE(Ke)}function wb(){for(;Ke!==null&&!qP();)xE(Ke)}function xE(t){var e=TE(t.alternate,t,Wt);t.memoizedProps=t.pendingProps,e===null?wE(t):Ke=e,Xp.current=null}function wE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=pb(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ze=6,Ke=null;return}}else if(n=fb(n,e,Wt),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);Ze===0&&(Ze=5)}function Es(t,e,n){var r=ve,s=an.transition;try{an.transition=null,ve=1,Eb(t,e,n,r)}finally{an.transition=s,ve=r}return null}function Eb(t,e,n,r){do ji();while(Vr!==null);if(ce&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(nC(t,i),t===it&&(Ke=it=null,dt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Wl||(Wl=!0,SE(Au,function(){return ji(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=an.transition,an.transition=null;var o=ve;ve=1;var a=ce;ce|=4,Xp.current=null,gb(t,n),mE(n,t),zC(of),Nu=!!sf,of=sf=null,t.current=n,yb(n),GP(),ce=a,ve=o,an.transition=i}else t.current=n;if(Wl&&(Wl=!1,Vr=t,Ku=s),i=t.pendingLanes,i===0&&($r=null),YP(n.stateNode),Ut(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Gu)throw Gu=!1,t=Pf,Pf=null,t;return Ku&1&&t.tag!==0&&ji(),i=t.pendingLanes,i&1?t===Cf?ia++:(ia=0,Cf=t):ia=0,cs(),null}function ji(){if(Vr!==null){var t=tw(Ku),e=an.transition,n=ve;try{if(an.transition=null,ve=16>t?16:t,Vr===null)var r=!1;else{if(t=Vr,Vr=null,Ku=0,ce&6)throw Error(U(331));var s=ce;for(ce|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var a=i.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(W=c;W!==null;){var h=W;switch(h.tag){case 0:case 11:case 15:ra(8,h,i)}var f=h.child;if(f!==null)f.return=h,W=f;else for(;W!==null;){h=W;var m=h.sibling,y=h.return;if(hE(h),h===c){W=null;break}if(m!==null){m.return=y,W=m;break}W=y}}}var E=i.alternate;if(E!==null){var T=E.child;if(T!==null){E.child=null;do{var C=T.sibling;T.sibling=null,T=C}while(T!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ra(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,W=w;break e}W=i.return}}var v=t.current;for(W=v;W!==null;){o=W;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,W=x;else e:for(o=v;W!==null;){if(a=W,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Dc(9,a)}}catch(D){Le(a,a.return,D)}if(a===o){W=null;break e}var b=a.sibling;if(b!==null){b.return=a.return,W=b;break e}W=a.return}}if(ce=s,cs(),kn&&typeof kn.onPostCommitFiberRoot=="function")try{kn.onPostCommitFiberRoot(Pc,t)}catch{}r=!0}return r}finally{ve=n,an.transition=e}}return!1}function Mv(t,e,n){e=$i(n,e),e=tE(t,e,1),t=zr(t,e,1),e=Nt(),t!==null&&(qa(t,1,e),Ut(t,e))}function Le(t,e,n){if(t.tag===3)Mv(t,t,n);else for(;e!==null;){if(e.tag===3){Mv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&($r===null||!$r.has(r))){t=$i(n,t),t=nE(e,t,1),e=zr(e,t,1),t=Nt(),e!==null&&(qa(e,1,t),Ut(e,t));break}}e=e.return}}function Tb(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,it===t&&(dt&n)===n&&(Ze===4||Ze===3&&(dt&130023424)===dt&&500>Be()-Zp?js(t,0):Jp|=n),Ut(t,e)}function EE(t,e){e===0&&(t.mode&1?(e=Vl,Vl<<=1,!(Vl&130023424)&&(Vl=4194304)):e=1);var n=Nt();t=ar(t,e),t!==null&&(qa(t,e,n),Ut(t,n))}function Sb(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),EE(t,n)}function Ib(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),EE(t,n)}var TE;TE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Lt.current)Ot=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ot=!1,hb(t,e,n);Ot=!!(t.flags&131072)}else Ot=!1,ke&&e.flags&1048576&&Cw(e,Fu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;du(t,e),t=e.pendingProps;var s=Fi(e,It.current);Ni(e,n),s=qp(null,e,r,t,s,n);var i=Gp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ft(r)?(i=!0,Ou(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Bp(e),s.updater=jc,e.stateNode=s,s._reactInternals=e,mf(e,r,t,n),e=vf(null,e,r,!0,i,n)):(e.tag=0,ke&&i&&Dp(e),Rt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(du(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Cb(r),t=pn(r,t),s){case 0:e=yf(null,e,r,t,n);break e;case 1:e=Pv(null,e,r,t,n);break e;case 11:e=Sv(null,e,r,t,n);break e;case 14:e=Iv(null,e,r,pn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),yf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),Pv(t,e,r,s,n);case 3:e:{if(oE(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,jw(t,e),zu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=$i(Error(U(423)),e),e=Cv(t,e,r,n,s);break e}else if(r!==s){s=$i(Error(U(424)),e),e=Cv(t,e,r,n,s);break e}else for(qt=Br(e.stateNode.containerInfo.firstChild),Kt=e,ke=!0,gn=null,n=Rw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ui(),r===s){e=lr(t,e,n);break e}Rt(t,e,r,n)}e=e.child}return e;case 5:return Dw(e),t===null&&hf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,af(r,s)?o=null:i!==null&&af(r,i)&&(e.flags|=32),iE(t,e),Rt(t,e,o,n),e.child;case 6:return t===null&&hf(e),null;case 13:return aE(t,e,n);case 4:return zp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bi(e,null,r,n):Rt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),Sv(t,e,r,s,n);case 7:return Rt(t,e,e.pendingProps,n),e.child;case 8:return Rt(t,e,e.pendingProps.children,n),e.child;case 12:return Rt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Te(Uu,r._currentValue),r._currentValue=o,i!==null)if(Sn(i.value,o)){if(i.children===s.children&&!Lt.current){e=lr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=tr(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var h=c.pending;h===null?u.next=u:(u.next=h.next,h.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),ff(i.return,n,e),a.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),ff(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Rt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Ni(e,n),s=ln(s),r=r(s),e.flags|=1,Rt(t,e,r,n),e.child;case 14:return r=e.type,s=pn(r,e.pendingProps),s=pn(r.type,s),Iv(t,e,r,s,n);case 15:return rE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:pn(r,s),du(t,e),e.tag=1,Ft(r)?(t=!0,Ou(e)):t=!1,Ni(e,n),eE(e,r,s),mf(e,r,s,n),vf(null,e,r,!0,t,n);case 19:return lE(t,e,n);case 22:return sE(t,e,n)}throw Error(U(156,e.tag))};function SE(t,e){return Xx(t,e)}function Pb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function on(t,e,n,r){return new Pb(t,e,n,r)}function rm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cb(t){if(typeof t=="function")return rm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ep)return 11;if(t===Tp)return 14}return 2}function Wr(t,e){var n=t.alternate;return n===null?(n=on(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function pu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")rm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hi:return Ds(n.children,s,i,e);case wp:o=8,s|=8;break;case Lh:return t=on(12,n,e,s|2),t.elementType=Lh,t.lanes=i,t;case Fh:return t=on(13,n,e,s),t.elementType=Fh,t.lanes=i,t;case Uh:return t=on(19,n,e,s),t.elementType=Uh,t.lanes=i,t;case Dx:return Mc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Nx:o=10;break e;case jx:o=9;break e;case Ep:o=11;break e;case Tp:o=14;break e;case Ir:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=on(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ds(t,e,n,r){return t=on(7,t,r,e),t.lanes=n,t}function Mc(t,e,n,r){return t=on(22,t,r,e),t.elementType=Dx,t.lanes=n,t.stateNode={isHidden:!1},t}function sh(t,e,n){return t=on(6,t,null,e),t.lanes=n,t}function ih(t,e,n){return e=on(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bb(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Fd(0),this.expirationTimes=Fd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function sm(t,e,n,r,s,i,o,a,u){return t=new bb(t,e,n,a,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=on(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bp(i),t}function kb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:di,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function IE(t){if(!t)return es;t=t._reactInternals;e:{if(Xs(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ft(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ft(n))return Iw(t,n,e)}return e}function PE(t,e,n,r,s,i,o,a,u){return t=sm(n,r,!0,t,s,i,o,a,u),t.context=IE(null),n=t.current,r=Nt(),s=Hr(n),i=tr(r,s),i.callback=e??null,zr(n,i,s),t.current.lanes=s,qa(t,s,r),Ut(t,r),t}function Oc(t,e,n,r){var s=e.current,i=Nt(),o=Hr(s);return n=IE(n),e.context===null?e.context=n:e.pendingContext=n,e=tr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=zr(s,e,o),t!==null&&(xn(t,s,o,i),lu(t,s,o)),o}function Yu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ov(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function im(t,e){Ov(t,e),(t=t.alternate)&&Ov(t,e)}function Ab(){return null}var CE=typeof reportError=="function"?reportError:function(t){console.error(t)};function om(t){this._internalRoot=t}Lc.prototype.render=om.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Oc(t,e,null,null)};Lc.prototype.unmount=om.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Bs(function(){Oc(null,t,null,null)}),e[or]=null}};function Lc(t){this._internalRoot=t}Lc.prototype.unstable_scheduleHydration=function(t){if(t){var e=sw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<kr.length&&e!==0&&e<kr[n].priority;n++);kr.splice(n,0,t),n===0&&ow(t)}};function am(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Lv(){}function Rb(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Yu(o);i.call(c)}}var o=PE(e,r,t,0,null,!1,!1,"",Lv);return t._reactRootContainer=o,t[or]=o.current,Sa(t.nodeType===8?t.parentNode:t),Bs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var a=r;r=function(){var c=Yu(u);a.call(c)}}var u=sm(t,0,!1,null,null,!1,!1,"",Lv);return t._reactRootContainer=u,t[or]=u.current,Sa(t.nodeType===8?t.parentNode:t),Bs(function(){Oc(e,u,n,r)}),u}function Uc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var u=Yu(o);a.call(u)}}Oc(e,o,t,s)}else o=Rb(n,e,t,s,r);return Yu(o)}nw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=$o(e.pendingLanes);n!==0&&(Pp(e,n|1),Ut(e,Be()),!(ce&6)&&(Hi=Be()+500,cs()))}break;case 13:Bs(function(){var r=ar(t,1);if(r!==null){var s=Nt();xn(r,t,1,s)}}),im(t,1)}};Cp=function(t){if(t.tag===13){var e=ar(t,134217728);if(e!==null){var n=Nt();xn(e,t,134217728,n)}im(t,134217728)}};rw=function(t){if(t.tag===13){var e=Hr(t),n=ar(t,e);if(n!==null){var r=Nt();xn(n,t,e,r)}im(t,e)}};sw=function(){return ve};iw=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};Yh=function(t,e,n){switch(e){case"input":if($h(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ac(r);if(!s)throw Error(U(90));Mx(r),$h(r,s)}}}break;case"textarea":Lx(t,n);break;case"select":e=n.value,e!=null&&bi(t,!!n.multiple,e,!1)}};Wx=em;qx=Bs;var Nb={usingClientEntryPoint:!1,Events:[Ka,gi,Ac,$x,Hx,em]},Oo={findFiberByHostInstance:Cs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jb={bundleType:Oo.bundleType,version:Oo.version,rendererPackageName:Oo.rendererPackageName,rendererConfig:Oo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Qx(t),t===null?null:t.stateNode},findFiberByHostInstance:Oo.findFiberByHostInstance||Ab,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ql=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ql.isDisabled&&ql.supportsFiber)try{Pc=ql.inject(jb),kn=ql}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nb;Xt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!am(e))throw Error(U(200));return kb(t,e,null,n)};Xt.createRoot=function(t,e){if(!am(t))throw Error(U(299));var n=!1,r="",s=CE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=sm(t,1,!1,null,null,n,!1,r,s),t[or]=e.current,Sa(t.nodeType===8?t.parentNode:t),new om(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Qx(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return Bs(t)};Xt.hydrate=function(t,e,n){if(!Fc(e))throw Error(U(200));return Uc(null,t,e,!0,n)};Xt.hydrateRoot=function(t,e,n){if(!am(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=CE;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=PE(e,null,t,1,n??null,s,!1,i,o),t[or]=e.current,Sa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Lc(e)};Xt.render=function(t,e,n){if(!Fc(e))throw Error(U(200));return Uc(null,t,e,!1,n)};Xt.unmountComponentAtNode=function(t){if(!Fc(t))throw Error(U(40));return t._reactRootContainer?(Bs(function(){Uc(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1};Xt.unstable_batchedUpdates=em;Xt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Fc(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Uc(t,e,n,!1,r)};Xt.version="18.3.1-next-f1338f8080-20240426";function bE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bE)}catch(t){console.error(t)}}bE(),bx.exports=Xt;var Db=bx.exports,Fv=Db;Mh.createRoot=Fv.createRoot,Mh.hydrateRoot=Fv.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ja(){return ja=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ja.apply(this,arguments)}var Mr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Mr||(Mr={}));const Uv="popstate";function Vb(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:a}=r.location;return Af("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Xu(s)}return Ob(e,n,null,t)}function $e(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function lm(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Mb(){return Math.random().toString(36).substr(2,8)}function Bv(t,e){return{usr:t.state,key:t.key,idx:e}}function Af(t,e,n,r){return n===void 0&&(n=null),ja({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ao(e):e,{state:n,key:e&&e.key||r||Mb()})}function Xu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ao(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function Ob(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,a=Mr.Pop,u=null,c=h();c==null&&(c=0,o.replaceState(ja({},o.state,{idx:c}),""));function h(){return(o.state||{idx:null}).idx}function f(){a=Mr.Pop;let C=h(),w=C==null?null:C-c;c=C,u&&u({action:a,location:T.location,delta:w})}function m(C,w){a=Mr.Push;let v=Af(T.location,C,w);c=h()+1;let x=Bv(v,c),b=T.createHref(v);try{o.pushState(x,"",b)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(b)}i&&u&&u({action:a,location:T.location,delta:1})}function y(C,w){a=Mr.Replace;let v=Af(T.location,C,w);c=h();let x=Bv(v,c),b=T.createHref(v);o.replaceState(x,"",b),i&&u&&u({action:a,location:T.location,delta:0})}function E(C){let w=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof C=="string"?C:Xu(C);return v=v.replace(/ $/,"%20"),$e(w,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,w)}let T={get action(){return a},get location(){return t(s,o)},listen(C){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Uv,f),u=C,()=>{s.removeEventListener(Uv,f),u=null}},createHref(C){return e(s,C)},createURL:E,encodeLocation(C){let w=E(C);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:m,replace:y,go(C){return o.go(C)}};return T}var zv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zv||(zv={}));function Lb(t,e,n){return n===void 0&&(n="/"),Fb(t,e,n)}function Fb(t,e,n,r){let s=typeof e=="string"?ao(e):e,i=um(s.pathname||"/",n);if(i==null)return null;let o=kE(t);Ub(o);let a=null;for(let u=0;a==null&&u<o.length;++u){let c=Jb(i);a=Qb(o[u],c)}return a}function kE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,a)=>{let u={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&($e(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=qr([r,u.relativePath]),h=n.concat(u);i.children&&i.children.length>0&&($e(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),kE(i.children,e,h,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:Gb(c,i.index),routesMeta:h})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let u of AE(i.path))s(i,o,u)}),e}function AE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=AE(r.join("/")),a=[];return a.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&a.push(...o),a.map(u=>t.startsWith("/")&&u===""?"/":u)}function Ub(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Kb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Bb=/^:[\w-]+$/,zb=3,$b=2,Hb=1,Wb=10,qb=-2,$v=t=>t==="*";function Gb(t,e){let n=t.split("/"),r=n.length;return n.some($v)&&(r+=qb),e&&(r+=$b),n.filter(s=>!$v(s)).reduce((s,i)=>s+(Bb.test(i)?zb:i===""?Hb:Wb),r)}function Kb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function Qb(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let a=0;a<r.length;++a){let u=r[a],c=a===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=Yb({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},h),m=u.route;if(!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:qr([i,f.pathname]),pathnameBase:rk(qr([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=qr([i,f.pathnameBase]))}return o}function Yb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=Xb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((c,h,f)=>{let{paramName:m,isOptional:y}=h;if(m==="*"){let T=a[f]||"";o=i.slice(0,i.length-T.length).replace(/(.)\/+$/,"$1")}const E=a[f];return y&&!E?c[m]=void 0:c[m]=(E||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function Xb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),lm(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function Jb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return lm(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function um(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const Zb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ek=t=>Zb.test(t);function tk(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ao(t):t,i;if(n)if(ek(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),lm(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Hv(n.substring(1),"/"):i=Hv(n,e)}else i=e;return{pathname:i,search:sk(r),hash:ik(s)}}function Hv(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function oh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function nk(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cm(t,e){let n=nk(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function dm(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ao(t):(s=ja({},t),$e(!s.pathname||!s.pathname.includes("?"),oh("?","pathname","search",s)),$e(!s.pathname||!s.pathname.includes("#"),oh("#","pathname","hash",s)),$e(!s.search||!s.search.includes("#"),oh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}a=f>=0?e[f]:"/"}let u=tk(s,a),c=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||h)&&(u.pathname+="/"),u}const qr=t=>t.join("/").replace(/\/\/+/g,"/"),rk=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),sk=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ik=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ok(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const RE=["post","put","patch","delete"];new Set(RE);const ak=["get",...RE];new Set(ak);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Da(){return Da=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Da.apply(this,arguments)}const hm=R.createContext(null),lk=R.createContext(null),ds=R.createContext(null),Bc=R.createContext(null),mr=R.createContext({outlet:null,matches:[],isDataRoute:!1}),NE=R.createContext(null);function uk(t,e){let{relative:n}=e===void 0?{}:e;lo()||$e(!1);let{basename:r,navigator:s}=R.useContext(ds),{hash:i,pathname:o,search:a}=DE(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:qr([r,o])),s.createHref({pathname:u,search:a,hash:i})}function lo(){return R.useContext(Bc)!=null}function uo(){return lo()||$e(!1),R.useContext(Bc).location}function jE(t){R.useContext(ds).static||R.useLayoutEffect(t)}function hs(){let{isDataRoute:t}=R.useContext(mr);return t?Tk():ck()}function ck(){lo()||$e(!1);let t=R.useContext(hm),{basename:e,future:n,navigator:r}=R.useContext(ds),{matches:s}=R.useContext(mr),{pathname:i}=uo(),o=JSON.stringify(cm(s,n.v7_relativeSplatPath)),a=R.useRef(!1);return jE(()=>{a.current=!0}),R.useCallback(function(c,h){if(h===void 0&&(h={}),!a.current)return;if(typeof c=="number"){r.go(c);return}let f=dm(c,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:qr([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}function dk(){let{matches:t}=R.useContext(mr),e=t[t.length-1];return e?e.params:{}}function DE(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(ds),{matches:s}=R.useContext(mr),{pathname:i}=uo(),o=JSON.stringify(cm(s,r.v7_relativeSplatPath));return R.useMemo(()=>dm(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function hk(t,e){return fk(t,e)}function fk(t,e,n,r){lo()||$e(!1);let{navigator:s}=R.useContext(ds),{matches:i}=R.useContext(mr),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=uo(),h;if(e){var f;let C=typeof e=="string"?ao(e):e;u==="/"||(f=C.pathname)!=null&&f.startsWith(u)||$e(!1),h=C}else h=c;let m=h.pathname||"/",y=m;if(u!=="/"){let C=u.replace(/^\//,"").split("/");y="/"+m.replace(/^\//,"").split("/").slice(C.length).join("/")}let E=Lb(t,{pathname:y}),T=vk(E&&E.map(C=>Object.assign({},C,{params:Object.assign({},a,C.params),pathname:qr([u,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?u:qr([u,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,r);return e&&T?R.createElement(Bc.Provider,{value:{location:Da({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Mr.Pop}},T):T}function pk(){let t=Ek(),e=ok(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,null)}const mk=R.createElement(pk,null);class gk extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(mr.Provider,{value:this.props.routeContext},R.createElement(NE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function yk(t){let{routeContext:e,match:n,children:r}=t,s=R.useContext(hm);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(mr.Provider,{value:e},r)}function vk(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(s=n)==null?void 0:s.errors;if(a!=null){let h=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);h>=0||$e(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=h),f.route.id){let{loaderData:m,errors:y}=n,E=f.route.loader&&m[f.route.id]===void 0&&(!y||y[f.route.id]===void 0);if(f.route.lazy||E){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let y,E=!1,T=null,C=null;n&&(y=a&&f.route.id?a[f.route.id]:void 0,T=f.route.errorElement||mk,u&&(c<0&&m===0?(Sk("route-fallback"),E=!0,C=null):c===m&&(E=!0,C=f.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,m+1)),v=()=>{let x;return y?x=T:E?x=C:f.route.Component?x=R.createElement(f.route.Component,null):f.route.element?x=f.route.element:x=h,R.createElement(yk,{match:f,routeContext:{outlet:h,matches:w,isDataRoute:n!=null},children:x})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?R.createElement(gk,{location:n.location,revalidation:n.revalidation,component:T,error:y,children:v(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):v()},null)}var VE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(VE||{}),ME=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ME||{});function _k(t){let e=R.useContext(hm);return e||$e(!1),e}function xk(t){let e=R.useContext(lk);return e||$e(!1),e}function wk(t){let e=R.useContext(mr);return e||$e(!1),e}function OE(t){let e=wk(),n=e.matches[e.matches.length-1];return n.route.id||$e(!1),n.route.id}function Ek(){var t;let e=R.useContext(NE),n=xk(),r=OE();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Tk(){let{router:t}=_k(VE.UseNavigateStable),e=OE(ME.UseNavigateStable),n=R.useRef(!1);return jE(()=>{n.current=!0}),R.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Da({fromRouteId:e},i)))},[t,e])}const Wv={};function Sk(t,e,n){Wv[t]||(Wv[t]=!0)}function Ik(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Pk(t){let{to:e,replace:n,state:r,relative:s}=t;lo()||$e(!1);let{future:i,static:o}=R.useContext(ds),{matches:a}=R.useContext(mr),{pathname:u}=uo(),c=hs(),h=dm(e,cm(a,i.v7_relativeSplatPath),u,s==="path"),f=JSON.stringify(h);return R.useEffect(()=>c(JSON.parse(f),{replace:n,state:r,relative:s}),[c,f,s,n,r]),null}function kt(t){$e(!1)}function Ck(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Mr.Pop,navigator:i,static:o=!1,future:a}=t;lo()&&$e(!1);let u=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:u,navigator:i,static:o,future:Da({v7_relativeSplatPath:!1},a)}),[u,a,i,o]);typeof r=="string"&&(r=ao(r));let{pathname:h="/",search:f="",hash:m="",state:y=null,key:E="default"}=r,T=R.useMemo(()=>{let C=um(h,u);return C==null?null:{location:{pathname:C,search:f,hash:m,state:y,key:E},navigationType:s}},[u,h,f,m,y,E,s]);return T==null?null:R.createElement(ds.Provider,{value:c},R.createElement(Bc.Provider,{children:n,value:T}))}function bk(t){let{children:e,location:n}=t;return hk(Rf(e),n)}new Promise(()=>{});function Rf(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let i=[...e,s];if(r.type===R.Fragment){n.push.apply(n,Rf(r.props.children,i));return}r.type!==kt&&$e(!1),!r.props.index||!r.props.children||$e(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Rf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nf(){return Nf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Nf.apply(this,arguments)}function kk(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function Ak(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function Rk(t,e){return t.button===0&&(!e||e==="_self")&&!Ak(t)}const Nk=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],jk="6";try{window.__reactRouterVersion=jk}catch{}const Dk="startTransition",qv=TP[Dk];function Vk(t){let{basename:e,children:n,future:r,window:s}=t,i=R.useRef();i.current==null&&(i.current=Vb({window:s,v5Compat:!0}));let o=i.current,[a,u]=R.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},h=R.useCallback(f=>{c&&qv?qv(()=>u(f)):u(f)},[u,c]);return R.useLayoutEffect(()=>o.listen(h),[o,h]),R.useEffect(()=>Ik(r),[r]),R.createElement(Ck,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}const Mk=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Ok=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ue=R.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:a,target:u,to:c,preventScrollReset:h,viewTransition:f}=e,m=kk(e,Nk),{basename:y}=R.useContext(ds),E,T=!1;if(typeof c=="string"&&Ok.test(c)&&(E=c,Mk))try{let x=new URL(window.location.href),b=c.startsWith("//")?new URL(x.protocol+c):new URL(c),D=um(b.pathname,y);b.origin===x.origin&&D!=null?c=D+b.search+b.hash:T=!0}catch{}let C=uk(c,{relative:s}),w=Lk(c,{replace:o,state:a,target:u,preventScrollReset:h,relative:s,viewTransition:f});function v(x){r&&r(x),x.defaultPrevented||w(x)}return R.createElement("a",Nf({},m,{href:E||C,onClick:T||i?r:v,ref:n,target:u}))});var Gv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gv||(Gv={}));var Kv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Kv||(Kv={}));function Lk(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,u=hs(),c=uo(),h=DE(t,{relative:o});return R.useCallback(f=>{if(Rk(f,n)){f.preventDefault();let m=r!==void 0?r:Xu(c)===Xu(h);u(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[c,u,h,r,s,n,t,i,o,a])}var Qv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Fk=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],a=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},FE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,h=i>>2,f=(i&3)<<4|a>>4;let m=(a&15)<<2|c>>6,y=c&63;u||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(LE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Fk(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],a=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||a==null||c==null||f==null)throw new Uk;const m=i<<2|a>>4;if(r.push(m),c!==64){const y=a<<4&240|c>>2;if(r.push(y),f!==64){const E=c<<6&192|f;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Uk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Bk=function(t){const e=LE(t);return FE.encodeByteArray(e,!0)},Ju=function(t){return Bk(t).replace(/\./g,"")},UE=function(t){try{return FE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k=()=>zk().__FIREBASE_DEFAULTS__,Hk=()=>{if(typeof process>"u"||typeof Qv>"u")return;const t=Qv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Wk=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&UE(t[1]);return e&&JSON.parse(e)},zc=()=>{try{return $k()||Hk()||Wk()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},BE=t=>{var e,n;return(n=(e=zc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zE=t=>{const e=BE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$E=()=>{var t;return(t=zc())===null||t===void 0?void 0:t.config},HE=t=>{var e;return(e=zc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ju(JSON.stringify(n)),Ju(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gk(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pt())}function Kk(){var t;const e=(t=zc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qk(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Yk(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Xk(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Jk(){const t=Pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Zk(){return!Kk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function eA(){try{return typeof indexedDB=="object"}catch{return!1}}function tA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA="FirebaseError";class Fn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nA,Object.setPrototypeOf(this,Fn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ya.prototype.create)}}class Ya{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?rA(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new Fn(s,a,r)}}function rA(t,e){return t.replace(sA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const sA=/\{\$([^}]+)}/g;function iA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Wi(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Yv(i)&&Yv(o)){if(!Wi(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Yv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Wo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function qo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function oA(t,e){const n=new aA(t,e);return n.subscribe.bind(n)}class aA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ah),s.error===void 0&&(s.error=ah),s.complete===void 0&&(s.complete=ah);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ah(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qe(t){return t&&t._delegate?t._delegate:t}class ts{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new qk;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dA(e))try{this.getOrInitializeService({instanceIdentifier:Ts})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Ts){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ts){return this.instances.has(e)}getOptions(e=Ts){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:cA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ts){return this.component?this.component.multipleInstances?e:Ts:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function cA(t){return t===Ts?void 0:t}function dA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new uA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ae||(ae={}));const fA={debug:ae.DEBUG,verbose:ae.VERBOSE,info:ae.INFO,warn:ae.WARN,error:ae.ERROR,silent:ae.SILENT},pA=ae.INFO,mA={[ae.DEBUG]:"log",[ae.VERBOSE]:"log",[ae.INFO]:"info",[ae.WARN]:"warn",[ae.ERROR]:"error"},gA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=mA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class fm{constructor(e){this.name=e,this._logLevel=pA,this._logHandler=gA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ae))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ae.DEBUG,...e),this._logHandler(this,ae.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ae.VERBOSE,...e),this._logHandler(this,ae.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ae.INFO,...e),this._logHandler(this,ae.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ae.WARN,...e),this._logHandler(this,ae.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ae.ERROR,...e),this._logHandler(this,ae.ERROR,...e)}}const yA=(t,e)=>e.some(n=>t instanceof n);let Xv,Jv;function vA(){return Xv||(Xv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function _A(){return Jv||(Jv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qE=new WeakMap,jf=new WeakMap,GE=new WeakMap,lh=new WeakMap,pm=new WeakMap;function xA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Gr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&qE.set(n,t)}).catch(()=>{}),pm.set(e,t),e}function wA(t){if(jf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});jf.set(t,e)}let Df={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return jf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||GE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Gr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function EA(t){Df=t(Df)}function TA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(uh(this),e,...n);return GE.set(r,e.sort?e.sort():[e]),Gr(r)}:_A().includes(t)?function(...e){return t.apply(uh(this),e),Gr(qE.get(this))}:function(...e){return Gr(t.apply(uh(this),e))}}function SA(t){return typeof t=="function"?TA(t):(t instanceof IDBTransaction&&wA(t),yA(t,vA())?new Proxy(t,Df):t)}function Gr(t){if(t instanceof IDBRequest)return xA(t);if(lh.has(t))return lh.get(t);const e=SA(t);return e!==t&&(lh.set(t,e),pm.set(e,t)),e}const uh=t=>pm.get(t);function IA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=Gr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Gr(o.result),u.oldVersion,u.newVersion,Gr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const PA=["get","getKey","getAll","getAllKeys","count"],CA=["put","add","delete","clear"],ch=new Map;function Zv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ch.get(e))return ch.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=CA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||PA.includes(n)))return;const i=async function(o,...a){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),s&&u.done]))[0]};return ch.set(e,i),i}EA(t=>({...t,get:(e,n,r)=>Zv(e,n)||t.get(e,n,r),has:(e,n)=>!!Zv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(kA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function kA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vf="@firebase/app",e0="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new fm("@firebase/app"),AA="@firebase/app-compat",RA="@firebase/analytics-compat",NA="@firebase/analytics",jA="@firebase/app-check-compat",DA="@firebase/app-check",VA="@firebase/auth",MA="@firebase/auth-compat",OA="@firebase/database",LA="@firebase/data-connect",FA="@firebase/database-compat",UA="@firebase/functions",BA="@firebase/functions-compat",zA="@firebase/installations",$A="@firebase/installations-compat",HA="@firebase/messaging",WA="@firebase/messaging-compat",qA="@firebase/performance",GA="@firebase/performance-compat",KA="@firebase/remote-config",QA="@firebase/remote-config-compat",YA="@firebase/storage",XA="@firebase/storage-compat",JA="@firebase/firestore",ZA="@firebase/vertexai-preview",eR="@firebase/firestore-compat",tR="firebase",nR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mf="[DEFAULT]",rR={[Vf]:"fire-core",[AA]:"fire-core-compat",[NA]:"fire-analytics",[RA]:"fire-analytics-compat",[DA]:"fire-app-check",[jA]:"fire-app-check-compat",[VA]:"fire-auth",[MA]:"fire-auth-compat",[OA]:"fire-rtdb",[LA]:"fire-data-connect",[FA]:"fire-rtdb-compat",[UA]:"fire-fn",[BA]:"fire-fn-compat",[zA]:"fire-iid",[$A]:"fire-iid-compat",[HA]:"fire-fcm",[WA]:"fire-fcm-compat",[qA]:"fire-perf",[GA]:"fire-perf-compat",[KA]:"fire-rc",[QA]:"fire-rc-compat",[YA]:"fire-gcs",[XA]:"fire-gcs-compat",[JA]:"fire-fst",[eR]:"fire-fst-compat",[ZA]:"fire-vertex","fire-js":"fire-js",[tR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zu=new Map,sR=new Map,Of=new Map;function t0(t,e){try{t.container.addComponent(e)}catch(n){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function zs(t){const e=t.name;if(Of.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;Of.set(e,t);for(const n of Zu.values())t0(n,t);for(const n of sR.values())t0(n,t);return!0}function $c(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Kr=new Ya("app","Firebase",iR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ts("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Kr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js=nR;function KE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Mf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Kr.create("bad-app-name",{appName:String(s)});if(n||(n=$E()),!n)throw Kr.create("no-options");const i=Zu.get(s);if(i){if(Wi(n,i.options)&&Wi(r,i.config))return i;throw Kr.create("duplicate-app",{appName:s})}const o=new hA(s);for(const u of Of.values())o.addComponent(u);const a=new oR(n,r,o);return Zu.set(s,a),a}function mm(t=Mf){const e=Zu.get(t);if(!e&&t===Mf&&$E())return KE();if(!e)throw Kr.create("no-app",{appName:t});return e}function Rn(t,e,n){var r;let s=(r=rR[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(a.join(" "));return}zs(new ts(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR="firebase-heartbeat-database",lR=1,Va="firebase-heartbeat-store";let dh=null;function QE(){return dh||(dh=IA(aR,lR,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Va)}catch(n){console.warn(n)}}}}).catch(t=>{throw Kr.create("idb-open",{originalErrorMessage:t.message})})),dh}async function uR(t){try{const n=(await QE()).transaction(Va),r=await n.objectStore(Va).get(YE(t));return await n.done,r}catch(e){if(e instanceof Fn)ur.warn(e.message);else{const n=Kr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(n.message)}}}async function n0(t,e){try{const r=(await QE()).transaction(Va,"readwrite");await r.objectStore(Va).put(e,YE(t)),await r.done}catch(n){if(n instanceof Fn)ur.warn(n.message);else{const r=Kr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(r.message)}}}function YE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=1024,dR=30*24*60*60*1e3;class hR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new pR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=r0();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=dR}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=r0(),{heartbeatsToSend:r,unsentEntries:s}=fR(this._heartbeatsCache.heartbeats),i=Ju(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ur.warn(n),""}}}function r0(){return new Date().toISOString().substring(0,10)}function fR(t,e=cR){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),s0(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),s0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class pR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return eA()?tA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await uR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return n0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return n0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function s0(t){return Ju(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mR(t){zs(new ts("platform-logger",e=>new bA(e),"PRIVATE")),zs(new ts("heartbeat",e=>new hR(e),"PRIVATE")),Rn(Vf,e0,t),Rn(Vf,e0,"esm2017"),Rn("fire-js","")}mR("");var gR="firebase",yR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Rn(gR,yR,"app");function gm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function XE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const vR=XE,JE=new Ya("auth","Firebase",XE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ec=new fm("@firebase/auth");function _R(t,...e){ec.logLevel<=ae.WARN&&ec.warn(`Auth (${Js}): ${t}`,...e)}function mu(t,...e){ec.logLevel<=ae.ERROR&&ec.error(`Auth (${Js}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cn(t,...e){throw vm(t,...e)}function wn(t,...e){return vm(t,...e)}function ym(t,e,n){const r=Object.assign(Object.assign({},vR()),{[e]:n});return new Ya("auth","Firebase",r).create(e,{appName:t.name})}function nr(t){return ym(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xR(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&cn(t,"argument-error"),ym(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function vm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return JE.create(t,...e)}function Z(t,e,...n){if(!t)throw vm(e,...n)}function Xn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw mu(e),new Error(e)}function cr(t,e){t||Xn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ZE(){return i0()==="http:"||i0()==="https:"}function i0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ZE()||Yk()||"connection"in navigator)?navigator.onLine:!0}function ER(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja{constructor(e,n){this.shortDelay=e,this.longDelay=n,cr(n>e,"Short delay should be less than long delay!"),this.isMobile=Gk()||Xk()}get(){return wR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _m(t,e){cr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Xn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Xn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Xn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR=new Ja(3e4,6e4);function Un(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function In(t,e,n,r,s={}){return tT(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const a=Xa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return Qk()||(c.referrerPolicy="no-referrer"),eT.fetch()(nT(t,t.config.apiHost,n,a),c)})}async function tT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},TR),e);try{const s=new PR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Gl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Gl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Gl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Gl(t,"user-disabled",o);const h=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw ym(t,h,c);cn(t,h)}}catch(s){if(s instanceof Fn)throw s;cn(t,"network-request-failed",{message:String(s)})}}async function Za(t,e,n,r,s={}){const i=await In(t,e,n,r,s);return"mfaPendingCredential"in i&&cn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function nT(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?_m(t.config,s):`${t.config.apiScheme}://${s}`}function IR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class PR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(wn(this.auth,"network-request-failed")),SR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Gl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=wn(t,e,r);return s.customData._tokenResponse=n,s}function o0(t){return t!==void 0&&t.enterprise!==void 0}class CR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return IR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function bR(t,e){return In(t,"GET","/v2/recaptchaConfig",Un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kR(t,e){return In(t,"POST","/v1/accounts:delete",e)}async function rT(t,e){return In(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function AR(t,e=!1){const n=Qe(t),r=await n.getIdToken(e),s=xm(r);Z(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:oa(hh(s.auth_time)),issuedAtTime:oa(hh(s.iat)),expirationTime:oa(hh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function hh(t){return Number(t)*1e3}function xm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return mu("JWT malformed, contained fewer than 3 sections"),null;try{const s=UE(n);return s?JSON.parse(s):(mu("Failed to decode base64 JWT payload"),null)}catch(s){return mu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function a0(t){const e=xm(t);return Z(e,"internal-error"),Z(typeof e.exp<"u","internal-error"),Z(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Fn&&RR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function RR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=oa(this.lastLoginAt),this.creationTime=oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await qi(t,rT(n,{idToken:r}));Z(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?sT(i.providerUserInfo):[],a=DR(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),h=u?c:!1,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new Lf(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,f)}async function jR(t){const e=Qe(t);await nc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function DR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function sT(t){return t.map(e=>{var{providerId:n}=e,r=gm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VR(t,e){const n=await tT(t,{},async()=>{const r=Xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=nT(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",eT.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function MR(t,e){return In(t,"POST","/v2/accounts:revokeToken",Un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Z(e.idToken,"internal-error"),Z(typeof e.idToken<"u","internal-error"),Z(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):a0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Z(e.length!==0,"internal-error");const n=a0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Z(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await VR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Di;return r&&(Z(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Z(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Z(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Di,this.toJSON())}_performRefresh(){return Xn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e){Z(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Jn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=gm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new NR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Lf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await qi(this,this.stsTokenManager.getToken(this.auth,e));return Z(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return AR(this,e)}reload(){return jR(this)}_assign(e){this!==e&&(Z(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Jn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Z(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await nc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yn(this.auth.app))return Promise.reject(nr(this.auth));const e=await this.getIdToken();return await qi(this,kR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,a,u,c,h;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,y=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,E=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(a=n.tenantId)!==null&&a!==void 0?a:void 0,C=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,v=(h=n.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:x,emailVerified:b,isAnonymous:D,providerData:M,stsTokenManager:I}=n;Z(x&&I,e,"internal-error");const _=Di.fromJSON(this.name,I);Z(typeof x=="string",e,"internal-error"),Tr(f,e.name),Tr(m,e.name),Z(typeof b=="boolean",e,"internal-error"),Z(typeof D=="boolean",e,"internal-error"),Tr(y,e.name),Tr(E,e.name),Tr(T,e.name),Tr(C,e.name),Tr(w,e.name),Tr(v,e.name);const P=new Jn({uid:x,auth:e,email:m,emailVerified:b,displayName:f,isAnonymous:D,photoURL:E,phoneNumber:y,tenantId:T,stsTokenManager:_,createdAt:w,lastLoginAt:v});return M&&Array.isArray(M)&&(P.providerData=M.map(k=>Object.assign({},k))),C&&(P._redirectEventId=C),P}static async _fromIdTokenResponse(e,n,r=!1){const s=new Di;s.updateFromServerResponse(n);const i=new Jn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await nc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Z(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?sT(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Di;a.updateFromIdToken(r);const u=new Jn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Lf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l0=new Map;function Zn(t){cr(t instanceof Function,"Expected a class definition");let e=l0.get(t);return e?(cr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,l0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}iT.type="NONE";const u0=iT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gu(t,e,n){return`firebase:${t}:${e}:${n}`}class Vi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=gu(this.userKey,s.apiKey,i),this.fullPersistenceKey=gu("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Jn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Vi(Zn(u0),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Zn(u0);const o=gu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const h=await c._get(o);if(h){const f=Jn._fromJSON(e,h);c!==i&&(a=f),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Vi(i,e,r):(i=u[0],a&&await i._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Vi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(oT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(dT(e))return"Blackberry";if(hT(e))return"Webos";if(aT(e))return"Safari";if((e.includes("chrome/")||lT(e))&&!e.includes("edge/"))return"Chrome";if(cT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function oT(t=Pt()){return/firefox\//i.test(t)}function aT(t=Pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function lT(t=Pt()){return/crios\//i.test(t)}function uT(t=Pt()){return/iemobile/i.test(t)}function cT(t=Pt()){return/android/i.test(t)}function dT(t=Pt()){return/blackberry/i.test(t)}function hT(t=Pt()){return/webos/i.test(t)}function wm(t=Pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function OR(t=Pt()){var e;return wm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function LR(){return Jk()&&document.documentMode===10}function fT(t=Pt()){return wm(t)||cT(t)||hT(t)||dT(t)||/windows phone/i.test(t)||uT(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pT(t,e=[]){let n;switch(t){case"Browser":n=c0(Pt());break;case"Worker":n=`${c0(Pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Js}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,a)=>{try{const u=e(i);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UR(t,e={}){return In(t,"GET","/v2/passwordPolicy",Un(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR=6;class zR{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:BR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $R{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new d0(this),this.idTokenSubscription=new d0(this),this.beforeStateQueue=new FR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=JE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Zn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Vi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await rT(this,{idToken:e}),r=await Jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(yn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Z(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await nc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ER()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yn(this.app))return Promise.reject(nr(this));const n=e?Qe(e):null;return n&&Z(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Z(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yn(this.app)?Promise.reject(nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yn(this.app)?Promise.reject(nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Zn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await UR(this),n=new zR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ya("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await MR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Zn(e)||this._popupRedirectResolver;Z(n,this,"argument-error"),this.redirectPersistenceManager=await Vi.create(this,[Zn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Z(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Z(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=pT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&_R(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function gr(t){return Qe(t)}class d0{constructor(e){this.auth=e,this.observer=null,this.addObserver=oA(n=>this.observer=n)}get next(){return Z(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function HR(t){Hc=t}function mT(t){return Hc.loadJS(t)}function WR(){return Hc.recaptchaEnterpriseScript}function qR(){return Hc.gapiScript}function GR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const KR="recaptcha-enterprise",QR="NO_RECAPTCHA";class YR{constructor(e){this.type=KR,this.auth=gr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{bR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new CR(u);return i.tenantId==null?i._agentRecaptchaConfig=c:i._tenantRecaptchaConfigs[i.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function s(i,o,a){const u=window.grecaptcha;o0(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(c=>{o(c)}).catch(()=>{o(QR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(a=>{if(!n&&o0(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=WR();u.length!==0&&(u+=a),mT(u).then(()=>{s(a,i,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function h0(t,e,n,r=!1){const s=new YR(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function rc(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await h0(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await h0(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t,e){const n=$c(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Wi(i,e??{}))return s;cn(s,"already-initialized")}return n.initialize({options:e})}function JR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Zn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function ZR(t,e,n){const r=gr(t);Z(r._canInitEmulator,r,"emulator-config-failed"),Z(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=gT(e),{host:o,port:a}=e2(e),u=a===null?"":`:${a}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),t2()}function gT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function e2(t){const e=gT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:f0(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:f0(o)}}}function f0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function t2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Xn("not implemented")}_getIdTokenResponse(e){return Xn("not implemented")}_linkToIdToken(e,n){return Xn("not implemented")}_getReauthenticationResolver(e){return Xn("not implemented")}}async function n2(t,e){return In(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function r2(t,e){return Za(t,"POST","/v1/accounts:signInWithPassword",Un(t,e))}async function s2(t,e){return In(t,"POST","/v1/accounts:sendOobCode",Un(t,e))}async function i2(t,e){return s2(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o2(t,e){return Za(t,"POST","/v1/accounts:signInWithEmailLink",Un(t,e))}async function a2(t,e){return Za(t,"POST","/v1/accounts:signInWithEmailLink",Un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ma extends Em{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ma(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ma(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rc(e,n,"signInWithPassword",r2);case"emailLink":return o2(e,{email:this._email,oobCode:this._password});default:cn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return rc(e,r,"signUpPassword",n2);case"emailLink":return a2(e,{idToken:n,email:this._email,oobCode:this._password});default:cn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mi(t,e){return Za(t,"POST","/v1/accounts:signInWithIdp",Un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2="http://localhost";class $s extends Em{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new $s(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):cn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=gm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new $s(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Mi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Mi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Mi(e,n)}buildRequest(){const e={requestUri:l2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Xa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function c2(t){const e=Wo(qo(t)).link,n=e?Wo(qo(e)).deep_link_id:null,r=Wo(qo(t)).deep_link_id;return(r?Wo(qo(r)).link:null)||r||n||e||t}class Tm{constructor(e){var n,r,s,i,o,a;const u=Wo(qo(e)),c=(n=u.apiKey)!==null&&n!==void 0?n:null,h=(r=u.oobCode)!==null&&r!==void 0?r:null,f=u2((s=u.mode)!==null&&s!==void 0?s:null);Z(c&&h&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=h,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=c2(e);try{return new Tm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(){this.providerId=co.PROVIDER_ID}static credential(e,n){return Ma._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Tm.parseLink(n);return Z(r,"argument-error"),Ma._fromEmailAndCode(e,r.code,r.tenantId)}}co.PROVIDER_ID="password";co.EMAIL_PASSWORD_SIGN_IN_METHOD="password";co.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el extends Sm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends el{constructor(){super("facebook.com")}static credential(e){return $s._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends el{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return $s._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Kn.credential(n,r)}catch{return null}}}Kn.GOOGLE_SIGN_IN_METHOD="google.com";Kn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends el{constructor(){super("github.com")}static credential(e){return $s._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jr extends el{constructor(){super("twitter.com")}static credential(e,n){return $s._fromParams({providerId:jr.PROVIDER_ID,signInMethod:jr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return jr.credentialFromTaggedObject(e)}static credentialFromError(e){return jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return jr.credential(n,r)}catch{return null}}}jr.TWITTER_SIGN_IN_METHOD="twitter.com";jr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d2(t,e){return Za(t,"POST","/v1/accounts:signUp",Un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Jn._fromIdTokenResponse(e,r,s),o=p0(r);return new Hs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=p0(r);return new Hs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function p0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc extends Fn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,sc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new sc(e,n,r,s)}}function yT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?sc._fromErrorAndOperation(t,i,e,r):i})}async function h2(t,e,n=!1){const r=await qi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Hs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(t,e,n=!1){const{auth:r}=t;if(yn(r.app))return Promise.reject(nr(r));const s="reauthenticate";try{const i=await qi(t,yT(r,s,e,t),n);Z(i.idToken,r,"internal-error");const o=xm(i.idToken);Z(o,r,"internal-error");const{sub:a}=o;return Z(t.uid===a,r,"user-mismatch"),Hs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&cn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vT(t,e,n=!1){if(yn(t.app))return Promise.reject(nr(t));const r="signIn",s=await yT(t,r,e),i=await Hs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function p2(t,e){return vT(gr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _T(t){const e=gr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function m2(t,e,n){const r=gr(t);await rc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",i2)}async function g2(t,e,n){if(yn(t.app))return Promise.reject(nr(t));const r=gr(t),o=await rc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",d2).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&_T(t),u}),a=await Hs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}function y2(t,e,n){return yn(t.app)?Promise.reject(nr(t)):p2(Qe(t),co.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&_T(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v2(t,e){return In(t,"POST","/v1/accounts:createAuthUri",Un(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _2(t,e){const n=ZE()?tc():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await v2(Qe(t),r);return s||[]}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x2(t,e){return In(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Qe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await qi(r,x2(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function w2(t,e,n,r){return Qe(t).onIdTokenChanged(e,n,r)}function E2(t,e,n){return Qe(t).beforeAuthStateChanged(e,n)}function T2(t,e,n,r){return Qe(t).onAuthStateChanged(e,n,r)}function S2(t){return Qe(t).signOut()}const ic="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ic,"1"),this.storage.removeItem(ic),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2=1e3,P2=10;class ET extends wT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=fT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);LR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,P2):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},I2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}ET.type="LOCAL";const C2=ET;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT extends wT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}TT.type="SESSION";const ST=TT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Wc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const a=Array.from(o).map(async c=>c(n.origin,i)),u=await b2(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Wc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,u)=>{const c=Im("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(m.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function A2(t){Nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IT(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function R2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function N2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function j2(){return IT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT="firebaseLocalStorageDb",D2=1,oc="firebaseLocalStorage",CT="fbase_key";class tl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qc(t,e){return t.transaction([oc],e?"readwrite":"readonly").objectStore(oc)}function V2(){const t=indexedDB.deleteDatabase(PT);return new tl(t).toPromise()}function Ff(){const t=indexedDB.open(PT,D2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(oc,{keyPath:CT})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(oc)?e(r):(r.close(),await V2(),e(await Ff()))})})}async function m0(t,e,n){const r=qc(t,!0).put({[CT]:e,value:n});return new tl(r).toPromise()}async function M2(t,e){const n=qc(t,!1).get(e),r=await new tl(n).toPromise();return r===void 0?null:r.value}function g0(t,e){const n=qc(t,!0).delete(e);return new tl(n).toPromise()}const O2=800,L2=3;class bT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Ff(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>L2)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return IT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Wc._getInstance(j2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await R2(),!this.activeServiceWorker)return;this.sender=new k2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||N2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ff();return await m0(e,ic,"1"),await g0(e,ic),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>m0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>M2(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>g0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=qc(s,!1).getAll();return new tl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),O2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}bT.type="LOCAL";const F2=bT;new Ja(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kT(t,e){return e?Zn(e):(Z(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm extends Em{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Mi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Mi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Mi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function U2(t){return vT(t.auth,new Pm(t),t.bypassAuthState)}function B2(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),f2(n,new Pm(t),t.bypassAuthState)}async function z2(t){const{auth:e,user:n}=t;return Z(n,e,"internal-error"),h2(n,new Pm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return U2;case"linkViaPopup":case"linkViaRedirect":return z2;case"reauthViaPopup":case"reauthViaRedirect":return B2;default:cn(this.auth,"internal-error")}}resolve(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){cr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=new Ja(2e3,1e4);async function H2(t,e,n){if(yn(t.app))return Promise.reject(wn(t,"operation-not-supported-in-this-environment"));const r=gr(t);xR(t,e,Sm);const s=kT(r,n);return new As(r,"signInViaPopup",e,s).executeNotNull()}class As extends AT{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,As.currentPopupAction&&As.currentPopupAction.cancel(),As.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Z(e,this.auth,"internal-error"),e}async onExecution(){cr(this.filter.length===1,"Popup operations only handle one event");const e=Im();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(wn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(wn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,As.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(wn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$2.get())};e()}}As.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W2="pendingRedirect",yu=new Map;class q2 extends AT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=yu.get(this.auth._key());if(!e){try{const r=await G2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}yu.set(this.auth._key(),e)}return this.bypassAuthState||yu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function G2(t,e){const n=Y2(e),r=Q2(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function K2(t,e){yu.set(t._key(),e)}function Q2(t){return Zn(t._redirectPersistence)}function Y2(t){return gu(W2,t.config.apiKey,t.name)}async function X2(t,e,n=!1){if(yn(t.app))return Promise.reject(nr(t));const r=gr(t),s=kT(r,e),o=await new q2(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J2=10*60*1e3;class Z2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!eN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RT(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(wn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=J2&&this.cachedEventUids.clear(),this.cachedEventUids.has(y0(e))}saveEventToCache(e){this.cachedEventUids.add(y0(e)),this.lastProcessedEventTime=Date.now()}}function y0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function eN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tN(t,e={}){return In(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,rN=/^https?/;async function sN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await tN(t);for(const n of e)try{if(iN(n))return}catch{}cn(t,"unauthorized-domain")}function iN(t){const e=tc(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!rN.test(n))return!1;if(nN.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oN=new Ja(3e4,6e4);function v0(){const t=Nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function aN(t){return new Promise((e,n)=>{var r,s,i;function o(){v0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{v0(),n(wn(t,"network-request-failed"))},timeout:oN.get()})}if(!((s=(r=Nn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Nn().gapi)===null||i===void 0)&&i.load)o();else{const a=GR("iframefcb");return Nn()[a]=()=>{gapi.load?o():n(wn(t,"network-request-failed"))},mT(`${qR()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw vu=null,e})}let vu=null;function lN(t){return vu=vu||aN(t),vu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN=new Ja(5e3,15e3),cN="__/auth/iframe",dN="emulator/auth/iframe",hN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},fN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function pN(t){const e=t.config;Z(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?_m(e,dN):`https://${t.config.authDomain}/${cN}`,r={apiKey:e.apiKey,appName:t.name,v:Js},s=fN.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Xa(r).slice(1)}`}async function mN(t){const e=await lN(t),n=Nn().gapi;return Z(n,t,"internal-error"),e.open({where:document.body,url:pN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:hN,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=wn(t,"network-request-failed"),a=Nn().setTimeout(()=>{i(o)},uN.get());function u(){Nn().clearTimeout(a),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},yN=500,vN=600,_N="_blank",xN="http://localhost";class _0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function wN(t,e,n,r=yN,s=vN){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},gN),{width:r.toString(),height:s.toString(),top:i,left:o}),c=Pt().toLowerCase();n&&(a=lT(c)?_N:n),oT(c)&&(e=e||xN,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[y,E])=>`${m}${y}=${E},`,"");if(OR(c)&&a!=="_self")return EN(e||"",a),new _0(null);const f=window.open(e||"",a,h);Z(f,t,"popup-blocked");try{f.focus()}catch{}return new _0(f)}function EN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TN="__/auth/handler",SN="emulator/auth/handler",IN=encodeURIComponent("fac");async function x0(t,e,n,r,s,i){Z(t.config.authDomain,t,"auth-domain-config-required"),Z(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Js,eventId:s};if(e instanceof Sm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",iA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof el){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const h of Object.keys(a))a[h]===void 0&&delete a[h];const u=await t._getAppCheckToken(),c=u?`#${IN}=${encodeURIComponent(u)}`:"";return`${PN(t)}?${Xa(a).slice(1)}${c}`}function PN({config:t}){return t.emulator?_m(t,SN):`https://${t.authDomain}/${TN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fh="webStorageSupport";class CN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ST,this._completeRedirectFn=X2,this._overrideRedirectResult=K2}async _openPopup(e,n,r,s){var i;cr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await x0(e,n,r,tc(),s);return wN(e,o,Im())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await x0(e,n,r,tc(),s);return A2(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(cr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await mN(e),r=new Z2(e);return n.register("authEvent",s=>(Z(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fh,{type:fh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[fh];o!==void 0&&n(!!o),cn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return fT()||aT()||wm()}}const bN=CN;var w0="@firebase/auth",E0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Z(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RN(t){zs(new ts("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Z(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pT(t)},c=new $R(r,s,i,u);return JR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),zs(new ts("auth-internal",e=>{const n=gr(e.getProvider("auth").getImmediate());return(r=>new kN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Rn(w0,E0,AN(t)),Rn(w0,E0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=5*60,jN=HE("authIdTokenMaxAge")||NN;let T0=null;const DN=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>jN)return;const s=n==null?void 0:n.token;T0!==s&&(T0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function VN(t=mm()){const e=$c(t,"auth");if(e.isInitialized())return e.getImmediate();const n=XR(t,{popupRedirectResolver:bN,persistence:[F2,C2,ST]}),r=HE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=DN(i.toString());E2(n,o,()=>o(n.currentUser)),w2(n,a=>o(a))}}const s=BE("auth");return s&&ZR(n,`http://${s}`),n}function MN(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}HR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=wn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",MN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RN("Browser");var S0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vs,NT;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function P(){}P.prototype=_.prototype,I.D=_.prototype,I.prototype=new P,I.prototype.constructor=I,I.C=function(k,N,j){for(var A=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)A[oe-2]=arguments[oe];return _.prototype[N].apply(k,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,_,P){P||(P=0);var k=Array(16);if(typeof _=="string")for(var N=0;16>N;++N)k[N]=_.charCodeAt(P++)|_.charCodeAt(P++)<<8|_.charCodeAt(P++)<<16|_.charCodeAt(P++)<<24;else for(N=0;16>N;++N)k[N]=_[P++]|_[P++]<<8|_[P++]<<16|_[P++]<<24;_=I.g[0],P=I.g[1],N=I.g[2];var j=I.g[3],A=_+(j^P&(N^j))+k[0]+3614090360&4294967295;_=P+(A<<7&4294967295|A>>>25),A=j+(N^_&(P^N))+k[1]+3905402710&4294967295,j=_+(A<<12&4294967295|A>>>20),A=N+(P^j&(_^P))+k[2]+606105819&4294967295,N=j+(A<<17&4294967295|A>>>15),A=P+(_^N&(j^_))+k[3]+3250441966&4294967295,P=N+(A<<22&4294967295|A>>>10),A=_+(j^P&(N^j))+k[4]+4118548399&4294967295,_=P+(A<<7&4294967295|A>>>25),A=j+(N^_&(P^N))+k[5]+1200080426&4294967295,j=_+(A<<12&4294967295|A>>>20),A=N+(P^j&(_^P))+k[6]+2821735955&4294967295,N=j+(A<<17&4294967295|A>>>15),A=P+(_^N&(j^_))+k[7]+4249261313&4294967295,P=N+(A<<22&4294967295|A>>>10),A=_+(j^P&(N^j))+k[8]+1770035416&4294967295,_=P+(A<<7&4294967295|A>>>25),A=j+(N^_&(P^N))+k[9]+2336552879&4294967295,j=_+(A<<12&4294967295|A>>>20),A=N+(P^j&(_^P))+k[10]+4294925233&4294967295,N=j+(A<<17&4294967295|A>>>15),A=P+(_^N&(j^_))+k[11]+2304563134&4294967295,P=N+(A<<22&4294967295|A>>>10),A=_+(j^P&(N^j))+k[12]+1804603682&4294967295,_=P+(A<<7&4294967295|A>>>25),A=j+(N^_&(P^N))+k[13]+4254626195&4294967295,j=_+(A<<12&4294967295|A>>>20),A=N+(P^j&(_^P))+k[14]+2792965006&4294967295,N=j+(A<<17&4294967295|A>>>15),A=P+(_^N&(j^_))+k[15]+1236535329&4294967295,P=N+(A<<22&4294967295|A>>>10),A=_+(N^j&(P^N))+k[1]+4129170786&4294967295,_=P+(A<<5&4294967295|A>>>27),A=j+(P^N&(_^P))+k[6]+3225465664&4294967295,j=_+(A<<9&4294967295|A>>>23),A=N+(_^P&(j^_))+k[11]+643717713&4294967295,N=j+(A<<14&4294967295|A>>>18),A=P+(j^_&(N^j))+k[0]+3921069994&4294967295,P=N+(A<<20&4294967295|A>>>12),A=_+(N^j&(P^N))+k[5]+3593408605&4294967295,_=P+(A<<5&4294967295|A>>>27),A=j+(P^N&(_^P))+k[10]+38016083&4294967295,j=_+(A<<9&4294967295|A>>>23),A=N+(_^P&(j^_))+k[15]+3634488961&4294967295,N=j+(A<<14&4294967295|A>>>18),A=P+(j^_&(N^j))+k[4]+3889429448&4294967295,P=N+(A<<20&4294967295|A>>>12),A=_+(N^j&(P^N))+k[9]+568446438&4294967295,_=P+(A<<5&4294967295|A>>>27),A=j+(P^N&(_^P))+k[14]+3275163606&4294967295,j=_+(A<<9&4294967295|A>>>23),A=N+(_^P&(j^_))+k[3]+4107603335&4294967295,N=j+(A<<14&4294967295|A>>>18),A=P+(j^_&(N^j))+k[8]+1163531501&4294967295,P=N+(A<<20&4294967295|A>>>12),A=_+(N^j&(P^N))+k[13]+2850285829&4294967295,_=P+(A<<5&4294967295|A>>>27),A=j+(P^N&(_^P))+k[2]+4243563512&4294967295,j=_+(A<<9&4294967295|A>>>23),A=N+(_^P&(j^_))+k[7]+1735328473&4294967295,N=j+(A<<14&4294967295|A>>>18),A=P+(j^_&(N^j))+k[12]+2368359562&4294967295,P=N+(A<<20&4294967295|A>>>12),A=_+(P^N^j)+k[5]+4294588738&4294967295,_=P+(A<<4&4294967295|A>>>28),A=j+(_^P^N)+k[8]+2272392833&4294967295,j=_+(A<<11&4294967295|A>>>21),A=N+(j^_^P)+k[11]+1839030562&4294967295,N=j+(A<<16&4294967295|A>>>16),A=P+(N^j^_)+k[14]+4259657740&4294967295,P=N+(A<<23&4294967295|A>>>9),A=_+(P^N^j)+k[1]+2763975236&4294967295,_=P+(A<<4&4294967295|A>>>28),A=j+(_^P^N)+k[4]+1272893353&4294967295,j=_+(A<<11&4294967295|A>>>21),A=N+(j^_^P)+k[7]+4139469664&4294967295,N=j+(A<<16&4294967295|A>>>16),A=P+(N^j^_)+k[10]+3200236656&4294967295,P=N+(A<<23&4294967295|A>>>9),A=_+(P^N^j)+k[13]+681279174&4294967295,_=P+(A<<4&4294967295|A>>>28),A=j+(_^P^N)+k[0]+3936430074&4294967295,j=_+(A<<11&4294967295|A>>>21),A=N+(j^_^P)+k[3]+3572445317&4294967295,N=j+(A<<16&4294967295|A>>>16),A=P+(N^j^_)+k[6]+76029189&4294967295,P=N+(A<<23&4294967295|A>>>9),A=_+(P^N^j)+k[9]+3654602809&4294967295,_=P+(A<<4&4294967295|A>>>28),A=j+(_^P^N)+k[12]+3873151461&4294967295,j=_+(A<<11&4294967295|A>>>21),A=N+(j^_^P)+k[15]+530742520&4294967295,N=j+(A<<16&4294967295|A>>>16),A=P+(N^j^_)+k[2]+3299628645&4294967295,P=N+(A<<23&4294967295|A>>>9),A=_+(N^(P|~j))+k[0]+4096336452&4294967295,_=P+(A<<6&4294967295|A>>>26),A=j+(P^(_|~N))+k[7]+1126891415&4294967295,j=_+(A<<10&4294967295|A>>>22),A=N+(_^(j|~P))+k[14]+2878612391&4294967295,N=j+(A<<15&4294967295|A>>>17),A=P+(j^(N|~_))+k[5]+4237533241&4294967295,P=N+(A<<21&4294967295|A>>>11),A=_+(N^(P|~j))+k[12]+1700485571&4294967295,_=P+(A<<6&4294967295|A>>>26),A=j+(P^(_|~N))+k[3]+2399980690&4294967295,j=_+(A<<10&4294967295|A>>>22),A=N+(_^(j|~P))+k[10]+4293915773&4294967295,N=j+(A<<15&4294967295|A>>>17),A=P+(j^(N|~_))+k[1]+2240044497&4294967295,P=N+(A<<21&4294967295|A>>>11),A=_+(N^(P|~j))+k[8]+1873313359&4294967295,_=P+(A<<6&4294967295|A>>>26),A=j+(P^(_|~N))+k[15]+4264355552&4294967295,j=_+(A<<10&4294967295|A>>>22),A=N+(_^(j|~P))+k[6]+2734768916&4294967295,N=j+(A<<15&4294967295|A>>>17),A=P+(j^(N|~_))+k[13]+1309151649&4294967295,P=N+(A<<21&4294967295|A>>>11),A=_+(N^(P|~j))+k[4]+4149444226&4294967295,_=P+(A<<6&4294967295|A>>>26),A=j+(P^(_|~N))+k[11]+3174756917&4294967295,j=_+(A<<10&4294967295|A>>>22),A=N+(_^(j|~P))+k[2]+718787259&4294967295,N=j+(A<<15&4294967295|A>>>17),A=P+(j^(N|~_))+k[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(N+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+N&4294967295,I.g[3]=I.g[3]+j&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var P=_-this.blockSize,k=this.B,N=this.h,j=0;j<_;){if(N==0)for(;j<=P;)s(this,I,j),j+=this.blockSize;if(typeof I=="string"){for(;j<_;)if(k[N++]=I.charCodeAt(j++),N==this.blockSize){s(this,k),N=0;break}}else for(;j<_;)if(k[N++]=I[j++],N==this.blockSize){s(this,k),N=0;break}}this.h=N,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var P=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=P&255,P/=256;for(this.u(I),I=Array(16),_=P=0;4>_;++_)for(var k=0;32>k;k+=8)I[P++]=this.g[_]>>>k&255;return I};function i(I,_){var P=a;return Object.prototype.hasOwnProperty.call(P,I)?P[I]:P[I]=_(I)}function o(I,_){this.h=_;for(var P=[],k=!0,N=I.length-1;0<=N;N--){var j=I[N]|0;k&&j==_||(P[N]=j,k=!1)}this.g=P}var a={};function u(I){return-128<=I&&128>I?i(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function c(I){if(isNaN(I)||!isFinite(I))return f;if(0>I)return C(c(-I));for(var _=[],P=1,k=0;I>=P;k++)_[k]=I/P|0,P*=4294967296;return new o(_,0)}function h(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return C(h(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=c(Math.pow(_,8)),k=f,N=0;N<I.length;N+=8){var j=Math.min(8,I.length-N),A=parseInt(I.substring(N,N+j),_);8>j?(j=c(Math.pow(_,j)),k=k.j(j).add(c(A))):(k=k.j(P),k=k.add(c(A)))}return k}var f=u(0),m=u(1),y=u(16777216);t=o.prototype,t.m=function(){if(T(this))return-C(this).m();for(var I=0,_=1,P=0;P<this.g.length;P++){var k=this.i(P);I+=(0<=k?k:4294967296+k)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(E(this))return"0";if(T(this))return"-"+C(this).toString(I);for(var _=c(Math.pow(I,6)),P=this,k="";;){var N=b(P,_).g;P=w(P,N.j(_));var j=((0<P.g.length?P.g[0]:P.h)>>>0).toString(I);if(P=N,E(P))return j+k;for(;6>j.length;)j="0"+j;k=j+k}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function E(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function T(I){return I.h==-1}t.l=function(I){return I=w(this,I),T(I)?-1:E(I)?0:1};function C(I){for(var _=I.g.length,P=[],k=0;k<_;k++)P[k]=~I.g[k];return new o(P,~I.h).add(m)}t.abs=function(){return T(this)?C(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),P=[],k=0,N=0;N<=_;N++){var j=k+(this.i(N)&65535)+(I.i(N)&65535),A=(j>>>16)+(this.i(N)>>>16)+(I.i(N)>>>16);k=A>>>16,j&=65535,A&=65535,P[N]=A<<16|j}return new o(P,P[P.length-1]&-2147483648?-1:0)};function w(I,_){return I.add(C(_))}t.j=function(I){if(E(this)||E(I))return f;if(T(this))return T(I)?C(this).j(C(I)):C(C(this).j(I));if(T(I))return C(this.j(C(I)));if(0>this.l(y)&&0>I.l(y))return c(this.m()*I.m());for(var _=this.g.length+I.g.length,P=[],k=0;k<2*_;k++)P[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<I.g.length;N++){var j=this.i(k)>>>16,A=this.i(k)&65535,oe=I.i(N)>>>16,Ye=I.i(N)&65535;P[2*k+2*N]+=A*Ye,v(P,2*k+2*N),P[2*k+2*N+1]+=j*Ye,v(P,2*k+2*N+1),P[2*k+2*N+1]+=A*oe,v(P,2*k+2*N+1),P[2*k+2*N+2]+=j*oe,v(P,2*k+2*N+2)}for(k=0;k<_;k++)P[k]=P[2*k+1]<<16|P[2*k];for(k=_;k<2*_;k++)P[k]=0;return new o(P,0)};function v(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function x(I,_){this.g=I,this.h=_}function b(I,_){if(E(_))throw Error("division by zero");if(E(I))return new x(f,f);if(T(I))return _=b(C(I),_),new x(C(_.g),C(_.h));if(T(_))return _=b(I,C(_)),new x(C(_.g),_.h);if(30<I.g.length){if(T(I)||T(_))throw Error("slowDivide_ only works with positive integers.");for(var P=m,k=_;0>=k.l(I);)P=D(P),k=D(k);var N=M(P,1),j=M(k,1);for(k=M(k,2),P=M(P,2);!E(k);){var A=j.add(k);0>=A.l(I)&&(N=N.add(P),j=A),k=M(k,1),P=M(P,1)}return _=w(I,N.j(_)),new x(N,_)}for(N=f;0<=I.l(_);){for(P=Math.max(1,Math.floor(I.m()/_.m())),k=Math.ceil(Math.log(P)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),j=c(P),A=j.j(_);T(A)||0<A.l(I);)P-=k,j=c(P),A=j.j(_);E(j)&&(j=m),N=N.add(j),I=w(I,A)}return new x(N,I)}t.A=function(I){return b(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),P=[],k=0;k<_;k++)P[k]=this.i(k)&I.i(k);return new o(P,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),P=[],k=0;k<_;k++)P[k]=this.i(k)|I.i(k);return new o(P,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),P=[],k=0;k<_;k++)P[k]=this.i(k)^I.i(k);return new o(P,this.h^I.h)};function D(I){for(var _=I.g.length+1,P=[],k=0;k<_;k++)P[k]=I.i(k)<<1|I.i(k-1)>>>31;return new o(P,I.h)}function M(I,_){var P=_>>5;_%=32;for(var k=I.g.length-P,N=[],j=0;j<k;j++)N[j]=0<_?I.i(j+P)>>>_|I.i(j+P+1)<<32-_:I.i(j+P);return new o(N,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,NT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=h,Vs=o}).apply(typeof S0<"u"?S0:typeof self<"u"?self:typeof window<"u"?window:{});var Kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var jT,Go,DT,_u,Uf,VT,MT,OT;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,p,g){return l==Array.prototype||l==Object.prototype||(l[p]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Kl=="object"&&Kl];for(var p=0;p<l.length;++p){var g=l[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,p){if(p)e:{var g=r;l=l.split(".");for(var S=0;S<l.length-1;S++){var V=l[S];if(!(V in g))break e;g=g[V]}l=l[l.length-1],S=g[l],p=p(S),p!=S&&p!=null&&e(g,l,{configurable:!0,writable:!0,value:p})}}function i(l,p){l instanceof String&&(l+="");var g=0,S=!1,V={next:function(){if(!S&&g<l.length){var O=g++;return{value:p(O,l[O]),done:!1}}return S=!0,{done:!0,value:void 0}}};return V[Symbol.iterator]=function(){return V},V}s("Array.prototype.values",function(l){return l||function(){return i(this,function(p,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(l){var p=typeof l;return p=p!="object"?p:l?Array.isArray(l)?"array":p:"null",p=="array"||p=="object"&&typeof l.length=="number"}function c(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function h(l,p,g){return l.call.apply(l.bind,arguments)}function f(l,p,g){if(!l)throw Error();if(2<arguments.length){var S=Array.prototype.slice.call(arguments,2);return function(){var V=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(V,S),l.apply(p,V)}}return function(){return l.apply(p,arguments)}}function m(l,p,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,m.apply(null,arguments)}function y(l,p){var g=Array.prototype.slice.call(arguments,1);return function(){var S=g.slice();return S.push.apply(S,arguments),l.apply(this,S)}}function E(l,p){function g(){}g.prototype=p.prototype,l.aa=p.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(S,V,O){for(var $=Array(arguments.length-2),Ee=2;Ee<arguments.length;Ee++)$[Ee-2]=arguments[Ee];return p.prototype[V].apply(S,$)}}function T(l){const p=l.length;if(0<p){const g=Array(p);for(let S=0;S<p;S++)g[S]=l[S];return g}return[]}function C(l,p){for(let g=1;g<arguments.length;g++){const S=arguments[g];if(u(S)){const V=l.length||0,O=S.length||0;l.length=V+O;for(let $=0;$<O;$++)l[V+$]=S[$]}else l.push(S)}}class w{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return 0<this.h?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function v(l){return/^[\s\xa0]*$/.test(l)}function x(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function b(l){return b[" "](l),l}b[" "]=function(){};var D=x().indexOf("Gecko")!=-1&&!(x().toLowerCase().indexOf("webkit")!=-1&&x().indexOf("Edge")==-1)&&!(x().indexOf("Trident")!=-1||x().indexOf("MSIE")!=-1)&&x().indexOf("Edge")==-1;function M(l,p,g){for(const S in l)p.call(g,l[S],S,l)}function I(l,p){for(const g in l)p.call(void 0,l[g],g,l)}function _(l){const p={};for(const g in l)p[g]=l[g];return p}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(l,p){let g,S;for(let V=1;V<arguments.length;V++){S=arguments[V];for(g in S)l[g]=S[g];for(let O=0;O<P.length;O++)g=P[O],Object.prototype.hasOwnProperty.call(S,g)&&(l[g]=S[g])}}function N(l){var p=1;l=l.split(":");const g=[];for(;0<p&&l.length;)g.push(l.shift()),p--;return l.length&&g.push(l.join(":")),g}function j(l){a.setTimeout(()=>{throw l},0)}function A(){var l=H;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class oe{constructor(){this.h=this.g=null}add(p,g){const S=Ye.get();S.set(p,g),this.h?this.h.next=S:this.g=S,this.h=S}}var Ye=new w(()=>new ye,l=>l.reset());class ye{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let me,z=!1,H=new oe,G=()=>{const l=a.Promise.resolve(void 0);me=()=>{l.then(K)}};var K=()=>{for(var l;l=A();){try{l.h.call(l.g)}catch(g){j(g)}var p=Ye;p.j(l),100>p.h&&(p.h++,l.next=p.g,p.g=l)}z=!1};function Y(){this.s=this.s,this.C=this.C}Y.prototype.s=!1,Y.prototype.ma=function(){this.s||(this.s=!0,this.N())},Y.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var ge=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return l}();function we(l,p){if(de.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,S=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget){if(D){e:{try{b(p.nodeName);var V=!0;break e}catch{}V=!1}V||(p=null)}}else g=="mouseover"?p=l.fromElement:g=="mouseout"&&(p=l.toElement);this.relatedTarget=p,S?(this.clientX=S.clientX!==void 0?S.clientX:S.pageX,this.clientY=S.clientY!==void 0?S.clientY:S.pageY,this.screenX=S.screenX||0,this.screenY=S.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Fe[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&we.aa.h.call(this)}}E(we,de);var Fe={2:"touch",3:"pen",4:"mouse"};we.prototype.h=function(){we.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var He="closure_listenable_"+(1e6*Math.random()|0),dn=0;function Zt(l,p,g,S,V){this.listener=l,this.proxy=null,this.src=p,this.type=g,this.capture=!!S,this.ha=V,this.key=++dn,this.da=this.fa=!1}function tt(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function ot(l){this.src=l,this.g={},this.h=0}ot.prototype.add=function(l,p,g,S,V){var O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);var $=yr(l,p,S,V);return-1<$?(p=l[$],g||(p.fa=!1)):(p=new Zt(p,this.src,O,!!S,V),p.fa=g,l.push(p)),p};function $n(l,p){var g=p.type;if(g in l.g){var S=l.g[g],V=Array.prototype.indexOf.call(S,p,void 0),O;(O=0<=V)&&Array.prototype.splice.call(S,V,1),O&&(tt(p),l.g[g].length==0&&(delete l.g[g],l.h--))}}function yr(l,p,g,S){for(var V=0;V<l.length;++V){var O=l[V];if(!O.da&&O.listener==p&&O.capture==!!g&&O.ha==S)return V}return-1}var vr="closure_lm_"+(1e6*Math.random()|0),Me={};function B(l,p,g,S,V){if(Array.isArray(p)){for(var O=0;O<p.length;O++)B(l,p[O],g,S,V);return null}return g=Vg(g),l&&l[He]?l.K(p,g,c(S)?!!S.capture:!1,V):Ie(l,p,g,!1,S,V)}function Ie(l,p,g,S,V,O){if(!p)throw Error("Invalid event type");var $=c(V)?!!V.capture:!!V,Ee=gd(l);if(Ee||(l[vr]=Ee=new ot(l)),g=Ee.add(p,g,S,$,O),g.proxy)return g;if(S=nt(),g.proxy=S,S.src=l,S.listener=g,l.addEventListener)ge||(V=$),V===void 0&&(V=!1),l.addEventListener(p.toString(),S,V);else if(l.attachEvent)l.attachEvent(en(p.toString()),S);else if(l.addListener&&l.removeListener)l.addListener(S);else throw Error("addEventListener and attachEvent are unavailable.");return g}function nt(){function l(g){return p.call(l.src,l.listener,g)}const p=jI;return l}function We(l,p,g,S,V){if(Array.isArray(p))for(var O=0;O<p.length;O++)We(l,p[O],g,S,V);else S=c(S)?!!S.capture:!!S,g=Vg(g),l&&l[He]?(l=l.i,p=String(p).toString(),p in l.g&&(O=l.g[p],g=yr(O,g,S,V),-1<g&&(tt(O[g]),Array.prototype.splice.call(O,g,1),O.length==0&&(delete l.g[p],l.h--)))):l&&(l=gd(l))&&(p=l.g[p.toString()],l=-1,p&&(l=yr(p,g,S,V)),(g=-1<l?p[l]:null)&&se(g))}function se(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[He])$n(p.i,l);else{var g=l.type,S=l.proxy;p.removeEventListener?p.removeEventListener(g,S,l.capture):p.detachEvent?p.detachEvent(en(g),S):p.addListener&&p.removeListener&&p.removeListener(S),(g=gd(p))?($n(g,l),g.h==0&&(g.src=null,p[vr]=null)):tt(l)}}}function en(l){return l in Me?Me[l]:Me[l]="on"+l}function jI(l,p){if(l.da)l=!0;else{p=new we(p,this);var g=l.listener,S=l.ha||l.src;l.fa&&se(l),l=g.call(S,p)}return l}function gd(l){return l=l[vr],l instanceof ot?l:null}var yd="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vg(l){return typeof l=="function"?l:(l[yd]||(l[yd]=function(p){return l.handleEvent(p)}),l[yd])}function mt(){Y.call(this),this.i=new ot(this),this.M=this,this.F=null}E(mt,Y),mt.prototype[He]=!0,mt.prototype.removeEventListener=function(l,p,g,S){We(this,l,p,g,S)};function Ct(l,p){var g,S=l.F;if(S)for(g=[];S;S=S.F)g.push(S);if(l=l.M,S=p.type||p,typeof p=="string")p=new de(p,l);else if(p instanceof de)p.target=p.target||l;else{var V=p;p=new de(S,l),k(p,V)}if(V=!0,g)for(var O=g.length-1;0<=O;O--){var $=p.g=g[O];V=pl($,S,!0,p)&&V}if($=p.g=l,V=pl($,S,!0,p)&&V,V=pl($,S,!1,p)&&V,g)for(O=0;O<g.length;O++)$=p.g=g[O],V=pl($,S,!1,p)&&V}mt.prototype.N=function(){if(mt.aa.N.call(this),this.i){var l=this.i,p;for(p in l.g){for(var g=l.g[p],S=0;S<g.length;S++)tt(g[S]);delete l.g[p],l.h--}}this.F=null},mt.prototype.K=function(l,p,g,S){return this.i.add(String(l),p,!1,g,S)},mt.prototype.L=function(l,p,g,S){return this.i.add(String(l),p,!0,g,S)};function pl(l,p,g,S){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();for(var V=!0,O=0;O<p.length;++O){var $=p[O];if($&&!$.da&&$.capture==g){var Ee=$.listener,at=$.ha||$.src;$.fa&&$n(l.i,$),V=Ee.call(at,S)!==!1&&V}}return V&&!S.defaultPrevented}function Mg(l,p,g){if(typeof l=="function")g&&(l=m(l,g));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(p)?-1:a.setTimeout(l,p||0)}function Og(l){l.g=Mg(()=>{l.g=null,l.i&&(l.i=!1,Og(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class DI extends Y{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Og(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function yo(l){Y.call(this),this.h=l,this.g={}}E(yo,Y);var Lg=[];function Fg(l){M(l.g,function(p,g){this.g.hasOwnProperty(g)&&se(p)},l),l.g={}}yo.prototype.N=function(){yo.aa.N.call(this),Fg(this)},yo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vd=a.JSON.stringify,VI=a.JSON.parse,MI=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function _d(){}_d.prototype.h=null;function Ug(l){return l.h||(l.h=l.i())}function Bg(){}var vo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xd(){de.call(this,"d")}E(xd,de);function wd(){de.call(this,"c")}E(wd,de);var ms={},zg=null;function ml(){return zg=zg||new mt}ms.La="serverreachability";function $g(l){de.call(this,ms.La,l)}E($g,de);function _o(l){const p=ml();Ct(p,new $g(p))}ms.STAT_EVENT="statevent";function Hg(l,p){de.call(this,ms.STAT_EVENT,l),this.stat=p}E(Hg,de);function bt(l){const p=ml();Ct(p,new Hg(p,l))}ms.Ma="timingevent";function Wg(l,p){de.call(this,ms.Ma,l),this.size=p}E(Wg,de);function xo(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},p)}function wo(){this.g=!0}wo.prototype.xa=function(){this.g=!1};function OI(l,p,g,S,V,O){l.info(function(){if(l.g)if(O)for(var $="",Ee=O.split("&"),at=0;at<Ee.length;at++){var he=Ee[at].split("=");if(1<he.length){var gt=he[0];he=he[1];var yt=gt.split("_");$=2<=yt.length&&yt[1]=="type"?$+(gt+"="+he+"&"):$+(gt+"=redacted&")}}else $=null;else $=O;return"XMLHTTP REQ ("+S+") [attempt "+V+"]: "+p+`
`+g+`
`+$})}function LI(l,p,g,S,V,O,$){l.info(function(){return"XMLHTTP RESP ("+S+") [ attempt "+V+"]: "+p+`
`+g+`
`+O+" "+$})}function ri(l,p,g,S){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+UI(l,g)+(S?" "+S:"")})}function FI(l,p){l.info(function(){return"TIMEOUT: "+p})}wo.prototype.info=function(){};function UI(l,p){if(!l.g)return p;if(!p)return null;try{var g=JSON.parse(p);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var S=g[l];if(!(2>S.length)){var V=S[1];if(Array.isArray(V)&&!(1>V.length)){var O=V[0];if(O!="noop"&&O!="stop"&&O!="close")for(var $=1;$<V.length;$++)V[$]=""}}}}return vd(g)}catch{return p}}var gl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},qg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ed;function yl(){}E(yl,_d),yl.prototype.g=function(){return new XMLHttpRequest},yl.prototype.i=function(){return{}},Ed=new yl;function _r(l,p,g,S){this.j=l,this.i=p,this.l=g,this.R=S||1,this.U=new yo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Gg}function Gg(){this.i=null,this.g="",this.h=!1}var Kg={},Td={};function Sd(l,p,g){l.L=1,l.v=wl(Hn(p)),l.m=g,l.P=!0,Qg(l,null)}function Qg(l,p){l.F=Date.now(),vl(l),l.A=Hn(l.v);var g=l.A,S=l.R;Array.isArray(S)||(S=[String(S)]),uy(g.i,"t",S),l.C=0,g=l.j.J,l.h=new Gg,l.g=Cy(l.j,g?p:null,!l.m),0<l.O&&(l.M=new DI(m(l.Y,l,l.g),l.O)),p=l.U,g=l.g,S=l.ca;var V="readystatechange";Array.isArray(V)||(V&&(Lg[0]=V.toString()),V=Lg);for(var O=0;O<V.length;O++){var $=B(g,V[O],S||p.handleEvent,!1,p.h||p);if(!$)break;p.g[$.key]=$}p=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,p)):(l.u="GET",l.g.ea(l.A,l.u,null,p)),_o(),OI(l.i,l.u,l.A,l.l,l.R,l.m)}_r.prototype.ca=function(l){l=l.target;const p=this.M;p&&Wn(l)==3?p.j():this.Y(l)},_r.prototype.Y=function(l){try{if(l==this.g)e:{const yt=Wn(this.g);var p=this.g.Ba();const oi=this.g.Z();if(!(3>yt)&&(yt!=3||this.g&&(this.h.h||this.g.oa()||gy(this.g)))){this.J||yt!=4||p==7||(p==8||0>=oi?_o(3):_o(2)),Id(this);var g=this.g.Z();this.X=g;t:if(Yg(this)){var S=gy(this.g);l="";var V=S.length,O=Wn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){gs(this),Eo(this);var $="";break t}this.h.i=new a.TextDecoder}for(p=0;p<V;p++)this.h.h=!0,l+=this.h.i.decode(S[p],{stream:!(O&&p==V-1)});S.length=0,this.h.g+=l,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=g==200,LI(this.i,this.u,this.A,this.l,this.R,yt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var Ee,at=this.g;if((Ee=at.g?at.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Ee)){var he=Ee;break t}}he=null}if(g=he)ri(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Pd(this,g);else{this.o=!1,this.s=3,bt(12),gs(this),Eo(this);break e}}if(this.P){g=!0;let hn;for(;!this.J&&this.C<$.length;)if(hn=BI(this,$),hn==Td){yt==4&&(this.s=4,bt(14),g=!1),ri(this.i,this.l,null,"[Incomplete Response]");break}else if(hn==Kg){this.s=4,bt(15),ri(this.i,this.l,$,"[Invalid Chunk]"),g=!1;break}else ri(this.i,this.l,hn,null),Pd(this,hn);if(Yg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),yt!=4||$.length!=0||this.h.h||(this.s=1,bt(16),g=!1),this.o=this.o&&g,!g)ri(this.i,this.l,$,"[Invalid Chunked Response]"),gs(this),Eo(this);else if(0<$.length&&!this.W){this.W=!0;var gt=this.j;gt.g==this&&gt.ba&&!gt.M&&(gt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Nd(gt),gt.M=!0,bt(11))}}else ri(this.i,this.l,$,null),Pd(this,$);yt==4&&gs(this),this.o&&!this.J&&(yt==4?Ty(this.j,this):(this.o=!1,vl(this)))}else sP(this.g),g==400&&0<$.indexOf("Unknown SID")?(this.s=3,bt(12)):(this.s=0,bt(13)),gs(this),Eo(this)}}}catch{}finally{}};function Yg(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function BI(l,p){var g=l.C,S=p.indexOf(`
`,g);return S==-1?Td:(g=Number(p.substring(g,S)),isNaN(g)?Kg:(S+=1,S+g>p.length?Td:(p=p.slice(S,S+g),l.C=S+g,p)))}_r.prototype.cancel=function(){this.J=!0,gs(this)};function vl(l){l.S=Date.now()+l.I,Xg(l,l.I)}function Xg(l,p){if(l.B!=null)throw Error("WatchDog timer not null");l.B=xo(m(l.ba,l),p)}function Id(l){l.B&&(a.clearTimeout(l.B),l.B=null)}_r.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?(FI(this.i,this.A),this.L!=2&&(_o(),bt(17)),gs(this),this.s=2,Eo(this)):Xg(this,this.S-l)};function Eo(l){l.j.G==0||l.J||Ty(l.j,l)}function gs(l){Id(l);var p=l.M;p&&typeof p.ma=="function"&&p.ma(),l.M=null,Fg(l.U),l.g&&(p=l.g,l.g=null,p.abort(),p.ma())}function Pd(l,p){try{var g=l.j;if(g.G!=0&&(g.g==l||Cd(g.h,l))){if(!l.K&&Cd(g.h,l)&&g.G==3){try{var S=g.Da.g.parse(p)}catch{S=null}if(Array.isArray(S)&&S.length==3){var V=S;if(V[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)Cl(g),Il(g);else break e;Rd(g),bt(18)}}else g.za=V[1],0<g.za-g.T&&37500>V[2]&&g.F&&g.v==0&&!g.C&&(g.C=xo(m(g.Za,g),6e3));if(1>=ey(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else vs(g,11)}else if((l.K||g.g==l)&&Cl(g),!v(p))for(V=g.Da.g.parse(p),p=0;p<V.length;p++){let he=V[p];if(g.T=he[0],he=he[1],g.G==2)if(he[0]=="c"){g.K=he[1],g.ia=he[2];const gt=he[3];gt!=null&&(g.la=gt,g.j.info("VER="+g.la));const yt=he[4];yt!=null&&(g.Aa=yt,g.j.info("SVER="+g.Aa));const oi=he[5];oi!=null&&typeof oi=="number"&&0<oi&&(S=1.5*oi,g.L=S,g.j.info("backChannelRequestTimeoutMs_="+S)),S=g;const hn=l.g;if(hn){const kl=hn.g?hn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(kl){var O=S.h;O.g||kl.indexOf("spdy")==-1&&kl.indexOf("quic")==-1&&kl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(bd(O,O.h),O.h=null))}if(S.D){const jd=hn.g?hn.g.getResponseHeader("X-HTTP-Session-Id"):null;jd&&(S.ya=jd,Pe(S.I,S.D,jd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),S=g;var $=l;if(S.qa=Py(S,S.J?S.ia:null,S.W),$.K){ty(S.h,$);var Ee=$,at=S.L;at&&(Ee.I=at),Ee.B&&(Id(Ee),vl(Ee)),S.g=$}else wy(S);0<g.i.length&&Pl(g)}else he[0]!="stop"&&he[0]!="close"||vs(g,7);else g.G==3&&(he[0]=="stop"||he[0]=="close"?he[0]=="stop"?vs(g,7):Ad(g):he[0]!="noop"&&g.l&&g.l.ta(he),g.v=0)}}_o(4)}catch{}}var zI=class{constructor(l,p){this.g=l,this.map=p}};function Jg(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Zg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function ey(l){return l.h?1:l.g?l.g.size:0}function Cd(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function bd(l,p){l.g?l.g.add(p):l.h=p}function ty(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}Jg.prototype.cancel=function(){if(this.i=ny(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function ny(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const g of l.g.values())p=p.concat(g.D);return p}return T(l.i)}function $I(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var p=[],g=l.length,S=0;S<g;S++)p.push(l[S]);return p}p=[],g=0;for(S in l)p[g++]=l[S];return p}function HI(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var p=[];l=l.length;for(var g=0;g<l;g++)p.push(g);return p}p=[],g=0;for(const S in l)p[g++]=S;return p}}}function ry(l,p){if(l.forEach&&typeof l.forEach=="function")l.forEach(p,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,p,void 0);else for(var g=HI(l),S=$I(l),V=S.length,O=0;O<V;O++)p.call(void 0,S[O],g&&g[O],l)}var sy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function WI(l,p){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var S=l[g].indexOf("="),V=null;if(0<=S){var O=l[g].substring(0,S);V=l[g].substring(S+1)}else O=l[g];p(O,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function ys(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof ys){this.h=l.h,_l(this,l.j),this.o=l.o,this.g=l.g,xl(this,l.s),this.l=l.l;var p=l.i,g=new Io;g.i=p.i,p.g&&(g.g=new Map(p.g),g.h=p.h),iy(this,g),this.m=l.m}else l&&(p=String(l).match(sy))?(this.h=!1,_l(this,p[1]||"",!0),this.o=To(p[2]||""),this.g=To(p[3]||"",!0),xl(this,p[4]),this.l=To(p[5]||"",!0),iy(this,p[6]||"",!0),this.m=To(p[7]||"")):(this.h=!1,this.i=new Io(null,this.h))}ys.prototype.toString=function(){var l=[],p=this.j;p&&l.push(So(p,oy,!0),":");var g=this.g;return(g||p=="file")&&(l.push("//"),(p=this.o)&&l.push(So(p,oy,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(So(g,g.charAt(0)=="/"?KI:GI,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",So(g,YI)),l.join("")};function Hn(l){return new ys(l)}function _l(l,p,g){l.j=g?To(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function xl(l,p){if(p){if(p=Number(p),isNaN(p)||0>p)throw Error("Bad port number "+p);l.s=p}else l.s=null}function iy(l,p,g){p instanceof Io?(l.i=p,XI(l.i,l.h)):(g||(p=So(p,QI)),l.i=new Io(p,l.h))}function Pe(l,p,g){l.i.set(p,g)}function wl(l){return Pe(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function To(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function So(l,p,g){return typeof l=="string"?(l=encodeURI(l).replace(p,qI),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function qI(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var oy=/[#\/\?@]/g,GI=/[#\?:]/g,KI=/[#\?]/g,QI=/[#\?@]/g,YI=/#/g;function Io(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function xr(l){l.g||(l.g=new Map,l.h=0,l.i&&WI(l.i,function(p,g){l.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Io.prototype,t.add=function(l,p){xr(this),this.i=null,l=si(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(p),this.h+=1,this};function ay(l,p){xr(l),p=si(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function ly(l,p){return xr(l),p=si(l,p),l.g.has(p)}t.forEach=function(l,p){xr(this),this.g.forEach(function(g,S){g.forEach(function(V){l.call(p,V,S,this)},this)},this)},t.na=function(){xr(this);const l=Array.from(this.g.values()),p=Array.from(this.g.keys()),g=[];for(let S=0;S<p.length;S++){const V=l[S];for(let O=0;O<V.length;O++)g.push(p[S])}return g},t.V=function(l){xr(this);let p=[];if(typeof l=="string")ly(this,l)&&(p=p.concat(this.g.get(si(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)p=p.concat(l[g])}return p},t.set=function(l,p){return xr(this),this.i=null,l=si(this,l),ly(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=this.V(l),0<l.length?String(l[0]):p):p};function uy(l,p,g){ay(l,p),0<g.length&&(l.i=null,l.g.set(si(l,p),T(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(var g=0;g<p.length;g++){var S=p[g];const O=encodeURIComponent(String(S)),$=this.V(S);for(S=0;S<$.length;S++){var V=O;$[S]!==""&&(V+="="+encodeURIComponent(String($[S]))),l.push(V)}}return this.i=l.join("&")};function si(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function XI(l,p){p&&!l.j&&(xr(l),l.i=null,l.g.forEach(function(g,S){var V=S.toLowerCase();S!=V&&(ay(this,S),uy(this,V,g))},l)),l.j=p}function JI(l,p){const g=new wo;if(a.Image){const S=new Image;S.onload=y(wr,g,"TestLoadImage: loaded",!0,p,S),S.onerror=y(wr,g,"TestLoadImage: error",!1,p,S),S.onabort=y(wr,g,"TestLoadImage: abort",!1,p,S),S.ontimeout=y(wr,g,"TestLoadImage: timeout",!1,p,S),a.setTimeout(function(){S.ontimeout&&S.ontimeout()},1e4),S.src=l}else p(!1)}function ZI(l,p){const g=new wo,S=new AbortController,V=setTimeout(()=>{S.abort(),wr(g,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:S.signal}).then(O=>{clearTimeout(V),O.ok?wr(g,"TestPingServer: ok",!0,p):wr(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(V),wr(g,"TestPingServer: error",!1,p)})}function wr(l,p,g,S,V){try{V&&(V.onload=null,V.onerror=null,V.onabort=null,V.ontimeout=null),S(g)}catch{}}function eP(){this.g=new MI}function tP(l,p,g){const S=g||"";try{ry(l,function(V,O){let $=V;c(V)&&($=vd(V)),p.push(S+O+"="+encodeURIComponent($))})}catch(V){throw p.push(S+"type="+encodeURIComponent("_badmap")),V}}function El(l){this.l=l.Ub||null,this.j=l.eb||!1}E(El,_d),El.prototype.g=function(){return new Tl(this.l,this.j)},El.prototype.i=function(l){return function(){return l}}({});function Tl(l,p){mt.call(this),this.D=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Tl,mt),t=Tl.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=p,this.readyState=1,Co(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const p={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(p.body=l),(this.D||a).fetch(new Request(this.A,p)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Co(this)),this.g&&(this.readyState=3,Co(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;cy(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function cy(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.v.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Po(this):Co(this),this.readyState==3&&cy(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,Po(this))},t.Qa=function(l){this.g&&(this.response=l,Po(this))},t.ga=function(){this.g&&Po(this)};function Po(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Co(l)}t.setRequestHeader=function(l,p){this.u.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=p.next();return l.join(`\r
`)};function Co(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Tl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function dy(l){let p="";return M(l,function(g,S){p+=S,p+=":",p+=g,p+=`\r
`}),p}function kd(l,p,g){e:{for(S in g){var S=!1;break e}S=!0}S||(g=dy(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):Pe(l,p,g))}function Oe(l){mt.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(Oe,mt);var nP=/^https?$/i,rP=["POST","PUT"];t=Oe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,p,g,S){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ed.g(),this.v=this.o?Ug(this.o):Ug(Ed),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(O){hy(this,O);return}if(l=g||"",g=new Map(this.headers),S)if(Object.getPrototypeOf(S)===Object.prototype)for(var V in S)g.set(V,S[V]);else if(typeof S.keys=="function"&&typeof S.get=="function")for(const O of S.keys())g.set(O,S.get(O));else throw Error("Unknown input type for opt_headers: "+String(S));S=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),V=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(rP,p,void 0))||S||V||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,$]of g)this.g.setRequestHeader(O,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{my(this),this.u=!0,this.g.send(l),this.u=!1}catch(O){hy(this,O)}};function hy(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.m=5,fy(l),Sl(l)}function fy(l){l.A||(l.A=!0,Ct(l,"complete"),Ct(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,Ct(this,"complete"),Ct(this,"abort"),Sl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Sl(this,!0)),Oe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?py(this):this.bb())},t.bb=function(){py(this)};function py(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Wn(l)!=4||l.Z()!=2)){if(l.u&&Wn(l)==4)Mg(l.Ea,0,l);else if(Ct(l,"readystatechange"),Wn(l)==4){l.h=!1;try{const $=l.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var S;if(S=$===0){var V=String(l.D).match(sy)[1]||null;!V&&a.self&&a.self.location&&(V=a.self.location.protocol.slice(0,-1)),S=!nP.test(V?V.toLowerCase():"")}g=S}if(g)Ct(l,"complete"),Ct(l,"success");else{l.m=6;try{var O=2<Wn(l)?l.g.statusText:""}catch{O=""}l.l=O+" ["+l.Z()+"]",fy(l)}}finally{Sl(l)}}}}function Sl(l,p){if(l.g){my(l);const g=l.g,S=l.v[0]?()=>{}:null;l.g=null,l.v=null,p||Ct(l,"ready");try{g.onreadystatechange=S}catch{}}}function my(l){l.I&&(a.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Wn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Wn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),VI(p)}};function gy(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function sP(l){const p={};l=(l.g&&2<=Wn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let S=0;S<l.length;S++){if(v(l[S]))continue;var g=N(l[S]);const V=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=p[V]||[];p[V]=O,O.push(g)}I(p,function(S){return S.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bo(l,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||p}function yy(l){this.Aa=0,this.i=[],this.j=new wo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bo("baseRetryDelayMs",5e3,l),this.cb=bo("retryDelaySeedMs",1e4,l),this.Wa=bo("forwardChannelMaxRetries",2,l),this.wa=bo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Jg(l&&l.concurrentRequestLimit),this.Da=new eP,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=yy.prototype,t.la=8,t.G=1,t.connect=function(l,p,g,S){bt(0),this.W=l,this.H=p||{},g&&S!==void 0&&(this.H.OSID=g,this.H.OAID=S),this.F=this.X,this.I=Py(this,null,this.W),Pl(this)};function Ad(l){if(vy(l),l.G==3){var p=l.U++,g=Hn(l.I);if(Pe(g,"SID",l.K),Pe(g,"RID",p),Pe(g,"TYPE","terminate"),ko(l,g),p=new _r(l,l.j,p),p.L=2,p.v=wl(Hn(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.v.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.v,g=!0),g||(p.g=Cy(p.j,null),p.g.ea(p.v)),p.F=Date.now(),vl(p)}Iy(l)}function Il(l){l.g&&(Nd(l),l.g.cancel(),l.g=null)}function vy(l){Il(l),l.u&&(a.clearTimeout(l.u),l.u=null),Cl(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function Pl(l){if(!Zg(l.h)&&!l.s){l.s=!0;var p=l.Ga;me||G(),z||(me(),z=!0),H.add(p,l),l.B=0}}function iP(l,p){return ey(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=p.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=xo(m(l.Ga,l,p),Sy(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const V=new _r(this,this.j,l);let O=this.o;if(this.S&&(O?(O=_(O),k(O,this.S)):O=this.S),this.m!==null||this.O||(V.H=O,O=null),this.P)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var S=this.i[g];if("__data__"in S.map&&(S=S.map.__data__,typeof S=="string")){S=S.length;break t}S=void 0}if(S===void 0)break;if(p+=S,4096<p){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=xy(this,V,p),g=Hn(this.I),Pe(g,"RID",l),Pe(g,"CVER",22),this.D&&Pe(g,"X-HTTP-Session-Id",this.D),ko(this,g),O&&(this.O?p="headers="+encodeURIComponent(String(dy(O)))+"&"+p:this.m&&kd(g,this.m,O)),bd(this.h,V),this.Ua&&Pe(g,"TYPE","init"),this.P?(Pe(g,"$req",p),Pe(g,"SID","null"),V.T=!0,Sd(V,g,null)):Sd(V,g,p),this.G=2}}else this.G==3&&(l?_y(this,l):this.i.length==0||Zg(this.h)||_y(this))};function _y(l,p){var g;p?g=p.l:g=l.U++;const S=Hn(l.I);Pe(S,"SID",l.K),Pe(S,"RID",g),Pe(S,"AID",l.T),ko(l,S),l.m&&l.o&&kd(S,l.m,l.o),g=new _r(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),p&&(l.i=p.D.concat(l.i)),p=xy(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),bd(l.h,g),Sd(g,S,p)}function ko(l,p){l.H&&M(l.H,function(g,S){Pe(p,S,g)}),l.l&&ry({},function(g,S){Pe(p,S,g)})}function xy(l,p,g){g=Math.min(l.i.length,g);var S=l.l?m(l.l.Na,l.l,l):null;e:{var V=l.i;let O=-1;for(;;){const $=["count="+g];O==-1?0<g?(O=V[0].g,$.push("ofs="+O)):O=0:$.push("ofs="+O);let Ee=!0;for(let at=0;at<g;at++){let he=V[at].g;const gt=V[at].map;if(he-=O,0>he)O=Math.max(0,V[at].g-100),Ee=!1;else try{tP(gt,$,"req"+he+"_")}catch{S&&S(gt)}}if(Ee){S=$.join("&");break e}}}return l=l.i.splice(0,g),p.D=l,S}function wy(l){if(!l.g&&!l.u){l.Y=1;var p=l.Fa;me||G(),z||(me(),z=!0),H.add(p,l),l.v=0}}function Rd(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=xo(m(l.Fa,l),Sy(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,Ey(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=xo(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,bt(10),Il(this),Ey(this))};function Nd(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Ey(l){l.g=new _r(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var p=Hn(l.qa);Pe(p,"RID","rpc"),Pe(p,"SID",l.K),Pe(p,"AID",l.T),Pe(p,"CI",l.F?"0":"1"),!l.F&&l.ja&&Pe(p,"TO",l.ja),Pe(p,"TYPE","xmlhttp"),ko(l,p),l.m&&l.o&&kd(p,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=wl(Hn(p)),g.m=null,g.P=!0,Qg(g,l)}t.Za=function(){this.C!=null&&(this.C=null,Il(this),Rd(this),bt(19))};function Cl(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Ty(l,p){var g=null;if(l.g==p){Cl(l),Nd(l),l.g=null;var S=2}else if(Cd(l.h,p))g=p.D,ty(l.h,p),S=1;else return;if(l.G!=0){if(p.o)if(S==1){g=p.m?p.m.length:0,p=Date.now()-p.F;var V=l.B;S=ml(),Ct(S,new Wg(S,g)),Pl(l)}else wy(l);else if(V=p.s,V==3||V==0&&0<p.X||!(S==1&&iP(l,p)||S==2&&Rd(l)))switch(g&&0<g.length&&(p=l.h,p.i=p.i.concat(g)),V){case 1:vs(l,5);break;case 4:vs(l,10);break;case 3:vs(l,6);break;default:vs(l,2)}}}function Sy(l,p){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*p}function vs(l,p){if(l.j.info("Error code "+p),p==2){var g=m(l.fb,l),S=l.Xa;const V=!S;S=new ys(S||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_l(S,"https"),wl(S),V?JI(S.toString(),g):ZI(S.toString(),g)}else bt(2);l.G=0,l.l&&l.l.sa(p),Iy(l),vy(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),bt(2)):(this.j.info("Failed to ping google.com"),bt(1))};function Iy(l){if(l.G=0,l.ka=[],l.l){const p=ny(l.h);(p.length!=0||l.i.length!=0)&&(C(l.ka,p),C(l.ka,l.i),l.h.i.length=0,T(l.i),l.i.length=0),l.l.ra()}}function Py(l,p,g){var S=g instanceof ys?Hn(g):new ys(g);if(S.g!="")p&&(S.g=p+"."+S.g),xl(S,S.s);else{var V=a.location;S=V.protocol,p=p?p+"."+V.hostname:V.hostname,V=+V.port;var O=new ys(null);S&&_l(O,S),p&&(O.g=p),V&&xl(O,V),g&&(O.l=g),S=O}return g=l.D,p=l.ya,g&&p&&Pe(S,g,p),Pe(S,"VER",l.la),ko(l,S),S}function Cy(l,p,g){if(p&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Ca&&!l.pa?new Oe(new El({eb:g})):new Oe(l.pa),p.Ha(l.J),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function by(){}t=by.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function bl(){}bl.prototype.g=function(l,p){return new $t(l,p)};function $t(l,p){mt.call(this),this.g=new yy(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.va&&(l?l["X-WebChannel-Client-Profile"]=p.va:l={"X-WebChannel-Client-Profile":p.va}),this.g.S=l,(l=p&&p.Sb)&&!v(l)&&(this.g.m=l),this.v=p&&p.supportsCrossDomainXhr||!1,this.u=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!v(p)&&(this.g.D=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new ii(this)}E($t,mt),$t.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},$t.prototype.close=function(){Ad(this.g)},$t.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=vd(l),l=g);p.i.push(new zI(p.Ya++,l)),p.G==3&&Pl(p)},$t.prototype.N=function(){this.g.l=null,delete this.j,Ad(this.g),delete this.g,$t.aa.N.call(this)};function ky(l){xd.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const g in p){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}E(ky,xd);function Ay(){wd.call(this),this.status=1}E(Ay,wd);function ii(l){this.g=l}E(ii,by),ii.prototype.ua=function(){Ct(this.g,"a")},ii.prototype.ta=function(l){Ct(this.g,new ky(l))},ii.prototype.sa=function(l){Ct(this.g,new Ay)},ii.prototype.ra=function(){Ct(this.g,"b")},bl.prototype.createWebChannel=bl.prototype.g,$t.prototype.send=$t.prototype.o,$t.prototype.open=$t.prototype.m,$t.prototype.close=$t.prototype.close,OT=function(){return new bl},MT=function(){return ml()},VT=ms,Uf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},gl.NO_ERROR=0,gl.TIMEOUT=8,gl.HTTP_ERROR=6,_u=gl,qg.COMPLETE="complete",DT=qg,Bg.EventType=vo,vo.OPEN="a",vo.CLOSE="b",vo.ERROR="c",vo.MESSAGE="d",mt.prototype.listen=mt.prototype.K,Go=Bg,Oe.prototype.listenOnce=Oe.prototype.L,Oe.prototype.getLastError=Oe.prototype.Ka,Oe.prototype.getLastErrorCode=Oe.prototype.Ba,Oe.prototype.getStatus=Oe.prototype.Z,Oe.prototype.getResponseJson=Oe.prototype.Oa,Oe.prototype.getResponseText=Oe.prototype.oa,Oe.prototype.send=Oe.prototype.ea,Oe.prototype.setWithCredentials=Oe.prototype.Ha,jT=Oe}).apply(typeof Kl<"u"?Kl:typeof self<"u"?self:typeof window<"u"?window:{});const I0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Et=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Et.UNAUTHENTICATED=new Et(null),Et.GOOGLE_CREDENTIALS=new Et("google-credentials-uid"),Et.FIRST_PARTY=new Et("first-party-uid"),Et.MOCK_USER=new Et("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ho="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ws=new fm("@firebase/firestore");function Lo(){return Ws.logLevel}function q(t,...e){if(Ws.logLevel<=ae.DEBUG){const n=e.map(Cm);Ws.debug(`Firestore (${ho}): ${t}`,...n)}}function dr(t,...e){if(Ws.logLevel<=ae.ERROR){const n=e.map(Cm);Ws.error(`Firestore (${ho}): ${t}`,...n)}}function Gi(t,...e){if(Ws.logLevel<=ae.WARN){const n=e.map(Cm);Ws.warn(`Firestore (${ho}): ${t}`,...n)}}function Cm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ee(t="Unexpected state"){const e=`FIRESTORE (${ho}) INTERNAL ASSERTION FAILED: `+t;throw dr(e),new Error(e)}function _e(t,e){t||ee()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Fn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ON{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Et.UNAUTHENTICATED))}shutdown(){}}class LN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class FN{constructor(e){this.t=e,this.currentUser=Et.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){_e(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},a=u=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(_e(typeof r.accessToken=="string"),new LT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _e(e===null||typeof e=="string"),new Et(e)}}class UN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Et.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class BN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new UN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Et.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $N{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){_e(this.o===void 0);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(_e(typeof n.token=="string"),this.R=n.token,new zN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=HN(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function fe(t,e){return t<e?-1:t>e?1:0}function Ki(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return et.fromMillis(Date.now())}static fromDate(e){return et.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new et(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?fe(this.nanoseconds,e.nanoseconds):fe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.timestamp=e}static fromTimestamp(e){return new te(e)}static min(){return new te(new et(0,0))}static max(){return new te(new et(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n,r){n===void 0?n=0:n>e.length&&ee(),r===void 0?r=e.length-n:r>e.length-n&&ee(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Oa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Ae extends Oa{construct(e,n,r){return new Ae(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ae(n)}static emptyPath(){return new Ae([])}}const WN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ct extends Oa{construct(e,n,r){return new ct(e,n,r)}static isValidIdentifier(e){return WN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ct.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new ct(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ct(n)}static emptyPath(){return new ct([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.path=e}static fromPath(e){return new X(Ae.fromString(e))}static fromName(e){return new X(Ae.fromString(e).popFirst(5))}static empty(){return new X(Ae.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ae.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ae.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new X(new Ae(e.slice()))}}function qN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=te.fromTimestamp(r===1e9?new et(n+1,0):new et(n,r));return new ns(s,X.empty(),e)}function GN(t){return new ns(t.readTime,t.key,-1)}class ns{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ns(te.min(),X.empty(),-1)}static max(){return new ns(te.max(),X.empty(),-1)}}function KN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=X.comparator(t.documentKey,e.documentKey),n!==0?n:fe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==QN)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ee(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new L((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof L?n:L.resolve(n)}catch(n){return L.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):L.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):L.reject(n)}static resolve(e){return new L((n,r)=>{n(e)})}static reject(e){return new L((n,r)=>{r(e)})}static waitFor(e){return new L((n,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=L.resolve(!1);for(const r of e)n=n.next(s=>s?L.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new L((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(h=>{o[c]=h,++a,a===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new L((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function XN(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}bm.oe=-1;function Gc(t){return t==null}function ac(t){return t===0&&1/t==-1/0}function JN(t){return typeof t=="number"&&Number.isInteger(t)&&!ac(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Zs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function UT(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve{constructor(e,n){this.comparator=e,this.root=n||ut.EMPTY}insert(e,n){return new Ve(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ut.BLACK,null,null))}remove(e){return new Ve(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ut.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ql(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ql(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ql(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ql(this.root,e,this.comparator,!0)}}class Ql{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ut{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??ut.RED,this.left=s??ut.EMPTY,this.right=i??ut.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new ut(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return ut.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return ut.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ut.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ut.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ee();const e=this.left.check();if(e!==this.right.check())throw ee();return e+(this.isRed()?0:1)}}ut.EMPTY=null,ut.RED=!0,ut.BLACK=!1;ut.EMPTY=new class{constructor(){this.size=0}get key(){throw ee()}get value(){throw ee()}get color(){throw ee()}get left(){throw ee()}get right(){throw ee()}copy(e,n,r,s,i){return this}insert(e,n,r){return new ut(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.comparator=e,this.data=new Ve(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new C0(this.data.getIterator())}getIteratorFrom(e){return new C0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ht(this.comparator);return n.data=e,n}}class C0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.fields=e,e.sort(ct.comparator)}static empty(){return new Gt([])}unionWith(e){let n=new ht(ct.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Gt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ki(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new BT("Invalid base64 string: "+i):i}}(e);return new pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return fe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}pt.EMPTY_BYTE_STRING=new pt("");const ZN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rs(t){if(_e(!!t),typeof t=="string"){let e=0;const n=ZN.exec(t);if(_e(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ue(t.seconds),nanos:Ue(t.nanos)}}function Ue(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function qs(t){return typeof t=="string"?pt.fromBase64String(t):pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function km(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Am(t){const e=t.mapValue.fields.__previous_value__;return km(e)?Am(e):e}function La(t){const e=rs(t.mapValue.fields.__local_write_time__.timestampValue);return new et(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n,r,s,i,o,a,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c}}class Fa{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Fa("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Fa&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yl={mapValue:{}};function Gs(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?km(t)?4:nj(t)?9007199254740991:tj(t)?10:11:ee()}function Mn(t,e){if(t===e)return!0;const n=Gs(t);if(n!==Gs(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return La(t).isEqual(La(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=rs(s.timestampValue),a=rs(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return qs(s.bytesValue).isEqual(qs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ue(s.geoPointValue.latitude)===Ue(i.geoPointValue.latitude)&&Ue(s.geoPointValue.longitude)===Ue(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ue(s.integerValue)===Ue(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ue(s.doubleValue),a=Ue(i.doubleValue);return o===a?ac(o)===ac(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return Ki(t.arrayValue.values||[],e.arrayValue.values||[],Mn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(P0(o)!==P0(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Mn(o[u],a[u])))return!1;return!0}(t,e);default:return ee()}}function Ua(t,e){return(t.values||[]).find(n=>Mn(n,e))!==void 0}function Qi(t,e){if(t===e)return 0;const n=Gs(t),r=Gs(e);if(n!==r)return fe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return fe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ue(i.integerValue||i.doubleValue),u=Ue(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return b0(t.timestampValue,e.timestampValue);case 4:return b0(La(t),La(e));case 5:return fe(t.stringValue,e.stringValue);case 6:return function(i,o){const a=qs(i),u=qs(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const h=fe(a[c],u[c]);if(h!==0)return h}return fe(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=fe(Ue(i.latitude),Ue(o.latitude));return a!==0?a:fe(Ue(i.longitude),Ue(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return k0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,u,c,h;const f=i.fields||{},m=o.fields||{},y=(a=f.value)===null||a===void 0?void 0:a.arrayValue,E=(u=m.value)===null||u===void 0?void 0:u.arrayValue,T=fe(((c=y==null?void 0:y.values)===null||c===void 0?void 0:c.length)||0,((h=E==null?void 0:E.values)===null||h===void 0?void 0:h.length)||0);return T!==0?T:k0(y,E)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Yl.mapValue&&o===Yl.mapValue)return 0;if(i===Yl.mapValue)return 1;if(o===Yl.mapValue)return-1;const a=i.fields||{},u=Object.keys(a),c=o.fields||{},h=Object.keys(c);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const m=fe(u[f],h[f]);if(m!==0)return m;const y=Qi(a[u[f]],c[h[f]]);if(y!==0)return y}return fe(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ee()}}function b0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return fe(t,e);const n=rs(t),r=rs(e),s=fe(n.seconds,r.seconds);return s!==0?s:fe(n.nanos,r.nanos)}function k0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Qi(n[s],r[s]);if(i)return i}return fe(n.length,r.length)}function Yi(t){return Bf(t)}function Bf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=rs(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return qs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return X.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Bf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Bf(n.fields[o])}`;return s+"}"}(t.mapValue):ee()}function zf(t){return!!t&&"integerValue"in t}function Rm(t){return!!t&&"arrayValue"in t}function A0(t){return!!t&&"nullValue"in t}function R0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function xu(t){return!!t&&"mapValue"in t}function tj(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function aa(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Zs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=aa(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=aa(t.arrayValue.values[n]);return e}return Object.assign({},t)}function nj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.value=e}static empty(){return new Mt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!xu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=aa(n)}setAll(e){let n=ct.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=a.popLast()}o?r[a.lastSegment()]=aa(o):s.push(a.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());xu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Mn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];xu(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Zs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Mt(aa(this.value))}}function zT(t){const e=[];return Zs(t.fields,(n,r)=>{const s=new ct([n]);if(xu(r)){const i=zT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Gt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class St{constructor(e,n,r,s,i,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new St(e,0,te.min(),te.min(),te.min(),Mt.empty(),0)}static newFoundDocument(e,n,r,s){return new St(e,1,n,te.min(),r,s,0)}static newNoDocument(e,n){return new St(e,2,n,te.min(),te.min(),Mt.empty(),0)}static newUnknownDocument(e,n){return new St(e,3,n,te.min(),te.min(),Mt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(te.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=te.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof St&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new St(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lc{constructor(e,n){this.position=e,this.inclusive=n}}function N0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=X.comparator(X.fromName(o.referenceValue),n.key):r=Qi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function j0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Mn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uc{constructor(e,n="asc"){this.field=e,this.dir=n}}function rj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $T=class{};class Je extends $T{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new ij(e,n,r):n==="array-contains"?new lj(e,r):n==="in"?new uj(e,r):n==="not-in"?new cj(e,r):n==="array-contains-any"?new dj(e,r):new Je(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new oj(e,r):new aj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Qi(n,this.value)):n!==null&&Gs(this.value)===Gs(n)&&this.matchesComparison(Qi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ee()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class On extends $T{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new On(e,n)}matches(e){return HT(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function HT(t){return t.op==="and"}function WT(t){return sj(t)&&HT(t)}function sj(t){for(const e of t.filters)if(e instanceof On)return!1;return!0}function $f(t){if(t instanceof Je)return t.field.canonicalString()+t.op.toString()+Yi(t.value);if(WT(t))return t.filters.map(e=>$f(e)).join(",");{const e=t.filters.map(n=>$f(n)).join(",");return`${t.op}(${e})`}}function qT(t,e){return t instanceof Je?function(r,s){return s instanceof Je&&r.op===s.op&&r.field.isEqual(s.field)&&Mn(r.value,s.value)}(t,e):t instanceof On?function(r,s){return s instanceof On&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&qT(o,s.filters[a]),!0):!1}(t,e):void ee()}function GT(t){return t instanceof Je?function(n){return`${n.field.canonicalString()} ${n.op} ${Yi(n.value)}`}(t):t instanceof On?function(n){return n.op.toString()+" {"+n.getFilters().map(GT).join(" ,")+"}"}(t):"Filter"}class ij extends Je{constructor(e,n,r){super(e,n,r),this.key=X.fromName(r.referenceValue)}matches(e){const n=X.comparator(e.key,this.key);return this.matchesComparison(n)}}class oj extends Je{constructor(e,n){super(e,"in",n),this.keys=KT("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class aj extends Je{constructor(e,n){super(e,"not-in",n),this.keys=KT("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function KT(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>X.fromName(r.referenceValue))}class lj extends Je{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Rm(n)&&Ua(n.arrayValue,this.value)}}class uj extends Je{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ua(this.value.arrayValue,n)}}class cj extends Je{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ua(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ua(this.value.arrayValue,n)}}class dj extends Je{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Rm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ua(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function D0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new hj(t,e,n,r,s,i,o)}function Nm(t){const e=ne(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>$f(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Gc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Yi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Yi(r)).join(",")),e.ue=n}return e.ue}function jm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!rj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!qT(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!j0(t.startAt,e.startAt)&&j0(t.endAt,e.endAt)}function Hf(t){return X.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,n=null,r=[],s=[],i=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function fj(t,e,n,r,s,i,o,a){return new Kc(t,e,n,r,s,i,o,a)}function Dm(t){return new Kc(t)}function V0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function pj(t){return t.collectionGroup!==null}function la(t){const e=ne(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ht(ct.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new uc(i,r))}),n.has(ct.keyField().canonicalString())||e.ce.push(new uc(ct.keyField(),r))}return e.ce}function jn(t){const e=ne(t);return e.le||(e.le=mj(e,la(t))),e.le}function mj(t,e){if(t.limitType==="F")return D0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new uc(s.field,i)});const n=t.endAt?new lc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new lc(t.startAt.position,t.startAt.inclusive):null;return D0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Wf(t,e,n){return new Kc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Qc(t,e){return jm(jn(t),jn(e))&&t.limitType===e.limitType}function QT(t){return`${Nm(jn(t))}|lt:${t.limitType}`}function li(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>GT(s)).join(", ")}]`),Gc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Yi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Yi(s)).join(",")),`Target(${r})`}(jn(t))}; limitType=${t.limitType})`}function Yc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):X.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of la(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,a,u){const c=N0(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,la(r),s)||r.endAt&&!function(o,a,u){const c=N0(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,la(r),s))}(t,e)}function gj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function YT(t){return(e,n)=>{let r=!1;for(const s of la(t)){const i=yj(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function yj(t,e,n){const r=t.field.isKeyField()?X.comparator(e.key,n.key):function(i,o,a){const u=o.data.field(i),c=a.data.field(i);return u!==null&&c!==null?Qi(u,c):ee()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ee()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fo{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Zs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return UT(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vj=new Ve(X.comparator);function hr(){return vj}const XT=new Ve(X.comparator);function Ko(...t){let e=XT;for(const n of t)e=e.insert(n.key,n);return e}function JT(t){let e=XT;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Rs(){return ua()}function ZT(){return ua()}function ua(){return new fo(t=>t.toString(),(t,e)=>t.isEqual(e))}const _j=new Ve(X.comparator),xj=new ht(X.comparator);function ie(...t){let e=xj;for(const n of t)e=e.add(n);return e}const wj=new ht(fe);function Ej(){return wj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(e)?"-0":e}}function e1(t){return{integerValue:""+t}}function Tj(t,e){return JN(e)?e1(e):Vm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(){this._=void 0}}function Sj(t,e,n){return t instanceof Ba?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&km(i)&&(i=Am(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Xi?n1(t,e):t instanceof Ji?r1(t,e):function(s,i){const o=t1(s,i),a=M0(o)+M0(s.Pe);return zf(o)&&zf(s.Pe)?e1(a):Vm(s.serializer,a)}(t,e)}function Ij(t,e,n){return t instanceof Xi?n1(t,e):t instanceof Ji?r1(t,e):n}function t1(t,e){return t instanceof cc?function(r){return zf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ba extends Xc{}class Xi extends Xc{constructor(e){super(),this.elements=e}}function n1(t,e){const n=s1(e);for(const r of t.elements)n.some(s=>Mn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ji extends Xc{constructor(e){super(),this.elements=e}}function r1(t,e){let n=s1(e);for(const r of t.elements)n=n.filter(s=>!Mn(s,r));return{arrayValue:{values:n}}}class cc extends Xc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function M0(t){return Ue(t.integerValue||t.doubleValue)}function s1(t){return Rm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mm{constructor(e,n){this.field=e,this.transform=n}}function Pj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Xi&&s instanceof Xi||r instanceof Ji&&s instanceof Ji?Ki(r.elements,s.elements,Mn):r instanceof cc&&s instanceof cc?Mn(r.Pe,s.Pe):r instanceof Ba&&s instanceof Ba}(t.transform,e.transform)}class Cj{constructor(e,n){this.version=e,this.transformResults=n}}class En{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new En}static exists(e){return new En(void 0,e)}static updateTime(e){return new En(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Jc{}function i1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new a1(t.key,En.none()):new sl(t.key,t.data,En.none());{const n=t.data,r=Mt.empty();let s=new ht(ct.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new fs(t.key,r,new Gt(s.toArray()),En.none())}}function bj(t,e,n){t instanceof sl?function(s,i,o){const a=s.value.clone(),u=L0(s.fieldTransforms,i,o.transformResults);a.setAll(u),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof fs?function(s,i,o){if(!wu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=L0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(o1(s)),u.setAll(a),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function ca(t,e,n,r){return t instanceof sl?function(i,o,a,u){if(!wu(i.precondition,o))return a;const c=i.value.clone(),h=F0(i.fieldTransforms,u,o);return c.setAll(h),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof fs?function(i,o,a,u){if(!wu(i.precondition,o))return a;const c=F0(i.fieldTransforms,u,o),h=o.data;return h.setAll(o1(i)),h.setAll(c),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,a){return wu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function kj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=t1(r.transform,s||null);i!=null&&(n===null&&(n=Mt.empty()),n.set(r.field,i))}return n||null}function O0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ki(r,s,(i,o)=>Pj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sl extends Jc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class fs extends Jc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function o1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function L0(t,e,n){const r=new Map;_e(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,Ij(o,a,n[s]))}return r}function F0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Sj(i,o,e))}return r}class a1 extends Jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Aj extends Jc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&bj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ca(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=ZT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=n.has(s.key)?null:a;const u=i1(o,a);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(te.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ie())}isEqual(e){return this.batchId===e.batchId&&Ki(this.mutations,e.mutations,(n,r)=>O0(n,r))&&Ki(this.baseMutations,e.baseMutations,(n,r)=>O0(n,r))}}class Om{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){_e(e.mutations.length===r.length);let s=function(){return _j}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Om(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe,le;function Dj(t){switch(t){default:return ee();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function l1(t){if(t===void 0)return dr("GRPC error has no .code"),F.UNKNOWN;switch(t){case qe.OK:return F.OK;case qe.CANCELLED:return F.CANCELLED;case qe.UNKNOWN:return F.UNKNOWN;case qe.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case qe.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case qe.INTERNAL:return F.INTERNAL;case qe.UNAVAILABLE:return F.UNAVAILABLE;case qe.UNAUTHENTICATED:return F.UNAUTHENTICATED;case qe.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case qe.NOT_FOUND:return F.NOT_FOUND;case qe.ALREADY_EXISTS:return F.ALREADY_EXISTS;case qe.PERMISSION_DENIED:return F.PERMISSION_DENIED;case qe.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case qe.ABORTED:return F.ABORTED;case qe.OUT_OF_RANGE:return F.OUT_OF_RANGE;case qe.UNIMPLEMENTED:return F.UNIMPLEMENTED;case qe.DATA_LOSS:return F.DATA_LOSS;default:return ee()}}(le=qe||(qe={}))[le.OK=0]="OK",le[le.CANCELLED=1]="CANCELLED",le[le.UNKNOWN=2]="UNKNOWN",le[le.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",le[le.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",le[le.NOT_FOUND=5]="NOT_FOUND",le[le.ALREADY_EXISTS=6]="ALREADY_EXISTS",le[le.PERMISSION_DENIED=7]="PERMISSION_DENIED",le[le.UNAUTHENTICATED=16]="UNAUTHENTICATED",le[le.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",le[le.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",le[le.ABORTED=10]="ABORTED",le[le.OUT_OF_RANGE=11]="OUT_OF_RANGE",le[le.UNIMPLEMENTED=12]="UNIMPLEMENTED",le[le.INTERNAL=13]="INTERNAL",le[le.UNAVAILABLE=14]="UNAVAILABLE",le[le.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mj=new Vs([4294967295,4294967295],0);function U0(t){const e=Vj().encode(t),n=new NT;return n.update(e),new Uint8Array(n.digest())}function B0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Vs([n,r],0),new Vs([s,i],0)]}class Lm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Qo(`Invalid padding: ${n}`);if(r<0)throw new Qo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Qo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Qo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=Vs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(Vs.fromNumber(r)));return s.compare(Mj)===1&&(s=new Vs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=U0(e),[r,s]=B0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Lm(i,s,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const n=U0(e),[r,s]=B0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Qo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zc(te.min(),s,new Ve(fe),hr(),ie())}}class il{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new il(r,n,ie(),ie(),ie())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class u1{constructor(e,n){this.targetId=e,this.me=n}}class c1{constructor(e,n,r=pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class z0{constructor(){this.fe=0,this.ge=H0(),this.pe=pt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ie(),n=ie(),r=ie();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ee()}}),new il(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=H0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,_e(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Oj{constructor(e){this.Le=e,this.Be=new Map,this.ke=hr(),this.qe=$0(),this.Qe=new Ve(fe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:ee()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Hf(i))if(r===0){const o=new X(i.path);this.Ue(n,o,St.newNoDocument(o,te.min()))}else _e(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(e),u=a?this.Xe(a,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,a;try{o=qs(r).toUint8Array()}catch(u){if(u instanceof BT)return Gi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new Lm(o,s,i)}catch(u){return Gi(u instanceof Qo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Hf(a.target)){const u=new X(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,St.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ie();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Zc(e,n,this.Qe,this.ke,r);return this.ke=hr(),this.qe=$0(),this.Qe=new Ve(fe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new z0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new ht(fe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new z0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function $0(){return new Ve(X.comparator)}function H0(){return new Ve(X.comparator)}const Lj={asc:"ASCENDING",desc:"DESCENDING"},Fj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Uj={and:"AND",or:"OR"};class Bj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function qf(t,e){return t.useProto3Json||Gc(e)?e:{value:e}}function dc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function d1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function zj(t,e){return dc(t,e.toTimestamp())}function Dn(t){return _e(!!t),te.fromTimestamp(function(n){const r=rs(n);return new et(r.seconds,r.nanos)}(t))}function Fm(t,e){return Gf(t,e).canonicalString()}function Gf(t,e){const n=function(s){return new Ae(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function h1(t){const e=Ae.fromString(t);return _e(y1(e)),e}function Kf(t,e){return Fm(t.databaseId,e.path)}function ph(t,e){const n=h1(e);if(n.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new X(p1(n))}function f1(t,e){return Fm(t.databaseId,e)}function $j(t){const e=h1(t);return e.length===4?Ae.emptyPath():p1(e)}function Qf(t){return new Ae(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function p1(t){return _e(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function W0(t,e,n){return{name:Kf(t,e),fields:n.value.mapValue.fields}}function Hj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ee()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,h){return c.useProto3Json?(_e(h===void 0||typeof h=="string"),pt.fromBase64String(h||"")):(_e(h===void 0||h instanceof Buffer||h instanceof Uint8Array),pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const h=c.code===void 0?F.UNKNOWN:l1(c.code);return new Q(h,c.message||"")}(o);n=new c1(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=ph(t,r.document.name),i=Dn(r.document.updateTime),o=r.document.createTime?Dn(r.document.createTime):te.min(),a=new Mt({mapValue:{fields:r.document.fields}}),u=St.newFoundDocument(s,i,o,a),c=r.targetIds||[],h=r.removedTargetIds||[];n=new Eu(c,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=ph(t,r.document),i=r.readTime?Dn(r.readTime):te.min(),o=St.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Eu([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=ph(t,r.document),i=r.removedTargetIds||[];n=new Eu([],i,s,null)}else{if(!("filter"in e))return ee();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new jj(s,i),a=r.targetId;n=new u1(a,o)}}return n}function Wj(t,e){let n;if(e instanceof sl)n={update:W0(t,e.key,e.value)};else if(e instanceof a1)n={delete:Kf(t,e.key)};else if(e instanceof fs)n={update:W0(t,e.key,e.data),updateMask:eD(e.fieldMask)};else{if(!(e instanceof Aj))return ee();n={verify:Kf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Ba)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Xi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ji)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof cc)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw ee()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:zj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ee()}(t,e.precondition)),n}function qj(t,e){return t&&t.length>0?(_e(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Dn(s.updateTime):Dn(i);return o.isEqual(te.min())&&(o=Dn(i)),new Cj(o,s.transformResults||[])}(n,e))):[]}function Gj(t,e){return{documents:[f1(t,e.path)]}}function Kj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=f1(t,s);const i=function(c){if(c.length!==0)return g1(On.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(h=>function(m){return{field:ui(m.field),direction:Xj(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=qf(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function Qj(t){let e=$j(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){_e(r===1);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=m1(f);return m instanceof On&&WT(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(E){return new uc(ci(E.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Gc(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){const m=!!f.before,y=f.values||[];return new lc(y,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,y=f.values||[];return new lc(y,m)}(n.endAt)),fj(e,s,o,i,a,"F",u,c)}function Yj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ee()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function m1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ci(n.unaryFilter.field);return Je.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ci(n.unaryFilter.field);return Je.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ci(n.unaryFilter.field);return Je.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ci(n.unaryFilter.field);return Je.create(o,"!=",{nullValue:"NULL_VALUE"});default:return ee()}}(t):t.fieldFilter!==void 0?function(n){return Je.create(ci(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ee()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return On.create(n.compositeFilter.filters.map(r=>m1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ee()}}(n.compositeFilter.op))}(t):ee()}function Xj(t){return Lj[t]}function Jj(t){return Fj[t]}function Zj(t){return Uj[t]}function ui(t){return{fieldPath:t.canonicalString()}}function ci(t){return ct.fromServerFormat(t.fieldPath)}function g1(t){return t instanceof Je?function(n){if(n.op==="=="){if(R0(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NAN"}};if(A0(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(R0(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NOT_NAN"}};if(A0(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ui(n.field),op:Jj(n.op),value:n.value}}}(t):t instanceof On?function(n){const r=n.getFilters().map(s=>g1(s));return r.length===1?r[0]:{compositeFilter:{op:Zj(n.op),filters:r}}}(t):ee()}function eD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function y1(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r,s,i=te.min(),o=te.min(),a=pt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new Or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tD{constructor(e){this.ct=e}}function nD(t){const e=Qj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Wf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rD{constructor(){this.un=new sD}addToCollectionParentIndex(e,n){return this.un.add(n),L.resolve()}getCollectionParents(e,n){return L.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return L.resolve()}deleteFieldIndex(e,n){return L.resolve()}deleteAllFieldIndexes(e){return L.resolve()}createTargetIndexes(e,n){return L.resolve()}getDocumentsMatchingTarget(e,n){return L.resolve(null)}getIndexType(e,n){return L.resolve(0)}getFieldIndexes(e,n){return L.resolve([])}getNextCollectionGroupToUpdate(e){return L.resolve(null)}getMinOffset(e,n){return L.resolve(ns.min())}getMinOffsetFromCollectionGroup(e,n){return L.resolve(ns.min())}updateCollectionGroup(e,n,r){return L.resolve()}updateIndexEntries(e,n){return L.resolve()}}class sD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new ht(Ae.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new ht(Ae.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Zi(0)}static kn(){return new Zi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iD{constructor(){this.changes=new fo(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,St.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?L.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&ca(r.mutation,s,Gt.empty(),et.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ie()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ie()){const s=Rs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Ko();return i.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Rs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ie()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,s){let i=hr();const o=ua(),a=function(){return ua()}();return n.forEach((u,c)=>{const h=r.get(c.key);s.has(c.key)&&(h===void 0||h.mutation instanceof fs)?i=i.insert(c.key,c):h!==void 0?(o.set(c.key,h.mutation.getFieldMask()),ca(h.mutation,c,h.mutation.getFieldMask(),et.now())):o.set(c.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,h)=>o.set(c,h)),n.forEach((c,h)=>{var f;return a.set(c,new oD(h,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,n){const r=ua();let s=new Ve((o,a)=>o-a),i=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let h=r.get(u)||Gt.empty();h=a.applyToLocalView(c,h),r.set(u,h);const f=(s.get(a.batchId)||ie()).add(u);s=s.insert(a.batchId,f)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,h=u.value,f=ZT();h.forEach(m=>{if(!i.has(m)){const y=i1(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return L.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return X.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):pj(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):L.resolve(Rs());let a=-1,u=i;return o.next(c=>L.forEach(c,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),i.get(h)?L.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,ie())).next(h=>({batchId:a,changes:JT(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new X(n)).next(r=>{let s=Ko();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Ko();return this.indexManager.getCollectionParents(e,i).next(a=>L.forEach(a,u=>{const c=function(f,m){return new Kc(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const h=c.getKey();o.get(h)===null&&(o=o.insert(h,St.newInvalidDocument(h)))});let a=Ko();return o.forEach((u,c)=>{const h=i.get(u);h!==void 0&&ca(h.mutation,c,Gt.empty(),et.now()),Yc(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lD{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return L.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Dn(s.createTime)}}(n)),L.resolve()}getNamedQuery(e,n){return L.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:nD(s.bundledQuery),readTime:Dn(s.readTime)}}(n)),L.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uD{constructor(){this.overlays=new Ve(X.comparator),this.Ir=new Map}getOverlay(e,n){return L.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Rs();return L.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),L.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),L.resolve()}getOverlaysForCollection(e,n,r){const s=Rs(),i=n.length+1,o=new X(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return L.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ve((c,h)=>c-h);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let h=i.get(c.largestBatchId);h===null&&(h=Rs(),i=i.insert(c.largestBatchId,h)),h.set(c.getKey(),c)}}const a=Rs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,h)=>a.set(c,h)),!(a.size()>=s)););return L.resolve(a)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Nj(n,r));let i=this.Ir.get(n);i===void 0&&(i=ie(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cD{constructor(){this.sessionToken=pt.EMPTY_BYTE_STRING}getSessionToken(e){return L.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,L.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(){this.Tr=new ht(rt.Er),this.dr=new ht(rt.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new rt(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new rt(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new X(new Ae([])),r=new rt(n,e),s=new rt(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new X(new Ae([])),r=new rt(n,e),s=new rt(n,e+1);let i=ie();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new rt(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class rt{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return X.comparator(e.key,n.key)||fe(e.wr,n.wr)}static Ar(e,n){return fe(e.wr,n.wr)||X.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new ht(rt.Er)}checkEmpty(e){return L.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Rj(i,n,r,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new rt(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return L.resolve(o)}lookupMutationBatch(e,n){return L.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return L.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return L.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return L.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new rt(n,0),s=new rt(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const a=this.Dr(o.wr);i.push(a)}),L.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ht(fe);return n.forEach(s=>{const i=new rt(s,0),o=new rt(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{r=r.add(a.wr)})}),L.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;X.isDocumentKey(i)||(i=i.child(""));const o=new rt(new X(i),0);let a=new ht(fe);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(u.wr)),!0)},o),L.resolve(this.Cr(a))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){_e(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return L.forEach(n.mutations,s=>{const i=new rt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new rt(n,0),s=this.br.firstAfterOrEqual(r);return L.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,L.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hD{constructor(e){this.Mr=e,this.docs=function(){return new Ve(X.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return L.resolve(r?r.document.mutableCopy():St.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():St.newInvalidDocument(s))}),L.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=hr();const o=n.path,a=new X(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:h}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||KN(GN(h),r)<=0||(s.has(h.key)||Yc(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return L.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ee()}Or(e,n){return L.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new fD(this)}getSize(e){return L.resolve(this.size)}}class fD extends iD{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),L.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e){this.persistence=e,this.Nr=new fo(n=>Nm(n),jm),this.lastRemoteSnapshotVersion=te.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Um,this.targetCount=0,this.kr=Zi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),L.resolve()}getLastRemoteSnapshotVersion(e){return L.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return L.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),L.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),L.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Zi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,L.resolve()}updateTargetData(e,n){return this.Kn(n),L.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,L.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),L.waitFor(i).next(()=>s)}getTargetCount(e){return L.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return L.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),L.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),L.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),L.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return L.resolve(r)}containsKey(e,n){return L.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(e,n){this.qr={},this.overlays={},this.Qr=new bm(0),this.Kr=!1,this.Kr=!0,this.$r=new cD,this.referenceDelegate=e(this),this.Ur=new pD(this),this.indexManager=new rD,this.remoteDocumentCache=function(s){return new hD(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new tD(n),this.Gr=new lD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new uD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new dD(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new gD(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return L.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class gD extends YN{constructor(e){super(),this.currentSequenceNumber=e}}class Bm{constructor(e){this.persistence=e,this.Jr=new Um,this.Yr=null}static Zr(e){return new Bm(e)}get Xr(){if(this.Yr)return this.Yr;throw ee()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),L.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),L.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),L.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return L.forEach(this.Xr,r=>{const s=X.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,te.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return L.or([()=>L.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ie(),s=ie();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new zm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Zk()?8:XN(Pt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new yD;return this.Xi(e,n,o).next(a=>{if(i.result=a,this.zi)return this.es(e,n,o,a.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Lo()<=ae.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",li(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),L.resolve()):(Lo()<=ae.DEBUG&&q("QueryEngine","Query:",li(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Lo()<=ae.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",li(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(n))):L.resolve())}Yi(e,n){if(V0(n))return L.resolve(null);let r=jn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Wf(n,null,"F"),r=jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ie(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,a);return this.ns(n,c,o,u.readTime)?this.Yi(e,Wf(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,s){return V0(n)||s.isEqual(te.min())?L.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?L.resolve(null):(Lo()<=ae.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),li(n)),this.rs(e,o,n,qN(s,-1)).next(a=>a))})}ts(e,n){let r=new ht(YT(e));return n.forEach((s,i)=>{Yc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Lo()<=ae.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",li(n)),this.Ji.getDocumentsMatchingQuery(e,n,ns.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ve(fe),this._s=new fo(i=>Nm(i),jm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new aD(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function xD(t,e,n,r){return new _D(t,e,n,r)}async function v1(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let u=ie();for(const c of s){o.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}for(const c of i){a.push(c.batchId);for(const h of c.mutations)u=u.add(h.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:a}))})})}function wD(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(a,u,c,h){const f=c.batch,m=f.keys();let y=L.resolve();return m.forEach(E=>{y=y.next(()=>h.getEntry(u,E)).next(T=>{const C=c.docVersions.get(E);_e(C!==null),T.version.compareTo(C)<0&&(f.applyToRemoteDocument(T,c),T.isValidDocument()&&(T.setReadTime(c.commitVersion),h.addEntry(T)))})}),y.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=ie();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function _1(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function ED(t,e){const n=ne(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const a=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;a.push(n.Ur.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Ur.addMatchingKeys(i,h.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(pt.EMPTY_BYTE_STRING,te.min()).withLastLimboFreeSnapshotVersion(te.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(T,C,w){return T.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(m,y,h)&&a.push(n.Ur.updateTargetData(i,y))});let u=hr(),c=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),a.push(TD(i,o,e.documentUpdates).next(h=>{u=h.Ps,c=h.Is})),!r.isEqual(te.min())){const h=n.Ur.getLastRemoteSnapshotVersion(i).next(f=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(h)}return L.waitFor(a).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.os=s,i))}function TD(t,e,n){let r=ie(),s=ie();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=hr();return n.forEach((a,u)=>{const c=i.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),u.isNoDocument()&&u.version.isEqual(te.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):q("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function SD(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ID(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,L.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Or(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Yf(t,e,n){const r=ne(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!rl(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function q0(t,e,n){const r=ne(t);let s=te.min(),i=ie();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,h){const f=ne(u),m=f._s.get(h);return m!==void 0?L.resolve(f.os.get(m)):f.Ur.getTargetData(c,h)}(r,o,jn(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,a.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:te.min(),n?i:ie())).next(a=>(PD(r,gj(e),a),{documents:a,Ts:i})))}function PD(t,e,n){let r=t.us.get(e)||te.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class G0{constructor(){this.activeTargetIds=Ej()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class CD{constructor(){this.so=new G0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new G0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xl=null;function mh(){return Xl===null?Xl=function(){return 268435456+Math.round(2147483648*Math.random())}():Xl++,"0x"+Xl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt="WebChannelConnection";class RD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const a=mh(),u=this.xo(n,r.toUriEncodedString());q("RestConnection",`Sending RPC '${n}' ${a}:`,u,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,u,c,s).then(h=>(q("RestConnection",`Received RPC '${n}' ${a}: `,h),h),h=>{throw Gi("RestConnection",`RPC '${n}' ${a} failed with error: `,h,"url: ",u,"request:",s),h})}Lo(n,r,s,i,o,a){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ho}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=kD[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=mh();return new Promise((o,a)=>{const u=new jT;u.setWithCredentials(!0),u.listenOnce(DT.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case _u.NO_ERROR:const h=u.getResponseJson();q(xt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(h)),o(h);break;case _u.TIMEOUT:q(xt,`RPC '${e}' ${i} timed out`),a(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case _u.HTTP_ERROR:const f=u.getStatus();if(q(xt,`RPC '${e}' ${i} failed with status:`,f,"response text:",u.getResponseText()),f>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const y=m==null?void 0:m.error;if(y&&y.status&&y.message){const E=function(C){const w=C.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(y.status);a(new Q(E,y.message))}else a(new Q(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new Q(F.UNAVAILABLE,"Connection failed."));break;default:ee()}}finally{q(xt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);q(xt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=mh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=OT(),a=MT(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const h=i.join("");q(xt,`Creating RPC '${e}' stream ${s}: ${h}`,u);const f=o.createWebChannel(h,u);let m=!1,y=!1;const E=new AD({Io:C=>{y?q(xt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(m||(q(xt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),q(xt,`RPC '${e}' stream ${s} sending:`,C),f.send(C))},To:()=>f.close()}),T=(C,w,v)=>{C.listen(w,x=>{try{v(x)}catch(b){setTimeout(()=>{throw b},0)}})};return T(f,Go.EventType.OPEN,()=>{y||(q(xt,`RPC '${e}' stream ${s} transport opened.`),E.yo())}),T(f,Go.EventType.CLOSE,()=>{y||(y=!0,q(xt,`RPC '${e}' stream ${s} transport closed`),E.So())}),T(f,Go.EventType.ERROR,C=>{y||(y=!0,Gi(xt,`RPC '${e}' stream ${s} transport errored:`,C),E.So(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),T(f,Go.EventType.MESSAGE,C=>{var w;if(!y){const v=C.data[0];_e(!!v);const x=v,b=x.error||((w=x[0])===null||w===void 0?void 0:w.error);if(b){q(xt,`RPC '${e}' stream ${s} received error:`,b);const D=b.status;let M=function(P){const k=qe[P];if(k!==void 0)return l1(k)}(D),I=b.message;M===void 0&&(M=F.INTERNAL,I="Unknown error status: "+D+" with message "+b.message),y=!0,E.So(new Q(M,I)),f.close()}else q(xt,`RPC '${e}' stream ${s} received:`,v),E.bo(v)}}),T(a,VT.STAT_EVENT,C=>{C.stat===Uf.PROXY?q(xt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===Uf.NOPROXY&&q(xt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function gh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){return new Bj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(e,n,r,s,i,o,a,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new x1(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(dr(n.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new Q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ND extends w1{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Hj(this.serializer,e),r=function(i){if(!("targetChange"in i))return te.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?te.min():o.readTime?Dn(o.readTime):te.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Qf(this.serializer),n.addTarget=function(i,o){let a;const u=o.target;if(a=Hf(u)?{documents:Gj(i,u)}:{query:Kj(i,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=d1(i,o.resumeToken);const c=qf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(te.min())>0){a.readTime=dc(i,o.snapshotVersion.toTimestamp());const c=qf(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=Yj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Qf(this.serializer),n.removeTarget=e,this.a_(n)}}class jD extends w1{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return _e(!!e.streamToken),this.lastStreamToken=e.streamToken,_e(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){_e(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=qj(e.writeResults,e.commitTime),r=Dn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Qf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Wj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Gf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Gf(n,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Q(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class VD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(dr(n),this.D_=!1):q("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{ei(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=ne(u);c.L_.add(4),await ol(c),c.q_.set("Unknown"),c.L_.delete(4),await td(c)}(this))})}),this.q_=new VD(r,s)}}async function td(t){if(ei(t))for(const e of t.B_)await e(!0)}async function ol(t){for(const e of t.B_)await e(!1)}function E1(t,e){const n=ne(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),qm(n)?Wm(n):po(n).r_()&&Hm(n,e))}function $m(t,e){const n=ne(t),r=po(n);n.N_.delete(e),r.r_()&&T1(n,e),n.N_.size===0&&(r.r_()?r.o_():ei(n)&&n.q_.set("Unknown"))}function Hm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(te.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}po(t).A_(e)}function T1(t,e){t.Q_.xe(e),po(t).R_(e)}function Wm(t){t.Q_=new Oj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),po(t).start(),t.q_.v_()}function qm(t){return ei(t)&&!po(t).n_()&&t.N_.size>0}function ei(t){return ne(t).L_.size===0}function S1(t){t.Q_=void 0}async function OD(t){t.q_.set("Online")}async function LD(t){t.N_.forEach((e,n)=>{Hm(t,e)})}async function FD(t,e){S1(t),qm(t)?(t.q_.M_(e),Wm(t)):t.q_.set("Unknown")}async function UD(t,e,n){if(t.q_.set("Online"),e instanceof c1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await hc(t,r)}else if(e instanceof Eu?t.Q_.Ke(e):e instanceof u1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(te.min()))try{const r=await _1(t.localStore);n.compareTo(r)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.N_.get(c);h&&i.N_.set(c,h.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const h=i.N_.get(u);if(!h)return;i.N_.set(u,h.withResumeToken(pt.EMPTY_BYTE_STRING,h.snapshotVersion)),T1(i,u);const f=new Or(h.target,u,c,h.sequenceNumber);Hm(i,f)}),i.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await hc(t,r)}}async function hc(t,e,n){if(!rl(e))throw e;t.L_.add(1),await ol(t),t.q_.set("Offline"),n||(n=()=>_1(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await td(t)})}function I1(t,e){return e().catch(n=>hc(t,n,e))}async function nd(t){const e=ne(t),n=ss(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;BD(e);)try{const s=await SD(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,zD(e,s)}catch(s){await hc(e,s)}P1(e)&&C1(e)}function BD(t){return ei(t)&&t.O_.length<10}function zD(t,e){t.O_.push(e);const n=ss(t);n.r_()&&n.V_&&n.m_(e.mutations)}function P1(t){return ei(t)&&!ss(t).n_()&&t.O_.length>0}function C1(t){ss(t).start()}async function $D(t){ss(t).p_()}async function HD(t){const e=ss(t);for(const n of t.O_)e.m_(n.mutations)}async function WD(t,e,n){const r=t.O_.shift(),s=Om.from(r,e,n);await I1(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await nd(t)}async function qD(t,e){e&&ss(t).V_&&await async function(r,s){if(function(o){return Dj(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();ss(r).s_(),await I1(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await nd(r)}}(t,e),P1(t)&&C1(t)}async function Q0(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=ei(n);n.L_.add(3),await ol(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await td(n)}async function GD(t,e){const n=ne(t);e?(n.L_.delete(2),await td(n)):e||(n.L_.add(2),await ol(n),n.q_.set("Unknown"))}function po(t){return t.K_||(t.K_=function(n,r,s){const i=ne(n);return i.w_(),new ND(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:OD.bind(null,t),Ro:LD.bind(null,t),mo:FD.bind(null,t),d_:UD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),qm(t)?Wm(t):t.q_.set("Unknown")):(await t.K_.stop(),S1(t))})),t.K_}function ss(t){return t.U_||(t.U_=function(n,r,s){const i=ne(n);return i.w_(),new jD(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:$D.bind(null,t),mo:qD.bind(null,t),f_:HD.bind(null,t),g_:WD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await nd(t)):(await t.U_.stop(),t.O_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,a=new Gm(e,n,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Km(t,e){if(dr("AsyncQueue",`${e}: ${t}`),rl(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||X.comparator(n.key,r.key):(n,r)=>X.comparator(n.key,r.key),this.keyedMap=Ko(),this.sortedSet=new Ve(this.comparator)}static emptySet(e){return new Oi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Oi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Oi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y0{constructor(){this.W_=new Ve(X.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):ee():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class eo{constructor(e,n,r,s,i,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new eo(e,n,Oi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class QD{constructor(){this.queries=X0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=ne(n),i=s.queries;s.queries=X0(),i.forEach((o,a)=>{for(const u of a.j_)u.onError(r)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function X0(){return new fo(t=>QT(t),Qc)}async function YD(t,e){const n=ne(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new KD,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const a=Km(o,`Initialization of query '${li(e.query)}' failed`);return void e.onError(a)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Qm(n)}async function XD(t,e){const n=ne(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function JD(t,e){const n=ne(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(r=!0);o.z_=s}}r&&Qm(n)}function ZD(t,e,n){const r=ne(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Qm(t){t.Y_.forEach(e=>{e.next()})}var Xf,J0;(J0=Xf||(Xf={})).ea="default",J0.Cache="cache";class eV{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new eo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=eo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Xf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(e){this.key=e}}class k1{constructor(e){this.key=e}}class tV{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ie(),this.mutatedKeys=ie(),this.Aa=YT(e),this.Ra=new Oi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new Y0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,a=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=Yc(this.query,f)?f:null,E=!!m&&this.mutatedKeys.has(m.key),T=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let C=!1;m&&y?m.data.isEqual(y.data)?E!==T&&(r.track({type:3,doc:y}),C=!0):this.ga(m,y)||(r.track({type:2,doc:y}),C=!0,(u&&this.Aa(y,u)>0||c&&this.Aa(y,c)<0)&&(a=!0)):!m&&y?(r.track({type:0,doc:y}),C=!0):m&&!y&&(r.track({type:1,doc:m}),C=!0,(u||c)&&(a=!0)),C&&(y?(o=o.add(y),i=T?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{Ra:o,fa:r,ns:a,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((h,f)=>function(y,E){const T=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ee()}};return T(y)-T(E)}(h.type,f.type)||this.Aa(h.doc,f.doc)),this.pa(r),s=s!=null&&s;const a=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new eo(this.query,e.Ra,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new Y0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ie(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new k1(r))}),this.da.forEach(r=>{e.has(r)||n.push(new b1(r))}),n}ba(e){this.Ta=e.Ts,this.da=ie();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return eo.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class nV{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class rV{constructor(e){this.key=e,this.va=!1}}class sV{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new fo(a=>QT(a),Qc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ve(X.comparator),this.Na=new Map,this.La=new Um,this.Ba={},this.ka=new Map,this.qa=Zi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function iV(t,e,n=!0){const r=V1(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await A1(r,e,n,!0),s}async function oV(t,e){const n=V1(t);await A1(n,e,!0,!1)}async function A1(t,e,n,r){const s=await ID(t.localStore,jn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let a;return r&&(a=await aV(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&E1(t.remoteStore,s),a}async function aV(t,e,n,r,s){t.Ka=(f,m,y)=>async function(T,C,w,v){let x=C.view.ma(w);x.ns&&(x=await q0(T.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,x)));const b=v&&v.targetChanges.get(C.targetId),D=v&&v.targetMismatches.get(C.targetId)!=null,M=C.view.applyChanges(x,T.isPrimaryClient,b,D);return e_(T,C.targetId,M.wa),M.snapshot}(t,f,m,y);const i=await q0(t.localStore,e,!0),o=new tV(e,i.Ts),a=o.ma(i.documents),u=il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(a,t.isPrimaryClient,u);e_(t,n,c.wa);const h=new nV(e,n,o);return t.Fa.set(e,h),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function lV(t,e,n){const r=ne(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Qc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Yf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&$m(r.remoteStore,s.targetId),Jf(r,s.targetId)}).catch(nl)):(Jf(r,s.targetId),await Yf(r.localStore,s.targetId,!0))}async function uV(t,e){const n=ne(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),$m(n.remoteStore,r.targetId))}async function cV(t,e,n){const r=yV(t);try{const s=await function(o,a){const u=ne(o),c=et.now(),h=a.reduce((y,E)=>y.add(E.key),ie());let f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let E=hr(),T=ie();return u.cs.getEntries(y,h).next(C=>{E=C,E.forEach((w,v)=>{v.isValidDocument()||(T=T.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,E)).next(C=>{f=C;const w=[];for(const v of a){const x=kj(v,f.get(v.key).overlayedDocument);x!=null&&w.push(new fs(v.key,x,zT(x.value.mapValue),En.exists(!0)))}return u.mutationQueue.addMutationBatch(y,c,w,a)}).next(C=>{m=C;const w=C.applyToLocalDocumentSet(f,T);return u.documentOverlayCache.saveOverlays(y,C.batchId,w)})}).then(()=>({batchId:m.batchId,changes:JT(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new Ve(fe)),c=c.insert(a,u),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await al(r,s.changes),await nd(r.remoteStore)}catch(s){const i=Km(s,"Failed to persist write");n.reject(i)}}async function R1(t,e){const n=ne(t);try{const r=await ED(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(_e(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?_e(o.va):s.removedDocuments.size>0&&(_e(o.va),o.va=!1))}),await al(n,r,e)}catch(r){await nl(r)}}function Z0(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const u=ne(o);u.onlineState=a;let c=!1;u.queries.forEach((h,f)=>{for(const m of f.j_)m.Z_(a)&&(c=!0)}),c&&Qm(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function dV(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ve(X.comparator);o=o.insert(i,St.newNoDocument(i,te.min()));const a=ie().add(i),u=new Zc(te.min(),new Map,new Ve(fe),o,a);await R1(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Ym(r)}else await Yf(r.localStore,e,!1).then(()=>Jf(r,e,n)).catch(nl)}async function hV(t,e){const n=ne(t),r=e.batch.batchId;try{const s=await wD(n.localStore,e);j1(n,r,null),N1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await al(n,s)}catch(s){await nl(s)}}async function fV(t,e,n){const r=ne(t);try{const s=await function(o,a){const u=ne(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let h;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(_e(f!==null),h=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,h,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,h)).next(()=>u.localDocuments.getDocuments(c,h))})}(r.localStore,e);j1(r,e,n),N1(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await al(r,s)}catch(s){await nl(s)}}function N1(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function j1(t,e,n){const r=ne(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Jf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||D1(t,r)})}function D1(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&($m(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ym(t))}function e_(t,e,n){for(const r of n)r instanceof b1?(t.La.addReference(r.key,e),pV(t,r)):r instanceof k1?(q("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||D1(t,r.key)):ee()}function pV(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(q("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ym(t))}function Ym(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new X(Ae.fromString(e)),r=t.qa.next();t.Na.set(r,new rV(n)),t.Oa=t.Oa.insert(n,r),E1(t.remoteStore,new Or(jn(Dm(n.path)),r,"TargetPurposeLimboResolution",bm.oe))}}async function al(t,e,n){const r=ne(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((a,u)=>{o.push(r.Ka(u,e,n).then(c=>{var h;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(h=n==null?void 0:n.targetChanges.get(u.targetId))===null||h===void 0?void 0:h.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){s.push(c);const f=zm.Wi(u.targetId,c);i.push(f)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,c){const h=ne(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>L.forEach(c,m=>L.forEach(m.$i,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>L.forEach(m.Ui,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!rl(f))throw f;q("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const y=h.os.get(m),E=y.snapshotVersion,T=y.withLastLimboFreeSnapshotVersion(E);h.os=h.os.insert(m,T)}}}(r.localStore,i))}async function mV(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await v1(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(u=>{u.reject(new Q(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await al(n,r.hs)}}function gV(t,e){const n=ne(t),r=n.Na.get(e);if(r&&r.va)return ie().add(r.key);{let s=ie();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const a=n.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function V1(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=R1.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gV.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=dV.bind(null,e),e.Ca.d_=JD.bind(null,e.eventManager),e.Ca.$a=ZD.bind(null,e.eventManager),e}function yV(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fV.bind(null,e),e}class fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ed(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return xD(this.persistence,new vD,e.initialUser,this.serializer)}Ga(e){return new mD(Bm.Zr,this.serializer)}Wa(e){return new CD}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}fc.provider={build:()=>new fc};class Zf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Z0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=mV.bind(null,this.syncEngine),await GD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new QD}()}createDatastore(e){const n=ed(e.databaseInfo.databaseId),r=function(i){return new RD(i)}(e.databaseInfo);return function(i,o,a,u){return new DD(i,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,a){return new MD(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Z0(this.syncEngine,n,0),function(){return K0.D()?new K0:new bD}())}createSyncEngine(e,n){return function(s,i,o,a,u,c,h){const f=new sV(s,i,o,a,u,c);return h&&(f.Qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ne(s);q("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ol(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Zf.provider={build:()=>new Zf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vV{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _V{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Et.UNAUTHENTICATED,this.clientId=FT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Km(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function yh(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await v1(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function t_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xV(t);q("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Q0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Q0(e.remoteStore,s)),t._onlineComponents=e}async function xV(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await yh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Gi("Error using user provided cache. Falling back to memory cache: "+n),await yh(t,new fc)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await yh(t,new fc);return t._offlineComponents}async function M1(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await t_(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await t_(t,new Zf))),t._onlineComponents}function wV(t){return M1(t).then(e=>e.syncEngine)}async function EV(t){const e=await M1(t),n=e.eventManager;return n.onListen=iV.bind(null,e.syncEngine),n.onUnlisten=lV.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=oV.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=uV.bind(null,e.syncEngine),n}function TV(t,e,n={}){const r=new Qr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,u,c){const h=new vV({next:m=>{h.Za(),o.enqueueAndForget(()=>XD(i,f));const y=m.docs.has(a);!y&&m.fromCache?c.reject(new Q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?c.reject(new Q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new eV(Dm(a.path),h,{includeMetadataChanges:!0,_a:!0});return YD(i,f)}(await EV(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O1(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L1(t,e,n){if(!n)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SV(t,e,n,r){if(e===!0&&r===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function r_(t){if(!X.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function s_(t){if(X.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Xm(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ee()}function is(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xm(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=O1((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i_({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new ON;switch(r.type){case"firstParty":return new BN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=n_.get(n);r&&(q("ComponentProvider","Removing Datastore"),n_.delete(n),r.terminate())}(this),Promise.resolve()}}function IV(t,e,n,r={}){var s;const i=(t=is(t,rd))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Gi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=Et.MOCK_USER;else{a=WE(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Et(c)}t._authCredentials=new LN(new LT(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jm{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jm(this.firestore,e,this._query)}}class Bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Yr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Bt(this.firestore,e,this._key)}}class Yr extends Jm{constructor(e,n,r){super(e,n,Dm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Bt(this.firestore,null,new X(e))}withConverter(e){return new Yr(this.firestore,e,this._path)}}function PV(t,e,...n){if(t=Qe(t),L1("collection","path",e),t instanceof rd){const r=Ae.fromString(e,...n);return s_(r),new Yr(t,null,r)}{if(!(t instanceof Bt||t instanceof Yr))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return s_(r),new Yr(t.firestore,null,r)}}function Ks(t,e,...n){if(t=Qe(t),arguments.length===1&&(e=FT.newId()),L1("doc","path",e),t instanceof rd){const r=Ae.fromString(e,...n);return r_(r),new Bt(t,null,new X(r))}{if(!(t instanceof Bt||t instanceof Yr))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ae.fromString(e,...n));return r_(r),new Bt(t.firestore,t instanceof Yr?t.converter:null,new X(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o_{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new x1(this,"async_queue_retry"),this.Vu=()=>{const r=gh();r&&q("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=gh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=gh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Qr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!rl(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw dr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Gm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&ee()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class ll extends rd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new o_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new o_(e),this._firestoreClient=void 0,await e}}}function CV(t,e){const n=typeof t=="object"?t:mm(),r=typeof t=="string"?t:"(default)",s=$c(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=zE("firestore");i&&IV(s,...i)}return s}function F1(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||bV(t),t._firestoreClient}function bV(t){var e,n,r;const s=t._freezeSettings(),i=function(a,u,c,h){return new ej(a,u,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,O1(h.experimentalLongPollingOptions),h.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new _V(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e){this._byteString=e}static fromBase64String(e){try{return new to(pt.fromBase64String(e))}catch(n){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new to(pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ct(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return fe(this._lat,e._lat)||fe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eg{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kV=/^__.*__$/;class AV{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new fs(e,this.data,this.fieldMask,n,this.fieldTransforms):new sl(e,this.data,n,this.fieldTransforms)}}class U1{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new fs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function B1(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ee()}}class id{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new id(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return pc(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(B1(this.Cu)&&kV.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class RV{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||ed(e)}Qu(e,n,r,s=!1){return new id({Cu:e,methodName:n,qu:r,path:ct.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tg(t){const e=t._freezeSettings(),n=ed(t._databaseId);return new RV(t._databaseId,!!e.ignoreUndefinedProperties,n)}function z1(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);ig("Data must be an object, but it was:",o,r);const a=H1(r,o);let u,c;if(i.merge)u=new Gt(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=ep(e,f,n);if(!o.contains(m))throw new Q(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);q1(h,m)||h.push(m)}u=new Gt(h),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new AV(new Mt(a),u,c)}class od extends mo{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof od}}function $1(t,e,n){return new id({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ng extends mo{_toFieldTransform(e){return new Mm(e.path,new Ba)}isEqual(e){return e instanceof ng}}class rg extends mo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=$1(this,e,!0),r=this.Ku.map(i=>go(i,n)),s=new Xi(r);return new Mm(e.path,s)}isEqual(e){return e instanceof rg&&Wi(this.Ku,e.Ku)}}class sg extends mo{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=$1(this,e,!0),r=this.Ku.map(i=>go(i,n)),s=new Ji(r);return new Mm(e.path,s)}isEqual(e){return e instanceof sg&&Wi(this.Ku,e.Ku)}}function NV(t,e,n,r){const s=t.Qu(1,e,n);ig("Data must be an object, but it was:",s,r);const i=[],o=Mt.empty();Zs(r,(u,c)=>{const h=og(e,u,n);c=Qe(c);const f=s.Nu(h);if(c instanceof od)i.push(h);else{const m=go(c,f);m!=null&&(i.push(h),o.set(h,m))}});const a=new Gt(i);return new U1(o,a,s.fieldTransforms)}function jV(t,e,n,r,s,i){const o=t.Qu(1,e,n),a=[ep(e,r,n)],u=[s];if(i.length%2!=0)throw new Q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)a.push(ep(e,i[m])),u.push(i[m+1]);const c=[],h=Mt.empty();for(let m=a.length-1;m>=0;--m)if(!q1(c,a[m])){const y=a[m];let E=u[m];E=Qe(E);const T=o.Nu(y);if(E instanceof od)c.push(y);else{const C=go(E,T);C!=null&&(c.push(y),h.set(y,C))}}const f=new Gt(c);return new U1(h,f,o.fieldTransforms)}function go(t,e){if(W1(t=Qe(t)))return ig("Unsupported field value:",e,t),H1(t,e);if(t instanceof mo)return function(r,s){if(!B1(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let u=go(a,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Qe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Tj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=et.fromDate(r);return{timestampValue:dc(s.serializer,i)}}if(r instanceof et){const i=new et(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:dc(s.serializer,i)}}if(r instanceof Zm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof to)return{bytesValue:d1(s.serializer,r._byteString)};if(r instanceof Bt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Fm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof eg)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.Bu("VectorValues must only contain numeric values.");return Vm(a.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Xm(r)}`)}(t,e)}function H1(t,e){const n={};return UT(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Zs(t,(r,s)=>{const i=go(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function W1(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof et||t instanceof Zm||t instanceof to||t instanceof Bt||t instanceof mo||t instanceof eg)}function ig(t,e,n){if(!W1(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Xm(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function ep(t,e,n){if((e=Qe(e))instanceof sd)return e._internalPath;if(typeof e=="string")return og(t,e);throw pc("Field path arguments must be of type string or ",t,!1,void 0,n)}const DV=new RegExp("[~\\*/\\[\\]]");function og(t,e,n){if(e.search(DV)>=0)throw pc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sd(...e.split("."))._internalPath}catch{throw pc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function pc(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new Q(F.INVALID_ARGUMENT,a+t+u)}function q1(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G1{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VV(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(K1("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VV extends G1{data(){return super.data()}}function K1(t,e){return typeof e=="string"?og(t,e):e instanceof sd?e._internalPath:e._delegate._internalPath}class MV{convertValue(e,n="none"){switch(Gs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ue(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(qs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ee()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Zs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ue(o.doubleValue));return new eg(i)}convertGeoPoint(e){return new Zm(Ue(e.latitude),Ue(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Am(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(La(e));default:return null}}convertTimestamp(e){const n=rs(e);return new et(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ae.fromString(e);_e(y1(r));const s=new Fa(r.get(1),r.get(3)),i=new X(r.popFirst(5));return s.isEqual(n)||dr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q1(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OV{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Y1 extends G1{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new LV(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(K1("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class LV extends Y1{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ad(t){t=is(t,Bt);const e=is(t.firestore,ll);return TV(F1(e),t._key).then(n=>BV(e,t,n))}class FV extends MV{constructor(e){super(),this.firestore=e}convertBytes(e){return new to(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Bt(this.firestore,null,n)}}function X1(t,e,n){t=is(t,Bt);const r=is(t.firestore,ll),s=Q1(t.converter,e,n);return ag(r,[z1(tg(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,En.none())])}function J1(t,e,n,...r){t=is(t,Bt);const s=is(t.firestore,ll),i=tg(s);let o;return o=typeof(e=Qe(e))=="string"||e instanceof sd?jV(i,"updateDoc",t._key,e,n,r):NV(i,"updateDoc",t._key,e),ag(s,[o.toMutation(t._key,En.exists(!0))])}function UV(t,e){const n=is(t.firestore,ll),r=Ks(t),s=Q1(t.converter,e);return ag(n,[z1(tg(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,En.exists(!1))]).then(()=>r)}function ag(t,e){return function(r,s){const i=new Qr;return r.asyncQueue.enqueueAndForget(async()=>cV(await wV(r),s,i)),i.promise}(F1(t),e)}function BV(t,e,n){const r=n.docs.get(e._key),s=new FV(t);return new Y1(t,s,e._key,r,new OV(n.hasPendingWrites,n.fromCache),e.converter)}function Tu(){return new ng("serverTimestamp")}function zV(...t){return new rg("arrayUnion",t)}function $V(...t){return new sg("arrayRemove",t)}(function(e,n=!0){(function(s){ho=s})(Js),zs(new ts("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new ll(new FN(r.getProvider("auth-internal")),new $N(r.getProvider("app-check-internal")),function(c,h){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fa(c.options.projectId,h)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Rn(I0,"4.7.3",e),Rn(I0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z1="firebasestorage.googleapis.com",HV="storageBucket",WV=2*60*1e3,qV=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends Fn{constructor(e,n,r=0){super(vh(e),`Firebase Storage: ${n} (${vh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Bn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return vh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ln;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ln||(Ln={}));function vh(t){return"storage/"+t}function GV(){const t="An unknown error occurred, please check the error payload for server response.";return new Bn(Ln.UNKNOWN,t)}function KV(){return new Bn(Ln.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function QV(){return new Bn(Ln.CANCELED,"User canceled the upload/download.")}function YV(t){return new Bn(Ln.INVALID_URL,"Invalid URL '"+t+"'.")}function XV(t){return new Bn(Ln.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function a_(t){return new Bn(Ln.INVALID_ARGUMENT,t)}function eS(){return new Bn(Ln.APP_DELETED,"The Firebase app was deleted.")}function JV(t){return new Bn(Ln.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=vn.makeFromUrl(e,n)}catch{return new vn(e,"")}if(r.path==="")return r;throw XV(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(b){b.path.charAt(b.path.length-1)==="/"&&(b.path_=b.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(b){b.path_=decodeURIComponent(b.path)}const h="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",y=new RegExp(`^https?://${f}/${h}/b/${s}/o${m}`,"i"),E={bucket:1,path:3},T=n===Z1?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",w=new RegExp(`^https?://${T}/${s}/${C}`,"i"),x=[{regex:a,indices:u,postModify:i},{regex:y,indices:E,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let b=0;b<x.length;b++){const D=x[b],M=D.regex.exec(e);if(M){const I=M[D.indices.bucket];let _=M[D.indices.path];_||(_=""),r=new vn(I,_),D.postModify(r);break}}if(r==null)throw YV(e);return r}}class ZV{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eM(t,e,n){let r=1,s=null,i=null,o=!1,a=0;function u(){return a===2}let c=!1;function h(...C){c||(c=!0,e.apply(null,C))}function f(C){s=setTimeout(()=>{s=null,t(y,u())},C)}function m(){i&&clearTimeout(i)}function y(C,...w){if(c){m();return}if(C){m(),h.call(null,C,...w);return}if(u()||o){m(),h.call(null,C,...w);return}r<64&&(r*=2);let x;a===1?(a=2,x=0):x=(r+Math.random())*1e3,f(x)}let E=!1;function T(C){E||(E=!0,m(),!c&&(s!==null?(C||(a=2),clearTimeout(s),f(0)):C||(a=1)))}return f(0),i=setTimeout(()=>{o=!0,T(!0)},n),T}function tM(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t){return t!==void 0}function l_(t,e,n,r){if(r<e)throw a_(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw a_(`Invalid value for '${t}'. Expected ${n} or less.`)}function rM(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var mc;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(mc||(mc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sM(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n,r,s,i,o,a,u,c,h,f,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=h,this.connectionFactory_=f,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((y,E)=>{this.resolve_=y,this.reject_=E,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Jl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===mc.NO_ERROR,u=i.getStatus();if(!a||sM(u,this.additionalRetryCodes_)&&this.retry){const h=i.getErrorCode()===mc.ABORT;r(!1,new Jl(!1,null,h));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new Jl(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());nM(u)?i(u):i()}catch(u){o(u)}else if(a!==null){const u=GV();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(s.canceled){const u=this.appDelete_?eS():QV();o(u)}else{const u=KV();o(u)}};this.canceled_?n(!1,new Jl(!1,null,!0)):this.backoffId_=eM(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&tM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Jl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function oM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function aM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function lM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function uM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function cM(t,e,n,r,s,i,o=!0){const a=rM(t.urlParams),u=t.url+a,c=Object.assign({},t.headers);return lM(c,e),oM(c,n),aM(c,i),uM(c,r),new iM(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function hM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n){this._service=e,n instanceof vn?this._location=n:this._location=vn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new gc(e,n)}get root(){const e=new vn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hM(this._location.path)}get storage(){return this._service}get parent(){const e=dM(this._location.path);if(e===null)return null;const n=new vn(this._location.bucket,e);return new gc(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw JV(e)}}function u_(t,e){const n=e==null?void 0:e[HV];return n==null?null:vn.makeFromBucketSpec(n,t)}function fM(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:WE(s,t.app.options.projectId))}class pM{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Z1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WV,this._maxUploadRetryTime=qV,this._requests=new Set,s!=null?this._bucket=vn.makeFromBucketSpec(s,this._host):this._bucket=u_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=vn.makeFromBucketSpec(this._url,e):this._bucket=u_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){l_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){l_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new gc(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new ZV(eS());{const o=cM(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const c_="@firebase/storage",d_="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tS="storage";function mM(t=mm(),e){t=Qe(t);const r=$c(t,tS).getImmediate({identifier:e}),s=zE("storage");return s&&gM(r,...s),r}function gM(t,e,n,r={}){fM(t,e,n,r)}function yM(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new pM(n,r,s,e,Js)}function vM(){zs(new ts(tS,yM,"PUBLIC").setMultipleInstances(!0)),Rn(c_,d_,""),Rn(c_,d_,"esm2017")}vM();const _M={apiKey:"AIzaSyC2kTYKi-JwDxh7MH2Kdzp1blvWdvMb-4w",authDomain:"valentine-6ccc1.firebaseapp.com",projectId:"valentine-6ccc1",storageBucket:"valentine-6ccc1.appspot.com",messagingSenderId:"160547094369",appId:"1:160547094369:web:4171314829d38c8b5c4f20"},lg=KE(_M),_s=VN(lg),xM=new Kn,Qs=CV(lg);mM(lg);const nS=R.createContext();function zn(){return R.useContext(nS)}function wM({children:t}){const[e,n]=R.useState(null),[r,s]=R.useState(!0);async function i(y,E={}){if(!y)return;const T=Ks(Qs,"users",y.uid);(await ad(T)).exists()?await J1(T,{email:y.email||null,displayName:y.displayName||null,photoURL:y.photoURL||null,lastLoginAt:Tu(),...E}):await X1(T,{uid:y.uid,email:y.email||null,displayName:y.displayName||null,photoURL:y.photoURL||null,createdAt:Tu(),lastLoginAt:Tu(),...E})}function o(y,E,T){return g2(_s,y,E).then(async C=>{if(T!=null&&T.displayName)try{await xT(C.user,{displayName:T.displayName})}catch{}return await i(C.user,T),C})}function a(y,E){return y2(_s,y,E).then(async T=>(await i(T.user),T))}function u(){return H2(_s,xM).then(async y=>(await i(y.user),y))}function c(){return S2(_s)}function h(y){return m2(_s,y)}function f(y){return _2(_s,y)}R.useEffect(()=>T2(_s,E=>{n(E),s(!1)}),[]);const m={currentUser:e,login:a,signup:o,loginWithGoogle:u,logout:c,resetPassword:h,getSignInMethods:f};return d.jsx(nS.Provider,{value:m,children:!r&&t})}const rS=R.createContext();function ul(){return R.useContext(rS)}function EM({children:t}){const{currentUser:e}=zn(),n=R.useRef(!1),[r,s]=R.useState(()=>{try{const E=e?`cart_${e.uid}`:"cart_guest",T=localStorage.getItem(E);return T?JSON.parse(T):[]}catch{return[]}}),i=E=>E?`cart_${E.uid}`:"cart_guest",o=E=>{try{const T=localStorage.getItem(i(E));s(T?JSON.parse(T):[])}catch(T){console.error("Failed to load cart from local storage",T),s([])}};R.useEffect(()=>{o(e),n.current=!!e},[e]),R.useEffect(()=>{try{localStorage.setItem(i(e),JSON.stringify(r))}catch(E){console.error("Failed to save cart to local storage",E)}},[r,e]);function a(E,T=1,C=""){s(w=>{const v=w.findIndex(x=>x.id===E.id&&x.customText===C);if(v>-1){const x=[...w];return x[v].quantity+=T,x}else return[...w,{...E,quantity:T,customText:C}]})}function u(E,T=""){s(C=>C.filter(w=>!(w.id===E&&w.customText===T)))}function c(E,T,C){C<1||s(w=>w.map(v=>v.id===E&&v.customText===T?{...v,quantity:C}:v))}function h(){s([])}const f=r.reduce((E,T)=>E+T.quantity,0),m=r.reduce((E,T)=>E+T.price*T.quantity,0),y={cartItems:r,addToCart:a,removeFromCart:u,updateQuantity:c,clearCart:h,cartCount:f,cartTotal:m};return d.jsx(rS.Provider,{value:y,children:t})}/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SM=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),xe=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:u,...c},h)=>R.createElement("svg",{ref:h,...TM,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${SM(t)}`,a].join(" "),...c},[...e.map(([f,m])=>R.createElement(f,m)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IM=xe("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sS=xe("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PM=xe("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _h=xe("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CM=xe("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iS=xe("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bM=xe("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kM=xe("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oS=xe("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AM=xe("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=xe("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aS=xe("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RM=xe("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NM=xe("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=xe("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DM=xe("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=xe("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MM=xe("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OM=xe("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LM=xe("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ug=xe("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=xe("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=xe("SmilePlus",[["path",{d:"M22 11v1a10 10 0 1 1-9-10",key:"ew0xw9"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}],["path",{d:"M16 5h6",key:"1vod17"}],["path",{d:"M19 2v6",key:"4bpg5p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UM=xe("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lS=xe("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uS=xe("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=xe("Twitter",[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=xe("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=xe("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),cS=R.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),ld=R.createContext({}),ud=R.createContext(null),cd=typeof document<"u",dg=cd?R.useLayoutEffect:R.useEffect,dS=R.createContext({strict:!1}),hg=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),HM="framerAppearId",hS="data-"+hg(HM);function WM(t,e,n,r){const{visualElement:s}=R.useContext(ld),i=R.useContext(dS),o=R.useContext(ud),a=R.useContext(cS).reducedMotion,u=R.useRef();r=r||i.renderer,!u.current&&r&&(u.current=r(t,{visualState:e,parent:s,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:a}));const c=u.current;R.useInsertionEffect(()=>{c&&c.update(n,o)});const h=R.useRef(!!(n[hS]&&!window.HandoffComplete));return dg(()=>{c&&(c.render(),h.current&&c.animationState&&c.animationState.animateChanges())}),R.useEffect(()=>{c&&(c.updateFeatures(),!h.current&&c.animationState&&c.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),c}function Ti(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function qM(t,e,n){return R.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Ti(n)&&(n.current=r))},[e])}function za(t){return typeof t=="string"||Array.isArray(t)}function dd(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const fg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pg=["initial",...fg];function hd(t){return dd(t.animate)||pg.some(e=>za(t[e]))}function fS(t){return!!(hd(t)||t.variants)}function GM(t,e){if(hd(t)){const{initial:n,animate:r}=t;return{initial:n===!1||za(n)?n:void 0,animate:za(r)?r:void 0}}return t.inherit!==!1?e:{}}function KM(t){const{initial:e,animate:n}=GM(t,R.useContext(ld));return R.useMemo(()=>({initial:e,animate:n}),[h_(e),h_(n)])}function h_(t){return Array.isArray(t)?t.join(" "):t}const f_={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},$a={};for(const t in f_)$a[t]={isEnabled:e=>f_[t].some(n=>!!e[n])};function QM(t){for(const e in t)$a[e]={...$a[e],...t[e]}}const mg=R.createContext({}),pS=R.createContext({}),YM=Symbol.for("motionComponentSymbol");function XM({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&QM(t);function i(a,u){let c;const h={...R.useContext(cS),...a,layoutId:JM(a)},{isStatic:f}=h,m=KM(a),y=r(a,f);if(!f&&cd){m.visualElement=WM(s,y,h,e);const E=R.useContext(pS),T=R.useContext(dS).strict;m.visualElement&&(c=m.visualElement.loadFeatures(h,T,t,E))}return R.createElement(ld.Provider,{value:m},c&&m.visualElement?R.createElement(c,{visualElement:m.visualElement,...h}):null,n(s,a,qM(y,m.visualElement,u),y,f,m.visualElement))}const o=R.forwardRef(i);return o[YM]=s,o}function JM({layoutId:t}){const e=R.useContext(mg).id;return e&&t!==void 0?e+"-"+t:t}function ZM(t){function e(r,s={}){return XM(t(r,s))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(r,s)=>(n.has(s)||n.set(s,e(s)),n.get(s))})}const eO=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function gg(t){return typeof t!="string"||t.includes("-")?!1:!!(eO.indexOf(t)>-1||/[A-Z]/.test(t))}const yc={};function tO(t){Object.assign(yc,t)}const cl=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ti=new Set(cl);function mS(t,{layout:e,layoutId:n}){return ti.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!yc[t]||t==="opacity")}const zt=t=>!!(t&&t.getVelocity),nO={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rO=cl.length;function sO(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},r,s){let i="";for(let o=0;o<rO;o++){const a=cl[o];if(t[a]!==void 0){const u=nO[a]||a;i+=`${u}(${t[a]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(t,r?"":i):n&&r&&(i="none"),i}const gS=t=>e=>typeof e=="string"&&e.startsWith(t),yS=gS("--"),tp=gS("var(--"),iO=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,oO=(t,e)=>e&&typeof t=="number"?e.transform(t):t,os=(t,e,n)=>Math.min(Math.max(n,t),e),ni={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},da={...ni,transform:t=>os(0,1,t)},Zl={...ni,default:1},ha=t=>Math.round(t*1e5)/1e5,fd=/(-)?([\d]*\.?[\d])+/g,vS=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,aO=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function dl(t){return typeof t=="string"}const hl=t=>({test:e=>dl(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Sr=hl("deg"),Vn=hl("%"),J=hl("px"),lO=hl("vh"),uO=hl("vw"),p_={...Vn,parse:t=>Vn.parse(t)/100,transform:t=>Vn.transform(t*100)},m_={...ni,transform:Math.round},_S={borderWidth:J,borderTopWidth:J,borderRightWidth:J,borderBottomWidth:J,borderLeftWidth:J,borderRadius:J,radius:J,borderTopLeftRadius:J,borderTopRightRadius:J,borderBottomRightRadius:J,borderBottomLeftRadius:J,width:J,maxWidth:J,height:J,maxHeight:J,size:J,top:J,right:J,bottom:J,left:J,padding:J,paddingTop:J,paddingRight:J,paddingBottom:J,paddingLeft:J,margin:J,marginTop:J,marginRight:J,marginBottom:J,marginLeft:J,rotate:Sr,rotateX:Sr,rotateY:Sr,rotateZ:Sr,scale:Zl,scaleX:Zl,scaleY:Zl,scaleZ:Zl,skew:Sr,skewX:Sr,skewY:Sr,distance:J,translateX:J,translateY:J,translateZ:J,x:J,y:J,z:J,perspective:J,transformPerspective:J,opacity:da,originX:p_,originY:p_,originZ:J,zIndex:m_,fillOpacity:da,strokeOpacity:da,numOctaves:m_};function yg(t,e,n,r){const{style:s,vars:i,transform:o,transformOrigin:a}=t;let u=!1,c=!1,h=!0;for(const f in e){const m=e[f];if(yS(f)){i[f]=m;continue}const y=_S[f],E=oO(m,y);if(ti.has(f)){if(u=!0,o[f]=E,!h)continue;m!==(y.default||0)&&(h=!1)}else f.startsWith("origin")?(c=!0,a[f]=E):s[f]=E}if(e.transform||(u||r?s.transform=sO(t.transform,n,h,r):s.transform&&(s.transform="none")),c){const{originX:f="50%",originY:m="50%",originZ:y=0}=a;s.transformOrigin=`${f} ${m} ${y}`}}const vg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xS(t,e,n){for(const r in e)!zt(e[r])&&!mS(r,n)&&(t[r]=e[r])}function cO({transformTemplate:t},e,n){return R.useMemo(()=>{const r=vg();return yg(r,e,{enableHardwareAcceleration:!n},t),Object.assign({},r.vars,r.style)},[e])}function dO(t,e,n){const r=t.style||{},s={};return xS(s,r,t),Object.assign(s,cO(t,e,n)),t.transformValues?t.transformValues(s):s}function hO(t,e,n){const r={},s=dO(t,e,n);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=s,r}const fO=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function vc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||fO.has(t)}let wS=t=>!vc(t);function pO(t){t&&(wS=e=>e.startsWith("on")?!vc(e):t(e))}try{pO(require("@emotion/is-prop-valid").default)}catch{}function mO(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(wS(s)||n===!0&&vc(s)||!e&&!vc(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function g_(t,e,n){return typeof t=="string"?t:J.transform(e+n*t)}function gO(t,e,n){const r=g_(e,t.x,t.width),s=g_(n,t.y,t.height);return`${r} ${s}`}const yO={offset:"stroke-dashoffset",array:"stroke-dasharray"},vO={offset:"strokeDashoffset",array:"strokeDasharray"};function _O(t,e,n=1,r=0,s=!0){t.pathLength=1;const i=s?yO:vO;t[i.offset]=J.transform(-r);const o=J.transform(e),a=J.transform(n);t[i.array]=`${o} ${a}`}function _g(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:i,pathLength:o,pathSpacing:a=1,pathOffset:u=0,...c},h,f,m){if(yg(t,c,h,m),f){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:E,dimensions:T}=t;y.transform&&(T&&(E.transform=y.transform),delete y.transform),T&&(s!==void 0||i!==void 0||E.transform)&&(E.transformOrigin=gO(T,s!==void 0?s:.5,i!==void 0?i:.5)),e!==void 0&&(y.x=e),n!==void 0&&(y.y=n),r!==void 0&&(y.scale=r),o!==void 0&&_O(y,o,a,u,!1)}const ES=()=>({...vg(),attrs:{}}),xg=t=>typeof t=="string"&&t.toLowerCase()==="svg";function xO(t,e,n,r){const s=R.useMemo(()=>{const i=ES();return _g(i,e,{enableHardwareAcceleration:!1},xg(r),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};xS(i,t.style,t),s.style={...i,...s.style}}return s}function wO(t=!1){return(n,r,s,{latestValues:i},o)=>{const u=(gg(n)?xO:hO)(r,i,o,n),h={...mO(r,typeof n=="string",t),...u,ref:s},{children:f}=r,m=R.useMemo(()=>zt(f)?f.get():f,[f]);return R.createElement(n,{...h,children:m})}}function TS(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const i in n)t.style.setProperty(i,n[i])}const SS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function IS(t,e,n,r){TS(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(SS.has(s)?s:hg(s),e.attrs[s])}function wg(t,e){const{style:n}=t,r={};for(const s in n)(zt(n[s])||e.style&&zt(e.style[s])||mS(s,t))&&(r[s]=n[s]);return r}function PS(t,e){const n=wg(t,e);for(const r in t)if(zt(t[r])||zt(e[r])){const s=cl.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;n[s]=t[r]}return n}function Eg(t,e,n,r={},s={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,r,s)),e}function CS(t){const e=R.useRef(null);return e.current===null&&(e.current=t()),e.current}const _c=t=>Array.isArray(t),EO=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),TO=t=>_c(t)?t[t.length-1]||0:t;function Su(t){const e=zt(t)?t.get():t;return EO(e)?e.toValue():e}function SO({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,i){const o={latestValues:IO(r,s,i,t),renderState:e()};return n&&(o.mount=a=>n(r,a,o)),o}const bS=t=>(e,n)=>{const r=R.useContext(ld),s=R.useContext(ud),i=()=>SO(t,e,r,s);return n?i():CS(i)};function IO(t,e,n,r){const s={},i=r(t,{});for(const m in i)s[m]=Su(i[m]);let{initial:o,animate:a}=t;const u=hd(t),c=fS(t);e&&c&&!u&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const f=h?a:o;return f&&typeof f!="boolean"&&!dd(f)&&(Array.isArray(f)?f:[f]).forEach(y=>{const E=Eg(t,y);if(!E)return;const{transitionEnd:T,transition:C,...w}=E;for(const v in w){let x=w[v];if(Array.isArray(x)){const b=h?x.length-1:0;x=x[b]}x!==null&&(s[v]=x)}for(const v in T)s[v]=T[v]}),s}const ze=t=>t;class y_{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function PO(t){let e=new y_,n=new y_,r=0,s=!1,i=!1;const o=new WeakSet,a={schedule:(u,c=!1,h=!1)=>{const f=h&&s,m=f?e:n;return c&&o.add(u),m.add(u)&&f&&s&&(r=e.order.length),u},cancel:u=>{n.remove(u),o.delete(u)},process:u=>{if(s){i=!0;return}if(s=!0,[e,n]=[n,e],n.clear(),r=e.order.length,r)for(let c=0;c<r;c++){const h=e.order[c];h(u),o.has(h)&&(a.schedule(h),t())}s=!1,i&&(i=!1,a.process(u))}};return a}const eu=["prepare","read","update","preRender","render","postRender"],CO=40;function bO(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=eu.reduce((f,m)=>(f[m]=PO(()=>n=!0),f),{}),o=f=>i[f].process(s),a=()=>{const f=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(f-s.timestamp,CO),1),s.timestamp=f,s.isProcessing=!0,eu.forEach(o),s.isProcessing=!1,n&&e&&(r=!1,t(a))},u=()=>{n=!0,r=!0,s.isProcessing||t(a)};return{schedule:eu.reduce((f,m)=>{const y=i[m];return f[m]=(E,T=!1,C=!1)=>(n||u(),y.schedule(E,T,C)),f},{}),cancel:f=>eu.forEach(m=>i[m].cancel(f)),state:s,steps:i}}const{schedule:Se,cancel:fr,state:wt,steps:xh}=bO(typeof requestAnimationFrame<"u"?requestAnimationFrame:ze,!0),kO={useVisualState:bS({scrapeMotionValuesFromProps:PS,createRenderState:ES,onMount:(t,e,{renderState:n,latestValues:r})=>{Se.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Se.render(()=>{_g(n,r,{enableHardwareAcceleration:!1},xg(e.tagName),t.transformTemplate),IS(e,n)})}})},AO={useVisualState:bS({scrapeMotionValuesFromProps:wg,createRenderState:vg})};function RO(t,{forwardMotionProps:e=!1},n,r){return{...gg(t)?kO:AO,preloadedFeatures:n,useRender:wO(e),createVisualElement:r,Component:t}}function er(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}const kS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function pd(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const NO=t=>e=>kS(e)&&t(e,pd(e));function rr(t,e,n,r){return er(t,e,NO(n),r)}const jO=(t,e)=>n=>e(t(n)),Xr=(...t)=>t.reduce(jO);function AS(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const v_=AS("dragHorizontal"),__=AS("dragVertical");function RS(t){let e=!1;if(t==="y")e=__();else if(t==="x")e=v_();else{const n=v_(),r=__();n&&r?e=()=>{n(),r()}:(n&&n(),r&&r())}return e}function NS(){const t=RS(!0);return t?(t(),!1):!0}class ps{constructor(e){this.isMounted=!1,this.node=e}update(){}}function x_(t,e){const n="pointer"+(e?"enter":"leave"),r="onHover"+(e?"Start":"End"),s=(i,o)=>{if(i.pointerType==="touch"||NS())return;const a=t.getProps();t.animationState&&a.whileHover&&t.animationState.setActive("whileHover",e),a[r]&&Se.update(()=>a[r](i,o))};return rr(t.current,n,s,{passive:!t.getProps()[r]})}class DO extends ps{mount(){this.unmount=Xr(x_(this.node,!0),x_(this.node,!1))}unmount(){}}class VO extends ps{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xr(er(this.node.current,"focus",()=>this.onFocus()),er(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const jS=(t,e)=>e?t===e?!0:jS(t,e.parentElement):!1;function wh(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,pd(n))}class MO extends ps{constructor(){super(...arguments),this.removeStartListeners=ze,this.removeEndListeners=ze,this.removeAccessibleListeners=ze,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),i=rr(window,"pointerup",(a,u)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:h,globalTapTarget:f}=this.node.getProps();Se.update(()=>{!f&&!jS(this.node.current,a.target)?h&&h(a,u):c&&c(a,u)})},{passive:!(r.onTap||r.onPointerUp)}),o=rr(window,"pointercancel",(a,u)=>this.cancelPress(a,u),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=Xr(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||wh("up",(u,c)=>{const{onTap:h}=this.node.getProps();h&&Se.update(()=>h(u,c))})};this.removeEndListeners(),this.removeEndListeners=er(this.node.current,"keyup",o),wh("down",(a,u)=>{this.startPress(a,u)})},n=er(this.node.current,"keydown",e),r=()=>{this.isPressing&&wh("cancel",(i,o)=>this.cancelPress(i,o))},s=er(this.node.current,"blur",r);this.removeAccessibleListeners=Xr(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Se.update(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!NS()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&Se.update(()=>r(e,n))}mount(){const e=this.node.getProps(),n=rr(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=er(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Xr(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const np=new WeakMap,Eh=new WeakMap,OO=t=>{const e=np.get(t.target);e&&e(t)},LO=t=>{t.forEach(OO)};function FO({root:t,...e}){const n=t||document;Eh.has(n)||Eh.set(n,{});const r=Eh.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(LO,{root:t,...e})),r[s]}function UO(t,e,n){const r=FO(e);return np.set(t,n),r.observe(t),()=>{np.delete(t),r.unobserve(t)}}const BO={some:0,all:1};class zO extends ps{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:BO[s]},a=u=>{const{isIntersecting:c}=u;if(this.isInView===c||(this.isInView=c,i&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:h,onViewportLeave:f}=this.node.getProps(),m=c?h:f;m&&m(u)};return UO(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some($O(e,n))&&this.startObserver()}unmount(){}}function $O({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const HO={inView:{Feature:zO},tap:{Feature:MO},focus:{Feature:VO},hover:{Feature:DO}};function DS(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function WO(t){const e={};return t.values.forEach((n,r)=>e[r]=n.get()),e}function qO(t){const e={};return t.values.forEach((n,r)=>e[r]=n.getVelocity()),e}function md(t,e,n){const r=t.getProps();return Eg(r,e,n!==void 0?n:r.custom,WO(t),qO(t))}let Tg=ze;const Ms=t=>t*1e3,sr=t=>t/1e3,GO={current:!1},VS=t=>Array.isArray(t)&&typeof t[0]=="number";function MS(t){return!!(!t||typeof t=="string"&&OS[t]||VS(t)||Array.isArray(t)&&t.every(MS))}const Yo=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,OS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Yo([0,.65,.55,1]),circOut:Yo([.55,0,1,.45]),backIn:Yo([.31,.01,.66,-.59]),backOut:Yo([.33,1.53,.69,.99])};function LS(t){if(t)return VS(t)?Yo(t):Array.isArray(t)?t.map(LS):OS[t]}function KO(t,e,n,{delay:r=0,duration:s,repeat:i=0,repeatType:o="loop",ease:a,times:u}={}){const c={[e]:n};u&&(c.offset=u);const h=LS(a);return Array.isArray(h)&&(c.easing=h),t.animate(c,{delay:r,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function QO(t,{repeat:e,repeatType:n="loop"}){const r=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[r]}const FS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,YO=1e-7,XO=12;function JO(t,e,n,r,s){let i,o,a=0;do o=e+(n-e)/2,i=FS(o,r,s)-t,i>0?n=o:e=o;while(Math.abs(i)>YO&&++a<XO);return o}function fl(t,e,n,r){if(t===e&&n===r)return ze;const s=i=>JO(i,0,1,t,n);return i=>i===0||i===1?i:FS(s(i),e,r)}const ZO=fl(.42,0,1,1),eL=fl(0,0,.58,1),US=fl(.42,0,.58,1),tL=t=>Array.isArray(t)&&typeof t[0]!="number",BS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,zS=t=>e=>1-t(1-e),Sg=t=>1-Math.sin(Math.acos(t)),$S=zS(Sg),nL=BS(Sg),HS=fl(.33,1.53,.69,.99),Ig=zS(HS),rL=BS(Ig),sL=t=>(t*=2)<1?.5*Ig(t):.5*(2-Math.pow(2,-10*(t-1))),iL={linear:ze,easeIn:ZO,easeInOut:US,easeOut:eL,circIn:Sg,circInOut:nL,circOut:$S,backIn:Ig,backInOut:rL,backOut:HS,anticipate:sL},w_=t=>{if(Array.isArray(t)){Tg(t.length===4);const[e,n,r,s]=t;return fl(e,n,r,s)}else if(typeof t=="string")return iL[t];return t},Pg=(t,e)=>n=>!!(dl(n)&&aO.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),WS=(t,e,n)=>r=>{if(!dl(r))return r;const[s,i,o,a]=r.match(fd);return{[t]:parseFloat(s),[e]:parseFloat(i),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},oL=t=>os(0,255,t),Th={...ni,transform:t=>Math.round(oL(t))},Ns={test:Pg("rgb","red"),parse:WS("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Th.transform(t)+", "+Th.transform(e)+", "+Th.transform(n)+", "+ha(da.transform(r))+")"};function aL(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const rp={test:Pg("#"),parse:aL,transform:Ns.transform},Si={test:Pg("hsl","hue"),parse:WS("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+Vn.transform(ha(e))+", "+Vn.transform(ha(n))+", "+ha(da.transform(r))+")"},At={test:t=>Ns.test(t)||rp.test(t)||Si.test(t),parse:t=>Ns.test(t)?Ns.parse(t):Si.test(t)?Si.parse(t):rp.parse(t),transform:t=>dl(t)?t:t.hasOwnProperty("red")?Ns.transform(t):Si.transform(t)},Ne=(t,e,n)=>-n*t+n*e+t;function Sh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function lL({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,i=0,o=0;if(!e)s=i=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,u=2*n-a;s=Sh(u,a,t+1/3),i=Sh(u,a,t),o=Sh(u,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:r}}const Ih=(t,e,n)=>{const r=t*t;return Math.sqrt(Math.max(0,n*(e*e-r)+r))},uL=[rp,Ns,Si],cL=t=>uL.find(e=>e.test(t));function E_(t){const e=cL(t);let n=e.parse(t);return e===Si&&(n=lL(n)),n}const qS=(t,e)=>{const n=E_(t),r=E_(e),s={...n};return i=>(s.red=Ih(n.red,r.red,i),s.green=Ih(n.green,r.green,i),s.blue=Ih(n.blue,r.blue,i),s.alpha=Ne(n.alpha,r.alpha,i),Ns.transform(s))};function dL(t){var e,n;return isNaN(t)&&dl(t)&&(((e=t.match(fd))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(vS))===null||n===void 0?void 0:n.length)||0)>0}const GS={regex:iO,countKey:"Vars",token:"${v}",parse:ze},KS={regex:vS,countKey:"Colors",token:"${c}",parse:At.parse},QS={regex:fd,countKey:"Numbers",token:"${n}",parse:ni.parse};function Ph(t,{regex:e,countKey:n,token:r,parse:s}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,r),t.values.push(...i.map(s)))}function xc(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Ph(n,GS),Ph(n,KS),Ph(n,QS),n}function YS(t){return xc(t).values}function XS(t){const{values:e,numColors:n,numVars:r,tokenised:s}=xc(t),i=e.length;return o=>{let a=s;for(let u=0;u<i;u++)u<r?a=a.replace(GS.token,o[u]):u<r+n?a=a.replace(KS.token,At.transform(o[u])):a=a.replace(QS.token,ha(o[u]));return a}}const hL=t=>typeof t=="number"?0:t;function fL(t){const e=YS(t);return XS(t)(e.map(hL))}const as={test:dL,parse:YS,createTransformer:XS,getAnimatableNone:fL},JS=(t,e)=>n=>`${n>0?e:t}`;function ZS(t,e){return typeof t=="number"?n=>Ne(t,e,n):At.test(t)?qS(t,e):t.startsWith("var(")?JS(t,e):tI(t,e)}const eI=(t,e)=>{const n=[...t],r=n.length,s=t.map((i,o)=>ZS(i,e[o]));return i=>{for(let o=0;o<r;o++)n[o]=s[o](i);return n}},pL=(t,e)=>{const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=ZS(t[s],e[s]));return s=>{for(const i in r)n[i]=r[i](s);return n}},tI=(t,e)=>{const n=as.createTransformer(e),r=xc(t),s=xc(e);return r.numVars===s.numVars&&r.numColors===s.numColors&&r.numNumbers>=s.numNumbers?Xr(eI(r.values,s.values),n):JS(t,e)},Ha=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},T_=(t,e)=>n=>Ne(t,e,n);function mL(t){return typeof t=="number"?T_:typeof t=="string"?At.test(t)?qS:tI:Array.isArray(t)?eI:typeof t=="object"?pL:T_}function gL(t,e,n){const r=[],s=n||mL(t[0]),i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const u=Array.isArray(e)?e[o]||ze:e;a=Xr(u,a)}r.push(a)}return r}function nI(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const i=t.length;if(Tg(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=gL(e,r,s),a=o.length,u=c=>{let h=0;if(a>1)for(;h<t.length-2&&!(c<t[h+1]);h++);const f=Ha(t[h],t[h+1],c);return o[h](f)};return n?c=>u(os(t[0],t[i-1],c)):u}function yL(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Ha(0,e,r);t.push(Ne(n,1,s))}}function vL(t){const e=[0];return yL(e,t.length-1),e}function _L(t,e){return t.map(n=>n*e)}function xL(t,e){return t.map(()=>e||US).splice(0,t.length-1)}function wc({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=tL(r)?r.map(w_):w_(r),i={done:!1,value:e[0]},o=_L(n&&n.length===e.length?n:vL(e),t),a=nI(o,e,{ease:Array.isArray(s)?s:xL(e,s)});return{calculatedDuration:t,next:u=>(i.value=a(u),i.done=u>=t,i)}}function rI(t,e){return e?t*(1e3/e):0}const wL=5;function sI(t,e,n){const r=Math.max(e-wL,0);return rI(n-t(r),e-r)}const Ch=.001,EL=.01,TL=10,SL=.05,IL=1;function PL({duration:t=800,bounce:e=.25,velocity:n=0,mass:r=1}){let s,i,o=1-e;o=os(SL,IL,o),t=os(EL,TL,sr(t)),o<1?(s=c=>{const h=c*o,f=h*t,m=h-n,y=sp(c,o),E=Math.exp(-f);return Ch-m/y*E},i=c=>{const f=c*o*t,m=f*n+n,y=Math.pow(o,2)*Math.pow(c,2)*t,E=Math.exp(-f),T=sp(Math.pow(c,2),o);return(-s(c)+Ch>0?-1:1)*((m-y)*E)/T}):(s=c=>{const h=Math.exp(-c*t),f=(c-n)*t+1;return-Ch+h*f},i=c=>{const h=Math.exp(-c*t),f=(n-c)*(t*t);return h*f});const a=5/t,u=bL(s,i,a);if(t=Ms(t),isNaN(u))return{stiffness:100,damping:10,duration:t};{const c=Math.pow(u,2)*r;return{stiffness:c,damping:o*2*Math.sqrt(r*c),duration:t}}}const CL=12;function bL(t,e,n){let r=n;for(let s=1;s<CL;s++)r=r-t(r)/e(r);return r}function sp(t,e){return t*Math.sqrt(1-e*e)}const kL=["duration","bounce"],AL=["stiffness","damping","mass"];function S_(t,e){return e.some(n=>t[n]!==void 0)}function RL(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!S_(t,AL)&&S_(t,kL)){const n=PL(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function iI({keyframes:t,restDelta:e,restSpeed:n,...r}){const s=t[0],i=t[t.length-1],o={done:!1,value:s},{stiffness:a,damping:u,mass:c,duration:h,velocity:f,isResolvedFromDuration:m}=RL({...r,velocity:-sr(r.velocity||0)}),y=f||0,E=u/(2*Math.sqrt(a*c)),T=i-s,C=sr(Math.sqrt(a/c)),w=Math.abs(T)<5;n||(n=w?.01:2),e||(e=w?.005:.5);let v;if(E<1){const x=sp(C,E);v=b=>{const D=Math.exp(-E*C*b);return i-D*((y+E*C*T)/x*Math.sin(x*b)+T*Math.cos(x*b))}}else if(E===1)v=x=>i-Math.exp(-C*x)*(T+(y+C*T)*x);else{const x=C*Math.sqrt(E*E-1);v=b=>{const D=Math.exp(-E*C*b),M=Math.min(x*b,300);return i-D*((y+E*C*T)*Math.sinh(M)+x*T*Math.cosh(M))/x}}return{calculatedDuration:m&&h||null,next:x=>{const b=v(x);if(m)o.done=x>=h;else{let D=y;x!==0&&(E<1?D=sI(v,x,b):D=0);const M=Math.abs(D)<=n,I=Math.abs(i-b)<=e;o.done=M&&I}return o.value=o.done?i:b,o}}}function I_({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:u,restDelta:c=.5,restSpeed:h}){const f=t[0],m={done:!1,value:f},y=_=>a!==void 0&&_<a||u!==void 0&&_>u,E=_=>a===void 0?u:u===void 0||Math.abs(a-_)<Math.abs(u-_)?a:u;let T=n*e;const C=f+T,w=o===void 0?C:o(C);w!==C&&(T=w-f);const v=_=>-T*Math.exp(-_/r),x=_=>w+v(_),b=_=>{const P=v(_),k=x(_);m.done=Math.abs(P)<=c,m.value=m.done?w:k};let D,M;const I=_=>{y(m.value)&&(D=_,M=iI({keyframes:[m.value,E(m.value)],velocity:sI(x,_,m.value),damping:s,stiffness:i,restDelta:c,restSpeed:h}))};return I(0),{calculatedDuration:null,next:_=>{let P=!1;return!M&&D===void 0&&(P=!0,b(_),I(_)),D!==void 0&&_>D?M.next(_-D):(!P&&b(_),m)}}}const NL=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Se.update(e,!0),stop:()=>fr(e),now:()=>wt.isProcessing?wt.timestamp:performance.now()}},P_=2e4;function C_(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<P_;)e+=n,r=t.next(e);return e>=P_?1/0:e}const jL={decay:I_,inertia:I_,tween:wc,keyframes:wc,spring:iI};function Ec({autoplay:t=!0,delay:e=0,driver:n=NL,keyframes:r,type:s="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:a="loop",onPlay:u,onStop:c,onComplete:h,onUpdate:f,...m}){let y=1,E=!1,T,C;const w=()=>{C=new Promise(K=>{T=K})};w();let v;const x=jL[s]||wc;let b;x!==wc&&typeof r[0]!="number"&&(b=nI([0,100],r,{clamp:!1}),r=[0,100]);const D=x({...m,keyframes:r});let M;a==="mirror"&&(M=x({...m,keyframes:[...r].reverse(),velocity:-(m.velocity||0)}));let I="idle",_=null,P=null,k=null;D.calculatedDuration===null&&i&&(D.calculatedDuration=C_(D));const{calculatedDuration:N}=D;let j=1/0,A=1/0;N!==null&&(j=N+o,A=j*(i+1)-o);let oe=0;const Ye=K=>{if(P===null)return;y>0&&(P=Math.min(P,K)),y<0&&(P=Math.min(K-A/y,P)),_!==null?oe=_:oe=Math.round(K-P)*y;const Y=oe-e*(y>=0?1:-1),de=y>=0?Y<0:Y>A;oe=Math.max(Y,0),I==="finished"&&_===null&&(oe=A);let ge=oe,we=D;if(i){const Zt=Math.min(oe,A)/j;let tt=Math.floor(Zt),ot=Zt%1;!ot&&Zt>=1&&(ot=1),ot===1&&tt--,tt=Math.min(tt,i+1),!!(tt%2)&&(a==="reverse"?(ot=1-ot,o&&(ot-=o/j)):a==="mirror"&&(we=M)),ge=os(0,1,ot)*j}const Fe=de?{done:!1,value:r[0]}:we.next(ge);b&&(Fe.value=b(Fe.value));let{done:He}=Fe;!de&&N!==null&&(He=y>=0?oe>=A:oe<=0);const dn=_===null&&(I==="finished"||I==="running"&&He);return f&&f(Fe.value),dn&&z(),Fe},ye=()=>{v&&v.stop(),v=void 0},me=()=>{I="idle",ye(),T(),w(),P=k=null},z=()=>{I="finished",h&&h(),ye(),T()},H=()=>{if(E)return;v||(v=n(Ye));const K=v.now();u&&u(),_!==null?P=K-_:(!P||I==="finished")&&(P=K),I==="finished"&&w(),k=P,_=null,I="running",v.start()};t&&H();const G={then(K,Y){return C.then(K,Y)},get time(){return sr(oe)},set time(K){K=Ms(K),oe=K,_!==null||!v||y===0?_=K:P=v.now()-K/y},get duration(){const K=D.calculatedDuration===null?C_(D):D.calculatedDuration;return sr(K)},get speed(){return y},set speed(K){K===y||!v||(y=K,G.time=sr(oe))},get state(){return I},play:H,pause:()=>{I="paused",_=oe},stop:()=>{E=!0,I!=="idle"&&(I="idle",c&&c(),me())},cancel:()=>{k!==null&&Ye(k),me()},complete:()=>{I="finished"},sample:K=>(P=0,Ye(K))};return G}function DL(t){let e;return()=>(e===void 0&&(e=t()),e)}const VL=DL(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ML=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),tu=10,OL=2e4,LL=(t,e)=>e.type==="spring"||t==="backgroundColor"||!MS(e.ease);function FL(t,e,{onUpdate:n,onComplete:r,...s}){if(!(VL()&&ML.has(e)&&!s.repeatDelay&&s.repeatType!=="mirror"&&s.damping!==0&&s.type!=="inertia"))return!1;let o=!1,a,u,c=!1;const h=()=>{u=new Promise(x=>{a=x})};h();let{keyframes:f,duration:m=300,ease:y,times:E}=s;if(LL(e,s)){const x=Ec({...s,repeat:0,delay:0});let b={done:!1,value:f[0]};const D=[];let M=0;for(;!b.done&&M<OL;)b=x.sample(M),D.push(b.value),M+=tu;E=void 0,f=D,m=M-tu,y="linear"}const T=KO(t.owner.current,e,f,{...s,duration:m,ease:y,times:E}),C=()=>{c=!1,T.cancel()},w=()=>{c=!0,Se.update(C),a(),h()};return T.onfinish=()=>{c||(t.set(QO(f,s)),r&&r(),w())},{then(x,b){return u.then(x,b)},attachTimeline(x){return T.timeline=x,T.onfinish=null,ze},get time(){return sr(T.currentTime||0)},set time(x){T.currentTime=Ms(x)},get speed(){return T.playbackRate},set speed(x){T.playbackRate=x},get duration(){return sr(m)},play:()=>{o||(T.play(),fr(C))},pause:()=>T.pause(),stop:()=>{if(o=!0,T.playState==="idle")return;const{currentTime:x}=T;if(x){const b=Ec({...s,autoplay:!1});t.setWithVelocity(b.sample(x-tu).value,b.sample(x).value,tu)}w()},complete:()=>{c||T.finish()},cancel:w}}function UL({keyframes:t,delay:e,onUpdate:n,onComplete:r}){const s=()=>(n&&n(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:ze,pause:ze,stop:ze,then:i=>(i(),Promise.resolve()),cancel:ze,complete:ze});return e?Ec({keyframes:[0,1],duration:0,delay:e,onComplete:s}):s()}const BL={type:"spring",stiffness:500,damping:25,restSpeed:10},zL=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),$L={type:"keyframes",duration:.8},HL={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},WL=(t,{keyframes:e})=>e.length>2?$L:ti.has(t)?t.startsWith("scale")?zL(e[1]):BL:HL,ip=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(as.test(e)||e==="0")&&!e.startsWith("url(")),qL=new Set(["brightness","contrast","saturate","opacity"]);function GL(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(fd)||[];if(!r)return t;const s=n.replace(r,"");let i=qL.has(e)?1:0;return r!==n&&(i*=100),e+"("+i+s+")"}const KL=/([a-z-]*)\(.*?\)/g,op={...as,getAnimatableNone:t=>{const e=t.match(KL);return e?e.map(GL).join(" "):t}},QL={..._S,color:At,backgroundColor:At,outlineColor:At,fill:At,stroke:At,borderColor:At,borderTopColor:At,borderRightColor:At,borderBottomColor:At,borderLeftColor:At,filter:op,WebkitFilter:op},Cg=t=>QL[t];function oI(t,e){let n=Cg(t);return n!==op&&(n=as),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const aI=t=>/^0[^.\s]+$/.test(t);function YL(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||aI(t)}function XL(t,e,n,r){const s=ip(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=r.from!==void 0?r.from:t.get();let a;const u=[];for(let c=0;c<i.length;c++)i[c]===null&&(i[c]=c===0?o:i[c-1]),YL(i[c])&&u.push(c),typeof i[c]=="string"&&i[c]!=="none"&&i[c]!=="0"&&(a=i[c]);if(s&&u.length&&a)for(let c=0;c<u.length;c++){const h=u[c];i[h]=oI(e,a)}return i}function JL({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:u,elapsed:c,...h}){return!!Object.keys(h).length}function bg(t,e){return t[e]||t.default||t}const ZL={skipAnimations:!1},kg=(t,e,n,r={})=>s=>{const i=bg(r,t)||{},o=i.delay||r.delay||0;let{elapsed:a=0}=r;a=a-Ms(o);const u=XL(e,t,n,i),c=u[0],h=u[u.length-1],f=ip(t,c),m=ip(t,h);let y={keyframes:u,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-a,onUpdate:E=>{e.set(E),i.onUpdate&&i.onUpdate(E)},onComplete:()=>{s(),i.onComplete&&i.onComplete()}};if(JL(i)||(y={...y,...WL(t,y)}),y.duration&&(y.duration=Ms(y.duration)),y.repeatDelay&&(y.repeatDelay=Ms(y.repeatDelay)),!f||!m||GO.current||i.type===!1||ZL.skipAnimations)return UL(y);if(!r.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const E=FL(e,t,y);if(E)return E}return Ec(y)};function Tc(t){return!!(zt(t)&&t.add)}const lI=t=>/^\-?\d*\.?\d+$/.test(t);function Ag(t,e){t.indexOf(e)===-1&&t.push(e)}function Rg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Ng{constructor(){this.subscriptions=[]}add(e){return Ag(this.subscriptions,e),()=>Rg(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const e4=t=>!isNaN(parseFloat(t));class t4{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(r,s=!0)=>{this.prev=this.current,this.current=r;const{delta:i,timestamp:o}=wt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Se.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Se.postRender(this.velocityCheck),this.velocityCheck=({timestamp:r})=>{r!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=e4(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Ng);const r=this.events[e].add(n);return e==="change"?()=>{r(),Se.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=e,this.timeDelta=r}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?rI(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function no(t,e){return new t4(t,e)}const uI=t=>e=>e.test(t),n4={test:t=>t==="auto",parse:t=>t},cI=[ni,J,Vn,Sr,uO,lO,n4],Fo=t=>cI.find(uI(t)),r4=[...cI,At,as],s4=t=>r4.find(uI(t));function i4(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,no(n))}function o4(t,e){const n=md(t,e);let{transitionEnd:r={},transition:s={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...r};for(const o in i){const a=TO(i[o]);i4(t,o,a)}}function a4(t,e,n){var r,s;const i=Object.keys(e).filter(a=>!t.hasValue(a)),o=i.length;if(o)for(let a=0;a<o;a++){const u=i[a],c=e[u];let h=null;Array.isArray(c)&&(h=c[0]),h===null&&(h=(s=(r=n[u])!==null&&r!==void 0?r:t.readValue(u))!==null&&s!==void 0?s:e[u]),h!=null&&(typeof h=="string"&&(lI(h)||aI(h))?h=parseFloat(h):!s4(h)&&as.test(c)&&(h=oI(u,c)),t.addValue(u,no(h,{owner:t})),n[u]===void 0&&(n[u]=h),h!==null&&t.setBaseTarget(u,h))}}function l4(t,e){return e?(e[t]||e.default||e).from:void 0}function u4(t,e,n){const r={};for(const s in t){const i=l4(s,e);if(i!==void 0)r[s]=i;else{const o=n.getValue(s);o&&(r[s]=o.get())}}return r}function c4({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function d4(t,e){const n=t.get();if(Array.isArray(e)){for(let r=0;r<e.length;r++)if(e[r]!==n)return!0}else return n!==e}function dI(t,e,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=t.makeTargetAnimatable(e);const u=t.getValue("willChange");r&&(i=r);const c=[],h=s&&t.animationState&&t.animationState.getState()[s];for(const f in a){const m=t.getValue(f),y=a[f];if(!m||y===void 0||h&&c4(h,f))continue;const E={delay:n,elapsed:0,...bg(i||{},f)};if(window.HandoffAppearAnimations){const w=t.getProps()[hS];if(w){const v=window.HandoffAppearAnimations(w,f,m,Se);v!==null&&(E.elapsed=v,E.isHandoff=!0)}}let T=!E.isHandoff&&!d4(m,y);if(E.type==="spring"&&(m.getVelocity()||E.velocity)&&(T=!1),m.animation&&(T=!1),T)continue;m.start(kg(f,m,y,t.shouldReduceMotion&&ti.has(f)?{type:!1}:E));const C=m.animation;Tc(u)&&(u.add(f),C.then(()=>u.remove(f))),c.push(C)}return o&&Promise.all(c).then(()=>{o&&o4(t,o)}),c}function ap(t,e,n={}){const r=md(t,e,n.custom);let{transition:s=t.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const i=r?()=>Promise.all(dI(t,r,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:c=0,staggerChildren:h,staggerDirection:f}=s;return h4(t,e,c+u,h,f,n)}:()=>Promise.resolve(),{when:a}=s;if(a){const[u,c]=a==="beforeChildren"?[i,o]:[o,i];return u().then(()=>c())}else return Promise.all([i(),o(n.delay)])}function h4(t,e,n=0,r=0,s=1,i){const o=[],a=(t.variantChildren.size-1)*r,u=s===1?(c=0)=>c*r:(c=0)=>a-c*r;return Array.from(t.variantChildren).sort(f4).forEach((c,h)=>{c.notify("AnimationStart",e),o.push(ap(c,e,{...i,delay:n+u(h)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function f4(t,e){return t.sortNodePosition(e)}function p4(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(i=>ap(t,i,n));r=Promise.all(s)}else if(typeof e=="string")r=ap(t,e,n);else{const s=typeof e=="function"?md(t,e,n.custom):e;r=Promise.all(dI(t,s,n))}return r.then(()=>t.notify("AnimationComplete",e))}const m4=[...fg].reverse(),g4=fg.length;function y4(t){return e=>Promise.all(e.map(({animation:n,options:r})=>p4(t,n,r)))}function v4(t){let e=y4(t);const n=x4();let r=!0;const s=(u,c)=>{const h=md(t,c);if(h){const{transition:f,transitionEnd:m,...y}=h;u={...u,...y,...m}}return u};function i(u){e=u(t)}function o(u,c){const h=t.getProps(),f=t.getVariantContext(!0)||{},m=[],y=new Set;let E={},T=1/0;for(let w=0;w<g4;w++){const v=m4[w],x=n[v],b=h[v]!==void 0?h[v]:f[v],D=za(b),M=v===c?x.isActive:null;M===!1&&(T=w);let I=b===f[v]&&b!==h[v]&&D;if(I&&r&&t.manuallyAnimateOnMount&&(I=!1),x.protectedKeys={...E},!x.isActive&&M===null||!b&&!x.prevProp||dd(b)||typeof b=="boolean")continue;let P=_4(x.prevProp,b)||v===c&&x.isActive&&!I&&D||w>T&&D,k=!1;const N=Array.isArray(b)?b:[b];let j=N.reduce(s,{});M===!1&&(j={});const{prevResolvedValues:A={}}=x,oe={...A,...j},Ye=ye=>{P=!0,y.has(ye)&&(k=!0,y.delete(ye)),x.needsAnimating[ye]=!0};for(const ye in oe){const me=j[ye],z=A[ye];if(E.hasOwnProperty(ye))continue;let H=!1;_c(me)&&_c(z)?H=!DS(me,z):H=me!==z,H?me!==void 0?Ye(ye):y.add(ye):me!==void 0&&y.has(ye)?Ye(ye):x.protectedKeys[ye]=!0}x.prevProp=b,x.prevResolvedValues=j,x.isActive&&(E={...E,...j}),r&&t.blockInitialAnimation&&(P=!1),P&&(!I||k)&&m.push(...N.map(ye=>({animation:ye,options:{type:v,...u}})))}if(y.size){const w={};y.forEach(v=>{const x=t.getBaseTarget(v);x!==void 0&&(w[v]=x)}),m.push({animation:w})}let C=!!m.length;return r&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(C=!1),r=!1,C?e(m):Promise.resolve()}function a(u,c,h){var f;if(n[u].isActive===c)return Promise.resolve();(f=t.variantChildren)===null||f===void 0||f.forEach(y=>{var E;return(E=y.animationState)===null||E===void 0?void 0:E.setActive(u,c)}),n[u].isActive=c;const m=o(h,u);for(const y in n)n[y].protectedKeys={};return m}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>n}}function _4(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!DS(e,t):!1}function xs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function x4(){return{animate:xs(!0),whileInView:xs(),whileHover:xs(),whileTap:xs(),whileDrag:xs(),whileFocus:xs(),exit:xs()}}class w4 extends ps{constructor(e){super(e),e.animationState||(e.animationState=v4(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),dd(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let E4=0;class T4 extends ps{constructor(){super(...arguments),this.id=E4++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:r}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const i=this.node.animationState.setActive("exit",!e,{custom:r??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const S4={animation:{Feature:w4},exit:{Feature:T4}},b_=(t,e)=>Math.abs(t-e);function I4(t,e){const n=b_(t.x,e.x),r=b_(t.y,e.y);return Math.sqrt(n**2+r**2)}class hI{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=kh(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,y=I4(f.offset,{x:0,y:0})>=3;if(!m&&!y)return;const{point:E}=f,{timestamp:T}=wt;this.history.push({...E,timestamp:T});const{onStart:C,onMove:w}=this.handlers;m||(C&&C(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),w&&w(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=bh(m,this.transformPagePoint),Se.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:y,onSessionEnd:E,resumeAnimation:T}=this.handlers;if(this.dragSnapToOrigin&&T&&T(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=kh(f.type==="pointercancel"?this.lastMoveEventInfo:bh(m,this.transformPagePoint),this.history);this.startEvent&&y&&y(f,C),E&&E(f,C)},!kS(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const o=pd(e),a=bh(o,this.transformPagePoint),{point:u}=a,{timestamp:c}=wt;this.history=[{...u,timestamp:c}];const{onSessionStart:h}=n;h&&h(e,kh(a,this.history)),this.removeListeners=Xr(rr(this.contextWindow,"pointermove",this.handlePointerMove),rr(this.contextWindow,"pointerup",this.handlePointerUp),rr(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),fr(this.updatePoint)}}function bh(t,e){return e?{point:e(t.point)}:t}function k_(t,e){return{x:t.x-e.x,y:t.y-e.y}}function kh({point:t},e){return{point:t,delta:k_(t,fI(e)),offset:k_(t,P4(e)),velocity:C4(e,.1)}}function P4(t){return t[0]}function fI(t){return t[t.length-1]}function C4(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=fI(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Ms(e)));)n--;if(!r)return{x:0,y:0};const i=sr(s.timestamp-r.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-r.x)/i,y:(s.y-r.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function Yt(t){return t.max-t.min}function lp(t,e=0,n=.01){return Math.abs(t-e)<=n}function A_(t,e,n,r=.5){t.origin=r,t.originPoint=Ne(e.min,e.max,t.origin),t.scale=Yt(n)/Yt(e),(lp(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Ne(n.min,n.max,t.origin)-t.originPoint,(lp(t.translate)||isNaN(t.translate))&&(t.translate=0)}function fa(t,e,n,r){A_(t.x,e.x,n.x,r?r.originX:void 0),A_(t.y,e.y,n.y,r?r.originY:void 0)}function R_(t,e,n){t.min=n.min+e.min,t.max=t.min+Yt(e)}function b4(t,e,n){R_(t.x,e.x,n.x),R_(t.y,e.y,n.y)}function N_(t,e,n){t.min=e.min-n.min,t.max=t.min+Yt(e)}function pa(t,e,n){N_(t.x,e.x,n.x),N_(t.y,e.y,n.y)}function k4(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Ne(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Ne(n,t,r.max):Math.min(t,n)),t}function j_(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function A4(t,{top:e,left:n,bottom:r,right:s}){return{x:j_(t.x,n,s),y:j_(t.y,e,r)}}function D_(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function R4(t,e){return{x:D_(t.x,e.x),y:D_(t.y,e.y)}}function N4(t,e){let n=.5;const r=Yt(t),s=Yt(e);return s>r?n=Ha(e.min,e.max-r,t.min):r>s&&(n=Ha(t.min,t.max-s,e.min)),os(0,1,n)}function j4(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const up=.35;function D4(t=up){return t===!1?t=0:t===!0&&(t=up),{x:V_(t,"left","right"),y:V_(t,"top","bottom")}}function V_(t,e,n){return{min:M_(t,e),max:M_(t,n)}}function M_(t,e){return typeof t=="number"?t:t[e]||0}const O_=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ii=()=>({x:O_(),y:O_()}),L_=()=>({min:0,max:0}),Ge=()=>({x:L_(),y:L_()});function nn(t){return[t("x"),t("y")]}function pI({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function V4({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function M4(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Ah(t){return t===void 0||t===1}function cp({scale:t,scaleX:e,scaleY:n}){return!Ah(t)||!Ah(e)||!Ah(n)}function Ss(t){return cp(t)||mI(t)||t.z||t.rotate||t.rotateX||t.rotateY}function mI(t){return F_(t.x)||F_(t.y)}function F_(t){return t&&t!=="0%"}function Sc(t,e,n){const r=t-n,s=e*r;return n+s}function U_(t,e,n,r,s){return s!==void 0&&(t=Sc(t,s,r)),Sc(t,n,r)+e}function dp(t,e=0,n=1,r,s){t.min=U_(t.min,e,n,r,s),t.max=U_(t.max,e,n,r,s)}function gI(t,{x:e,y:n}){dp(t.x,e.translate,e.scale,e.originPoint),dp(t.y,n.translate,n.scale,n.originPoint)}function O4(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=n[a],o=i.projectionDelta;const u=i.instance;u&&u.style&&u.style.display==="contents"||(r&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Pi(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,gI(t,o)),r&&Ss(i.latestValues)&&Pi(t,i.latestValues))}e.x=B_(e.x),e.y=B_(e.y)}function B_(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function Cr(t,e){t.min=t.min+e,t.max=t.max+e}function z_(t,e,[n,r,s]){const i=e[s]!==void 0?e[s]:.5,o=Ne(t.min,t.max,i);dp(t,e[n],e[r],o,e.scale)}const L4=["x","scaleX","originX"],F4=["y","scaleY","originY"];function Pi(t,e){z_(t.x,e,L4),z_(t.y,e,F4)}function yI(t,e){return pI(M4(t.getBoundingClientRect(),e))}function U4(t,e,n){const r=yI(t,n),{scroll:s}=e;return s&&(Cr(r.x,s.offset.x),Cr(r.y,s.offset.y)),r}const vI=({current:t})=>t?t.ownerDocument.defaultView:null,B4=new WeakMap;class z4{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ge(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(pd(h,"page").point)},i=(h,f)=>{const{drag:m,dragPropagation:y,onDragStart:E}=this.getProps();if(m&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=RS(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),nn(C=>{let w=this.getAxisMotionValue(C).get()||0;if(Vn.test(w)){const{projection:v}=this.visualElement;if(v&&v.layout){const x=v.layout.layoutBox[C];x&&(w=Yt(x)*(parseFloat(w)/100))}}this.originPoint[C]=w}),E&&Se.update(()=>E(h,f),!1,!0);const{animationState:T}=this.visualElement;T&&T.setActive("whileDrag",!0)},o=(h,f)=>{const{dragPropagation:m,dragDirectionLock:y,onDirectionLock:E,onDrag:T}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:C}=f;if(y&&this.currentDirection===null){this.currentDirection=$4(C),this.currentDirection!==null&&E&&E(this.currentDirection);return}this.updateAxis("x",f.point,C),this.updateAxis("y",f.point,C),this.visualElement.render(),T&&T(h,f)},a=(h,f)=>this.stop(h,f),u=()=>nn(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new hI(e,{onSessionStart:s,onStart:i,onMove:o,onSessionEnd:a,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:vI(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Se.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!nu(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(o=k4(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&Ti(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=A4(s.layoutBox,n):this.constraints=!1,this.elastic=D4(r),i!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&nn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=j4(s.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Ti(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=U4(r,s.root,this.visualElement.getTransformPagePoint());let o=R4(s.layout.layoutBox,i);if(n){const a=n(V4(o));this.hasMutatedConstraints=!!a,a&&(o=pI(a))}return o}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),u=this.constraints||{},c=nn(h=>{if(!nu(h,n,this.currentDirection))return;let f=u&&u[h]||{};o&&(f={min:0,max:0});const m=s?200:1e6,y=s?40:1e7,E={type:"inertia",velocity:r?e[h]:0,bounceStiffness:m,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...i,...f};return this.startAxisValueAnimation(h,E)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return r.start(kg(e,r,0,n))}stopAnimation(){nn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){nn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){nn(n=>{const{drag:r}=this.getProps();if(!nu(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(n);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[n];i.set(e[n]-Ne(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ti(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};nn(o=>{const a=this.getAxisMotionValue(o);if(a){const u=a.get();s[o]=N4({min:u,max:u},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),nn(o=>{if(!nu(o,e,null))return;const a=this.getAxisMotionValue(o),{min:u,max:c}=this.constraints[o];a.set(Ne(u,c,s[o]))})}addListeners(){if(!this.visualElement.current)return;B4.set(this.visualElement,this);const e=this.visualElement.current,n=rr(e,"pointerdown",u=>{const{drag:c,dragListener:h=!0}=this.getProps();c&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Ti(u)&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),r();const o=er(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",({delta:u,hasLayoutChanged:c})=>{this.isDragging&&c&&(nn(h=>{const f=this.getAxisMotionValue(h);f&&(this.originPoint[h]+=u[h].translate,f.set(f.get()+u[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=up,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function nu(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function $4(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class H4 extends ps{constructor(e){super(e),this.removeGroupControls=ze,this.removeListeners=ze,this.controls=new z4(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ze}unmount(){this.removeGroupControls(),this.removeListeners()}}const $_=t=>(e,n)=>{t&&Se.update(()=>t(e,n))};class W4 extends ps{constructor(){super(...arguments),this.removePointerDownListener=ze}onPointerDown(e){this.session=new hI(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:vI(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:$_(e),onStart:$_(n),onMove:r,onEnd:(i,o)=>{delete this.session,s&&Se.update(()=>s(i,o))}}}mount(){this.removePointerDownListener=rr(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function q4(){const t=R.useContext(ud);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=R.useId();return R.useEffect(()=>r(s),[]),!e&&n?[!1,()=>n&&n(s)]:[!0]}const Iu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function H_(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Uo={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(J.test(t))t=parseFloat(t);else return t;const n=H_(t,e.target.x),r=H_(t,e.target.y);return`${n}% ${r}%`}},G4={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=as.parse(t);if(s.length>5)return r;const i=as.createTransformer(t),o=typeof s[0]!="number"?1:0,a=n.x.scale*e.x,u=n.y.scale*e.y;s[0+o]/=a,s[1+o]/=u;const c=Ne(a,u,.5);return typeof s[2+o]=="number"&&(s[2+o]/=c),typeof s[3+o]=="number"&&(s[3+o]/=c),i(s)}};class K4 extends Jr.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;tO(Q4),i&&(n.group&&n.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Iu.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:i}=this.props,o=r.projection;return o&&(o.isPresent=i,s||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Se.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function _I(t){const[e,n]=q4(),r=R.useContext(mg);return Jr.createElement(K4,{...t,layoutGroup:r,switchLayoutGroup:R.useContext(pS),isPresent:e,safeToRemove:n})}const Q4={borderRadius:{...Uo,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Uo,borderTopRightRadius:Uo,borderBottomLeftRadius:Uo,borderBottomRightRadius:Uo,boxShadow:G4},xI=["TopLeft","TopRight","BottomLeft","BottomRight"],Y4=xI.length,W_=t=>typeof t=="string"?parseFloat(t):t,q_=t=>typeof t=="number"||J.test(t);function X4(t,e,n,r,s,i){s?(t.opacity=Ne(0,n.opacity!==void 0?n.opacity:1,J4(r)),t.opacityExit=Ne(e.opacity!==void 0?e.opacity:1,0,Z4(r))):i&&(t.opacity=Ne(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let o=0;o<Y4;o++){const a=`border${xI[o]}Radius`;let u=G_(e,a),c=G_(n,a);if(u===void 0&&c===void 0)continue;u||(u=0),c||(c=0),u===0||c===0||q_(u)===q_(c)?(t[a]=Math.max(Ne(W_(u),W_(c),r),0),(Vn.test(c)||Vn.test(u))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Ne(e.rotate||0,n.rotate||0,r))}function G_(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const J4=wI(0,.5,$S),Z4=wI(.5,.95,ze);function wI(t,e,n){return r=>r<t?0:r>e?1:n(Ha(t,e,r))}function K_(t,e){t.min=e.min,t.max=e.max}function tn(t,e){K_(t.x,e.x),K_(t.y,e.y)}function Q_(t,e,n,r,s){return t-=e,t=Sc(t,1/n,r),s!==void 0&&(t=Sc(t,1/s,r)),t}function eF(t,e=0,n=1,r=.5,s,i=t,o=t){if(Vn.test(e)&&(e=parseFloat(e),e=Ne(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Ne(i.min,i.max,r);t===i&&(a-=e),t.min=Q_(t.min,e,n,a,s),t.max=Q_(t.max,e,n,a,s)}function Y_(t,e,[n,r,s],i,o){eF(t,e[n],e[r],e[s],e.scale,i,o)}const tF=["x","scaleX","originX"],nF=["y","scaleY","originY"];function X_(t,e,n,r){Y_(t.x,e,tF,n?n.x:void 0,r?r.x:void 0),Y_(t.y,e,nF,n?n.y:void 0,r?r.y:void 0)}function J_(t){return t.translate===0&&t.scale===1}function EI(t){return J_(t.x)&&J_(t.y)}function rF(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function TI(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Z_(t){return Yt(t.x)/Yt(t.y)}class sF{constructor(){this.members=[]}add(e){Ag(this.members,e),e.scheduleRender()}remove(e){if(Rg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){r=i;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ex(t,e,n){let r="";const s=t.x.translate/e.x,i=t.y.translate/e.y;if((s||i)&&(r=`translate3d(${s}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:u,rotateX:c,rotateY:h}=n;u&&(r+=`rotate(${u}deg) `),c&&(r+=`rotateX(${c}deg) `),h&&(r+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,a=t.y.scale*e.y;return(o!==1||a!==1)&&(r+=`scale(${o}, ${a})`),r||"none"}const iF=(t,e)=>t.depth-e.depth;class oF{constructor(){this.children=[],this.isDirty=!1}add(e){Ag(this.children,e),this.isDirty=!0}remove(e){Rg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(iF),this.isDirty=!1,this.children.forEach(e)}}function aF(t,e){const n=performance.now(),r=({timestamp:s})=>{const i=s-n;i>=e&&(fr(r),t(i-e))};return Se.read(r,!0),()=>fr(r)}function lF(t){window.MotionDebug&&window.MotionDebug.record(t)}function uF(t){return t instanceof SVGElement&&t.tagName!=="svg"}function cF(t,e,n){const r=zt(t)?t:no(t);return r.start(kg("",r,e,n)),r.animation}const tx=["","X","Y","Z"],dF={visibility:"hidden"},nx=1e3;let hF=0;const Is={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function SI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=hF++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Is.totalNodes=Is.resolvedTargetDeltas=Is.recalculatedProjection=0,this.nodes.forEach(mF),this.nodes.forEach(xF),this.nodes.forEach(wF),this.nodes.forEach(gF),lF(Is)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new oF)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Ng),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const u=this.eventHandlers.get(o);u&&u.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=uF(o),this.instance=o;const{layoutId:u,layout:c,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||u)&&(this.isLayoutDirty=!0),t){let f;const m=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=aF(m,250),Iu.hasAnimatedSinceResize&&(Iu.hasAnimatedSinceResize=!1,this.nodes.forEach(sx))})}u&&this.root.registerSharedNode(u,this),this.options.animate!==!1&&h&&(u||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:y,layout:E})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const T=this.options.transition||h.getDefaultTransition()||PF,{onLayoutAnimationStart:C,onLayoutAnimationComplete:w}=h.getProps(),v=!this.targetLayout||!TI(this.targetLayout,E)||y,x=!m&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||x||m&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,x);const b={...bg(T,"layout"),onPlay:C,onComplete:w};(h.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b)}else m||sx(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=E})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,fr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(EF),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const f=this.path[h];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:u}=this.options;if(a===void 0&&!u)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(rx);return}this.isUpdating||this.nodes.forEach(vF),this.isUpdating=!1,this.nodes.forEach(_F),this.nodes.forEach(fF),this.nodes.forEach(pF),this.clearAllSnapshots();const a=performance.now();wt.delta=os(0,1e3/60,a-wt.timestamp),wt.timestamp=a,wt.isProcessing=!0,xh.update.process(wt),xh.preRender.process(wt),xh.render.process(wt),wt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(yF),this.sharedNodes.forEach(TF)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Se.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Se.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ge(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:r(this.instance),offset:n(this.instance)})}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform,a=this.projectionDelta&&!EI(this.projectionDelta),u=this.getTransformTemplate(),c=u?u(this.latestValues,""):void 0,h=c!==this.prevTransformTemplateValue;o&&(a||Ss(this.latestValues)||h)&&(s(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let u=this.removeElementScroll(a);return o&&(u=this.removeTransform(u)),CF(u),{animationId:this.root.animationId,measuredBox:a,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return Ge();const a=o.measureViewportBox(),{scroll:u}=this.root;return u&&(Cr(a.x,u.offset.x),Cr(a.y,u.offset.y)),a}removeElementScroll(o){const a=Ge();tn(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u],{scroll:h,options:f}=c;if(c!==this.root&&h&&f.layoutScroll){if(h.isRoot){tn(a,o);const{scroll:m}=this.root;m&&(Cr(a.x,-m.offset.x),Cr(a.y,-m.offset.y))}Cr(a.x,h.offset.x),Cr(a.y,h.offset.y)}}return a}applyTransform(o,a=!1){const u=Ge();tn(u,o);for(let c=0;c<this.path.length;c++){const h=this.path[c];!a&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Pi(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Ss(h.latestValues)&&Pi(u,h.latestValues)}return Ss(this.latestValues)&&Pi(u,this.latestValues),u}removeTransform(o){const a=Ge();tn(a,o);for(let u=0;u<this.path.length;u++){const c=this.path[u];if(!c.instance||!Ss(c.latestValues))continue;cp(c.latestValues)&&c.updateSnapshot();const h=Ge(),f=c.measurePageBox();tn(h,f),X_(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,h)}return Ss(this.latestValues)&&X_(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const u=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=u.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=u.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=u.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==u;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=wt.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),pa(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),tn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ge(),this.targetWithTransforms=Ge()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),b4(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):tn(this.target,this.layout.layoutBox),gI(this.target,this.targetDelta)):tn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ge(),this.relativeTargetOrigin=Ge(),pa(this.relativeTargetOrigin,this.target,y.target),tn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Is.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||cp(this.parent.latestValues)||mI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),u=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),u&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===wt.timestamp&&(c=!1),c)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;tn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,y=this.treeScale.y;O4(this.layoutCorrected,this.treeScale,this.path,u),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox);const{target:E}=a;if(!E){this.projectionTransform&&(this.projectionDelta=Ii(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Ii(),this.projectionDeltaWithTransform=Ii());const T=this.projectionTransform;fa(this.projectionDelta,this.layoutCorrected,E,this.latestValues),this.projectionTransform=ex(this.projectionDelta,this.treeScale),(this.projectionTransform!==T||this.treeScale.x!==m||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",E)),Is.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const a=this.getStack();a&&a.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,a=!1){const u=this.snapshot,c=u?u.latestValues:{},h={...this.latestValues},f=Ii();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Ge(),y=u?u.source:void 0,E=this.layout?this.layout.source:void 0,T=y!==E,C=this.getStack(),w=!C||C.members.length<=1,v=!!(T&&!w&&this.options.crossfade===!0&&!this.path.some(IF));this.animationProgress=0;let x;this.mixTargetDelta=b=>{const D=b/1e3;ix(f.x,o.x,D),ix(f.y,o.y,D),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(pa(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SF(this.relativeTarget,this.relativeTargetOrigin,m,D),x&&rF(this.relativeTarget,x)&&(this.isProjectionDirty=!1),x||(x=Ge()),tn(x,this.relativeTarget)),T&&(this.animationValues=h,X4(h,c,this.latestValues,D,v,w)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(fr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Se.update(()=>{Iu.hasAnimatedSinceResize=!0,this.currentAnimation=cF(0,nx,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(nx),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:u,layout:c,latestValues:h}=o;if(!(!a||!u||!c)){if(this!==o&&this.layout&&c&&II(this.options.animationType,this.layout.layoutBox,c.layoutBox)){u=this.target||Ge();const f=Yt(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+f;const m=Yt(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}tn(a,u),Pi(a,h),fa(this.projectionDeltaWithTransform,this.layoutCorrected,a,h)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new sF),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:u}={}){const c=this.getStack();c&&c.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:u}=o;if((u.rotate||u.rotateX||u.rotateY||u.rotateZ)&&(a=!0),!a)return;const c={};for(let h=0;h<tx.length;h++){const f="rotate"+tx[h];u[f]&&(c[f]=u[f],o.setStaticValue(f,0))}o.render();for(const h in c)o.setStaticValue(h,c[h]);o.scheduleRender()}getProjectionStyles(o){var a,u;if(!this.instance||this.isSVG)return;if(!this.isVisible)return dF;const c={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Su(o==null?void 0:o.pointerEvents)||"",c.transform=h?h(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const T={};return this.options.layoutId&&(T.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,T.pointerEvents=Su(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!Ss(this.latestValues)&&(T.transform=h?h({},""):"none",this.hasProjected=!1),T}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=ex(this.projectionDeltaWithTransform,this.treeScale,m),h&&(c.transform=h(m,c.transform));const{x:y,y:E}=this.projectionDelta;c.transformOrigin=`${y.origin*100}% ${E.origin*100}% 0`,f.animationValues?c.opacity=f===this?(u=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&u!==void 0?u:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const T in yc){if(m[T]===void 0)continue;const{correct:C,applyTo:w}=yc[T],v=c.transform==="none"?m[T]:C(m[T],f);if(w){const x=w.length;for(let b=0;b<x;b++)c[w[b]]=v}else c[T]=v}return this.options.layoutId&&(c.pointerEvents=f===this?Su(o==null?void 0:o.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(rx),this.root.sharedNodes.clear()}}}function fF(t){t.updateLayout()}function pF(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?nn(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],y=Yt(m);m.min=r[f].min,m.max=m.min+y}):II(i,n.layoutBox,r)&&nn(f=>{const m=o?n.measuredBox[f]:n.layoutBox[f],y=Yt(r[f]);m.max=m.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+y)});const a=Ii();fa(a,r,n.layoutBox);const u=Ii();o?fa(u,t.applyTransform(s,!0),n.measuredBox):fa(u,r,n.layoutBox);const c=!EI(a);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:y}=f;if(m&&y){const E=Ge();pa(E,n.layoutBox,m.layoutBox);const T=Ge();pa(T,r,y.layoutBox),TI(E,T)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=T,t.relativeTargetOrigin=E,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:u,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function mF(t){Is.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function gF(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function yF(t){t.clearSnapshot()}function rx(t){t.clearMeasurements()}function vF(t){t.isLayoutDirty=!1}function _F(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function sx(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function xF(t){t.resolveTargetDelta()}function wF(t){t.calcProjection()}function EF(t){t.resetRotation()}function TF(t){t.removeLeadSnapshot()}function ix(t,e,n){t.translate=Ne(e.translate,0,n),t.scale=Ne(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function ox(t,e,n,r){t.min=Ne(e.min,n.min,r),t.max=Ne(e.max,n.max,r)}function SF(t,e,n,r){ox(t.x,e.x,n.x,r),ox(t.y,e.y,n.y,r)}function IF(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const PF={duration:.45,ease:[.4,0,.1,1]},ax=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),lx=ax("applewebkit/")&&!ax("chrome/")?Math.round:ze;function ux(t){t.min=lx(t.min),t.max=lx(t.max)}function CF(t){ux(t.x),ux(t.y)}function II(t,e,n){return t==="position"||t==="preserve-aspect"&&!lp(Z_(e),Z_(n),.2)}const bF=SI({attachResizeListener:(t,e)=>er(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Rh={current:void 0},PI=SI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Rh.current){const t=new bF({});t.mount(window),t.setOptions({layoutScroll:!0}),Rh.current=t}return Rh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),kF={pan:{Feature:W4},drag:{Feature:H4,ProjectionNode:PI,MeasureLayout:_I}},AF=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function RF(t){const e=AF.exec(t);if(!e)return[,];const[,n,r]=e;return[n,r]}function hp(t,e,n=1){const[r,s]=RF(t);if(!r)return;const i=window.getComputedStyle(e).getPropertyValue(r);if(i){const o=i.trim();return lI(o)?parseFloat(o):o}else return tp(s)?hp(s,e,n+1):s}function NF(t,{...e},n){const r=t.current;if(!(r instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(s=>{const i=s.get();if(!tp(i))return;const o=hp(i,r);o&&s.set(o)});for(const s in e){const i=e[s];if(!tp(i))continue;const o=hp(i,r);o&&(e[s]=o,n||(n={}),n[s]===void 0&&(n[s]=i))}return{target:e,transitionEnd:n}}const jF=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),CI=t=>jF.has(t),DF=t=>Object.keys(t).some(CI),cx=t=>t===ni||t===J,dx=(t,e)=>parseFloat(t.split(", ")[e]),hx=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/);if(s)return dx(s[1],e);{const i=r.match(/^matrix\((.+)\)$/);return i?dx(i[1],t):0}},VF=new Set(["x","y","z"]),MF=cl.filter(t=>!VF.has(t));function OF(t){const e=[];return MF.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const ro={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:hx(4,13),y:hx(5,14)};ro.translateX=ro.x;ro.translateY=ro.y;const LF=(t,e,n)=>{const r=e.measureViewportBox(),s=e.current,i=getComputedStyle(s),{display:o}=i,a={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(c=>{a[c]=ro[c](r,i)}),e.render();const u=e.measureViewportBox();return n.forEach(c=>{const h=e.getValue(c);h&&h.jump(a[c]),t[c]=ro[c](u,i)}),t},FF=(t,e,n={},r={})=>{e={...e},r={...r};const s=Object.keys(e).filter(CI);let i=[],o=!1;const a=[];if(s.forEach(u=>{const c=t.getValue(u);if(!t.hasValue(u))return;let h=n[u],f=Fo(h);const m=e[u];let y;if(_c(m)){const E=m.length,T=m[0]===null?1:0;h=m[T],f=Fo(h);for(let C=T;C<E&&m[C]!==null;C++)y?Tg(Fo(m[C])===y):y=Fo(m[C])}else y=Fo(m);if(f!==y)if(cx(f)&&cx(y)){const E=c.get();typeof E=="string"&&c.set(parseFloat(E)),typeof m=="string"?e[u]=parseFloat(m):Array.isArray(m)&&y===J&&(e[u]=m.map(parseFloat))}else f!=null&&f.transform&&(y!=null&&y.transform)&&(h===0||m===0)?h===0?c.set(y.transform(h)):e[u]=f.transform(m):(o||(i=OF(t),o=!0),a.push(u),r[u]=r[u]!==void 0?r[u]:e[u],c.jump(m))}),a.length){const u=a.indexOf("height")>=0?window.pageYOffset:null,c=LF(e,t,a);return i.length&&i.forEach(([h,f])=>{t.getValue(h).set(f)}),t.render(),cd&&u!==null&&window.scrollTo({top:u}),{target:c,transitionEnd:r}}else return{target:e,transitionEnd:r}};function UF(t,e,n,r){return DF(e)?FF(t,e,n,r):{target:e,transitionEnd:r}}const BF=(t,e,n,r)=>{const s=NF(t,e,r);return e=s.target,r=s.transitionEnd,UF(t,e,n,r)},fp={current:null},bI={current:!1};function zF(){if(bI.current=!0,!!cd)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>fp.current=t.matches;t.addListener(e),e()}else fp.current=!1}function $F(t,e,n){const{willChange:r}=e;for(const s in e){const i=e[s],o=n[s];if(zt(i))t.addValue(s,i),Tc(r)&&r.add(s);else if(zt(o))t.addValue(s,no(i,{owner:t})),Tc(r)&&r.remove(s);else if(o!==i)if(t.hasValue(s)){const a=t.getValue(s);!a.hasAnimated&&a.set(i)}else{const a=t.getStaticValue(s);t.addValue(s,no(a!==void 0?a:i,{owner:t}))}}for(const s in n)e[s]===void 0&&t.removeValue(s);return e}const fx=new WeakMap,kI=Object.keys($a),HF=kI.length,px=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],WF=pg.length;class qF{constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Se.render(this.render,!1,!0);const{latestValues:a,renderState:u}=i;this.latestValues=a,this.baseTarget={...a},this.initialValues=n.initial?{...a}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=o,this.isControllingVariants=hd(n),this.isVariantNode=fS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:c,...h}=this.scrapeMotionValuesFromProps(n,{});for(const f in h){const m=h[f];a[f]!==void 0&&zt(m)&&(m.set(a[f],!1),Tc(c)&&c.add(f))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,fx.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),bI.current||zF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:fp.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){fx.delete(this.current),this.projection&&this.projection.unmount(),fr(this.notifyUpdate),fr(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const r=ti.has(e),s=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Se.update(this.notifyUpdate,!1,!0),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},r,s,i){let o,a;for(let u=0;u<HF;u++){const c=kI[u],{isEnabled:h,Feature:f,ProjectionNode:m,MeasureLayout:y}=$a[c];m&&(o=m),h(n)&&(!this.features[c]&&f&&(this.features[c]=new f(this)),y&&(a=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:u,layout:c,drag:h,dragConstraints:f,layoutScroll:m,layoutRoot:y}=n;this.projection.setOptions({layoutId:u,layout:c,alwaysMeasureLayout:!!h||f&&Ti(f),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof c=="string"?c:"both",initialPromotionConfig:i,layoutScroll:m,layoutRoot:y})}return a}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ge()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<px.length;r++){const s=px[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i=e["on"+s];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=$F(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const r=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(r.initial=this.props.initial),r}const n={};for(let r=0;r<WF;r++){const s=pg[r],i=this.props[s];(za(i)||i===!1)&&(n[s]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=no(n,{owner:this}),this.addValue(e,r)),r}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props,s=typeof r=="string"||typeof r=="object"?(n=Eg(this.props,r))===null||n===void 0?void 0:n[e]:void 0;if(r&&s!==void 0)return s;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!zt(i)?i:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Ng),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class AI extends qF{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...r},{transformValues:s},i){let o=u4(r,e||{},this);if(s&&(n&&(n=s(n)),r&&(r=s(r)),o&&(o=s(o))),i){a4(this,r,o);const a=BF(this,r,o,n);n=a.transitionEnd,r=a.target}return{transition:e,transitionEnd:n,...r}}}function GF(t){return window.getComputedStyle(t)}class KF extends AI{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(ti.has(n)){const r=Cg(n);return r&&r.default||0}else{const r=GF(e),s=(yS(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return yI(e,n)}build(e,n,r,s){yg(e,n,r,s.transformTemplate)}scrapeMotionValuesFromProps(e,n){return wg(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;zt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,r,s){TS(e,n,r,s)}}class QF extends AI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(ti.has(n)){const r=Cg(n);return r&&r.default||0}return n=SS.has(n)?n:hg(n),e.getAttribute(n)}measureInstanceViewportBox(){return Ge()}scrapeMotionValuesFromProps(e,n){return PS(e,n)}build(e,n,r,s){_g(e,n,r,this.isSVGTag,s.transformTemplate)}renderInstance(e,n,r,s){IS(e,n,r,s)}mount(e){this.isSVGTag=xg(e.tagName),super.mount(e)}}const YF=(t,e)=>gg(t)?new QF(e,{enableHardwareAcceleration:!1}):new KF(e,{enableHardwareAcceleration:!0}),XF={layout:{ProjectionNode:PI,MeasureLayout:_I}},JF={...S4,...HO,...kF,...XF},pe=ZM((t,e)=>RO(t,e,JF,YF));function RI(){const t=R.useRef(!1);return dg(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function ZF(){const t=RI(),[e,n]=R.useState(0),r=R.useCallback(()=>{t.current&&n(e+1)},[e]);return[R.useCallback(()=>Se.postRender(r),[r]),e]}class e3 extends R.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function t3({children:t,isPresent:e}){const n=R.useId(),r=R.useRef(null),s=R.useRef({width:0,height:0,top:0,left:0});return R.useInsertionEffect(()=>{const{width:i,height:o,top:a,left:u}=s.current;if(e||!r.current||!i||!o)return;r.current.dataset.motionPopId=n;const c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${a}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[e]),R.createElement(e3,{isPresent:e,childRef:r,sizeRef:s},R.cloneElement(t,{ref:r}))}const Nh=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:i,mode:o})=>{const a=CS(n3),u=R.useId(),c=R.useMemo(()=>({id:u,initial:e,isPresent:n,custom:s,onExitComplete:h=>{a.set(h,!0);for(const f of a.values())if(!f)return;r&&r()},register:h=>(a.set(h,!1),()=>a.delete(h))}),i?void 0:[n]);return R.useMemo(()=>{a.forEach((h,f)=>a.set(f,!1))},[n]),R.useEffect(()=>{!n&&!a.size&&r&&r()},[n]),o==="popLayout"&&(t=R.createElement(t3,{isPresent:n},t)),R.createElement(ud.Provider,{value:c},t)};function n3(){return new Map}function r3(t){return R.useEffect(()=>()=>t(),[])}const Ps=t=>t.key||"";function s3(t,e){t.forEach(n=>{const r=Ps(n);e.set(r,n)})}function i3(t){const e=[];return R.Children.forEach(t,n=>{R.isValidElement(n)&&e.push(n)}),e}const NI=({children:t,custom:e,initial:n=!0,onExitComplete:r,exitBeforeEnter:s,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const a=R.useContext(mg).forceRender||ZF()[0],u=RI(),c=i3(t);let h=c;const f=R.useRef(new Map).current,m=R.useRef(h),y=R.useRef(new Map).current,E=R.useRef(!0);if(dg(()=>{E.current=!1,s3(c,y),m.current=h}),r3(()=>{E.current=!0,y.clear(),f.clear()}),E.current)return R.createElement(R.Fragment,null,h.map(v=>R.createElement(Nh,{key:Ps(v),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},v)));h=[...h];const T=m.current.map(Ps),C=c.map(Ps),w=T.length;for(let v=0;v<w;v++){const x=T[v];C.indexOf(x)===-1&&!f.has(x)&&f.set(x,void 0)}return o==="wait"&&f.size&&(h=[]),f.forEach((v,x)=>{if(C.indexOf(x)!==-1)return;const b=y.get(x);if(!b)return;const D=T.indexOf(x);let M=v;if(!M){const I=()=>{f.delete(x);const _=Array.from(y.keys()).filter(P=>!C.includes(P));if(_.forEach(P=>y.delete(P)),m.current=c.filter(P=>{const k=Ps(P);return k===x||_.includes(k)}),!f.size){if(u.current===!1)return;a(),r&&r()}};M=R.createElement(Nh,{key:Ps(b),isPresent:!1,onExitComplete:I,custom:e,presenceAffectsLayout:i,mode:o},b),f.set(x,M)}h.splice(D,0,M)}),h=h.map(v=>{const x=v.key;return f.has(x)?v:R.createElement(Nh,{key:Ps(v),isPresent:!0,presenceAffectsLayout:i,mode:o},v)}),R.createElement(R.Fragment,null,f.size?h:h.map(v=>R.cloneElement(v)))};function o3(){const{currentUser:t,logout:e}=zn(),{cartCount:n}=ul(),[r,s]=R.useState(!1),[i,o]=R.useState(""),[a,u]=R.useState(""),c=hs(),h=uo(),[f,m]=R.useState(!1),y=async()=>{try{await e(),c("/login")}catch(C){console.error("Failed to log out",C)}};R.useEffect(()=>{let C=!0;async function w(){if(!t){C&&(o(""),u(""));return}try{const v=Ks(Qs,"users",t.uid),x=await ad(v);if(!C)return;if(x.exists()){const b=x.data();o(b.name||""),u(b.photoURL||"")}else o(""),u("")}catch{o(""),u("")}}return w(),()=>{C=!1}},[t]),R.useEffect(()=>{function C(){m(window.scrollY>8)}return C(),window.addEventListener("scroll",C,{passive:!0}),()=>window.removeEventListener("scroll",C)},[]);const E="relative group text-love-dark font-medium font-oldSans";function T({to:C,children:w}){const v=h.pathname===C;return d.jsxs(ue,{to:C,className:`${E} hover:text-love-red transition-colors`,children:[d.jsx("span",{children:w}),d.jsx("span",{className:`absolute left-0 -bottom-1 h-0.5 bg-gradient-to-r from-love-red to-love-pink transition-all duration-300 ${v?"w-full":"w-0 group-hover:w-full"}`})]})}return d.jsxs("nav",{className:`sticky top-0 z-50 border-b border-love-pink/30 transition-all font-oldSans ${f?"bg-white/85 backdrop-blur-xl shadow-lg":"bg-love-light/80 backdrop-blur-md"}`,children:[d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:`flex justify-between ${f?"h-14":"h-16"} transition-all`,children:[d.jsx("div",{className:"flex items-center",children:d.jsxs(ue,{to:"/",className:"flex items-center space-x-2 group",children:[d.jsx(pe.div,{whileHover:{scale:1.1,rotate:10},transition:{type:"spring",stiffness:400,damping:10},children:d.jsx(Tn,{className:"h-8 w-8 text-love-red fill-current group-hover:animate-pulse"})}),d.jsx(pe.span,{initial:!1,animate:{color:f?"#0f172a":"#1f2937"},className:"font-oldCursive text-3xl font-bold",children:"LoveCraft"})]})}),d.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[d.jsx(T,{to:"/",children:"Home"}),d.jsx(T,{to:"/products",children:"Gifts"}),d.jsx(T,{to:"/contact",children:"Contact"}),d.jsx(T,{to:"/wish",children:"Wish"}),d.jsxs(ue,{to:"/cart",className:"relative group text-love-dark hover:text-love-red transition-colors",children:[d.jsx(pe.div,{whileHover:{scale:1.1},className:"relative",children:d.jsx(cg,{className:"h-6 w-6"})}),n>0&&d.jsx("span",{className:"absolute -top-2 -right-2 bg-love-red text-white text-xs rounded-full h-5 w-5 flex items-center justify-center animate-bounce",children:n})]}),t?d.jsxs("div",{className:"relative group",children:[d.jsxs("button",{className:"flex items-center space-x-2 text-love-dark hover:text-love-red",children:[a||t.photoURL?d.jsx("img",{src:a||t.photoURL,alt:"Avatar",className:"h-8 w-8 rounded-full object-cover border border-love-pink/30"}):d.jsx(zM,{className:"h-6 w-6"}),d.jsx("span",{className:"max-w-[160px] truncate",children:i||t.displayName||t.email})]}),d.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform origin-top-right",children:[d.jsx(ue,{to:"/profile",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-love-light",children:"Profile"}),d.jsx("button",{onClick:y,className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-love-light",children:"Sign out"})]})]}):d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx(T,{to:"/login",children:"Login"}),d.jsx(ue,{to:"/signup",className:"bg-love-red text-white px-4 py-2 rounded-full hover:bg-red-700 transition-colors shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:"Sign Up"})]})]}),d.jsx("div",{className:"md:hidden flex items-center",children:d.jsx("button",{onClick:()=>s(!r),className:"text-love-dark hover:text-love-red focus:outline-none",children:r?d.jsx($M,{className:"h-6 w-6"}):d.jsx(NM,{className:"h-6 w-6"})})})]})}),d.jsx(NI,{children:r&&d.jsx(pe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden bg-white border-t border-love-pink/30 overflow-hidden",children:d.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:[d.jsx(ue,{to:"/",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Home"}),d.jsx(ue,{to:"/products",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Gifts"}),d.jsx(ue,{to:"/contact",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Contact"}),d.jsx(ue,{to:"/wish",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Wish"}),d.jsx(ue,{to:"/cart",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Cart"}),t?d.jsxs(d.Fragment,{children:[d.jsx(ue,{to:"/profile",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Profile"}),d.jsx("button",{onClick:()=>{y(),s(!1)},className:"block w-full text-left px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Sign Out"})]}):d.jsxs(d.Fragment,{children:[d.jsx(ue,{to:"/login",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Login"}),d.jsx(ue,{to:"/signup",onClick:()=>s(!1),className:"block px-3 py-2 rounded-md text-base font-medium text-love-dark hover:text-love-red hover:bg-love-light",children:"Sign Up"})]})]})})})]})}function a3(){return d.jsx("footer",{className:"bg-white border-t border-love-pink/30 pt-12 pb-8 font-oldSans",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[d.jsxs("div",{className:"col-span-1 md:col-span-1",children:[d.jsxs(ue,{to:"/",className:"flex items-center space-x-2 mb-4",children:[d.jsx(Tn,{className:"h-6 w-6 text-love-red fill-current"}),d.jsx("span",{className:"font-oldCursive text-2xl text-love-dark font-bold",children:"LoveCraft"})]}),d.jsx("p",{className:"text-gray-600 text-sm",children:"Handcrafted gifts for your special moments. Celebrating love, one gift at a time."})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-love-dark mb-4",children:"Shop"}),d.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[d.jsx("li",{children:d.jsx(ue,{to:"/products",className:"hover:text-love-red transition-colors",children:"All Gifts"})}),d.jsx("li",{children:d.jsx(ue,{to:"/products?category=handmade",className:"hover:text-love-red transition-colors",children:"Handmade Crafts"})}),d.jsx("li",{children:d.jsx(ue,{to:"/products?category=personalized",className:"hover:text-love-red transition-colors",children:"Personalized Items"})}),d.jsx("li",{children:d.jsx(ue,{to:"/products?category=cards",className:"hover:text-love-red transition-colors",children:"Gift Cards"})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-love-dark mb-4",children:"Support"}),d.jsxs("ul",{className:"space-y-2 text-sm text-gray-600",children:[d.jsx("li",{children:d.jsx(ue,{to:"/contact",className:"hover:text-love-red transition-colors",children:"Contact Us"})}),d.jsx("li",{children:d.jsx(ue,{to:"/faq",className:"hover:text-love-red transition-colors",children:"FAQs"})}),d.jsx("li",{children:d.jsx(ue,{to:"/shipping",className:"hover:text-love-red transition-colors",children:"Shipping Info"})}),d.jsx("li",{children:d.jsx(ue,{to:"/returns",className:"hover:text-love-red transition-colors",children:"Returns"})})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-love-dark mb-4",children:"Stay in Love"}),d.jsxs("div",{className:"flex space-x-4 mb-4",children:[d.jsx("a",{href:"#",className:"text-gray-400 hover:text-love-red transition-colors",children:d.jsx(aS,{className:"h-5 w-5"})}),d.jsx("a",{href:"#",className:"text-gray-400 hover:text-love-red transition-colors",children:d.jsx(bM,{className:"h-5 w-5"})}),d.jsx("a",{href:"#",className:"text-gray-400 hover:text-love-red transition-colors",children:d.jsx(BM,{className:"h-5 w-5"})})]}),d.jsxs("p",{className:"text-xs text-gray-500",children:[" ",new Date().getFullYear()," LoveCraft. All rights reserved."]})]})]})})})}function l3(){const t={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.8}}};return d.jsxs(pe.div,{initial:"hidden",animate:"visible",variants:t,className:"space-y-16 pb-16 font-oldSans",children:[d.jsxs("section",{className:"relative min-h-[80vh] flex items-center justify-center overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-love-light via-white to-love-light opacity-90 z-10"}),d.jsx("div",{className:"absolute inset-0 bg-hearts-pattern opacity-10 z-0"}),d.jsx("div",{className:"pointer-events-none absolute -left-24 -top-24 w-72 h-72 bg-pink-400/40 rounded-full blur-3xl z-10"}),d.jsx("div",{className:"pointer-events-none absolute -right-24 top-32 w-80 h-80 bg-red-400/30 rounded-full blur-3xl z-10"}),d.jsxs("div",{className:"relative z-20 px-4 max-w-6xl mx-auto flex flex-col md:flex-row items-center justify-between gap-10",children:[d.jsxs(pe.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.2,duration:.8},className:"text-center md:text-left md:max-w-xl",children:[d.jsx("div",{className:"inline-flex items-center px-4 py-2 rounded-full bg-white/70 border border-love-pink/40 text-xs font-medium text-love-red mb-4 shadow-sm backdrop-blur",children:d.jsxs("span",{className:"inline-flex items-center",children:[d.jsx(Tn,{className:"h-4 w-4 mr-2"}),"Valentine's 2025 Collection"]})}),d.jsx("h1",{className:"text-4xl sm:text-5xl md:text-7xl font-oldCursive text-love-red mb-4 md:mb-6 drop-shadow-sm leading-tight",children:"Make This Valentine's Unforgettable"}),d.jsx("p",{className:"text-base sm:text-lg md:text-xl text-gray-700 mb-6 md:mb-8 max-w-2xl font-light",children:"Discover handcrafted gifts, personalized treasures and romantic surprises designed to celebrate your unique love story."}),d.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 justify-center md:justify-start",children:[d.jsxs(ue,{to:"/products",className:"inline-flex items-center bg-love-red text-white px-8 py-4 rounded-full text-lg font-medium hover:bg-red-700 transition-all shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:["Shop Gifts ",d.jsx(sS,{className:"ml-2 h-5 w-5"})]}),d.jsx(ue,{to:"/products?cat=sets",className:"inline-flex items-center px-6 py-3 rounded-full text-sm md:text-base font-medium bg-white/80 backdrop-blur border border-love-pink/40 text-love-dark hover:text-love-red hover:border-love-red transition-all shadow-sm",children:"Browse Romantic Sets"})]}),d.jsxs("div",{className:"mt-6 flex flex-wrap items-center justify-center md:justify-start gap-4 text-xs md:text-sm text-gray-500",children:[d.jsx("div",{className:"inline-flex items-center gap-2",children:d.jsx("span",{className:"inline-flex h-6 px-3 items-center rounded-full bg-green-100 text-green-700 font-medium",children:"4.9 loved by couples"})}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-love-red"}),d.jsx("span",{children:"Handmade & personalised"})]}),d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-love-red"}),d.jsx("span",{children:"Ships in 35 business days"})]})]})]}),d.jsxs("div",{className:"relative w-full md:w-[380px] h-[320px] md:h-[380px]",children:[d.jsx(pe.div,{initial:{y:20,opacity:0},animate:{y:[-10,10,-10]},transition:{duration:8,repeat:1/0,repeatType:"reverse"},className:"absolute inset-y-4 left-4 right-10 rounded-3xl shadow-2xl overflow-hidden border border-white/60 bg-white/80 backdrop-blur",children:d.jsx("img",{src:"https://images.unsplash.com/photo-1518895949257-7621c3c786d4?auto=format&fit=crop&q=80&w=900",alt:"Romantic gift set",className:"w-full h-full object-cover"})}),d.jsxs(pe.div,{initial:{y:-10,opacity:0},animate:{y:[0,-16,0]},transition:{duration:7,repeat:1/0,repeatType:"reverse",delay:.5},className:"absolute -bottom-6 right-0 w-40 rounded-2xl shadow-xl overflow-hidden border border-love-pink/40 bg-white",children:[d.jsx("img",{src:"https://images.unsplash.com/photo-1519741497674-611481863552?auto=format&fit=crop&q=80&w=600",alt:"Jewelry gift",className:"w-full h-28 object-cover"}),d.jsxs("div",{className:"px-3 py-2",children:[d.jsx("p",{className:"text-xs font-semibold text-gray-800 truncate",children:"Personalised Jewelry"}),d.jsx("p",{className:"text-[11px] text-love-red font-medium",children:"From $39"})]})]}),d.jsxs(pe.div,{initial:{x:10,opacity:0},animate:{x:[-6,6,-6]},transition:{duration:6,repeat:1/0,repeatType:"reverse",delay:.8},className:"absolute -top-4 left-0 px-4 py-3 rounded-2xl bg-white/90 backdrop-blur shadow-lg border border-love-pink/40 flex items-center gap-3",children:[d.jsxs("div",{className:"flex -space-x-2",children:[d.jsx("span",{className:"w-7 h-7 rounded-full bg-love-light border border-white"}),d.jsx("span",{className:"w-7 h-7 rounded-full bg-love-red/70 border border-white"}),d.jsx("span",{className:"w-7 h-7 rounded-full bg-rose-300 border border-white"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs font-semibold text-gray-800",children:"5,000+ happy couples"}),d.jsx("p",{className:"text-[11px] text-gray-500",children:"Gifting with LoveCraft"})]})]})]})]})]}),d.jsxs("section",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[d.jsxs("div",{className:"text-center mb-12",children:[d.jsx("h2",{className:"text-3xl sm:text-4xl font-oldCursive text-love-dark mb-4",children:"Featured Collections"}),d.jsx("p",{className:"text-gray-600",children:"Handpicked favorites for your special someone"})]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6 md:gap-8",children:[{title:"Personalized Jewelry",img:"https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?auto=format&fit=crop&q=80&w=800",link:"/products?cat=jewelry"},{title:"Handmade Crafts",img:"https://images.unsplash.com/photo-1513201099705-a9746e1e201f?auto=format&fit=crop&q=80&w=800",link:"/products?cat=crafts"},{title:"Romantic Gift Sets",img:"https://images.unsplash.com/photo-1549465220-1a8b9238cd48?auto=format&fit=crop&q=80&w=800",link:"/products?cat=sets"}].map((e,n)=>d.jsxs(pe.div,{whileHover:{y:-10},className:"relative group overflow-hidden rounded-2xl shadow-md aspect-[4/5]",children:[d.jsx("img",{src:e.img,alt:e.title,className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent flex items-end p-6",children:d.jsxs("div",{children:[d.jsx("h3",{className:"text-white text-xl md:text-2xl font-oldCursive mb-2",children:e.title}),d.jsx(ue,{to:e.link,className:"text-white/90 text-sm hover:text-white underline",children:"Explore Collection"})]})})]},n))})]}),d.jsx("section",{className:"bg-white py-16",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[d.jsxs("div",{className:"p-6",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-love-light text-love-red mb-4",children:d.jsx(oS,{className:"h-8 w-8"})}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Unique Handmade Gifts"}),d.jsx("p",{className:"text-gray-600",children:"Each item is crafted with love and care, ensuring a unique gift for your partner."})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-love-light text-love-red mb-4",children:d.jsx(uS,{className:"h-8 w-8"})}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Fast & Secure Delivery"}),d.jsx("p",{className:"text-gray-600",children:"We ensure your gifts arrive on time and in perfect condition for the big day."})]}),d.jsxs("div",{className:"p-6",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-love-light text-love-red mb-4",children:d.jsx(ug,{className:"h-8 w-8"})}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Secure Payments"}),d.jsx("p",{className:"text-gray-600",children:"Shop with confidence using our secure payment gateways."})]})]})})})]})}function u3({product:t,isFavorite:e,onToggleFavorite:n}){const{addToCart:r}=ul(),{currentUser:s}=zn(),i=hs(),[o,a]=R.useState(!1);return d.jsxs(pe.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},whileHover:{y:-5},className:"bg-white rounded-xl shadow-sm hover:shadow-md overflow-hidden border border-love-pink/20 transition-all",children:[d.jsxs("div",{className:"relative aspect-square overflow-hidden",children:[d.jsx("img",{src:t.image,alt:t.name,className:"w-full h-full object-cover transition-transform duration-500 hover:scale-110"}),d.jsx("button",{onClick:n,"aria-pressed":!!e,className:"absolute top-3 right-3 p-2 bg-white/80 rounded-full transition-colors",children:d.jsx(Tn,{className:`h-5 w-5 ${e?"text-love-red":"text-gray-400"}`})})]}),d.jsxs("div",{className:"p-4",children:[d.jsx("div",{className:"text-xs text-love-red font-medium mb-1 uppercase tracking-wider",children:t.category}),d.jsx(ue,{to:`/products/${t.id}`,children:d.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2 hover:text-love-red transition-colors truncate",children:t.name})}),d.jsxs("div",{className:"flex flex-col mt-4 space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("span",{className:"text-xl font-bold text-love-dark",children:["$",t.price.toFixed(2)]}),d.jsxs("button",{onClick:()=>{if(!s){i("/login");return}a(!0)},className:"flex items-center space-x-1 bg-love-light text-love-red px-3 py-2 rounded-lg hover:bg-love-red hover:text-white transition-colors text-sm font-medium",children:[d.jsx(cg,{className:"h-4 w-4"}),d.jsx("span",{children:"Add"})]})]}),o&&d.jsxs("div",{className:"mt-1 bg-love-light/60 border border-love-pink/40 rounded-lg px-3 py-2 text-xs",children:[d.jsxs("p",{className:"text-gray-700 mb-2",children:['Add "',t.name,'" to your cart?']}),d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsx("button",{type:"button",onClick:()=>a(!1),className:"px-2 py-1 rounded-md border border-gray-300 text-gray-600 hover:bg-gray-50",children:"Cancel"}),d.jsx("button",{type:"button",onClick:()=>{r(t),a(!1)},className:"px-2 py-1 rounded-md bg-love-red text-white hover:bg-red-700",children:"Confirm"})]})]})]})]})]})}const c3=["Jewelry","Handmade","Gifts","Apparel","Personalized","Food","Home","Romance","Tech","Books","Experiences","Accessories","Beauty","Stationery","Games","Plants","Art","Luxury Gifts","DIY Kits","Couple Sets","Memory Keepsakes","Spa & Relaxation","Pet Valentine","Eco-Friendly","Subscription Boxes","Custom Art","Wine & Chocolate"],d3={Jewelry:"Elegant pieces crafted to celebrate love and connection.",Handmade:"Artisan creations made with care and attention.",Gifts:"Thoughtful surprises perfect for special moments.",Apparel:"Cozy styles to match and share together.",Personalized:"Customize to make memories uniquely yours.",Food:"Sweet treats to delight and indulge.",Home:"Warm accents to set a romantic mood.",Romance:"Romantic picks to spark connection and sweet moments.",Tech:"Gadgets and accessories for modern love.",Books:"Stories and journals to share and cherish.",Experiences:"Memorable activities to enjoy together.",Accessories:"Stylish extras to complete the look.",Beauty:"Self-care and grooming for date-ready vibes.",Stationery:"Cards and paper goods for heartfelt notes.",Games:"Fun challenges and play for couples.",Plants:"Green gifts to grow together.",Art:"Creative pieces to decorate with love.","Luxury Gifts":"High-end treasures for unforgettable gestures.","DIY Kits":"Create together with step-by-step craft kits.","Couple Sets":"Perfectly paired items made for two.","Memory Keepsakes":"Stylish ways to preserve special moments.","Spa & Relaxation":"Relaxing essentials for a calm retreat.","Pet Valentine":"Adorable gifts to spoil your furry love.","Eco-Friendly":"Sustainable choices that show you care.","Subscription Boxes":"Monthly surprises curated with love.","Custom Art":"Unique artwork tailored to your story.","Wine & Chocolate":"Romantic pairings of fine wine and chocolate."},jh={Jewelry:["Heart Pendant Necklace","Infinity Love Necklace","Rose Gold Locket","Engraved Bar Necklace","Crystal Teardrop Earrings","Pearl Stud Earrings","Couples Ring Set","Birthstone Bracelet","Dainty Chain Bracelet","Charm Bracelet","Solitaire Pendant","Knot Ring","Cuff Bracelet","Stackable Rings","Nameplate Necklace","Moon & Star Necklace","Beaded Anklet","Tennis Bracelet","Hoop Earrings","Initial Pendant"],Handmade:["Rose Bear","Crochet Heart Keychain","Hand-painted Mug","Pressed Flower Frame","Knitted Scarf","Macrame Wall Hanging","Handmade Soap Set","Leather Journal","Resin Coaster Set","Clay Trinket Dish","Dried Flower Bouquet","Embroidered Tote","Beaded Phone Charm","Hand-poured Candle","Origami Love Box","Wood Photo Stand","Woven Basket","Felt Rose Corsage","Rope Plant Hanger","Hand-sewn Plush Heart"],Gifts:["Love Letters Box","Photo Memory Album","Couple Quiz Game","Surprise Gift Box","Message in a Bottle","Date Night Cards","Scratch-off Adventure Poster","Polaroid Film Set","Stainless Travel Mug","Bluetooth Mini Speaker","Personalized Calendar","Story of Us Book","Wine Accessories Kit","Hot Cocoa Gift Set","Spa Gift Basket","Bath Bomb Kit","Aromatherapy Diffuser","Keepsake Trinket Box","Greeting Card Pack","Mini Succulent Set"],Apparel:["Matching Hoodies","Couple T-Shirts","Satin Pajama Set","Cozy Knit Sweater","Embroidered Hat","Silk Robe","Flannel Lounge Pants","Fleece Blanket Poncho","Graphic Tee","Varsity Jacket","Denim Couple Jacket","Cotton Socks Pack","Scarf & Beanie Set","Summer Dress","Button-up Shirt","Lightweight Cardigan","Yoga Set","Baseball Cap","Windbreaker","Pullover Hoodie"],Personalized:["Custom Star Map","Engraved Keychain","Photo Crystal","Monogram Throw Pillow","Custom Photo Mug","Personalized Notebook","Custom Phone Case","Engraved Wallet","Name Necklace","Coordinates Bracelet","Photo Puzzle","Personalized Apron","Custom Night Light","Nameplate Door Sign","Custom Doormat","Pet Portrait Print","Custom Calendar","Engraved Pen","Custom Flask","Personalized Cutting Board"],Food:["Luxury Chocolate Box","Macaron Assortment","Gourmet Truffle Set","Heart-shaped Cookies","Artisanal Honey Jar","Strawberry Jam Duo","Specialty Tea Sampler","Coffee Lover Kit","Red Velvet Cupcakes","Chocolate-dipped Strawberries","Caramel Popcorn Tin","Cheese and Crackers Set","Mini Cheesecake Bites","Brownie Gift Box","Marshmallow Treats","Hot Sauce Pair","Olive Oil Tasting Set","Fruit Basket","Nuts Mix Jar","Candy Heart Tin"],Home:["Scented Candle Set","String Lights","Velvet Throw Pillow","Cozy Knit Blanket","Ceramic Vase","Picture Frame Set","Table Runner","Rose Diffuser","Wall Art Print","Decorative Tray","Ceramic Planter","Crystal Decor Bowl","Reed Diffuser Set","Lantern Candle Holder","Gold Mirror","Desk Organizer","Bookends Pair","Floor Lamp","Curtain Fairy Lights","Room Mist Spray"],Romance:Array.from({length:20},(t,e)=>`Romance Gift ${e+1}`),Tech:Array.from({length:20},(t,e)=>`Tech Love Gadget ${e+1}`),Books:Array.from({length:20},(t,e)=>`Couple Book ${e+1}`),Experiences:Array.from({length:20},(t,e)=>`Date Experience ${e+1}`),Accessories:Array.from({length:20},(t,e)=>`Love Accessory ${e+1}`),Beauty:Array.from({length:20},(t,e)=>`Beauty Care Set ${e+1}`),Stationery:Array.from({length:20},(t,e)=>`Love Stationery ${e+1}`),Games:Array.from({length:20},(t,e)=>`Couple Game ${e+1}`),Plants:Array.from({length:20},(t,e)=>`Love Plant ${e+1}`),Art:Array.from({length:20},(t,e)=>`Love Art Print ${e+1}`),"Luxury Gifts":Array.from({length:20},(t,e)=>`Luxury Gift ${e+1}`),"DIY Kits":Array.from({length:20},(t,e)=>`DIY Kit ${e+1}`),"Couple Sets":Array.from({length:20},(t,e)=>`Couple Set ${e+1}`),"Memory Keepsakes":Array.from({length:20},(t,e)=>`Keepsake ${e+1}`),"Spa & Relaxation":Array.from({length:20},(t,e)=>`Spa Relax ${e+1}`),"Pet Valentine":Array.from({length:20},(t,e)=>`Pet Valentine ${e+1}`),"Eco-Friendly":Array.from({length:20},(t,e)=>`Eco Gift ${e+1}`),"Subscription Boxes":Array.from({length:20},(t,e)=>`Subscription Box ${e+1}`),"Custom Art":Array.from({length:20},(t,e)=>`Custom Art ${e+1}`),"Wine & Chocolate":Array.from({length:20},(t,e)=>`Wine & Chocolate ${e+1}`)},h3={Jewelry:50,Handmade:25,Gifts:30,Apparel:40,Personalized:35,Food:20,Home:28,Romance:38,Tech:60,Books:22,Experiences:75,Accessories:27,Beauty:32,Stationery:18,Games:29,Plants:24,Art:33,"Luxury Gifts":80,"DIY Kits":22,"Couple Sets":38,"Memory Keepsakes":32,"Spa & Relaxation":30,"Pet Valentine":24,"Eco-Friendly":28,"Subscription Boxes":45,"Custom Art":50,"Wine & Chocolate":40},f3=(t,e)=>{const n=e.toLowerCase(),r=[t.toLowerCase(),"valentine"];return t==="Jewelry"?n.includes("necklace")?r.push("necklace"):n.includes("earring")?r.push("earrings"):n.includes("ring")?r.push("ring"):n.includes("bracelet")?r.push("bracelet"):r.push("accessory"):t==="Handmade"?n.includes("candle")?r.push("candle"):n.includes("soap")?r.push("soap"):n.includes("knit")||n.includes("scarf")?r.push("knitting"):n.includes("macrame")?r.push("macrame"):n.includes("leather")?r.push("leather"):n.includes("resin")?r.push("resin"):r.push("craft"):t==="Gifts"?n.includes("album")||n.includes("photo")?r.push("photo"):n.includes("box")?r.push("giftbox"):n.includes("mug")?r.push("mug"):n.includes("speaker")?r.push("speaker"):r.push("gift"):t==="Apparel"?n.includes("hoodie")?r.push("hoodie"):n.includes("t-shirt")||n.includes("tee")?r.push("tshirt"):n.includes("pajama")?r.push("pajama"):n.includes("sweater")?r.push("sweater"):n.includes("jacket")?r.push("jacket"):n.includes("dress")?r.push("dress"):n.includes("cardigan")?r.push("cardigan"):r.push("clothing"):t==="Personalized"?n.includes("engraved")?r.push("engraved"):n.includes("custom")?r.push("custom"):n.includes("photo")?r.push("photo"):n.includes("name")?r.push("name"):r.push("personalized"):t==="Food"?n.includes("chocolate")?r.push("chocolate"):n.includes("macaron")?r.push("macaron"):n.includes("truffle")?r.push("truffle"):n.includes("cookie")?r.push("cookies"):n.includes("honey")?r.push("honey"):n.includes("jam")?r.push("jam"):n.includes("tea")?r.push("tea"):n.includes("coffee")?r.push("coffee"):n.includes("cupcake")?r.push("cupcakes"):n.includes("strawberry")?r.push("strawberries"):n.includes("popcorn")?r.push("popcorn"):n.includes("cheese")?r.push("cheese"):n.includes("brownie")?r.push("brownie"):n.includes("marshmallow")?r.push("marshmallow"):n.includes("sauce")?r.push("sauce"):n.includes("oil")?r.push("oil"):n.includes("fruit")?r.push("fruit"):n.includes("nut")?r.push("nuts"):n.includes("candy")?r.push("candy"):r.push("dessert"):t==="Home"?n.includes("candle")?r.push("candle"):n.includes("light")?r.push("lights"):n.includes("pillow")?r.push("pillow"):n.includes("blanket")?r.push("blanket"):n.includes("vase")?r.push("vase"):n.includes("frame")?r.push("frame"):n.includes("diffuser")?r.push("diffuser"):n.includes("art")?r.push("art"):n.includes("tray")?r.push("tray"):n.includes("planter")?r.push("planter"):n.includes("mirror")?r.push("mirror"):n.includes("organizer")?r.push("organizer"):n.includes("lamp")?r.push("lamp"):n.includes("curtain")?r.push("curtain"):n.includes("spray")?r.push("spray"):r.push("decor"):n.includes("gift")?r.push("gift"):n.includes("set")?r.push("set"):n.includes("print")?r.push("print"):n.includes("experience")&&r.push("experience"),r.join(",")},Ci=c3.flatMap((t,e)=>Array.from({length:20},(n,r)=>({id:e*100+r+1,name:jh[t][r],price:Number((h3[t]+r%10*2+e*3).toFixed(2)),category:t,image:`https://placehold.co/800x800/ffffff/cc1d4f/png?text=${encodeURIComponent(jh[t][r])}`,description:d3[t],tags:f3(t,jh[t][r]).split(",")})));function p3(){const[t,e]=R.useState("All"),[n,r]=R.useState(""),[s,i]=R.useState("none"),[o,a]=R.useState(""),[u,c]=R.useState(""),[h,f]=R.useState(!1),[m,y]=R.useState(""),[E,T]=R.useState("none"),[C,w]=R.useState(""),[v,x]=R.useState(""),[b,D]=R.useState(1),[M,I]=R.useState([]),{currentUser:_}=zn(),[P,k]=R.useState([]),[N,j]=R.useState([]),[A,oe]=R.useState(!1),[Ye,ye]=R.useState(!1),[me,z]=R.useState("none"),[H,G]=R.useState("none"),K=R.useMemo(()=>{const B=new Set(Ci.map(Ie=>Ie.category));return["All",...Array.from(B)]},[]),Y=R.useMemo(()=>{let B=t==="All"?Ci:Ci.filter(se=>se.category===t);const Ie=n.trim().toLowerCase();Ie&&(B=B.filter(se=>se.name.toLowerCase().includes(Ie)));let nt=o!==""?parseFloat(o):null,We=u!==""?parseFloat(u):null;return me!=="none"&&(me==="under30"?(nt=null,We=30):me==="30to50"?(nt=30,We=50):me==="50plus"&&(nt=50,We=null)),nt!==null&&(B=B.filter(se=>se.price>=nt)),We!==null&&(B=B.filter(se=>se.price<=We)),P.length>0&&(B=B.filter(se=>se.tags&&se.tags.some(en=>P.includes(en)))),A&&_&&(B=B.filter(se=>M.includes(se.id))),s==="price_asc"?B=[...B].sort((se,en)=>se.price-en.price):s==="price_desc"?B=[...B].sort((se,en)=>en.price-se.price):s==="name_asc"?B=[...B].sort((se,en)=>se.name.localeCompare(en.name)):s==="name_desc"&&(B=[...B].sort((se,en)=>en.name.localeCompare(se.name))),B},[t,n,o,u,s,P,A,me,M,_]),de=15,ge=Math.max(1,Math.ceil(Y.length/de)),we=Math.min(b,ge),Fe=Y.slice((we-1)*de,we*de),He=Y.length,dn=He===0?0:(we-1)*de+1,Zt=He===0?0:dn+Fe.length-1;let tt=[];ge<=5?tt=Array.from({length:ge},(B,Ie)=>Ie+1):we<=3?tt=[1,2,3,4,"dots",ge]:we>=ge-2?tt=[1,"dots",ge-3,ge-2,ge-1,ge]:tt=[1,"dots",we-1,we,we+1,"dots",ge];const ot=R.useMemo(()=>{const B=new Set;return Ci.forEach(Ie=>(Ie.tags||[]).forEach(nt=>B.add(nt))),Array.from(B).sort()},[]);R.useEffect(()=>{let B=!0;async function Ie(){if(!_){B&&I([]);return}try{const nt=Ks(Qs,"users",_.uid),We=await ad(nt);if(!B)return;const se=We.exists()?We.data():{};I(Array.isArray(se.favorites)?se.favorites:[])}catch{B&&I([])}}return Ie(),()=>{B=!1}},[_]);async function $n(B){if(!_){alert("Please log in to save favorites");return}const Ie=M.includes(B),nt=Ks(Qs,"users",_.uid);try{await J1(nt,{favorites:Ie?$V(B):zV(B)}),I(We=>Ie?We.filter(se=>se!==B):[...We,B])}catch(We){console.error("Failed to update favorites",We)}}function yr(){y(n),T(s),w(o),x(u),j(P),ye(A),G(me),f(!0)}function vr(){r(m),i(E),a(C),c(v),k(N),oe(Ye),z(H),f(!1),D(1)}function Me(){f(!1),y(n),T(s),w(o),x(u),j(P),ye(A),G(me)}return d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between mb-8",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-cursive text-love-dark",children:"Shop Gifts"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Find the perfect token of your affection"})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[d.jsx("aside",{className:"order-2 md:order-1 md:col-span-1",children:d.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-love-pink/20",children:[d.jsx("h2",{className:"text-lg font-semibold text-love-dark mb-4",children:"Categories"}),d.jsx("div",{className:"space-y-2",children:K.map(B=>d.jsx("button",{onClick:()=>{e(B),D(1)},className:`w-full text-left px-4 py-2 rounded-lg text-sm font-medium transition-colors ${t===B?"bg-love-red text-white shadow-md":"bg-white border border-gray-200 text-gray-700 hover:bg-love-light"}`,children:B},B))})]})}),d.jsxs("section",{className:"order-1 md:order-2 md:col-span-3",children:[d.jsx("div",{className:"flex items-center justify-between mb-4",children:d.jsx("button",{onClick:yr,className:"p-2 rounded-lg bg-white border border-love-pink/30 text-gray-600 hover:text-love-red hover:border-love-red transition-colors","aria-label":"Open Filters",title:"Filters",children:d.jsx(kM,{className:"h-5 w-5"})})}),h&&d.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-love-pink/20 mb-6",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsx("input",{type:"text",placeholder:"Search products...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:m,onChange:B=>y(B.target.value)}),d.jsxs("select",{className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:E,onChange:B=>T(B.target.value),children:[d.jsx("option",{value:"none",children:"Sort by"}),d.jsx("option",{value:"price_asc",children:"Price: Low to High"}),d.jsx("option",{value:"price_desc",children:"Price: High to Low"}),d.jsx("option",{value:"name_asc",children:"Name: A to Z"}),d.jsx("option",{value:"name_desc",children:"Name: Z to A"})]}),d.jsx("input",{type:"number",min:"0",step:"0.01",placeholder:"Min price",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:C,onChange:B=>w(B.target.value)}),d.jsx("input",{type:"number",min:"0",step:"0.01",placeholder:"Max price",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:v,onChange:B=>x(B.target.value)})]}),d.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Tags"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:ot.map(B=>{const Ie=N.includes(B);return d.jsx("button",{onClick:()=>{j(nt=>Ie?nt.filter(We=>We!==B):[...nt,B])},className:`px-3 py-1 rounded-full text-sm border ${Ie?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:B},B)})})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Quick Price"}),d.jsx("div",{className:"space-y-2",children:[{id:"none",label:"None"},{id:"under30",label:"Under $30"},{id:"30to50",label:"$30  $50"},{id:"50plus",label:"$50+"}].map(B=>d.jsx("button",{onClick:()=>G(B.id),className:`w-full text-left px-3 py-2 rounded-lg border text-sm ${H===B.id?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:B.label},B.id))})]}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"Only Favorites"}),d.jsx("button",{onClick:()=>ye(B=>!B),disabled:!_,className:`w-full px-3 py-2 rounded-lg border text-sm ${Ye?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"} ${_?"":"opacity-50 cursor-not-allowed"}`,children:Ye?"Enabled":"Disabled"})]})]}),d.jsxs("div",{className:"mt-4 flex items-center justify-end space-x-3",children:[d.jsx("button",{onClick:Me,className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),d.jsx("button",{onClick:vr,className:"px-4 py-2 rounded-lg bg-love-red text-white hover:bg-red-700 transition-colors",children:"Show Results"})]})]}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Fe.map(B=>{const Ie=M.includes(B.id);return d.jsx(u3,{product:B,isFavorite:Ie,onToggleFavorite:()=>$n(B.id)},B.id)})}),d.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row items-center justify-between gap-4",children:[d.jsx("div",{className:"text-sm text-gray-600",children:He===0?"No gifts found. Try adjusting your filters.":`Showing ${dn}-${Zt} of ${He} gifts`}),ge>1&&d.jsxs("div",{className:"flex items-center gap-1",children:[d.jsx("button",{onClick:()=>D(B=>Math.max(1,B-1)),disabled:we===1,className:`px-3 py-2 rounded-md border text-sm ${we===1?"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Previous"}),tt.map((B,Ie)=>B==="dots"?d.jsx("span",{className:"px-2 text-gray-400 text-sm",children:"..."},`dots-${Ie}`):d.jsx("button",{onClick:()=>D(B),className:`px-3 py-2 rounded-md border text-sm ${B===we?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:B},B)),d.jsx("button",{onClick:()=>D(B=>Math.min(ge,B+1)),disabled:we===ge,className:`px-3 py-2 rounded-md border text-sm ${we===ge?"bg-gray-100 text-gray-400 border-gray-200 cursor-not-allowed":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"}`,children:"Next"})]})]})]})]})]})}function m3(){const{id:t}=dk(),e=Ci.find(T=>T.id===parseInt(t)),[n,r]=R.useState(""),[s,i]=R.useState(1),{addToCart:o}=ul(),[a,u]=R.useState(!1),{currentUser:c}=zn(),h=hs(),[f,m]=R.useState(!1),y=()=>{if(!c){h("/login");return}m(!0)};function E(){const C=document.createElement("canvas");C.width=1080,C.height=1080;const w=C.getContext("2d"),v=w.createLinearGradient(0,0,1080,1080);v.addColorStop(0,"#ffe4e6"),v.addColorStop(1,"#fb7185"),w.fillStyle=v,w.fillRect(0,0,1080,1080);function x(k,N,j,A){w.save(),w.translate(k,N),w.scale(j,j),w.beginPath(),w.moveTo(0,-10),w.bezierCurveTo(12,-28,40,-18,40,6),w.bezierCurveTo(40,26,18,40,0,52),w.bezierCurveTo(-18,40,-40,26,-40,6),w.bezierCurveTo(-40,-18,-12,-28,0,-10),w.closePath(),w.fillStyle=A,w.fill(),w.restore()}for(let k=0;k<24;k++){const N=Math.random()*1080,j=Math.random()*1080,A=.3+Math.random()*.8,oe=Math.random()<.5?"rgba(225,29,72,0.15)":"rgba(251,113,133,0.15)";x(N,j,A,oe)}w.fillStyle="rgba(255,255,255,0.85)";const b=80;w.beginPath(),w.moveTo(140+b,180),w.arcTo(940,180,940,900,b),w.arcTo(940,900,140,900,b),w.arcTo(140,900,140,180,b),w.arcTo(140,180,940,180,b),w.closePath(),w.fill(),w.fillStyle="#e11d48",w.textAlign="center",w.font="bold 72px Georgia",w.fillText("With Love",1080/2,300),w.fillStyle="#0f172a",w.font="600 56px Georgia",w.fillText(e.name,1080/2,390),w.fillStyle="#334155",w.font="italic 36px Georgia";const D=n!=null&&n.trim()?n.trim():"You make my world brighter",M=[];let I="";D.split(/\s+/).forEach(k=>{const N=I?I+" "+k:k;w.measureText(N).width>720?(M.push(I),I=k):I=N}),I&&M.push(I),M.slice(0,4).forEach((k,N)=>{w.fillText(k,1080/2,480+N*48)}),w.fillStyle="#e11d48",x(1080/2,620,1.2,"#e11d48"),w.fillStyle="#64748b",w.font="500 28px Georgia",w.fillText("LoveCraft",1080/2,860);const P=document.createElement("a");P.download="wish-card.png",P.href=C.toDataURL("image/png"),P.click()}return e?d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 relative",children:[d.jsxs(ue,{to:"/products",className:"inline-flex items-center text-gray-500 hover:text-love-red mb-8 transition-colors",children:[d.jsx(IM,{className:"h-4 w-4 mr-2"})," Back to Gifts"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-12",children:[d.jsx(pe.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"rounded-2xl overflow-hidden shadow-lg border border-love-pink/20",children:d.jsx("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"})}),d.jsxs(pe.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm text-love-red font-medium uppercase tracking-wider mb-2",children:e.category}),d.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-2",children:e.name}),d.jsxs("div",{className:"flex items-center space-x-2 text-yellow-500 text-sm mb-4",children:[d.jsx("div",{className:"flex",children:[...Array(5)].map((T,C)=>d.jsx(UM,{className:"h-4 w-4 fill-current"},C))}),d.jsx("span",{className:"text-gray-400",children:"(24 reviews)"})]}),d.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",e.price.toFixed(2)]})]}),d.jsx("p",{className:"text-gray-600 leading-relaxed",children:e.description||"Celebrate your love with this handcrafted treasure. Perfect for anniversaries, Valentine's Day, or just because."}),d.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-100",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"custom-text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Message (Optional)"}),d.jsx("textarea",{id:"custom-text",rows:3,className:"w-full rounded-lg border-gray-300 shadow-sm focus:border-love-pink focus:ring-love-pink text-sm p-3 border",placeholder:"Enter names, dates, or a short love note...",value:n,onChange:T=>r(T.target.value)})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[d.jsx("button",{onClick:()=>i(Math.max(1,s-1)),className:"px-3 py-2 text-gray-600 hover:bg-gray-50",children:"-"}),d.jsx("span",{className:"px-3 py-2 font-medium w-12 text-center",children:s}),d.jsx("button",{onClick:()=>i(s+1),className:"px-3 py-2 text-gray-600 hover:bg-gray-50",children:"+"})]}),d.jsxs("div",{className:"flex flex-col sm:flex-row sm:flex-wrap items-stretch sm:items-center gap-3 sm:gap-4 w-full",children:[d.jsxs("button",{onClick:y,disabled:a,className:`w-full sm:flex-1 px-6 py-3 rounded-lg font-medium transition-colors shadow-md flex items-center justify-center space-x-2 ${a?"bg-green-600 text-white":"bg-love-red text-white hover:bg-red-700"}`,children:[a?d.jsx(_h,{className:"h-5 w-5"}):d.jsx(cg,{className:"h-5 w-5"}),d.jsx("span",{children:a?"Added to Cart":"Add to Cart"})]}),d.jsxs("button",{onClick:E,className:"w-full sm:w-auto px-6 py-3 rounded-lg font-medium transition-colors shadow-md flex items-center justify-center space-x-2 bg-white text-love-red border border-love-pink/30 hover:bg-love-light",children:[d.jsx(iS,{className:"h-5 w-5"}),d.jsx("span",{children:"Download Wish Image"})]}),d.jsx("button",{className:"w-full sm:w-auto p-3 border border-gray-300 rounded-lg hover:border-love-red hover:text-love-red transition-colors flex items-center justify-center",children:d.jsx(Tn,{className:"h-5 w-5"})})]})]})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-gray-500 pt-4",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(_h,{className:"h-4 w-4 mr-1 text-green-500"})," In Stock"]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(_h,{className:"h-4 w-4 mr-1 text-green-500"})," Free Shipping"]})]})]})]}),f&&d.jsx("div",{className:"fixed inset-0 z-40 flex items-center justify-center bg-black/40",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-love-pink/30 p-6 max-w-sm w-full mx-4",children:[d.jsx("h2",{className:"text-lg font-semibold text-love-dark mb-2",children:"Add to cart?"}),d.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:['Add "',e.name,'"',s>1?` (x${s})`:""," to your cart?"]}),d.jsxs("div",{className:"flex justify-end space-x-3",children:[d.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 rounded-lg border border-gray-300 text-gray-700 hover:bg-gray-50 text-sm",children:"Cancel"}),d.jsx("button",{type:"button",onClick:()=>{o(e,s,n),u(!0),m(!1),setTimeout(()=>u(!1),2e3)},className:"px-4 py-2 rounded-lg bg-love-red text-white hover:bg-red-700 text-sm",children:"Confirm"})]})]})})]}):d.jsxs("div",{className:"min-h-[50vh] flex flex-col items-center justify-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Product not found"}),d.jsx(ue,{to:"/products",className:"mt-4 text-love-red hover:underline",children:"Return to Shop"})]})}function g3(){const{cartItems:t,removeFromCart:e,updateQuantity:n,cartTotal:r}=ul();return t.length===0?d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 text-center",children:[d.jsx("h2",{className:"text-3xl font-cursive text-gray-800 mb-4",children:"Your cart is empty"}),d.jsx("p",{className:"text-gray-600 mb-8",children:"Looks like you haven't found the perfect gift yet."}),d.jsxs(ue,{to:"/products",className:"inline-flex items-center bg-love-red text-white px-6 py-3 rounded-full hover:bg-red-700 transition-colors",children:["Start Shopping ",d.jsx(sS,{className:"ml-2 h-4 w-4"})]})]}):d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-8",children:"Shopping Cart"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[d.jsx("div",{className:"lg:col-span-2 space-y-6",children:t.map(s=>d.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center bg-white p-4 rounded-xl shadow-sm border border-love-pink/20 gap-4 sm:gap-6",children:[d.jsx("img",{src:s.image,alt:s.name,className:"w-24 h-24 object-cover rounded-lg flex-shrink-0"}),d.jsxs("div",{className:"sm:ml-2 flex-1",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:s.name}),d.jsxs("p",{className:"text-love-red font-medium",children:["$",s.price.toFixed(2)]}),s.customText&&d.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Note: ",s.customText]})]}),d.jsxs("div",{className:"flex items-center sm:items-center justify-between sm:justify-end w-full sm:w-auto gap-4 sm:gap-6",children:[d.jsxs("div",{className:"flex items-center border border-gray-300 rounded-lg",children:[d.jsx("button",{onClick:()=>n(s.id,s.customText,s.quantity-1),className:"px-3 py-1 text-sm text-gray-600 hover:bg-gray-50",children:"-"}),d.jsx("span",{className:"px-2 text-sm font-medium",children:s.quantity}),d.jsx("button",{onClick:()=>n(s.id,s.customText,s.quantity+1),className:"px-3 py-1 text-sm text-gray-600 hover:bg-gray-50",children:"+"})]}),d.jsx("button",{onClick:()=>e(s.id,s.customText),className:"text-gray-400 hover:text-red-500 transition-colors",children:d.jsx(lS,{className:"h-5 w-5"})})]})]},`${s.id}-${s.customText}`))}),d.jsx("div",{className:"lg:col-span-1",children:d.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-md border border-love-pink/20 md:sticky md:top-24",children:[d.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Order Summary"}),d.jsxs("div",{className:"space-y-4 text-sm",children:[d.jsxs("div",{className:"flex justify-between text-gray-600",children:[d.jsx("span",{children:"Subtotal"}),d.jsxs("span",{children:["$",r.toFixed(2)]})]}),d.jsxs("div",{className:"flex justify-between text-gray-600",children:[d.jsx("span",{children:"Shipping"}),d.jsx("span",{children:"Free"})]}),d.jsxs("div",{className:"border-t border-gray-100 pt-4 flex justify-between font-bold text-lg text-gray-900",children:[d.jsx("span",{children:"Total"}),d.jsxs("span",{children:["$",r.toFixed(2)]})]})]}),d.jsx(ue,{to:"/checkout",className:"block text-center w-full mt-8 bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Proceed to Checkout"})]})})]})]})}const y3=()=>{if(!(typeof localStorage>"u"))return{get:t=>Promise.resolve(localStorage.getItem(t)),set:(t,e)=>Promise.resolve(localStorage.setItem(t,e)),remove:t=>Promise.resolve(localStorage.removeItem(t))}},X3={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:y3()};function v3(){const{cartItems:t,cartTotal:e,clearCart:n}=ul(),{currentUser:r}=zn(),s=hs(),[i,o]=R.useState(!1),[a,u]=R.useState(""),[c,h]=R.useState({firstName:"",lastName:"",email:(r==null?void 0:r.email)||"",address:"",city:"",zipCode:"",country:"",cardNumber:"",expiryDate:"",cvv:""}),f=y=>{h({...c,[y.target.name]:y.target.value})},m=async y=>{y.preventDefault(),o(!0),u("");try{const E={userId:r?r.uid:"guest",userEmail:c.email,items:t,total:e,shippingDetails:{firstName:c.firstName,lastName:c.lastName,address:c.address,city:c.city,zipCode:c.zipCode,country:c.country},status:"pending",createdAt:Tu()},T=await UV(PV(Qs,"orders"),E);try{const C={order_id:T.id,to_name:`${c.firstName} ${c.lastName}`,to_email:c.email,message:`Thank you for your order! Your total is $${e.toFixed(2)}. We will ship your romantic gifts to ${c.address}, ${c.city}.`,reply_to:"support@lovecraft.com"},w=void 0,v=void 0,x="GNdiN4DMl_vTXQ7iE";w&&v||console.warn("EmailJS service/template IDs are not set"),console.log("Email sent successfully!")}catch(C){console.error("Failed to send email:",C)}n(),s("/order-success")}catch(E){console.error("Error placing order:",E),u("Failed to place order. Please try again.")}finally{o(!1)}};return R.useEffect(()=>{t.length===0&&s("/cart")},[t,s]),t.length===0?null:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:d.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[d.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-8 text-center",children:"Checkout"}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12",children:[d.jsxs("div",{className:"bg-white p-8 rounded-xl shadow-md border border-love-pink/20",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-6 text-gray-800",children:"Shipping Details"}),a&&d.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded mb-4",children:a}),d.jsxs("form",{onSubmit:m,className:"space-y-6",children:[d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),d.jsx("input",{type:"text",name:"firstName",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.firstName,onChange:f})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),d.jsx("input",{type:"text",name:"lastName",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.lastName,onChange:f})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",name:"email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.email,onChange:f})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),d.jsx("input",{type:"text",name:"address",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.address,onChange:f})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"City"}),d.jsx("input",{type:"text",name:"city",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.city,onChange:f})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Zip Code"}),d.jsx("input",{type:"text",name:"zipCode",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.zipCode,onChange:f})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Country"}),d.jsx("input",{type:"text",name:"country",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.country,onChange:f})]}),d.jsxs("div",{className:"pt-6 border-t border-gray-100",children:[d.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-800",children:"Payment Information"}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Card Number"}),d.jsx("input",{type:"text",name:"cardNumber",required:!0,placeholder:"0000 0000 0000 0000",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.cardNumber,onChange:f})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Expiry Date"}),d.jsx("input",{type:"text",name:"expiryDate",required:!0,placeholder:"MM/YY",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.expiryDate,onChange:f})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CVV"}),d.jsx("input",{type:"text",name:"cvv",required:!0,placeholder:"123",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:c.cvv,onChange:f})]})]})]})]}),d.jsx("button",{type:"submit",disabled:i,className:"w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed",children:i?"Processing...":`Pay $${e.toFixed(2)}`})]})]}),d.jsx("div",{children:d.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-200 sticky top-24",children:[d.jsx("h2",{className:"text-xl font-semibold mb-6 text-gray-800",children:"Order Summary"}),d.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto pr-2",children:t.map(y=>d.jsxs("div",{className:"flex gap-4 border-b border-gray-200 pb-4",children:[d.jsx("img",{src:y.image,alt:y.name,className:"w-16 h-16 object-cover rounded-md"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h4",{className:"font-medium text-gray-800",children:y.name}),d.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",y.quantity]}),d.jsxs("p",{className:"text-love-red font-medium",children:["$",y.price.toFixed(2)]}),y.customText&&d.jsxs("p",{className:"text-xs text-gray-500 italic mt-1",children:['"',y.customText,'"']})]})]},`${y.id}-${y.customText}`))}),d.jsxs("div",{className:"mt-6 space-y-2 pt-4 border-t border-gray-200",children:[d.jsxs("div",{className:"flex justify-between text-gray-600",children:[d.jsx("span",{children:"Subtotal"}),d.jsxs("span",{children:["$",e.toFixed(2)]})]}),d.jsxs("div",{className:"flex justify-between text-gray-600",children:[d.jsx("span",{children:"Shipping"}),d.jsx("span",{children:"Free"})]}),d.jsxs("div",{className:"flex justify-between font-bold text-xl text-love-dark pt-2",children:[d.jsx("span",{children:"Total"}),d.jsxs("span",{children:["$",e.toFixed(2)]})]})]})]})})]})]})})}var Pu={linear:function(t,e,n,r){var s=n-e;return s*t/r+e},easeInQuad:function(t,e,n,r){var s=n-e;return s*(t/=r)*t+e},easeOutQuad:function(t,e,n,r){var s=n-e;return-s*(t/=r)*(t-2)+e},easeInOutQuad:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t+e:-s/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t+e},easeOutCubic:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t+e:s/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t+e},easeOutQuart:function(t,e,n,r){var s=n-e;return-s*((t=t/r-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t+e:-s/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,r){var s=n-e;return s*(t/=r)*t*t*t*t+e},easeOutQuint:function(t,e,n,r){var s=n-e;return s*((t=t/r-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?s/2*t*t*t*t*t+e:s/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,r){var s=n-e;return-s*Math.cos(t/r*(Math.PI/2))+s+e},easeOutSine:function(t,e,n,r){var s=n-e;return s*Math.sin(t/r*(Math.PI/2))+e},easeInOutSine:function(t,e,n,r){var s=n-e;return-s/2*(Math.cos(Math.PI*t/r)-1)+e},easeInExpo:function(t,e,n,r){var s=n-e;return t==0?e:s*Math.pow(2,10*(t/r-1))+e},easeOutExpo:function(t,e,n,r){var s=n-e;return t==r?e+s:s*(-Math.pow(2,-10*t/r)+1)+e},easeInOutExpo:function(t,e,n,r){var s=n-e;return t===0?e:t===r?e+s:(t/=r/2)<1?s/2*Math.pow(2,10*(t-1))+e:s/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(t,e,n,r){var s=n-e;return-s*(Math.sqrt(1-(t/=r)*t)-1)+e},easeOutCirc:function(t,e,n,r){var s=n-e;return s*Math.sqrt(1-(t=t/r-1)*t)+e},easeInOutCirc:function(t,e,n,r){var s=n-e;return(t/=r/2)<1?-s/2*(Math.sqrt(1-t*t)-1)+e:s/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,n,r){var s=n-e,i,o,a;return a=1.70158,o=0,i=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),-(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e)},easeOutElastic:function(t,e,n,r){var s=n-e,i,o,a;return a=1.70158,o=0,i=s,t===0?e:(t/=r)===1?e+s:(o||(o=r*.3),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),i*Math.pow(2,-10*t)*Math.sin((t*r-a)*(2*Math.PI)/o)+s+e)},easeInOutElastic:function(t,e,n,r){var s=n-e,i,o,a;return a=1.70158,o=0,i=s,t===0?e:(t/=r/2)===2?e+s:(o||(o=r*(.3*1.5)),i<Math.abs(s)?(i=s,a=o/4):a=o/(2*Math.PI)*Math.asin(s/i),t<1?-.5*(i*Math.pow(2,10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o))+e:i*Math.pow(2,-10*(t-=1))*Math.sin((t*r-a)*(2*Math.PI)/o)*.5+s+e)},easeInBack:function(t,e,n,r,s){var i=n-e;return s===void 0&&(s=1.70158),i*(t/=r)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,n,r,s){var i=n-e;return s===void 0&&(s=1.70158),i*((t=t/r-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,n,r,s){var i=n-e;return s===void 0&&(s=1.70158),(t/=r/2)<1?i/2*(t*t*(((s*=1.525)+1)*t-s))+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},easeInBounce:function(t,e,n,r){var s=n-e,i;return i=Pu.easeOutBounce(r-t,0,s,r),s-i+e},easeOutBounce:function(t,e,n,r){var s=n-e;return(t/=r)<1/2.75?s*(7.5625*t*t)+e:t<2/2.75?s*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?s*(7.5625*(t-=2.25/2.75)*t+.9375)+e:s*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,e,n,r){var s=n-e,i;return t<r/2?(i=Pu.easeInBounce(t*2,0,s,r),i*.5+e):(i=Pu.easeOutBounce(t*2-r,0,s,r),i*.5+s*.5+e)}},_3=Pu;function x3(t){return t*Math.PI/180}function Ht(t,e){return t+Math.random()*(e-t)}function w3(t,e){return Math.floor(t+Math.random()*(e-t+1))}var ma;(function(t){t[t.Circle=0]="Circle",t[t.Square=1]="Square",t[t.Strip=2]="Strip"})(ma||(ma={}));var br;(function(t){t[t.Positive=1]="Positive",t[t.Negative=-1]="Negative"})(br||(br={}));const E3=1e3/60;class T3{constructor(e,n,r,s){this.getOptions=n;const{colors:i,initialVelocityX:o,initialVelocityY:a}=this.getOptions();this.context=e,this.x=r,this.y=s,this.w=Ht(5,20),this.h=Ht(5,20),this.radius=Ht(5,10),this.vx=typeof o=="number"?Ht(-o,o):Ht(o.min,o.max),this.vy=typeof a=="number"?Ht(-a,0):Ht(a.min,a.max),this.shape=w3(0,2),this.angle=x3(Ht(0,360)),this.angularSpin=Ht(-.2,.2),this.color=i[Math.floor(Math.random()*i.length)],this.rotateY=Ht(0,1),this.rotationDirection=Ht(0,1)?br.Positive:br.Negative}update(e){const{gravity:n,wind:r,friction:s,opacity:i,drawShape:o}=this.getOptions(),a=e/E3;this.x+=this.vx*a,this.y+=this.vy*a,this.vy+=n*a,this.vx+=r*a,this.vx*=s**a,this.vy*=s**a,this.rotateY>=1&&this.rotationDirection===br.Positive?this.rotationDirection=br.Negative:this.rotateY<=-1&&this.rotationDirection===br.Negative&&(this.rotationDirection=br.Positive);const u=.1*this.rotationDirection*a;if(this.rotateY+=u,this.angle+=this.angularSpin,this.context.save(),this.context.translate(this.x,this.y),this.context.rotate(this.angle),this.context.scale(1,this.rotateY),this.context.rotate(this.angle),this.context.beginPath(),this.context.fillStyle=this.color,this.context.strokeStyle=this.color,this.context.globalAlpha=i,this.context.lineCap="round",this.context.lineWidth=2,o&&typeof o=="function")o.call(this,this.context);else switch(this.shape){case ma.Circle:{this.context.beginPath(),this.context.arc(0,0,this.radius,0,2*Math.PI),this.context.fill();break}case ma.Square:{this.context.fillRect(-this.w/2,-this.h/2,this.w,this.h);break}case ma.Strip:{this.context.fillRect(-this.w/6,-this.h/2,this.w/3,this.h);break}}this.context.closePath(),this.context.restore()}}class S3{constructor(e,n){this.x=0,this.y=0,this.w=0,this.h=0,this.lastNumberOfPieces=0,this.tweenProgress=0,this.tweenFrom=0,this.particles=[],this.particlesGenerated=0,this.removeParticleAt=s=>{this.particles.splice(s,1)},this.getParticle=()=>{const s=Ht(this.x,this.w+this.x),i=Ht(this.y,this.h+this.y);return new T3(this.context,this.getOptions,s,i)},this.animate=s=>{const{canvas:i,context:o,particlesGenerated:a,lastNumberOfPieces:u}=this,{run:c,recycle:h,numberOfPieces:f,debug:m,tweenFunction:y,tweenDuration:E}=this.getOptions();if(!c)return!1;const T=this.particles.length,C=h?T:a;if(C<f){u!==f&&(this.tweenProgress=0,this.tweenFrom=C,this.lastNumberOfPieces=f),this.tweenProgress=Math.min(E,Math.max(0,this.tweenProgress+s));const w=y(this.tweenProgress,this.tweenFrom,f,E),v=Math.round(w-C);for(let x=0;x<v;x++)this.particles.push(this.getParticle());this.particlesGenerated+=v}m&&(o.font="12px sans-serif",o.fillStyle="#333",o.textAlign="right",o.fillText(`Particles: ${T}`,i.width-10,i.height-20));for(let w=this.particles.length-1;w>=0;w--){const v=this.particles[w];v.update(s),(v.y>i.height||v.y<-100||v.x>i.width+100||v.x<-100)&&(h&&C<=f?this.particles[w]=this.getParticle():this.removeParticleAt(w))}return T>0||C<f},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.getOptions=n}}const jg={width:typeof window<"u"?window.innerWidth:300,height:typeof window<"u"?window.innerHeight:200,numberOfPieces:200,friction:.99,wind:0,gravity:.1,initialVelocityX:4,initialVelocityY:10,colors:["#f44336","#e91e63","#9c27b0","#673ab7","#3f51b5","#2196f3","#03a9f4","#00bcd4","#009688","#4CAF50","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722","#795548"],opacity:1,debug:!1,tweenFunction:_3.easeInOutQuad,tweenDuration:5e3,recycle:!0,run:!0};class I3{constructor(e,n){this.lastFrameTime=0,this.setOptionsWithDefaults=s=>{const i={confettiSource:{x:0,y:0,w:this.canvas.width,h:0}};this._options={...i,...jg,...s},Object.assign(this,s.confettiSource)},this.update=(s=0)=>{const{options:{run:i,onConfettiComplete:o,frameRate:a},canvas:u,context:c}=this,h=Math.min(s-this.lastFrameTime,50);if(a&&h<1e3/a){this.rafId=requestAnimationFrame(this.update);return}this.lastFrameTime=s-(a?h%a:0),i&&(c.fillStyle="white",c.clearRect(0,0,u.width,u.height)),this.generator.animate(h)?this.rafId=requestAnimationFrame(this.update):(o&&typeof o=="function"&&this.generator.particlesGenerated>0&&o.call(this,this),this._options.run=!1)},this.reset=()=>{this.generator&&this.generator.particlesGenerated>0&&(this.generator.particlesGenerated=0,this.generator.particles=[],this.generator.lastNumberOfPieces=0)},this.stop=()=>{this.options={run:!1},this.rafId&&(cancelAnimationFrame(this.rafId),this.rafId=void 0)},this.canvas=e;const r=this.canvas.getContext("2d");if(!r)throw new Error("Could not get canvas context");this.context=r,this.generator=new S3(this.canvas,()=>this.options),this.options=n,this.update()}get options(){return this._options}set options(e){var s,i;const n=(s=this._options)==null?void 0:s.run,r=(i=this._options)==null?void 0:i.recycle;this.setOptionsWithDefaults(e),this.generator&&(Object.assign(this.generator,this.options.confettiSource),typeof e.recycle=="boolean"&&e.recycle&&r===!1&&(this.generator.lastNumberOfPieces=this.generator.particles.length)),typeof e.run=="boolean"&&e.run&&n===!1&&this.update()}}const P3=Jr.createRef();class Dg extends Jr.Component{constructor(e){super(e),this.canvas=Jr.createRef(),this.canvas=e.canvasRef||P3}componentDidMount(){if(this.canvas.current){const e=Dh(this.props)[0];this.confetti=new I3(this.canvas.current,e)}}componentDidUpdate(){const e=Dh(this.props)[0];this.confetti&&(this.confetti.options=e)}componentWillUnmount(){this.confetti&&this.confetti.stop(),this.confetti=void 0}render(){const[e,n]=Dh(this.props),r={zIndex:2,position:"absolute",pointerEvents:"none",top:0,left:0,bottom:0,right:0,...n.style};return d.jsx("canvas",{width:e.width,height:e.height,ref:this.canvas,...n,style:r})}}Dg.defaultProps={...jg};Dg.displayName="ReactConfetti";function Dh(t){const e={},n={},r={},s=[...Object.keys(jg),"confettiSource","drawShape","onConfettiComplete","frameRate"],i=["canvasRef"];for(const o in t){const a=t[o];s.includes(o)?e[o]=a:i.includes(o)?i[o]=a:r[o]=a}return[e,r,n]}const C3=Jr.forwardRef((t,e)=>d.jsx(Dg,{canvasRef:e,...t}));function b3(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.addEventListener&&t.addEventListener.apply(t,e)}function k3(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t&&t.removeEventListener&&t.removeEventListener.apply(t,e)}var Vh=typeof window<"u",A3=function(t){R.useEffect(t,[])},R3=function(t){var e=R.useRef(t);e.current=t,A3(function(){return function(){return e.current()}})},N3=function(t){var e=R.useRef(0),n=R.useState(t),r=n[0],s=n[1],i=R.useCallback(function(o){cancelAnimationFrame(e.current),e.current=requestAnimationFrame(function(){s(o)})},[]);return R3(function(){cancelAnimationFrame(e.current)}),[r,i]},j3=function(t){var e={},n=e.initialWidth,r=n===void 0?1/0:n,s=e.initialHeight,i=s===void 0?1/0:s,o=e.onChange,a=N3({width:Vh?window.innerWidth:r,height:Vh?window.innerHeight:i}),u=a[0],c=a[1];return R.useEffect(function(){if(Vh){var h=function(){var f=window.innerWidth,m=window.innerHeight;c({width:f,height:m}),o&&o(f,m)};return b3(window,"resize",h),function(){k3(window,"resize",h)}}},[]),u};function D3(){const{width:t,height:e}=j3();return d.jsxs("div",{className:"min-h-[80vh] flex items-center justify-center bg-love-light/30 px-4",children:[d.jsx(C3,{width:t,height:e,recycle:!1,numberOfPieces:200,colors:["#e11d48","#fb7185","#ffe4e6","#ffffff"]}),d.jsxs(pe.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{type:"spring",duration:.8},className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-xl border border-love-pink/20 text-center relative overflow-hidden",children:[d.jsx("div",{className:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-love-red to-love-pink"}),d.jsx(pe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(PM,{className:"h-10 w-10 text-green-600"})}),d.jsx("h1",{className:"text-3xl font-cursive text-love-dark mb-4",children:"Order Placed!"}),d.jsx("p",{className:"text-gray-600 mb-8",children:"Thank you for your order. We're preparing your romantic gifts with love! You'll receive a confirmation email shortly."}),d.jsxs("div",{className:"space-y-4",children:[d.jsx(ue,{to:"/products",className:"block w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Continue Shopping"}),d.jsx(ue,{to:"/",className:"block w-full bg-white text-love-dark border border-gray-200 py-3 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Back to Home"})]}),d.jsxs("div",{className:"mt-8 flex justify-center space-x-2 text-love-pink/60",children:[d.jsx(Tn,{className:"h-4 w-4 fill-current animate-pulse"}),d.jsx(Tn,{className:"h-4 w-4 fill-current animate-pulse delay-75"}),d.jsx(Tn,{className:"h-4 w-4 fill-current animate-pulse delay-150"})]})]})]})}function V3(){const[t,e]=R.useState(""),[n,r]=R.useState(""),[s,i]=R.useState(""),[o,a]=R.useState(""),[u,c]=R.useState(!1),{login:h,loginWithGoogle:f,resetPassword:m,getSignInMethods:y}=zn(),E=hs();async function T(v){v.preventDefault();const x=t.trim();try{i(""),a(""),c(!0),await h(x,n),E("/")}catch(b){console.error("Login error:",b);let D="Failed to log in";b.code==="auth/wrong-password"&&(D="Incorrect password"),b.code==="auth/user-not-found"&&(D="No account found with this email"),b.code==="auth/invalid-email"&&(D="Invalid email address"),b.code==="auth/invalid-credential"&&(D="Invalid credentials"),i(D)}c(!1)}async function C(){try{i(""),c(!0),await f(),E("/")}catch(v){console.error("Google login error:",v);let x="Failed to log in with Google";v.code==="auth/popup-closed-by-user"&&(x="Google sign-in was closed before completing."),v.code==="auth/popup-blocked-by-browser"&&(x="Your browser blocked the Google sign-in popup."),v.code==="auth/cancelled-popup-request"&&(x="Google sign-in was cancelled by another request."),v.code==="auth/unauthorized-domain"&&(x="Google sign-in is not enabled for this website domain."),x==="Failed to log in with Google"&&v.code&&(x+=` (${v.code})`),i(x)}c(!1)}async function w(){const v=t.trim();if(!v){i("Please enter your email to reset your password");return}try{i(""),a(""),c(!0);const x=await y(v);if(!x||x.length===0){i("No account found with this email"),c(!1);return}if(!x.includes("password")){i("This account uses Google sign-in. Please sign in with Google."),c(!1);return}await m(v),a("Password reset email sent. Please check your inbox and spam folder.")}catch(x){console.error("Reset password error:",x);let b="Failed to send password reset email";x.code==="auth/user-not-found"&&(b="No account found with this email"),x.code==="auth/invalid-email"&&(b="Invalid email address"),i(b)}c(!1)}return d.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-love-light/30 px-4",children:d.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx(Tn,{className:"h-10 w-10 text-love-red mx-auto mb-2 fill-current"}),d.jsx("h2",{className:"text-3xl font-cursive text-love-dark font-bold",children:"Welcome Back"}),d.jsx("p",{className:"text-gray-600",children:"Sign in to continue your love story"})]}),s&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:s}),o&&d.jsx("div",{className:"bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-4",role:"status",children:o}),d.jsxs("form",{onSubmit:T,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:t,onChange:v=>e(v.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),d.jsx("input",{type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:n,onChange:v=>r(v.target.value)})]}),d.jsx("div",{className:"flex justify-end",children:d.jsx("button",{type:"button",onClick:w,disabled:u,className:"text-sm text-love-red hover:underline",children:"Forgot password?"})}),d.jsx("button",{type:"submit",disabled:u,className:"w-full bg-love-red text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-red transition-colors font-medium",children:"Log In"})]}),d.jsx("div",{className:"mt-6",children:d.jsxs("button",{onClick:C,disabled:u,className:"w-full flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-red",children:[d.jsxs("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[d.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),d.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),d.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),d.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]})}),d.jsxs("div",{className:"mt-6 text-center text-sm",children:[d.jsx("span",{className:"text-gray-600",children:"Don't have an account? "}),d.jsx(ue,{to:"/signup",className:"text-love-red hover:underline font-medium",children:"Sign up"})]})]})})}function M3(){const[t,e]=R.useState(""),[n,r]=R.useState(""),[s,i]=R.useState(""),[o,a]=R.useState(""),[u,c]=R.useState(""),[h,f]=R.useState(!1),{signup:m,loginWithGoogle:y}=zn(),E=hs();async function T(w){w.preventDefault();const v=n.trim();if(s!==o)return c("Passwords do not match");try{c(""),f(!0),await m(v,s,{displayName:t}),E("/profile")}catch(x){console.error("Signup error:",x);let b="Failed to create an account";x.code==="auth/email-already-in-use"&&(b="Email is already in use"),x.code==="auth/weak-password"&&(b="Password should be at least 6 characters"),x.code==="auth/invalid-email"&&(b="Invalid email address"),x.code==="auth/operation-not-allowed"&&(b="Email/Password accounts are not enabled in Firebase Console."),b==="Failed to create an account"&&(b+=`: ${x.message} (${x.code})`),c(b)}f(!1)}async function C(){try{c(""),f(!0),await y(),E("/profile")}catch(w){console.error("Google login error:",w);let v="Failed to sign up with Google";w.code==="auth/popup-closed-by-user"&&(v="Google sign-up was closed before completing."),w.code==="auth/popup-blocked-by-browser"&&(v="Your browser blocked the Google sign-up popup."),w.code==="auth/cancelled-popup-request"&&(v="Google sign-up was cancelled by another request."),w.code==="auth/unauthorized-domain"&&(v="Google sign-up is not enabled for this website domain."),v==="Failed to sign up with Google"&&w.code&&(v+=` (${w.code})`),c(v)}f(!1)}return d.jsx("div",{className:"min-h-[80vh] flex items-center justify-center bg-love-light/30 px-4",children:d.jsxs("div",{className:"max-w-md w-full bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx(Tn,{className:"h-10 w-10 text-love-red mx-auto mb-2 fill-current"}),d.jsx("h2",{className:"text-3xl font-cursive text-love-dark font-bold",children:"Create Account"}),d.jsx("p",{className:"text-gray-600",children:"Join our community of love"})]}),u&&d.jsx("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4",role:"alert",children:u}),d.jsxs("form",{onSubmit:T,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Full Name"}),d.jsx("input",{type:"text",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:t,onChange:w=>e(w.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),d.jsx("input",{type:"email",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:n,onChange:w=>r(w.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),d.jsx("input",{type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:s,onChange:w=>i(w.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),d.jsx("input",{type:"password",required:!0,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-love-red focus:ring-love-red p-2 border",value:o,onChange:w=>a(w.target.value)})]}),d.jsx("button",{type:"submit",disabled:h,className:"w-full bg-love-red text-white py-2 px-4 rounded-md hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-red transition-colors font-medium",children:"Sign Up"})]}),d.jsx("div",{className:"mt-6",children:d.jsxs("button",{onClick:C,disabled:h,className:"w-full flex justify-center items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-love-red",children:[d.jsxs("svg",{className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",children:[d.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),d.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),d.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),d.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),"Continue with Google"]})}),d.jsxs("div",{className:"mt-6 text-center text-sm",children:[d.jsx("span",{className:"text-gray-600",children:"Already have an account? "}),d.jsx(ue,{to:"/login",className:"text-love-red hover:underline font-medium",children:"Log in"})]})]})})}function O3(){const[t,e]=R.useState([{id:1,name:"Personalized Heart Necklace",price:45,category:"Jewelry"},{id:2,name:"Handmade Rose Bear",price:35.5,category:"Handmade"}]);return d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("h1",{className:"text-4xl font-cursive text-love-dark",children:"Admin Dashboard"}),d.jsxs("button",{className:"flex items-center space-x-2 bg-love-red text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors",children:[d.jsx(OM,{className:"h-5 w-5"}),d.jsx("span",{children:"Add Product"})]})]}),d.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-love-pink/20 overflow-hidden",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-love-light",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product Name"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),d.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(n=>d.jsxs("tr",{children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:n.name}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:n.category}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["$",n.price.toFixed(2)]}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[d.jsx("button",{className:"text-indigo-600 hover:text-indigo-900 mr-4",children:d.jsx(VM,{className:"h-4 w-4"})}),d.jsx("button",{className:"text-red-600 hover:text-red-900",children:d.jsx(lS,{className:"h-4 w-4"})})]})]},n.id))})]})})]})}function L3(){const{currentUser:t}=zn(),[e,n]=R.useState(!0),[r,s]=R.useState(""),[i,o]=R.useState(!1),[a,u]=R.useState({name:"",address:"",postalCode:"",country:"",gender:"",billingName:"",billingAddress:"",billingPostalCode:"",billingCountry:""}),[c,h]=R.useState(null),[f,m]=R.useState(""),[y,E]=R.useState([]),[T,C]=R.useState(!1),w=R.useRef(null);R.useEffect(()=>{async function D(){if(t){o(!1),s(""),n(!0);try{const M=Ks(Qs,"users",t.uid),I=await ad(M),_=I.exists()?I.data():{};u({name:_.name||t.displayName||"",address:_.address||"",postalCode:_.postalCode||"",country:_.country||"",gender:_.gender||"",billingName:_.billingName||_.name||t.displayName||"",billingAddress:_.billingAddress||_.address||"",billingPostalCode:_.billingPostalCode||_.postalCode||"",billingCountry:_.billingCountry||_.country||""}),m(_.photoURL||t.photoURL||""),E(Array.isArray(_.favorites)?_.favorites:[])}catch{s("Failed to load profile")}finally{C(!1),n(!1)}}}D()},[t]);function v(D){const{name:M,value:I}=D.target;u(_=>({..._,[M]:I}))}function x(D){return new Promise((M,I)=>{const _=new FileReader;_.onload=()=>M(_.result),_.onerror=I,_.readAsDataURL(D)})}async function b(D){D.preventDefault(),s(""),o(!1);try{let M=f;if(c){if(!c.type.startsWith("image/")){s("Please upload a valid image file");return}if(c.size>256*1024){s("Image too large (max 256KB)");return}M=await x(c)}const I=Ks(Qs,"users",t.uid);await X1(I,{name:a.name,address:a.address,postalCode:a.postalCode,country:a.country,gender:a.gender,billingName:a.billingName,billingAddress:a.billingAddress,billingPostalCode:a.billingPostalCode,billingCountry:a.billingCountry,photoURL:M||null},{merge:!0});const _={};if(a.name&&a.name!==t.displayName&&(_.displayName=a.name),Object.keys(_).length)try{await xT(t,_)}catch{}m(M),o(!0),C(!1)}catch{s("Failed to save profile")}}return t?d.jsxs("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:d.jsx("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20",children:e?d.jsx("div",{className:"text-gray-600",children:"Loading..."}):d.jsxs("form",{onSubmit:b,className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("h2",{className:"text-2xl font-cursive text-love-dark",children:"Personal Details"}),d.jsx("button",{type:"button",onClick:()=>C(D=>!D),className:"px-4 py-2 text-sm font-medium rounded-lg border border-love-red text-love-red hover:bg-love-red hover:text-white transition-colors",children:T?"Cancel":"Update Personal Details"})]}),r&&d.jsx("div",{className:"bg-red-100 text-red-700 p-3 rounded",children:r}),i&&d.jsx("div",{className:"bg-green-100 text-green-700 p-3 rounded",children:"Saved"}),d.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"w-20 h-20 rounded-full overflow-hidden bg-love-light border border-love-pink/30",children:f?d.jsx("img",{src:f,alt:"Avatar",className:"w-full h-full object-cover"}):d.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:"No Image"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-2xl font-semibold text-love-dark",children:a.name||t.displayName||"No name set"}),d.jsx("div",{className:"text-sm text-gray-500",children:t.email})]})]}),T&&d.jsxs("div",{className:"flex flex-col items-end",children:[d.jsx("input",{ref:w,type:"file",accept:"image/*",onChange:D=>{var M;return h(((M=D.target.files)==null?void 0:M[0])||null)},className:"hidden"}),d.jsx("button",{type:"button",onClick:()=>w.current&&w.current.click(),className:"px-4 py-2 text-sm font-medium rounded-lg bg-love-light text-love-dark hover:bg-love-pink/40 transition-colors",children:"Change Photo"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Full Name"}),d.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.name,onChange:v,disabled:!T})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Address"}),d.jsx("input",{type:"text",name:"address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.address,onChange:v,disabled:!T})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Postal Code"}),d.jsx("input",{type:"text",name:"postalCode",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.postalCode,onChange:v,disabled:!T})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Country"}),d.jsx("input",{type:"text",name:"country",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.country,onChange:v,disabled:!T})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Gender"}),d.jsxs("select",{name:"gender",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.gender,onChange:v,disabled:!T,children:[d.jsx("option",{value:"",children:"Select"}),d.jsx("option",{value:"male",children:"Male"}),d.jsx("option",{value:"female",children:"Female"}),d.jsx("option",{value:"other",children:"Other"})]})]})]}),d.jsxs("div",{className:"pt-6 border-t border-gray-100",children:[d.jsx("div",{className:"flex items-center justify-between mb-4",children:d.jsx("h2",{className:"text-2xl font-cursive text-love-dark",children:"Billing Details"})}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Billing Name"}),d.jsx("input",{type:"text",name:"billingName",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.billingName,onChange:v,disabled:!T})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Billing Address"}),d.jsx("input",{type:"text",name:"billingAddress",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.billingAddress,onChange:v,disabled:!T})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Billing Postal Code"}),d.jsx("input",{type:"text",name:"billingPostalCode",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.billingPostalCode,onChange:v,disabled:!T})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Billing Country"}),d.jsx("input",{type:"text",name:"billingCountry",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none disabled:bg-gray-100 disabled:cursor-not-allowed",value:a.billingCountry,onChange:v,disabled:!T})]})]})]})]}),T&&d.jsx("button",{type:"submit",className:"w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg",children:"Save"})]})})}),d.jsx(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:d.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20 mt-8",children:[d.jsx("h2",{className:"text-2xl font-semibold text-love-dark mb-4",children:"Your Favorites"}),y.length===0?d.jsx("div",{className:"text-gray-600",children:"No favorites yet. Tap the heart on items to save them here."}):d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:Ci.filter(D=>y.includes(D.id)).map(D=>d.jsxs("div",{className:"border border-love-pink/20 rounded-xl overflow-hidden bg-white shadow-sm",children:[d.jsx("img",{src:D.image,alt:D.name,className:"w-full h-40 object-cover"}),d.jsxs("div",{className:"p-4",children:[d.jsx("div",{className:"text-xs text-love-red font-medium mb-1 uppercase tracking-wider",children:D.category}),d.jsx("div",{className:"font-semibold text-gray-800",children:D.name}),d.jsxs("div",{className:"text-love-dark font-bold mt-2",children:["$",D.price.toFixed(2)]})]})]},D.id))})]})})]}):null}function F3(){const[t,e]=R.useState({name:"",email:"",message:""}),[n,r]=R.useState(!1),[s,i]=R.useState(!1);function o(u){const{name:c,value:h}=u.target;e(f=>({...f,[c]:h}))}async function a(u){u.preventDefault(),i(!0),r(!1),await new Promise(c=>setTimeout(c,600)),i(!1),r(!0)}return d.jsx("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:d.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[d.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-3",children:"Contact Us"}),d.jsx("p",{className:"text-gray-600 mb-8",children:"Wed love to hear from you. Choose the way that suits you best."}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[d.jsxs("div",{className:"lg:col-span-2 bg-white p-8 rounded-2xl shadow-lg border border-love-pink/20",children:[n&&d.jsx("div",{className:"mb-4 bg-green-100 text-green-700 px-4 py-2 rounded",children:"Message sent. Thank you!"}),d.jsxs("form",{onSubmit:a,className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),d.jsx("input",{type:"text",name:"name",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:t.name,onChange:o})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",name:"email",required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:t.email,onChange:o})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Message"}),d.jsx("textarea",{name:"message",required:!0,rows:5,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-love-red focus:border-transparent outline-none",value:t.message,onChange:o})]}),d.jsx("button",{type:"submit",disabled:s,className:"w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg",children:s?"Sending...":"Send Message"})]})]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-love-pink/20",children:[d.jsx("h2",{className:"text-lg font-semibold text-love-dark mb-3",children:"Instant contact"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Reach us quickly using your favourite app."}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("a",{href:"https://wa.me/15551234567",target:"_blank",rel:"noreferrer",className:"flex items-center justify-between px-4 py-3 rounded-xl border border-green-500 text-green-600 hover:bg-green-50 transition-colors",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"p-2 rounded-full bg-green-500 text-white",children:d.jsx(jM,{className:"h-4 w-4"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-semibold",children:"WhatsApp"}),d.jsx("div",{className:"text-xs text-gray-500",children:"Tap to open chat"})]})]})}),d.jsx("a",{href:"https://instagram.com/lovecraft_gifts",target:"_blank",rel:"noreferrer",className:"flex items-center justify-between px-4 py-3 rounded-xl border border-pink-500 text-pink-600 hover:bg-pink-50 transition-colors",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"p-2 rounded-full bg-pink-500 text-white",children:d.jsx(aS,{className:"h-4 w-4"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-semibold",children:"Instagram DM"}),d.jsx("div",{className:"text-xs text-gray-500",children:"@lovecraft_gifts"})]})]})}),d.jsx("button",{className:"w-full flex items-center justify-between px-4 py-3 rounded-xl border border-blue-500 text-blue-600 hover:bg-blue-50 transition-colors",children:d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"p-2 rounded-full bg-blue-500 text-white",children:d.jsx(DM,{className:"h-4 w-4"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-semibold",children:"Live chat (coming soon)"}),d.jsx("div",{className:"text-xs text-gray-500",children:"Chat with our support team"})]})]})})]})]}),d.jsxs("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-love-pink/20",children:[d.jsx("h2",{className:"text-lg font-semibold text-love-dark mb-3",children:"More ways to reach us"}),d.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[d.jsxs("a",{href:"mailto:support@lovecraft.com",className:"flex items-center space-x-3 hover:text-love-red transition-colors",children:[d.jsx(RM,{className:"h-4 w-4 text-love-red"}),d.jsx("span",{children:"support@lovecraft.com"})]}),d.jsxs("a",{href:"tel:+15551234567",className:"flex items-center space-x-3 hover:text-love-red transition-colors",children:[d.jsx(MM,{className:"h-4 w-4 text-love-red"}),d.jsx("span",{children:"+1 (555) 123-4567"})]})]})]})]})]})]})})}const mx=[{id:1,question:"How long will my Valentine's gift take to arrive?",answer:"Most Valentine's orders are prepared within 2448 hours and arrive in 35 business days with standard shipping. Express options are available at checkout for lastminute surprises."},{id:2,question:"Can I personalize my gift with names or a custom message?",answer:"Yes. Many of our gifts support custom engraving, names and personal messages. Look for the Personalize it options on the product page and add your details before checkout."},{id:3,question:"What if my partner is in another city or country?",answer:"We ship to most regions worldwide. Simply enter their address at checkout, and we'll show available delivery times and costs for their location."},{id:4,question:"Do you include the price inside the gift box?",answer:"Never. Our packages are romanceready with no price tags inside the box, so your partner only sees the love, not the receipt."},{id:5,question:"Can I track my order in real time?",answer:"Once your order ships, you receive an email with a live tracking link so you can follow your gift's journey from our studio to their doorstep."}];function U3(){var r;const[t,e]=R.useState(((r=mx[0])==null?void 0:r.id)??null);function n(s){e(i=>i===s?null:s)}return d.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:d.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"space-y-10",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-love-light text-love-red mb-4",children:d.jsx(AM,{className:"h-7 w-7"})}),d.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-2",children:"Frequently Asked Questions"}),d.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"Answers to the most common questions about gifting, delivery and making this Valentine's unforgettable."})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[minmax(0,2fr)_minmax(0,1.2fr)] gap-8 items-start",children:[d.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-love-pink/20 divide-y divide-gray-100",children:mx.map(s=>{const i=s.id===t;return d.jsxs("button",{type:"button",onClick:()=>n(s.id),className:`w-full text-left px-5 sm:px-6 py-4 sm:py-5 focus:outline-none transition-colors ${i?"bg-love-light/40":"bg-white hover:bg-love-light/20"}`,children:[d.jsxs("div",{className:"flex items-start justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-sm uppercase tracking-wider text-love-red mb-1 hidden sm:block",children:s.id<10?`0${s.id}`:s.id}),d.jsx("h2",{className:"font-semibold text-gray-900 text-sm sm:text-base",children:s.question})]}),d.jsx(pe.div,{initial:!1,animate:{rotate:i?180:0},transition:{duration:.2},className:"flex-shrink-0 mt-1 text-love-red",children:d.jsx(CM,{className:"h-5 w-5"})})]}),d.jsx(NI,{initial:!1,children:i&&d.jsx(pe.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.2},children:d.jsx("p",{className:"mt-3 text-sm text-gray-600 leading-relaxed",children:s.answer})})})]},s.id)})}),d.jsx("div",{className:"space-y-4",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-md border border-love-pink/20 p-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-love-dark mb-3",children:"Still can't find your answer?"}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Our team is happy to help you choose the right gift, track an order, or create something uniquely romantic."}),d.jsxs("div",{className:"space-y-3 text-sm",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(oS,{className:"h-4 w-4 text-love-red"}),d.jsx("span",{children:"Ask us for personalized gift recommendations for your partner."})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(uS,{className:"h-4 w-4 text-love-red"}),d.jsx("span",{children:"Get live help if you're unsure your gift will arrive in time."})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(ug,{className:"h-4 w-4 text-love-red"}),d.jsx("span",{children:"Learn about returns, exchanges and our happiness guarantee."})]})]}),d.jsx("a",{href:"mailto:support@lovecraft.com?subject=FAQ%20question",className:"inline-flex items-center justify-center mt-5 w-full px-4 py-3 rounded-xl bg-love-red text-white text-sm font-medium shadow-lg hover:bg-red-700 transition-colors",children:"Send us your question"})]})})]})]})})}function B3(){const[t,e]=R.useState(null),[n,r]=R.useState(null),[s,i]=R.useState("dance"),[o,a]=R.useState(!1),[u,c]=R.useState(!1),[h,f]=R.useState(!1),m=R.useRef(null),y=R.useRef(null),E=R.useRef(null);function T(x,b){const D=x.target.files&&x.target.files[0];if(!D)return;const M=new FileReader;M.onload=I=>{const _=I.target&&I.target.result;b(typeof _=="string"?_:null)},M.readAsDataURL(D)}async function C(){if(!t||!n){alert("Please upload both faces first");return}c(!0),a(!1),setTimeout(()=>{c(!1),a(!0)},800)}async function w(){if(!t||!n){alert("Please upload both faces first");return}if(!o){alert("Please create the video first");return}if(typeof window>"u")return;const x=E.current;if(!x)return;const b=x.getContext("2d");if(!b)return;if(typeof MediaRecorder>"u"||typeof x.captureStream!="function"){alert("Video download is not supported in this browser");return}f(!0);const D=x.captureStream(30),M=[],I=new MediaRecorder(D,{mimeType:"video/webm"});I.ondataavailable=H=>{H.data&&H.data.size>0&&M.push(H.data)};const _=new Promise(H=>{I.onstop=()=>{const G=new Blob(M,{type:"video/webm"}),K=URL.createObjectURL(G),Y=document.createElement("a");Y.href=K,Y.download="love-video.webm",document.body.appendChild(Y),Y.click(),Y.remove(),URL.revokeObjectURL(K),H()}}),P=new Image,k=new Image;P.src=t,k.src=n;function N(H){return new Promise((G,K)=>{if(H.complete&&H.naturalWidth){G();return}H.onload=()=>G(),H.onerror=()=>K(new Error("Failed to load image"))})}try{await Promise.all([N(P),N(k)])}catch{alert("Failed to load images for video"),f(!1),D.getTracks().forEach(H=>H.stop());return}const j=x.width,A=x.height,oe=30,ye=oe*4;let me=0;function z(){const H=me/oe,G=b.createLinearGradient(0,0,j,A);s==="dance"?(G.addColorStop(0,"#fee2e2"),G.addColorStop(1,"#f97373")):s==="hearts"?(G.addColorStop(0,"#ffe4e6"),G.addColorStop(1,"#fb7185")):(G.addColorStop(0,"#e0e7ff"),G.addColorStop(1,"#f9a8d4")),b.fillStyle=G,b.fillRect(0,0,j,A);const Y=A/2,de=j*.3,ge=j*.7,we=Math.min(j,A)*.16;let Fe=de,He=ge,dn=Y,Zt=Y,tt=1,ot=1,$n=0,yr=0;if(s==="dance"){const Me=Math.sin(H*Math.PI*2);dn=Y+Me*-20,Zt=Y+Me*20,$n=Me*-.25,yr=Me*.25}else if(s==="hearts"){const Me=Math.sin(H*Math.PI*2);dn=Y+Me*-25,Zt=Y+Me*25,Fe=de+Me*-j*.03,He=ge+Me*j*.03}else if(s==="zoom"){const Me=Math.sin(H*Math.PI*2),B=1+.08*Me;tt=B,ot=B,dn=Y+Me*-10,Zt=Y+Math.sin(H*Math.PI*2+Math.PI)*10}function vr(Me,B,Ie,nt,We){const se=we*nt;b.save(),b.translate(B,Ie),b.rotate(We),b.beginPath(),b.arc(0,0,se,0,Math.PI*2),b.closePath(),b.clip(),b.drawImage(Me,-se,-se,se*2,se*2),b.restore(),b.save(),b.translate(B,Ie),b.beginPath(),b.arc(0,0,se+8,0,Math.PI*2),b.strokeStyle="rgba(255,255,255,0.9)",b.lineWidth=6,b.stroke(),b.restore()}vr(P,Fe,dn,tt,$n),vr(k,He,Zt,ot,yr),b.font="bold 32px system-ui",b.fillStyle="rgba(255,255,255,0.95)",b.textAlign="center",s==="dance"?b.fillText("Dance of Love",j/2,A-40):s==="hearts"?b.fillText("Love Vibes",j/2,A-40):b.fillText("Zoom in Love",j/2,A-40),me+=1,me<ye?requestAnimationFrame(z):(I.stop(),D.getTracks().forEach(Me=>Me.stop()))}I.start(),z(),await _,f(!1)}const v=s==="dance"?"from-pink-100 to-red-200":s==="hearts"?"from-rose-100 to-pink-200":"from-indigo-100 to-pink-100";return d.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},children:[d.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-6",children:"Create a Funny Love Video"}),d.jsx("p",{className:"text-gray-600 mb-8",children:"Upload two faces and generate a short, looping fun scene."}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[d.jsx("div",{className:"bg-white p-6 rounded-2xl shadow-lg border border-love-pink/20",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add your faces (optional)"})}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsx("button",{type:"button",onClick:()=>m.current&&m.current.click(),className:"w-full px-3 py-2 rounded-lg border border-gray-300 text-xs font-medium text-gray-700 hover:border-love-red hover:text-love-red transition-colors",children:"Upload you"}),d.jsx("input",{ref:m,type:"file",accept:"image/*",className:"hidden",onChange:x=>T(x,e)}),t&&d.jsx("div",{className:"flex justify-center",children:d.jsx("img",{src:t,alt:"You",className:"w-16 h-16 rounded-full object-cover border border-love-pink/50"})})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsx("button",{type:"button",onClick:()=>y.current&&y.current.click(),className:"w-full px-3 py-2 rounded-lg border border-gray-300 text-xs font-medium text-gray-700 hover:border-love-red hover:text-love-red transition-colors",children:"Upload partner"}),d.jsx("input",{ref:y,type:"file",accept:"image/*",className:"hidden",onChange:x=>T(x,r)}),n&&d.jsx("div",{className:"flex justify-center",children:d.jsx("img",{src:n,alt:"Partner",className:"w-16 h-16 rounded-full object-cover border border-love-pink/50"})})]})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"flex items-center justify-between mb-2",children:d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Funny video type"})}),d.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.jsx("button",{type:"button",onClick:()=>i("dance"),className:`px-3 py-2 rounded-full text-xs font-medium border transition-colors ${s==="dance"?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-200 hover:border-love-red/60"}`,children:"Dance"}),d.jsx("button",{type:"button",onClick:()=>i("hearts"),className:`px-3 py-2 rounded-full text-xs font-medium border transition-colors ${s==="hearts"?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-200 hover:border-love-red/60"}`,children:"Hearts"}),d.jsx("button",{type:"button",onClick:()=>i("zoom"),className:`px-3 py-2 rounded-full text-xs font-medium border transition-colors ${s==="zoom"?"bg-love-red text-white border-love-red":"bg-white text-gray-700 border-gray-200 hover:border-love-red/60"}`,children:"Zoom"})]})]}),d.jsx("button",{type:"button",onClick:C,className:"w-full bg-love-red text-white py-3 rounded-lg font-medium hover:bg-red-700 transition-colors shadow-lg disabled:opacity-60 disabled:cursor-not-allowed",disabled:u,children:u?"Creating...":"Create video"})]})}),d.jsx(pe.div,{initial:{opacity:0},animate:{opacity:1},className:"bg-white p-6 rounded-2xl shadow-lg border border-love-pink/20 flex items-center justify-center",children:d.jsxs("div",{className:"w-full max-w-md",children:[d.jsx("h2",{className:"text-3xl font-cursive text-love-dark mb-4 text-center",children:"Preview"}),d.jsxs("div",{className:`relative w-full aspect-video rounded-2xl overflow-hidden shadow-lg bg-gradient-to-br ${v}`,children:[!o&&d.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center text-gray-700 px-6",children:[d.jsx("div",{className:"text-5xl mb-3",children:""}),d.jsxs("p",{className:"text-sm",children:["Upload two faces and click ",d.jsx("span",{className:"font-semibold",children:"Create video"})," to see them in a fun scene."]})]}),o&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsxs("div",{className:"relative w-full h-full",children:[t&&d.jsx(pe.img,{src:t,alt:"You video",className:"absolute w-24 h-24 md:w-28 md:h-28 rounded-full object-cover border-4 border-white shadow-lg",initial:{x:-80,y:0,rotate:0},animate:s==="dance"?{y:[-10,10,-10],rotate:[-8,8,-8]}:s==="hearts"?{y:[0,-20,0],x:[-20,0,20]}:{scale:[1,1.1,1],y:[-6,6,-6]},transition:{duration:1.6,repeat:1/0,repeatType:"reverse"},style:{left:"18%",top:"50%",transform:"translate(-50%, -50%)"}}),n&&d.jsx(pe.img,{src:n,alt:"Partner video",className:"absolute w-24 h-24 md:w-28 md:h-28 rounded-full object-cover border-4 border-white shadow-lg",initial:{x:80,y:0,rotate:0},animate:s==="dance"?{y:[10,-10,10],rotate:[8,-8,8]}:s==="hearts"?{y:[-10,10,-10],x:[20,0,-20]}:{scale:[1.1,1,1.1],y:[6,-6,6]},transition:{duration:1.6,repeat:1/0,repeatType:"reverse"},style:{right:"18%",top:"50%",transform:"translate(50%, -50%)"}}),s==="dance"&&d.jsxs(pe.div,{className:"absolute inset-x-0 bottom-8 flex items-center justify-center text-3xl",animate:{scale:[1,1.2,1]},transition:{duration:1.4,repeat:1/0,repeatType:"reverse"},children:[d.jsx("span",{className:"mx-1",children:""}),d.jsx("span",{className:"mx-1",children:""}),d.jsx("span",{className:"mx-1",children:""})]}),s==="hearts"&&d.jsxs(d.Fragment,{children:[d.jsx(pe.div,{className:"absolute left-6 bottom-6 text-4xl",animate:{y:[0,-12,0]},transition:{duration:1.8,repeat:1/0,repeatType:"reverse"},children:""}),d.jsx(pe.div,{className:"absolute right-6 top-6 text-4xl",animate:{y:[-8,8,-8]},transition:{duration:1.8,repeat:1/0,repeatType:"reverse"},children:""})]}),s==="zoom"&&d.jsx(pe.div,{className:"absolute inset-0 flex items-center justify-center text-4xl text-white/90",animate:{opacity:[.7,1,.7]},transition:{duration:2,repeat:1/0,repeatType:"reverse"},children:""})]})})]}),o&&d.jsx("div",{className:"mt-4 flex justify-center",children:d.jsxs("button",{type:"button",onClick:w,disabled:h,className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg bg-love-red text-white font-medium shadow-md hover:bg-red-700 transition-colors disabled:opacity-60 disabled:cursor-not-allowed",children:[d.jsx(iS,{className:"h-5 w-5"}),d.jsx("span",{children:h?"Preparing video...":"Download video"})]})})]})})]})]}),d.jsx("canvas",{ref:E,width:640,height:360,className:"hidden"})]})}function z3(){return d.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:d.jsxs(pe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4},className:"space-y-10",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-14 h-14 rounded-full bg-love-light text-love-red mb-4",children:d.jsx(LM,{className:"h-7 w-7"})}),d.jsx("h1",{className:"text-4xl font-cursive text-love-dark mb-2",children:"Returns & Exchanges"}),d.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"If something isn't quite perfect with your LoveCraft order, we'll help you make it right with a simple, friendly returns process."})]}),d.jsxs("div",{className:"bg-white rounded-2xl shadow-lg border border-love-pink/20 p-6 sm:p-8 space-y-8",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold text-love-dark mb-2",children:"Return window"}),d.jsxs("p",{className:"text-sm text-gray-600",children:["You can request a return or exchange within ",d.jsx("span",{className:"font-semibold",children:"14 days"})," of delivery for most nonpersonalized items, as long as they are unused and in their original packaging."]})]}),d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 text-love-dark font-semibold",children:[d.jsx(ug,{className:"h-5 w-5 text-love-red"}),d.jsx("span",{children:"Eligible items"})]}),d.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 list-disc list-inside",children:[d.jsx("li",{children:"Standard gifts in new, unused condition"}),d.jsx("li",{children:"Items damaged in transit (with photo proof)"}),d.jsx("li",{children:"Wrong item received compared to your order"})]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"inline-flex items-center gap-2 text-love-dark font-semibold",children:[d.jsx(FM,{className:"h-5 w-5 text-love-red"}),d.jsx("span",{children:"Not usually returnable"})]}),d.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 list-disc list-inside",children:[d.jsx("li",{children:"Fully personalized items with names, dates or custom messages"}),d.jsx("li",{children:"Digital products or instant downloads"}),d.jsx("li",{children:"Items clearly used or damaged after delivery"})]})]})]}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-xl font-semibold text-love-dark mb-2",children:"How to request a return"}),d.jsxs("ol",{className:"text-sm text-gray-600 space-y-2 list-decimal list-inside",children:[d.jsx("li",{children:"Have your order number and the email used at checkout ready."}),d.jsxs("li",{children:["Contact our support team via the"," ",d.jsx("a",{href:"/contact",className:"text-love-red hover:underline",children:"contact page"})," ","or email ",d.jsx("span",{className:"font-mono text-gray-700",children:"support@lovecraft.com"}),"."]}),d.jsx("li",{children:"Share a short description and, if applicable, photos of the issue."}),d.jsx("li",{children:"We'll reply with simple instructions and the next steps for your case."})]})]}),d.jsx("div",{className:"border-t border-love-pink/20 pt-4 text-xs text-gray-500",children:d.jsx("p",{children:"Note: This is a demo store returns policy for Valentine's gifting scenarios. In a real store, always review the detailed legal policy at checkout."})})]})]})})}function $3(){const t=[...Array(15)].map((e,n)=>({id:n,left:`${Math.random()*100}%`,animationDuration:`${Math.random()*10+10}s`,delay:`${Math.random()*5}s`,scale:Math.random()*.5+.5}));return d.jsx("div",{className:"fixed inset-0 pointer-events-none z-0 overflow-hidden",children:t.map(e=>d.jsx(pe.div,{initial:{y:"110vh",opacity:0},animate:{y:"-10vh",opacity:[0,.8,0],x:[0,Math.random()*100-50,0]},transition:{duration:parseFloat(e.animationDuration),repeat:1/0,delay:parseFloat(e.delay),ease:"linear"},style:{left:e.left,position:"absolute"},children:d.jsx(Tn,{className:"text-love-pink/30 fill-current",style:{width:`${e.scale*40}px`,height:`${e.scale*40}px`}})},e.id))})}function gx({children:t}){const{currentUser:e}=zn();return e?t:d.jsx(Pk,{to:"/login"})}function H3(){return d.jsx(wM,{children:d.jsx(EM,{children:d.jsxs("div",{className:"min-h-screen bg-love-light/10 flex flex-col relative",children:[d.jsx($3,{}),d.jsx(o3,{}),d.jsx("main",{className:"flex-grow",children:d.jsxs(bk,{children:[d.jsx(kt,{path:"/",element:d.jsx(l3,{})}),d.jsx(kt,{path:"/products",element:d.jsx(p3,{})}),d.jsx(kt,{path:"/products/:id",element:d.jsx(m3,{})}),d.jsx(kt,{path:"/cart",element:d.jsx(g3,{})}),d.jsx(kt,{path:"/checkout",element:d.jsx(v3,{})}),d.jsx(kt,{path:"/order-success",element:d.jsx(D3,{})}),d.jsx(kt,{path:"/login",element:d.jsx(V3,{})}),d.jsx(kt,{path:"/signup",element:d.jsx(M3,{})}),d.jsx(kt,{path:"/contact",element:d.jsx(F3,{})}),d.jsx(kt,{path:"/faq",element:d.jsx(U3,{})}),d.jsx(kt,{path:"/wish",element:d.jsx(B3,{})}),d.jsx(kt,{path:"/returns",element:d.jsx(z3,{})}),d.jsx(kt,{path:"/admin",element:d.jsx(gx,{children:d.jsx(O3,{})})}),d.jsx(kt,{path:"/profile",element:d.jsx(gx,{children:d.jsx(L3,{})})})]})}),d.jsx(a3,{})]})})})}Mh.createRoot(document.getElementById("root")).render(d.jsx(Jr.StrictMode,{children:d.jsx(Vk,{children:d.jsx(H3,{})})}));
